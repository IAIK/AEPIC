(window.webpackJsonp = window.webpackJsonp || []).push([[2], {
  "+9CB": function (e, t, n) { "use strict"; var i = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350], r = function (e) { return e[0] << 21 | e[1] << 14 | e[2] << 7 | e[3] }; e.exports = { isLikelyAacData: function (e) { return e[0] === "I".charCodeAt(0) && e[1] === "D".charCodeAt(0) && e[2] === "3".charCodeAt(0) }, parseId3TagSize: function (e, t) { var n = e[t + 6] << 21 | e[t + 7] << 14 | e[t + 8] << 7 | e[t + 9]; return (16 & e[t + 5]) >> 4 ? n + 20 : n + 10 }, parseAdtsSize: function (e, t) { var n = (224 & e[t + 5]) >> 5, i = e[t + 4] << 3; return 6144 & e[t + 3] | i | n }, parseType: function (e, t) { return e[t] === "I".charCodeAt(0) && e[t + 1] === "D".charCodeAt(0) && e[t + 2] === "3".charCodeAt(0) ? "timed-metadata" : !0 & e[t] && 240 == (240 & e[t + 1]) ? "audio" : null }, parseSampleRate: function (e) { for (var t = 0; t + 5 < e.length;) { if (255 === e[t] && 240 == (246 & e[t + 1])) return i[(60 & e[t + 2]) >>> 2]; t++ } return null }, parseAacTimestamp: function (e) { var t, n, i; t = 10, 64 & e[5] && (t += 4, t += r(e.subarray(10, 14))); do { if ((n = r(e.subarray(t + 4, t + 8))) < 1) return null; if ("PRIV" === String.fromCharCode(e[t], e[t + 1], e[t + 2], e[t + 3])) { i = e.subarray(t + 10, t + n + 10); for (var s = 0; s < i.byteLength; s++)if (0 === i[s]) { if ("com.apple.streaming.transportStreamTimestamp" === unescape(function (e, t, n) { var i, r = ""; for (i = t; i < n; i++)r += "%" + ("00" + e[i].toString(16)).slice(-2); return r }(i, 0, s))) { var a = i.subarray(s + 1), o = (1 & a[3]) << 30 | a[4] << 22 | a[5] << 14 | a[6] << 6 | a[7] >>> 2; return o *= 4, o += 3 & a[7] } break } } t += 10, t += n } while (t < e.byteLength); return null } } }, "+X0y": function (e, t) { var n = { "": !0, up: !0 }; function i(e) { return "number" == typeof e && e >= 0 && e <= 100 } e.exports = function () { var e = 100, t = 3, r = 0, s = 100, a = 0, o = 100, l = ""; Object.defineProperties(this, { width: { enumerable: !0, get: function () { return e }, set: function (t) { if (!i(t)) throw new Error("Width must be between 0 and 100."); e = t } }, lines: { enumerable: !0, get: function () { return t }, set: function (e) { if ("number" != typeof e) throw new TypeError("Lines must be set to a number."); t = e } }, regionAnchorY: { enumerable: !0, get: function () { return s }, set: function (e) { if (!i(e)) throw new Error("RegionAnchorX must be between 0 and 100."); s = e } }, regionAnchorX: { enumerable: !0, get: function () { return r }, set: function (e) { if (!i(e)) throw new Error("RegionAnchorY must be between 0 and 100."); r = e } }, viewportAnchorY: { enumerable: !0, get: function () { return o }, set: function (e) { if (!i(e)) throw new Error("ViewportAnchorY must be between 0 and 100."); o = e } }, viewportAnchorX: { enumerable: !0, get: function () { return a }, set: function (e) { if (!i(e)) throw new Error("ViewportAnchorX must be between 0 and 100."); a = e } }, scroll: { enumerable: !0, get: function () { return l }, set: function (e) { var t = function (e) { return "string" == typeof e && !!n[e.toLowerCase()] && e.toLowerCase() }(e); if (!1 === t) throw new SyntaxError("An invalid or illegal string was specified."); l = t } } }) } }, "/eoz": function (e, t, n) { "use strict"; var i = n("F/us"), r = n("fw19"); e.exports = function (e) { e.use("*", function (e) { return { setSource: function (t, n) { var s, a = e.currentSources(); e._qualitySelectorSafeSeek && e._qualitySelectorSafeSeek.onPlayerSourcesChange(), i.isEqual(a, e._qualitySelectorPreviousSources) || (e.trigger(r.PLAYER_SOURCES_CHANGED, a), e._qualitySelectorPreviousSources = a), s = i.find(a, function (e) { return !0 === e.selected || "true" === e.selected || "selected" === e.selected }) || t, e.trigger(r.QUALITY_SELECTED, s), n(null, s) } } }) } }, "0CxO": function (e, t) { var n = Object.create || function () { function e() { } return function (t) { if (1 !== arguments.length) throw new Error("Object.create shim only accepts one parameter."); return e.prototype = t, new e } }(); function i(e, t) { this.name = "ParsingError", this.code = e.code, this.message = t || e.message } function r(e) { function t(e, t, n, i) { return 3600 * (0 | e) + 60 * (0 | t) + (0 | n) + (0 | i) / 1e3 } var n = e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/); return n ? n[3] ? t(n[1], n[2], n[3].replace(":", ""), n[4]) : n[1] > 59 ? t(n[1], n[2], 0, n[4]) : t(0, n[1], n[2], n[4]) : null } function s() { this.values = n(null) } function a(e, t, n, i) { var r = i ? e.split(i) : [e]; for (var s in r) if ("string" == typeof r[s]) { var a = r[s].split(n); if (2 === a.length) t(a[0], a[1]) } } function o(e, t, n) { var o = e; function l() { var t = r(e); if (null === t) throw new i(i.Errors.BadTimeStamp, "Malformed timestamp: " + o); return e = e.replace(/^[^\sa-zA-Z-]+/, ""), t } function u() { e = e.replace(/^\s+/, "") } if (u(), t.startTime = l(), u(), "--\x3e" !== e.substr(0, 3)) throw new i(i.Errors.BadTimeStamp, "Malformed time stamp (time stamps must be separated by '--\x3e'): " + o); e = e.substr(3), u(), t.endTime = l(), u(), function (e, t) { var i = new s; a(e, function (e, t) { switch (e) { case "region": for (var r = n.length - 1; r >= 0; r--)if (n[r].id === t) { i.set(e, n[r].region); break } break; case "vertical": i.alt(e, t, ["rl", "lr"]); break; case "line": var s = t.split(","), a = s[0]; i.integer(e, a), i.percent(e, a) && i.set("snapToLines", !1), i.alt(e, a, ["auto"]), 2 === s.length && i.alt("lineAlign", s[1], ["start", "middle", "end"]); break; case "position": s = t.split(","), i.percent(e, s[0]), 2 === s.length && i.alt("positionAlign", s[1], ["start", "middle", "end"]); break; case "size": i.percent(e, t); break; case "align": i.alt(e, t, ["start", "middle", "end", "left", "right"]) } }, /:/, /\s/), t.region = i.get("region", null), t.vertical = i.get("vertical", ""), t.line = i.get("line", "auto"), t.lineAlign = i.get("lineAlign", "start"), t.snapToLines = i.get("snapToLines", !0), t.size = i.get("size", 100), t.align = i.get("align", "middle"), t.position = i.get("position", { start: 0, left: 0, middle: 50, end: 100, right: 100 }, t.align), t.positionAlign = i.get("positionAlign", { start: "start", left: "start", middle: "middle", end: "end", right: "end" }, t.align) }(e, t) } i.prototype = n(Error.prototype), i.prototype.constructor = i, i.Errors = { BadSignature: { code: 0, message: "Malformed WebVTT signature." }, BadTimeStamp: { code: 1, message: "Malformed time stamp." } }, s.prototype = { set: function (e, t) { this.get(e) || "" === t || (this.values[e] = t) }, get: function (e, t, n) { return n ? this.has(e) ? this.values[e] : t[n] : this.has(e) ? this.values[e] : t }, has: function (e) { return e in this.values }, alt: function (e, t, n) { for (var i = 0; i < n.length; ++i)if (t === n[i]) { this.set(e, t); break } }, integer: function (e, t) { /^-?\d+$/.test(t) && this.set(e, parseInt(t, 10)) }, percent: function (e, t) { return !!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/) && (t = parseFloat(t)) >= 0 && t <= 100) && (this.set(e, t), !0) } }; var l = { "&amp;": "&", "&lt;": "<", "&gt;": ">", "&lrm;": "‎", "&rlm;": "‏", "&nbsp;": " " }, u = { c: "span", i: "i", b: "b", u: "u", ruby: "ruby", rt: "rt", v: "span", lang: "span" }, c = { v: "title", lang: "lang" }, h = { rt: "ruby" }; function d(e, t) { function n() { if (!t) return null; var e, n = t.match(/^([^<]*)(<[^>]*>?)?/); return e = n[1] ? n[1] : n[2], t = t.substr(e.length), e } function i(e) { return l[e] } function s(e) { for (; y = e.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)e = e.replace(y[0], i); return e } function a(e, t) { return !h[t.localName] || h[t.localName] === e.localName } function o(t, n) { var i = u[t]; if (!i) return null; var r = e.document.createElement(i); r.localName = i; var s = c[t]; return s && n && (r[s] = n.trim()), r } for (var d, f = e.document.createElement("div"), p = f, m = []; null !== (d = n());)if ("<" !== d[0]) p.appendChild(e.document.createTextNode(s(d))); else { if ("/" === d[1]) { m.length && m[m.length - 1] === d.substr(2).replace(">", "") && (m.pop(), p = p.parentNode); continue } var g, v = r(d.substr(1, d.length - 2)); if (v) { g = e.document.createProcessingInstruction("timestamp", v), p.appendChild(g); continue } var y = d.match(/^<([^.\s\/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/); if (!y) continue; if (!(g = o(y[1], y[3]))) continue; if (!a(p, g)) continue; y[2] && (g.className = y[2].substr(1).replace(".", " ")), m.push(y[1]), p.appendChild(g), p = g } return f } var f = [[1470, 1470], [1472, 1472], [1475, 1475], [1478, 1478], [1488, 1514], [1520, 1524], [1544, 1544], [1547, 1547], [1549, 1549], [1563, 1563], [1566, 1610], [1645, 1647], [1649, 1749], [1765, 1766], [1774, 1775], [1786, 1805], [1807, 1808], [1810, 1839], [1869, 1957], [1969, 1969], [1984, 2026], [2036, 2037], [2042, 2042], [2048, 2069], [2074, 2074], [2084, 2084], [2088, 2088], [2096, 2110], [2112, 2136], [2142, 2142], [2208, 2208], [2210, 2220], [8207, 8207], [64285, 64285], [64287, 64296], [64298, 64310], [64312, 64316], [64318, 64318], [64320, 64321], [64323, 64324], [64326, 64449], [64467, 64829], [64848, 64911], [64914, 64967], [65008, 65020], [65136, 65140], [65142, 65276], [67584, 67589], [67592, 67592], [67594, 67637], [67639, 67640], [67644, 67644], [67647, 67669], [67671, 67679], [67840, 67867], [67872, 67897], [67903, 67903], [67968, 68023], [68030, 68031], [68096, 68096], [68112, 68115], [68117, 68119], [68121, 68147], [68160, 68167], [68176, 68184], [68192, 68223], [68352, 68405], [68416, 68437], [68440, 68466], [68472, 68479], [68608, 68680], [126464, 126467], [126469, 126495], [126497, 126498], [126500, 126500], [126503, 126503], [126505, 126514], [126516, 126519], [126521, 126521], [126523, 126523], [126530, 126530], [126535, 126535], [126537, 126537], [126539, 126539], [126541, 126543], [126545, 126546], [126548, 126548], [126551, 126551], [126553, 126553], [126555, 126555], [126557, 126557], [126559, 126559], [126561, 126562], [126564, 126564], [126567, 126570], [126572, 126578], [126580, 126583], [126585, 126588], [126590, 126590], [126592, 126601], [126603, 126619], [126625, 126627], [126629, 126633], [126635, 126651], [1114109, 1114109]]; function p(e) { for (var t = 0; t < f.length; t++) { var n = f[t]; if (e >= n[0] && e <= n[1]) return !0 } return !1 } function m(e) { var t = [], n = ""; if (!e || !e.childNodes) return "ltr"; function i(e, t) { for (var n = t.childNodes.length - 1; n >= 0; n--)e.push(t.childNodes[n]) } function r(e) { if (!e || !e.length) return null; var t = e.pop(), n = t.textContent || t.innerText; if (n) { var s = n.match(/^.*(\n|\r)/); return s ? (e.length = 0, s[0]) : n } return "ruby" === t.tagName ? r(e) : t.childNodes ? (i(e, t), r(e)) : void 0 } for (i(t, e); n = r(t);)for (var s = 0; s < n.length; s++)if (p(n.charCodeAt(s))) return "rtl"; return "ltr" } function g() { } function v(e, t, n) { g.call(this), this.cue = t, this.cueDiv = d(e, t.text); var i = { color: "rgba(255, 255, 255, 1)", backgroundColor: "rgba(0, 0, 0, 0.8)", position: "relative", left: 0, right: 0, top: 0, bottom: 0, display: "inline", writingMode: "" === t.vertical ? "horizontal-tb" : "lr" === t.vertical ? "vertical-lr" : "vertical-rl", unicodeBidi: "plaintext" }; this.applyStyles(i, this.cueDiv), this.div = e.document.createElement("div"), i = { direction: m(this.cueDiv), writingMode: "" === t.vertical ? "horizontal-tb" : "lr" === t.vertical ? "vertical-lr" : "vertical-rl", unicodeBidi: "plaintext", textAlign: "middle" === t.align ? "center" : t.align, font: n.font, whiteSpace: "pre-line", position: "absolute" }, this.applyStyles(i), this.div.appendChild(this.cueDiv); var r = 0; switch (t.positionAlign) { case "start": r = t.position; break; case "middle": r = t.position - t.size / 2; break; case "end": r = t.position - t.size }"" === t.vertical ? this.applyStyles({ left: this.formatStyle(r, "%"), width: this.formatStyle(t.size, "%") }) : this.applyStyles({ top: this.formatStyle(r, "%"), height: this.formatStyle(t.size, "%") }), this.move = function (e) { this.applyStyles({ top: this.formatStyle(e.top, "px"), bottom: this.formatStyle(e.bottom, "px"), left: this.formatStyle(e.left, "px"), right: this.formatStyle(e.right, "px"), height: this.formatStyle(e.height, "px"), width: this.formatStyle(e.width, "px") }) } } function y(e) { var t, n, i, r; if (e.div) { n = e.div.offsetHeight, i = e.div.offsetWidth, r = e.div.offsetTop; var s = (s = e.div.childNodes) && (s = s[0]) && s.getClientRects && s.getClientRects(); e = e.div.getBoundingClientRect(), t = s ? Math.max(s[0] && s[0].height || 0, e.height / s.length) : 0 } this.left = e.left, this.right = e.right, this.top = e.top || r, this.height = e.height || n, this.bottom = e.bottom || r + (e.height || n), this.width = e.width || i, this.lineHeight = void 0 !== t ? t : e.lineHeight } function _(e, t, n, i) { var r = new y(t), s = t.cue, a = function (e) { if ("number" == typeof e.line && (e.snapToLines || e.line >= 0 && e.line <= 100)) return e.line; if (!e.track || !e.track.textTrackList || !e.track.textTrackList.mediaElement) return -1; for (var t = e.track, n = t.textTrackList, i = 0, r = 0; r < n.length && n[r] !== t; r++)"showing" === n[r].mode && i++; return -1 * ++i }(s), o = []; if (s.snapToLines) { var l; switch (s.vertical) { case "": o = ["+y", "-y"], l = "height"; break; case "rl": o = ["+x", "-x"], l = "width"; break; case "lr": o = ["-x", "+x"], l = "width" }var u = r.lineHeight, c = u * Math.round(a), h = n[l] + u, d = o[0]; Math.abs(c) > h && (c = c < 0 ? -1 : 1, c *= Math.ceil(h / u) * u), a < 0 && (c += "" === s.vertical ? n.height : n.width, o = o.reverse()), r.move(d, c) } else { var f = r.lineHeight / n.height * 100; switch (s.lineAlign) { case "middle": a -= f / 2; break; case "end": a -= f }switch (s.vertical) { case "": t.applyStyles({ top: t.formatStyle(a, "%") }); break; case "rl": t.applyStyles({ left: t.formatStyle(a, "%") }); break; case "lr": t.applyStyles({ right: t.formatStyle(a, "%") }) }o = ["+y", "-x", "+x", "-y"], r = new y(t) } var p = function (e, t) { for (var r, s = new y(e), a = 1, o = 0; o < t.length; o++) { for (; e.overlapsOppositeAxis(n, t[o]) || e.within(n) && e.overlapsAny(i);)e.move(t[o]); if (e.within(n)) return e; var l = e.intersectPercentage(n); a > l && (r = new y(e), a = l), e = new y(s) } return r || s }(r, o); t.move(p.toCSSCompatValues(n)) } function b() { } g.prototype.applyStyles = function (e, t) { for (var n in t = t || this.div, e) e.hasOwnProperty(n) && (t.style[n] = e[n]) }, g.prototype.formatStyle = function (e, t) { return 0 === e ? 0 : e + t }, v.prototype = n(g.prototype), v.prototype.constructor = v, y.prototype.move = function (e, t) { switch (t = void 0 !== t ? t : this.lineHeight, e) { case "+x": this.left += t, this.right += t; break; case "-x": this.left -= t, this.right -= t; break; case "+y": this.top += t, this.bottom += t; break; case "-y": this.top -= t, this.bottom -= t } }, y.prototype.overlaps = function (e) { return this.left < e.right && this.right > e.left && this.top < e.bottom && this.bottom > e.top }, y.prototype.overlapsAny = function (e) { for (var t = 0; t < e.length; t++)if (this.overlaps(e[t])) return !0; return !1 }, y.prototype.within = function (e) { return this.top >= e.top && this.bottom <= e.bottom && this.left >= e.left && this.right <= e.right }, y.prototype.overlapsOppositeAxis = function (e, t) { switch (t) { case "+x": return this.left < e.left; case "-x": return this.right > e.right; case "+y": return this.top < e.top; case "-y": return this.bottom > e.bottom } }, y.prototype.intersectPercentage = function (e) { return Math.max(0, Math.min(this.right, e.right) - Math.max(this.left, e.left)) * Math.max(0, Math.min(this.bottom, e.bottom) - Math.max(this.top, e.top)) / (this.height * this.width) }, y.prototype.toCSSCompatValues = function (e) { return { top: this.top - e.top, bottom: e.bottom - this.bottom, left: this.left - e.left, right: e.right - this.right, height: this.height, width: this.width } }, y.getSimpleBoxPosition = function (e) { var t = e.div ? e.div.offsetHeight : e.tagName ? e.offsetHeight : 0, n = e.div ? e.div.offsetWidth : e.tagName ? e.offsetWidth : 0, i = e.div ? e.div.offsetTop : e.tagName ? e.offsetTop : 0; return { left: (e = e.div ? e.div.getBoundingClientRect() : e.tagName ? e.getBoundingClientRect() : e).left, right: e.right, top: e.top || i, height: e.height || t, bottom: e.bottom || i + (e.height || t), width: e.width || n } }, b.StringDecoder = function () { return { decode: function (e) { if (!e) return ""; if ("string" != typeof e) throw new Error("Error - expected string data."); return decodeURIComponent(encodeURIComponent(e)) } } }, b.convertCueToDOMTree = function (e, t) { return e && t ? d(e, t) : null }; b.processCues = function (e, t, n) { if (!e || !t || !n) return null; for (; n.firstChild;)n.removeChild(n.firstChild); var i = e.document.createElement("div"); if (i.style.position = "absolute", i.style.left = "0", i.style.right = "0", i.style.top = "0", i.style.bottom = "0", i.style.margin = "1.5%", n.appendChild(i), function (e) { for (var t = 0; t < e.length; t++)if (e[t].hasBeenReset || !e[t].displayState) return !0; return !1 }(t)) { var r = [], s = y.getSimpleBoxPosition(i), a = { font: Math.round(.05 * s.height * 100) / 100 + "px sans-serif" }; !function () { for (var n, o, l = 0; l < t.length; l++)o = t[l], n = new v(e, o, a), i.appendChild(n.div), _(0, n, s, r), o.displayState = n.div, r.push(y.getSimpleBoxPosition(n)) }() } else for (var o = 0; o < t.length; o++)i.appendChild(t[o].displayState) }, b.Parser = function (e, t, n) { n || (n = t, t = {}), t || (t = {}), this.window = e, this.vttjs = t, this.state = "INITIAL", this.buffer = "", this.decoder = n || new TextDecoder("utf8"), this.regionList = [] }, b.Parser.prototype = { reportOrThrowError: function (e) { if (!(e instanceof i)) throw e; this.onparsingerror && this.onparsingerror(e) }, parse: function (e) { var t = this; function n() { for (var e = t.buffer, n = 0; n < e.length && "\r" !== e[n] && "\n" !== e[n];)++n; var i = e.substr(0, n); return "\r" === e[n] && ++n, "\n" === e[n] && ++n, t.buffer = e.substr(n), i } function l(e) { e.match(/X-TIMESTAMP-MAP/) ? a(e, function (e, n) { switch (e) { case "X-TIMESTAMP-MAP": i = n, o = new s, a(i, function (e, t) { switch (e) { case "MPEGT": o.integer(e + "S", t); break; case "LOCA": o.set(e + "L", r(t)) } }, /[^\d]:/, /,/), t.ontimestampmap && t.ontimestampmap({ MPEGTS: o.get("MPEGTS"), LOCAL: o.get("LOCAL") }) }var i, o }, /=/) : a(e, function (e, n) { switch (e) { case "Region": !function (e) { var n = new s; if (a(e, function (e, t) { switch (e) { case "id": n.set(e, t); break; case "width": n.percent(e, t); break; case "lines": n.integer(e, t); break; case "regionanchor": case "viewportanchor": var i = t.split(","); if (2 !== i.length) break; var r = new s; if (r.percent("x", i[0]), r.percent("y", i[1]), !r.has("x") || !r.has("y")) break; n.set(e + "X", r.get("x")), n.set(e + "Y", r.get("y")); break; case "scroll": n.alt(e, t, ["up"]) } }, /=/, /\s/), n.has("id")) { var i = new (t.vttjs.VTTRegion || t.window.VTTRegion); i.width = n.get("width", 100), i.lines = n.get("lines", 3), i.regionAnchorX = n.get("regionanchorX", 0), i.regionAnchorY = n.get("regionanchorY", 100), i.viewportAnchorX = n.get("viewportanchorX", 0), i.viewportAnchorY = n.get("viewportanchorY", 100), i.scroll = n.get("scroll", ""), t.onregion && t.onregion(i), t.regionList.push({ id: n.get("id"), region: i }) } }(n) } }, /:/) } e && (t.buffer += t.decoder.decode(e, { stream: !0 })); try { var u; if ("INITIAL" === t.state) { if (!/\r\n|\n/.test(t.buffer)) return this; var c = (u = n()).match(/^WEBVTT([ \t].*)?$/); if (!c || !c[0]) throw new i(i.Errors.BadSignature); t.state = "HEADER" } for (var h = !1; t.buffer;) { if (!/\r\n|\n/.test(t.buffer)) return this; switch (h ? h = !1 : u = n(), t.state) { case "HEADER": /:/.test(u) ? l(u) : u || (t.state = "ID"); continue; case "NOTE": u || (t.state = "ID"); continue; case "ID": if (/^NOTE($|[ \t])/.test(u)) { t.state = "NOTE"; break } if (!u) continue; if (t.cue = new (t.vttjs.VTTCue || t.window.VTTCue)(0, 0, ""), t.state = "CUE", -1 === u.indexOf("--\x3e")) { t.cue.id = u; continue } case "CUE": try { o(u, t.cue, t.regionList) } catch (e) { t.reportOrThrowError(e), t.cue = null, t.state = "BADCUE"; continue } t.state = "CUETEXT"; continue; case "CUETEXT": var d = -1 !== u.indexOf("--\x3e"); if (!u || d && (h = !0)) { t.oncue && t.oncue(t.cue), t.cue = null, t.state = "ID"; continue } t.cue.text && (t.cue.text += "\n"), t.cue.text += u; continue; case "BADCUE": u || (t.state = "ID"); continue } } } catch (e) { t.reportOrThrowError(e), "CUETEXT" === t.state && t.cue && t.oncue && t.oncue(t.cue), t.cue = null, t.state = "INITIAL" === t.state ? "BADWEBVTT" : "BADCUE" } return this }, flush: function () { try { if (this.buffer += this.decoder.decode(), (this.cue || "HEADER" === this.state) && (this.buffer += "\n\n", this.parse()), "INITIAL" === this.state) throw new i(i.Errors.BadSignature) } catch (e) { this.reportOrThrowError(e) } return this.onflush && this.onflush(), this } }, e.exports = b }, "0Tbm": function (e, t, n) { var i, r, s, a, o; i = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/, r = /^([^\/?#]*)(.*)$/, s = /(?:\/|^)\.(?=\/)/g, a = /(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g, o = { buildAbsoluteURL: function (e, t, n) { if (n = n || {}, e = e.trim(), !(t = t.trim())) { if (!n.alwaysNormalize) return e; var i = o.parseURL(e); if (!i) throw new Error("Error trying to parse base URL."); return i.path = o.normalizePath(i.path), o.buildURLFromParts(i) } var s = o.parseURL(t); if (!s) throw new Error("Error trying to parse relative URL."); if (s.scheme) return n.alwaysNormalize ? (s.path = o.normalizePath(s.path), o.buildURLFromParts(s)) : t; var a = o.parseURL(e); if (!a) throw new Error("Error trying to parse base URL."); if (!a.netLoc && a.path && "/" !== a.path[0]) { var l = r.exec(a.path); a.netLoc = l[1], a.path = l[2] } a.netLoc && !a.path && (a.path = "/"); var u = { scheme: a.scheme, netLoc: s.netLoc, path: null, params: s.params, query: s.query, fragment: s.fragment }; if (!s.netLoc && (u.netLoc = a.netLoc, "/" !== s.path[0])) if (s.path) { var c = a.path, h = c.substring(0, c.lastIndexOf("/") + 1) + s.path; u.path = o.normalizePath(h) } else u.path = a.path, s.params || (u.params = a.params, s.query || (u.query = a.query)); return null === u.path && (u.path = n.alwaysNormalize ? o.normalizePath(s.path) : s.path), o.buildURLFromParts(u) }, parseURL: function (e) { var t = i.exec(e); return t ? { scheme: t[1] || "", netLoc: t[2] || "", path: t[3] || "", params: t[4] || "", query: t[5] || "", fragment: t[6] || "" } : null }, normalizePath: function (e) { for (e = e.split("").reverse().join("").replace(s, ""); e.length !== (e = e.replace(a, "")).length;); return e.split("").reverse().join("") }, buildURLFromParts: function (e) { return e.scheme + e.netLoc + e.path + e.params + e.query + e.fragment } }, e.exports = o }, "3D7k": function (e, t, n) { "use strict"; var i = n("rnXk"), r = n("JW/Y").handleRollover, s = {}; s.ts = n("Qj6V"), s.aac = n("+9CB"); var a = n("NsZL").ONE_SECOND_IN_TS, o = function (e, t, n) { for (var i, r, a, o, l = 0, u = 188, c = !1; u <= e.byteLength;)if (71 !== e[l] || 71 !== e[u] && u !== e.byteLength) l++, u++; else { switch (i = e.subarray(l, u), s.ts.parseType(i, t.pid)) { case "pes": r = s.ts.parsePesType(i, t.table), a = s.ts.parsePayloadUnitStartIndicator(i), "audio" === r && a && (o = s.ts.parsePesTime(i)) && (o.type = "audio", n.audio.push(o), c = !0) }if (c) break; l += 188, u += 188 } for (l = (u = e.byteLength) - 188, c = !1; l >= 0;)if (71 !== e[l] || 71 !== e[u] && u !== e.byteLength) l--, u--; else { switch (i = e.subarray(l, u), s.ts.parseType(i, t.pid)) { case "pes": r = s.ts.parsePesType(i, t.table), a = s.ts.parsePayloadUnitStartIndicator(i), "audio" === r && a && (o = s.ts.parsePesTime(i)) && (o.type = "audio", n.audio.push(o), c = !0) }if (c) break; l -= 188, u -= 188 } }, l = function (e, t, n) { for (var i, r, a, o, l, u, c, h = 0, d = 188, f = !1, p = { data: [], size: 0 }; d < e.byteLength;)if (71 !== e[h] || 71 !== e[d]) h++, d++; else { switch (i = e.subarray(h, d), s.ts.parseType(i, t.pid)) { case "pes": if (r = s.ts.parsePesType(i, t.table), a = s.ts.parsePayloadUnitStartIndicator(i), "video" === r && (a && !f && (o = s.ts.parsePesTime(i)) && (o.type = "video", n.video.push(o), f = !0), !n.firstKeyFrame)) { if (a && 0 !== p.size) { for (l = new Uint8Array(p.size), u = 0; p.data.length;)c = p.data.shift(), l.set(c, u), u += c.byteLength; if (s.ts.videoPacketContainsKeyFrame(l)) { var m = s.ts.parsePesTime(l); m ? (n.firstKeyFrame = m, n.firstKeyFrame.type = "video") : console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.") } p.size = 0 } p.data.push(i), p.size += i.byteLength } }if (f && n.firstKeyFrame) break; h += 188, d += 188 } for (h = (d = e.byteLength) - 188, f = !1; h >= 0;)if (71 !== e[h] || 71 !== e[d]) h--, d--; else { switch (i = e.subarray(h, d), s.ts.parseType(i, t.pid)) { case "pes": r = s.ts.parsePesType(i, t.table), a = s.ts.parsePayloadUnitStartIndicator(i), "video" === r && a && (o = s.ts.parsePesTime(i)) && (o.type = "video", n.video.push(o), f = !0) }if (f) break; h -= 188, d -= 188 } }, u = function (e) { var t = { pid: null, table: null }, n = {}; for (var r in function (e, t) { for (var n, i = 0, r = 188; r < e.byteLength;)if (71 !== e[i] || 71 !== e[r]) i++, r++; else { switch (n = e.subarray(i, r), s.ts.parseType(n, t.pid)) { case "pat": t.pid || (t.pid = s.ts.parsePat(n)); break; case "pmt": t.table || (t.table = s.ts.parsePmt(n)) }if (t.pid && t.table) return; i += 188, r += 188 } }(e, t), t.table) { if (t.table.hasOwnProperty(r)) switch (t.table[r]) { case i.H264_STREAM_TYPE: n.video = [], l(e, t, n), 0 === n.video.length && delete n.video; break; case i.ADTS_STREAM_TYPE: n.audio = [], o(e, t, n), 0 === n.audio.length && delete n.audio } } return n }; e.exports = { inspect: function (e, t) { var n; return (n = s.aac.isLikelyAacData(e) ? function (e) { for (var t, n = !1, i = 0, r = null, o = null, l = 0, u = 0; e.length - u >= 3;) { switch (s.aac.parseType(e, u)) { case "timed-metadata": if (e.length - u < 10) { n = !0; break } if ((l = s.aac.parseId3TagSize(e, u)) > e.length) { n = !0; break } null === o && (t = e.subarray(u, u + l), o = s.aac.parseAacTimestamp(t)), u += l; break; case "audio": if (e.length - u < 7) { n = !0; break } if ((l = s.aac.parseAdtsSize(e, u)) > e.length) { n = !0; break } null === r && (t = e.subarray(u, u + l), r = s.aac.parseSampleRate(t)), i++, u += l; break; default: u++ }if (n) return null } if (null === r || null === o) return null; var c = a / r; return { audio: [{ type: "audio", dts: o, pts: o }, { type: "audio", dts: o + 1024 * i * c, pts: o + 1024 * i * c }] } }(e) : u(e)) && (n.audio || n.video) ? (function (e, t) { if (e.audio && e.audio.length) { var n = t; void 0 === n && (n = e.audio[0].dts), e.audio.forEach(function (e) { e.dts = r(e.dts, n), e.pts = r(e.pts, n), e.dtsTime = e.dts / a, e.ptsTime = e.pts / a }) } if (e.video && e.video.length) { var i = t; if (void 0 === i && (i = e.video[0].dts), e.video.forEach(function (e) { e.dts = r(e.dts, i), e.pts = r(e.pts, i), e.dtsTime = e.dts / a, e.ptsTime = e.pts / a }), e.firstKeyFrame) { var s = e.firstKeyFrame; s.dts = r(s.dts, i), s.pts = r(s.pts, i), s.dtsTime = s.dts / a, s.ptsTime = s.dts / a } } }(n, t), n) : null }, parseAudioPes_: o } }, "3G1x": function (e, t, n) { "use strict"; e.exports = { parseSei: function (e) { for (var t = 0, n = { payloadType: -1, payloadSize: 0 }, i = 0, r = 0; t < e.byteLength && 128 !== e[t];) { for (; 255 === e[t];)i += 255, t++; for (i += e[t++]; 255 === e[t];)r += 255, t++; if (r += e[t++], !n.payload && 4 === i) { n.payloadType = i, n.payloadSize = r, n.payload = e.subarray(t, t + r); break } t += r, i = 0, r = 0 } return n }, parseUserData: function (e) { return 181 !== e.payload[0] ? null : 49 != (e.payload[1] << 8 | e.payload[2]) ? null : "GA94" !== String.fromCharCode(e.payload[3], e.payload[4], e.payload[5], e.payload[6]) ? null : 3 !== e.payload[7] ? null : e.payload.subarray(8, e.payload.length - 1) }, parseCaptionPackets: function (e, t) { var n, i, r, s, a = []; if (!(64 & t[0])) return a; for (i = 31 & t[0], n = 0; n < i; n++)s = { type: 3 & t[2 + (r = 3 * n)], pts: e }, 4 & t[r + 2] && (s.ccData = t[r + 3] << 8 | t[r + 4], a.push(s)); return a }, discardEmulationPreventionBytes: function (e) { for (var t, n, i = e.byteLength, r = [], s = 1; s < i - 2;)0 === e[s] && 0 === e[s + 1] && 3 === e[s + 2] ? (r.push(s + 2), s += 2) : s++; if (0 === r.length) return e; t = i - r.length, n = new Uint8Array(t); var a = 0; for (s = 0; s < t; a++, s++)a === r[0] && (a++, r.shift()), n[s] = e[a]; return n }, USER_DATA_REGISTERED_ITU_T_T35: 4 } }, "3q7N": function (e, t, n) { "use strict"; var i = n("F/us"), r = n("fw19"), s = n("XQ68"), a = n("/eoz"), o = n("gync"); e.exports = function (e) { e = e || window.videojs, s(e), a(e), e.hook("setup", function (e) { e.on(r.QUALITY_REQUESTED, function (t, n) { var r = e.currentSources(), s = e.currentTime(), a = e.paused(); i.each(r, function (e) { e.selected = !1 }), i.findWhere(r, { src: n.src }).selected = !0, e._qualitySelectorSafeSeek && e._qualitySelectorSafeSeek.onQualitySelectionChange(), e.src(r), e.ready(function () { e._qualitySelectorSafeSeek && !e._qualitySelectorSafeSeek.hasFinished() || (e._qualitySelectorSafeSeek = new o(e, s)), a || e.play() }) }) }) }, e.exports.EVENTS = r }, "3zPy": function (e, t) {
    function n(e) { if (e && "object" == typeof e) { var t = e.which || e.keyCode || e.charCode; t && (e = t) } if ("number" == typeof e) return a[e]; var n, s = String(e); return (n = i[s.toLowerCase()]) ? n : (n = r[s.toLowerCase()]) || (1 === s.length ? s.charCodeAt(0) : void 0) } n.isEventKey = function (e, t) { if (e && "object" == typeof e) { var n = e.which || e.keyCode || e.charCode; if (null == n) return !1; if ("string" == typeof t) { var s; if (s = i[t.toLowerCase()]) return s === n; if (s = r[t.toLowerCase()]) return s === n } else if ("number" == typeof t) return t === n; return !1 } }; var i = (t = e.exports = n).code = t.codes = { backspace: 8, tab: 9, enter: 13, shift: 16, ctrl: 17, alt: 18, "pause/break": 19, "caps lock": 20, esc: 27, space: 32, "page up": 33, "page down": 34, end: 35, home: 36, left: 37, up: 38, right: 39, down: 40, insert: 45, delete: 46, command: 91, "left command": 91, "right command": 93, "numpad *": 106, "numpad +": 107, "numpad -": 109, "numpad .": 110, "numpad /": 111, "num lock": 144, "scroll lock": 145, "my computer": 182, "my calculator": 183, ";": 186, "=": 187, ",": 188, "-": 189, ".": 190, "/": 191, "`": 192, "[": 219, "\\": 220, "]": 221, "'": 222 }, r = t.aliases = { windows: 91, "⇧": 16, "⌥": 18, "⌃": 17, "⌘": 91, ctl: 17, control: 17, option: 18, pause: 19, break: 19, caps: 20, return: 13, escape: 27, spc: 32, spacebar: 32, pgup: 33, pgdn: 34, ins: 45, del: 46, cmd: 91 };
    /*!
     * Programatically add the following
     */
    for (s = 97; s < 123; s++)i[String.fromCharCode(s)] = s - 32; for (var s = 48; s < 58; s++)i[s - 48] = s; for (s = 1; s < 13; s++)i["f" + s] = s + 111; for (s = 0; s < 10; s++)i["numpad " + s] = s + 96; var a = t.names = t.title = {}; for (s in i) a[i[s]] = s; for (var o in r) i[o] = r[o]
  }, "7sdD": function (e, t, n) { "use strict"; var i = n("vgmO"), r = n("g2LC"), s = n("ZESv"), a = n("U6jy"); function o(e, t, n) { var i = e; return r(t) ? (n = t, "string" == typeof e && (i = { uri: e })) : i = a(t, { uri: e }), i.callback = n, i } function l(e, t, n) { return u(t = o(e, t, n)) } function u(e) { if (void 0 === e.callback) throw new Error("callback argument missing"); var t = !1, n = function (n, i, r) { t || (t = !0, e.callback(n, i, r)) }; function i() { var e = void 0; if (e = c.response ? c.response : c.responseText || function (e) { if ("document" === e.responseType) return e.responseXML; var t = e.responseXML && "parsererror" === e.responseXML.documentElement.nodeName; if ("" === e.responseType && !t) return e.responseXML; return null }(c), v) try { e = JSON.parse(e) } catch (e) { } return e } function r(e) { return clearTimeout(h), e instanceof Error || (e = new Error("" + (e || "Unknown XMLHttpRequest Error"))), e.statusCode = 0, n(e, y) } function a() { if (!u) { var t; clearTimeout(h), t = e.useXDR && void 0 === c.status ? 200 : 1223 === c.status ? 204 : c.status; var r = y, a = null; return 0 !== t ? (r = { body: i(), statusCode: t, method: f, headers: {}, url: d, rawRequest: c }, c.getAllResponseHeaders && (r.headers = s(c.getAllResponseHeaders()))) : a = new Error("Internal XMLHttpRequest Error"), n(a, r, r.body) } } var o, u, c = e.xhr || null; c || (c = e.cors || e.useXDR ? new l.XDomainRequest : new l.XMLHttpRequest); var h, d = c.url = e.uri || e.url, f = c.method = e.method || "GET", p = e.body || e.data, m = c.headers = e.headers || {}, g = !!e.sync, v = !1, y = { body: void 0, headers: {}, statusCode: 0, method: f, url: d, rawRequest: c }; if ("json" in e && !1 !== e.json && (v = !0, m.accept || m.Accept || (m.Accept = "application/json"), "GET" !== f && "HEAD" !== f && (m["content-type"] || m["Content-Type"] || (m["Content-Type"] = "application/json"), p = JSON.stringify(!0 === e.json ? p : e.json))), c.onreadystatechange = function () { 4 === c.readyState && setTimeout(a, 0) }, c.onload = a, c.onerror = r, c.onprogress = function () { }, c.onabort = function () { u = !0 }, c.ontimeout = r, c.open(f, d, !g, e.username, e.password), g || (c.withCredentials = !!e.withCredentials), !g && e.timeout > 0 && (h = setTimeout(function () { if (!u) { u = !0, c.abort("timeout"); var e = new Error("XMLHttpRequest timeout"); e.code = "ETIMEDOUT", r(e) } }, e.timeout)), c.setRequestHeader) for (o in m) m.hasOwnProperty(o) && c.setRequestHeader(o, m[o]); else if (e.headers && !function (e) { for (var t in e) if (e.hasOwnProperty(t)) return !1; return !0 }(e.headers)) throw new Error("Headers cannot be set on an XDomainRequest object"); return "responseType" in e && (c.responseType = e.responseType), "beforeSend" in e && "function" == typeof e.beforeSend && e.beforeSend(c), c.send(p || null), c } e.exports = l, l.XMLHttpRequest = i.XMLHttpRequest || function () { }, l.XDomainRequest = "withCredentials" in new l.XMLHttpRequest ? l.XMLHttpRequest : i.XDomainRequest, function (e, t) { for (var n = 0; n < e.length; n++)t(e[n]) }(["get", "put", "post", "patch", "head", "delete"], function (e) { l["delete" === e ? "del" : e] = function (t, n, i) { return (n = o(t, n, i)).method = e.toUpperCase(), u(n) } }) }, "7zRj": function (e, t, n) { (function (t) { var i, r = void 0 !== t ? t : "undefined" != typeof window ? window : {}, s = n(0); "undefined" != typeof document ? i = document : (i = r["__GLOBAL_DOCUMENT_CACHE@4"]) || (i = r["__GLOBAL_DOCUMENT_CACHE@4"] = s), e.exports = i }).call(this, n("yLpj")) }, "8L3F": function (e, t, n) {
    "use strict"; n.r(t), function (e) {
      /**!
       * @fileOverview Kickass library to create and place poppers near their reference elements.
       * @version 1.16.0
       * @license
       * Copyright (c) 2016 Federico Zivolo and contributors
       *
       * Permission is hereby granted, free of charge, to any person obtaining a copy
       * of this software and associated documentation files (the "Software"), to deal
       * in the Software without restriction, including without limitation the rights
       * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
       * copies of the Software, and to permit persons to whom the Software is
       * furnished to do so, subject to the following conditions:
       *
       * The above copyright notice and this permission notice shall be included in all
       * copies or substantial portions of the Software.
       *
       * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
       * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
       * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
       * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
       * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
       * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
       * SOFTWARE.
       */
      var n = "undefined" != typeof window && "undefined" != typeof document && "undefined" != typeof navigator, i = function () { for (var e = ["Edge", "Trident", "Firefox"], t = 0; t < e.length; t += 1)if (n && navigator.userAgent.indexOf(e[t]) >= 0) return 1; return 0 }(); var r = n && window.Promise ? function (e) { var t = !1; return function () { t || (t = !0, window.Promise.resolve().then(function () { t = !1, e() })) } } : function (e) { var t = !1; return function () { t || (t = !0, setTimeout(function () { t = !1, e() }, i)) } }; function s(e) { return e && "[object Function]" === {}.toString.call(e) } function a(e, t) { if (1 !== e.nodeType) return []; var n = e.ownerDocument.defaultView.getComputedStyle(e, null); return t ? n[t] : n } function o(e) { return "HTML" === e.nodeName ? e : e.parentNode || e.host } function l(e) { if (!e) return document.body; switch (e.nodeName) { case "HTML": case "BODY": return e.ownerDocument.body; case "#document": return e.body }var t = a(e), n = t.overflow, i = t.overflowX, r = t.overflowY; return /(auto|scroll|overlay)/.test(n + r + i) ? e : l(o(e)) } function u(e) { return e && e.referenceNode ? e.referenceNode : e } var c = n && !(!window.MSInputMethodContext || !document.documentMode), h = n && /MSIE 10/.test(navigator.userAgent); function d(e) { return 11 === e ? c : 10 === e ? h : c || h } function f(e) { if (!e) return document.documentElement; for (var t = d(10) ? document.body : null, n = e.offsetParent || null; n === t && e.nextElementSibling;)n = (e = e.nextElementSibling).offsetParent; var i = n && n.nodeName; return i && "BODY" !== i && "HTML" !== i ? -1 !== ["TH", "TD", "TABLE"].indexOf(n.nodeName) && "static" === a(n, "position") ? f(n) : n : e ? e.ownerDocument.documentElement : document.documentElement } function p(e) { return null !== e.parentNode ? p(e.parentNode) : e } function m(e, t) { if (!(e && e.nodeType && t && t.nodeType)) return document.documentElement; var n = e.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_FOLLOWING, i = n ? e : t, r = n ? t : e, s = document.createRange(); s.setStart(i, 0), s.setEnd(r, 0); var a, o, l = s.commonAncestorContainer; if (e !== l && t !== l || i.contains(r)) return "BODY" === (o = (a = l).nodeName) || "HTML" !== o && f(a.firstElementChild) !== a ? f(l) : l; var u = p(e); return u.host ? m(u.host, t) : m(e, p(t).host) } function g(e) { var t = "top" === (arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "top") ? "scrollTop" : "scrollLeft", n = e.nodeName; if ("BODY" === n || "HTML" === n) { var i = e.ownerDocument.documentElement; return (e.ownerDocument.scrollingElement || i)[t] } return e[t] } function v(e, t) { var n = "x" === t ? "Left" : "Top", i = "Left" === n ? "Right" : "Bottom"; return parseFloat(e["border" + n + "Width"], 10) + parseFloat(e["border" + i + "Width"], 10) } function y(e, t, n, i) { return Math.max(t["offset" + e], t["scroll" + e], n["client" + e], n["offset" + e], n["scroll" + e], d(10) ? parseInt(n["offset" + e]) + parseInt(i["margin" + ("Height" === e ? "Top" : "Left")]) + parseInt(i["margin" + ("Height" === e ? "Bottom" : "Right")]) : 0) } function _(e) { var t = e.body, n = e.documentElement, i = d(10) && getComputedStyle(n); return { height: y("Height", t, n, i), width: y("Width", t, n, i) } } var b = function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }, T = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } return function (t, n, i) { return n && e(t.prototype, n), i && e(t, i), t } }(), S = function (e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e }, E = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]) } return e }; function C(e) { return E({}, e, { right: e.left + e.width, bottom: e.top + e.height }) } function w(e) { var t = {}; try { if (d(10)) { t = e.getBoundingClientRect(); var n = g(e, "top"), i = g(e, "left"); t.top += n, t.left += i, t.bottom += n, t.right += i } else t = e.getBoundingClientRect() } catch (e) { } var r = { left: t.left, top: t.top, width: t.right - t.left, height: t.bottom - t.top }, s = "HTML" === e.nodeName ? _(e.ownerDocument) : {}, o = s.width || e.clientWidth || r.width, l = s.height || e.clientHeight || r.height, u = e.offsetWidth - o, c = e.offsetHeight - l; if (u || c) { var h = a(e); u -= v(h, "x"), c -= v(h, "y"), r.width -= u, r.height -= c } return C(r) } function k(e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], i = d(10), r = "HTML" === t.nodeName, s = w(e), o = w(t), u = l(e), c = a(t), h = parseFloat(c.borderTopWidth, 10), f = parseFloat(c.borderLeftWidth, 10); n && r && (o.top = Math.max(o.top, 0), o.left = Math.max(o.left, 0)); var p = C({ top: s.top - o.top - h, left: s.left - o.left - f, width: s.width, height: s.height }); if (p.marginTop = 0, p.marginLeft = 0, !i && r) { var m = parseFloat(c.marginTop, 10), v = parseFloat(c.marginLeft, 10); p.top -= h - m, p.bottom -= h - m, p.left -= f - v, p.right -= f - v, p.marginTop = m, p.marginLeft = v } return (i && !n ? t.contains(u) : t === u && "BODY" !== u.nodeName) && (p = function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], i = g(t, "top"), r = g(t, "left"), s = n ? -1 : 1; return e.top += i * s, e.bottom += i * s, e.left += r * s, e.right += r * s, e }(p, t)), p } function A(e) { if (!e || !e.parentElement || d()) return document.documentElement; for (var t = e.parentElement; t && "none" === a(t, "transform");)t = t.parentElement; return t || document.documentElement } function x(e, t, n, i) { var r = arguments.length > 4 && void 0 !== arguments[4] && arguments[4], s = { top: 0, left: 0 }, c = r ? A(e) : m(e, u(t)); if ("viewport" === i) s = function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n = e.ownerDocument.documentElement, i = k(e, n), r = Math.max(n.clientWidth, window.innerWidth || 0), s = Math.max(n.clientHeight, window.innerHeight || 0), a = t ? 0 : g(n), o = t ? 0 : g(n, "left"); return C({ top: a - i.top + i.marginTop, left: o - i.left + i.marginLeft, width: r, height: s }) }(c, r); else { var h = void 0; "scrollParent" === i ? "BODY" === (h = l(o(t))).nodeName && (h = e.ownerDocument.documentElement) : h = "window" === i ? e.ownerDocument.documentElement : i; var d = k(h, c, r); if ("HTML" !== h.nodeName || function e(t) { var n = t.nodeName; if ("BODY" === n || "HTML" === n) return !1; if ("fixed" === a(t, "position")) return !0; var i = o(t); return !!i && e(i) }(c)) s = d; else { var f = _(e.ownerDocument), p = f.height, v = f.width; s.top += d.top - d.marginTop, s.bottom = p + d.top, s.left += d.left - d.marginLeft, s.right = v + d.left } } var y = "number" == typeof (n = n || 0); return s.left += y ? n : n.left || 0, s.top += y ? n : n.top || 0, s.right -= y ? n : n.right || 0, s.bottom -= y ? n : n.bottom || 0, s } function I(e, t, n, i, r) { var s = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0; if (-1 === e.indexOf("auto")) return e; var a = x(n, i, s, r), o = { top: { width: a.width, height: t.top - a.top }, right: { width: a.right - t.right, height: a.height }, bottom: { width: a.width, height: a.bottom - t.bottom }, left: { width: t.left - a.left, height: a.height } }, l = Object.keys(o).map(function (e) { return E({ key: e }, o[e], { area: (t = o[e], t.width * t.height) }); var t }).sort(function (e, t) { return t.area - e.area }), u = l.filter(function (e) { var t = e.width, i = e.height; return t >= n.clientWidth && i >= n.clientHeight }), c = u.length > 0 ? u[0].key : l[0].key, h = e.split("-")[1]; return c + (h ? "-" + h : "") } function O(e, t, n) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null; return k(n, i ? A(t) : m(t, u(n)), i) } function D(e) { var t = e.ownerDocument.defaultView.getComputedStyle(e), n = parseFloat(t.marginTop || 0) + parseFloat(t.marginBottom || 0), i = parseFloat(t.marginLeft || 0) + parseFloat(t.marginRight || 0); return { width: e.offsetWidth + i, height: e.offsetHeight + n } } function L(e) { var t = { left: "right", right: "left", bottom: "top", top: "bottom" }; return e.replace(/left|right|bottom|top/g, function (e) { return t[e] }) } function P(e, t, n) { n = n.split("-")[0]; var i = D(e), r = { width: i.width, height: i.height }, s = -1 !== ["right", "left"].indexOf(n), a = s ? "top" : "left", o = s ? "left" : "top", l = s ? "height" : "width", u = s ? "width" : "height"; return r[a] = t[a] + t[l] / 2 - i[l] / 2, r[o] = n === o ? t[o] - i[u] : t[L(o)], r } function N(e, t) { return Array.prototype.find ? e.find(t) : e.filter(t)[0] } function R(e, t, n) { return (void 0 === n ? e : e.slice(0, function (e, t, n) { if (Array.prototype.findIndex) return e.findIndex(function (e) { return e[t] === n }); var i = N(e, function (e) { return e[t] === n }); return e.indexOf(i) }(e, "name", n))).forEach(function (e) { e.function && console.warn("`modifier.function` is deprecated, use `modifier.fn`!"); var n = e.function || e.fn; e.enabled && s(n) && (t.offsets.popper = C(t.offsets.popper), t.offsets.reference = C(t.offsets.reference), t = n(t, e)) }), t } function M(e, t) { return e.some(function (e) { var n = e.name; return e.enabled && n === t }) } function U(e) { for (var t = [!1, "ms", "Webkit", "Moz", "O"], n = e.charAt(0).toUpperCase() + e.slice(1), i = 0; i < t.length; i++) { var r = t[i], s = r ? "" + r + n : e; if (void 0 !== document.body.style[s]) return s } return null } function j(e) { var t = e.ownerDocument; return t ? t.defaultView : window } function B(e, t, n, i) { n.updateBound = i, j(e).addEventListener("resize", n.updateBound, { passive: !0 }); var r = l(e); return function e(t, n, i, r) { var s = "BODY" === t.nodeName, a = s ? t.ownerDocument.defaultView : t; a.addEventListener(n, i, { passive: !0 }), s || e(l(a.parentNode), n, i, r), r.push(a) }(r, "scroll", n.updateBound, n.scrollParents), n.scrollElement = r, n.eventsEnabled = !0, n } function F() { var e, t; this.state.eventsEnabled && (cancelAnimationFrame(this.scheduleUpdate), this.state = (e = this.reference, t = this.state, j(e).removeEventListener("resize", t.updateBound), t.scrollParents.forEach(function (e) { e.removeEventListener("scroll", t.updateBound) }), t.updateBound = null, t.scrollParents = [], t.scrollElement = null, t.eventsEnabled = !1, t)) } function H(e) { return "" !== e && !isNaN(parseFloat(e)) && isFinite(e) } function q(e, t) { Object.keys(t).forEach(function (n) { var i = ""; -1 !== ["width", "height", "top", "right", "bottom", "left"].indexOf(n) && H(t[n]) && (i = "px"), e.style[n] = t[n] + i }) } var V = n && /Firefox/i.test(navigator.userAgent); function W(e, t, n) { var i = N(e, function (e) { return e.name === t }), r = !!i && e.some(function (e) { return e.name === n && e.enabled && e.order < i.order }); if (!r) { var s = "`" + t + "`", a = "`" + n + "`"; console.warn(a + " modifier is required by " + s + " modifier in order to work, be sure to include it before " + s + "!") } return r } var G = ["auto-start", "auto", "auto-end", "top-start", "top", "top-end", "right-start", "right", "right-end", "bottom-end", "bottom", "bottom-start", "left-end", "left", "left-start"], z = G.slice(3); function K(e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n = z.indexOf(e), i = z.slice(n + 1).concat(z.slice(0, n)); return t ? i.reverse() : i } var X = { FLIP: "flip", CLOCKWISE: "clockwise", COUNTERCLOCKWISE: "counterclockwise" }; function Y(e, t, n, i) { var r = [0, 0], s = -1 !== ["right", "left"].indexOf(i), a = e.split(/(\+|\-)/).map(function (e) { return e.trim() }), o = a.indexOf(N(a, function (e) { return -1 !== e.search(/,|\s/) })); a[o] && -1 === a[o].indexOf(",") && console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead."); var l = /\s*,\s*|\s+/, u = -1 !== o ? [a.slice(0, o).concat([a[o].split(l)[0]]), [a[o].split(l)[1]].concat(a.slice(o + 1))] : [a]; return (u = u.map(function (e, i) { var r = (1 === i ? !s : s) ? "height" : "width", a = !1; return e.reduce(function (e, t) { return "" === e[e.length - 1] && -1 !== ["+", "-"].indexOf(t) ? (e[e.length - 1] = t, a = !0, e) : a ? (e[e.length - 1] += t, a = !1, e) : e.concat(t) }, []).map(function (e) { return function (e, t, n, i) { var r = e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/), s = +r[1], a = r[2]; if (!s) return e; if (0 === a.indexOf("%")) { var o = void 0; switch (a) { case "%p": o = n; break; case "%": case "%r": default: o = i }return C(o)[t] / 100 * s } if ("vh" === a || "vw" === a) return ("vh" === a ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : Math.max(document.documentElement.clientWidth, window.innerWidth || 0)) / 100 * s; return s }(e, r, t, n) }) })).forEach(function (e, t) { e.forEach(function (n, i) { H(n) && (r[t] += n * ("-" === e[i - 1] ? -1 : 1)) }) }), r } var $ = { placement: "bottom", positionFixed: !1, eventsEnabled: !0, removeOnDestroy: !1, onCreate: function () { }, onUpdate: function () { }, modifiers: { shift: { order: 100, enabled: !0, fn: function (e) { var t = e.placement, n = t.split("-")[0], i = t.split("-")[1]; if (i) { var r = e.offsets, s = r.reference, a = r.popper, o = -1 !== ["bottom", "top"].indexOf(n), l = o ? "left" : "top", u = o ? "width" : "height", c = { start: S({}, l, s[l]), end: S({}, l, s[l] + s[u] - a[u]) }; e.offsets.popper = E({}, a, c[i]) } return e } }, offset: { order: 200, enabled: !0, fn: function (e, t) { var n = t.offset, i = e.placement, r = e.offsets, s = r.popper, a = r.reference, o = i.split("-")[0], l = void 0; return l = H(+n) ? [+n, 0] : Y(n, s, a, o), "left" === o ? (s.top += l[0], s.left -= l[1]) : "right" === o ? (s.top += l[0], s.left += l[1]) : "top" === o ? (s.left += l[0], s.top -= l[1]) : "bottom" === o && (s.left += l[0], s.top += l[1]), e.popper = s, e }, offset: 0 }, preventOverflow: { order: 300, enabled: !0, fn: function (e, t) { var n = t.boundariesElement || f(e.instance.popper); e.instance.reference === n && (n = f(n)); var i = U("transform"), r = e.instance.popper.style, s = r.top, a = r.left, o = r[i]; r.top = "", r.left = "", r[i] = ""; var l = x(e.instance.popper, e.instance.reference, t.padding, n, e.positionFixed); r.top = s, r.left = a, r[i] = o, t.boundaries = l; var u = t.priority, c = e.offsets.popper, h = { primary: function (e) { var n = c[e]; return c[e] < l[e] && !t.escapeWithReference && (n = Math.max(c[e], l[e])), S({}, e, n) }, secondary: function (e) { var n = "right" === e ? "left" : "top", i = c[n]; return c[e] > l[e] && !t.escapeWithReference && (i = Math.min(c[n], l[e] - ("right" === e ? c.width : c.height))), S({}, n, i) } }; return u.forEach(function (e) { var t = -1 !== ["left", "top"].indexOf(e) ? "primary" : "secondary"; c = E({}, c, h[t](e)) }), e.offsets.popper = c, e }, priority: ["left", "right", "top", "bottom"], padding: 5, boundariesElement: "scrollParent" }, keepTogether: { order: 400, enabled: !0, fn: function (e) { var t = e.offsets, n = t.popper, i = t.reference, r = e.placement.split("-")[0], s = Math.floor, a = -1 !== ["top", "bottom"].indexOf(r), o = a ? "right" : "bottom", l = a ? "left" : "top", u = a ? "width" : "height"; return n[o] < s(i[l]) && (e.offsets.popper[l] = s(i[l]) - n[u]), n[l] > s(i[o]) && (e.offsets.popper[l] = s(i[o])), e } }, arrow: { order: 500, enabled: !0, fn: function (e, t) { var n; if (!W(e.instance.modifiers, "arrow", "keepTogether")) return e; var i = t.element; if ("string" == typeof i) { if (!(i = e.instance.popper.querySelector(i))) return e } else if (!e.instance.popper.contains(i)) return console.warn("WARNING: `arrow.element` must be child of its popper element!"), e; var r = e.placement.split("-")[0], s = e.offsets, o = s.popper, l = s.reference, u = -1 !== ["left", "right"].indexOf(r), c = u ? "height" : "width", h = u ? "Top" : "Left", d = h.toLowerCase(), f = u ? "left" : "top", p = u ? "bottom" : "right", m = D(i)[c]; l[p] - m < o[d] && (e.offsets.popper[d] -= o[d] - (l[p] - m)), l[d] + m > o[p] && (e.offsets.popper[d] += l[d] + m - o[p]), e.offsets.popper = C(e.offsets.popper); var g = l[d] + l[c] / 2 - m / 2, v = a(e.instance.popper), y = parseFloat(v["margin" + h], 10), _ = parseFloat(v["border" + h + "Width"], 10), b = g - e.offsets.popper[d] - y - _; return b = Math.max(Math.min(o[c] - m, b), 0), e.arrowElement = i, e.offsets.arrow = (S(n = {}, d, Math.round(b)), S(n, f, ""), n), e }, element: "[x-arrow]" }, flip: { order: 600, enabled: !0, fn: function (e, t) { if (M(e.instance.modifiers, "inner")) return e; if (e.flipped && e.placement === e.originalPlacement) return e; var n = x(e.instance.popper, e.instance.reference, t.padding, t.boundariesElement, e.positionFixed), i = e.placement.split("-")[0], r = L(i), s = e.placement.split("-")[1] || "", a = []; switch (t.behavior) { case X.FLIP: a = [i, r]; break; case X.CLOCKWISE: a = K(i); break; case X.COUNTERCLOCKWISE: a = K(i, !0); break; default: a = t.behavior }return a.forEach(function (o, l) { if (i !== o || a.length === l + 1) return e; i = e.placement.split("-")[0], r = L(i); var u = e.offsets.popper, c = e.offsets.reference, h = Math.floor, d = "left" === i && h(u.right) > h(c.left) || "right" === i && h(u.left) < h(c.right) || "top" === i && h(u.bottom) > h(c.top) || "bottom" === i && h(u.top) < h(c.bottom), f = h(u.left) < h(n.left), p = h(u.right) > h(n.right), m = h(u.top) < h(n.top), g = h(u.bottom) > h(n.bottom), v = "left" === i && f || "right" === i && p || "top" === i && m || "bottom" === i && g, y = -1 !== ["top", "bottom"].indexOf(i), _ = !!t.flipVariations && (y && "start" === s && f || y && "end" === s && p || !y && "start" === s && m || !y && "end" === s && g), b = !!t.flipVariationsByContent && (y && "start" === s && p || y && "end" === s && f || !y && "start" === s && g || !y && "end" === s && m), T = _ || b; (d || v || T) && (e.flipped = !0, (d || v) && (i = a[l + 1]), T && (s = function (e) { return "end" === e ? "start" : "start" === e ? "end" : e }(s)), e.placement = i + (s ? "-" + s : ""), e.offsets.popper = E({}, e.offsets.popper, P(e.instance.popper, e.offsets.reference, e.placement)), e = R(e.instance.modifiers, e, "flip")) }), e }, behavior: "flip", padding: 5, boundariesElement: "viewport", flipVariations: !1, flipVariationsByContent: !1 }, inner: { order: 700, enabled: !1, fn: function (e) { var t = e.placement, n = t.split("-")[0], i = e.offsets, r = i.popper, s = i.reference, a = -1 !== ["left", "right"].indexOf(n), o = -1 === ["top", "left"].indexOf(n); return r[a ? "left" : "top"] = s[n] - (o ? r[a ? "width" : "height"] : 0), e.placement = L(t), e.offsets.popper = C(r), e } }, hide: { order: 800, enabled: !0, fn: function (e) { if (!W(e.instance.modifiers, "hide", "preventOverflow")) return e; var t = e.offsets.reference, n = N(e.instance.modifiers, function (e) { return "preventOverflow" === e.name }).boundaries; if (t.bottom < n.top || t.left > n.right || t.top > n.bottom || t.right < n.left) { if (!0 === e.hide) return e; e.hide = !0, e.attributes["x-out-of-boundaries"] = "" } else { if (!1 === e.hide) return e; e.hide = !1, e.attributes["x-out-of-boundaries"] = !1 } return e } }, computeStyle: { order: 850, enabled: !0, fn: function (e, t) { var n = t.x, i = t.y, r = e.offsets.popper, s = N(e.instance.modifiers, function (e) { return "applyStyle" === e.name }).gpuAcceleration; void 0 !== s && console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!"); var a = void 0 !== s ? s : t.gpuAcceleration, o = f(e.instance.popper), l = w(o), u = { position: r.position }, c = function (e, t) { var n = e.offsets, i = n.popper, r = n.reference, s = Math.round, a = Math.floor, o = function (e) { return e }, l = s(r.width), u = s(i.width), c = -1 !== ["left", "right"].indexOf(e.placement), h = -1 !== e.placement.indexOf("-"), d = t ? c || h || l % 2 == u % 2 ? s : a : o, f = t ? s : o; return { left: d(l % 2 == 1 && u % 2 == 1 && !h && t ? i.left - 1 : i.left), top: f(i.top), bottom: f(i.bottom), right: d(i.right) } }(e, window.devicePixelRatio < 2 || !V), h = "bottom" === n ? "top" : "bottom", d = "right" === i ? "left" : "right", p = U("transform"), m = void 0, g = void 0; if (g = "bottom" === h ? "HTML" === o.nodeName ? -o.clientHeight + c.bottom : -l.height + c.bottom : c.top, m = "right" === d ? "HTML" === o.nodeName ? -o.clientWidth + c.right : -l.width + c.right : c.left, a && p) u[p] = "translate3d(" + m + "px, " + g + "px, 0)", u[h] = 0, u[d] = 0, u.willChange = "transform"; else { var v = "bottom" === h ? -1 : 1, y = "right" === d ? -1 : 1; u[h] = g * v, u[d] = m * y, u.willChange = h + ", " + d } var _ = { "x-placement": e.placement }; return e.attributes = E({}, _, e.attributes), e.styles = E({}, u, e.styles), e.arrowStyles = E({}, e.offsets.arrow, e.arrowStyles), e }, gpuAcceleration: !0, x: "bottom", y: "right" }, applyStyle: { order: 900, enabled: !0, fn: function (e) { var t, n; return q(e.instance.popper, e.styles), t = e.instance.popper, n = e.attributes, Object.keys(n).forEach(function (e) { !1 !== n[e] ? t.setAttribute(e, n[e]) : t.removeAttribute(e) }), e.arrowElement && Object.keys(e.arrowStyles).length && q(e.arrowElement, e.arrowStyles), e }, onLoad: function (e, t, n, i, r) { var s = O(r, t, e, n.positionFixed), a = I(n.placement, s, t, e, n.modifiers.flip.boundariesElement, n.modifiers.flip.padding); return t.setAttribute("x-placement", a), q(t, { position: n.positionFixed ? "fixed" : "absolute" }), n }, gpuAcceleration: void 0 } } }, Q = function () { function e(t, n) { var i = this, a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; b(this, e), this.scheduleUpdate = function () { return requestAnimationFrame(i.update) }, this.update = r(this.update.bind(this)), this.options = E({}, e.Defaults, a), this.state = { isDestroyed: !1, isCreated: !1, scrollParents: [] }, this.reference = t && t.jquery ? t[0] : t, this.popper = n && n.jquery ? n[0] : n, this.options.modifiers = {}, Object.keys(E({}, e.Defaults.modifiers, a.modifiers)).forEach(function (t) { i.options.modifiers[t] = E({}, e.Defaults.modifiers[t] || {}, a.modifiers ? a.modifiers[t] : {}) }), this.modifiers = Object.keys(this.options.modifiers).map(function (e) { return E({ name: e }, i.options.modifiers[e]) }).sort(function (e, t) { return e.order - t.order }), this.modifiers.forEach(function (e) { e.enabled && s(e.onLoad) && e.onLoad(i.reference, i.popper, i.options, e, i.state) }), this.update(); var o = this.options.eventsEnabled; o && this.enableEventListeners(), this.state.eventsEnabled = o } return T(e, [{ key: "update", value: function () { return function () { if (!this.state.isDestroyed) { var e = { instance: this, styles: {}, arrowStyles: {}, attributes: {}, flipped: !1, offsets: {} }; e.offsets.reference = O(this.state, this.popper, this.reference, this.options.positionFixed), e.placement = I(this.options.placement, e.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding), e.originalPlacement = e.placement, e.positionFixed = this.options.positionFixed, e.offsets.popper = P(this.popper, e.offsets.reference, e.placement), e.offsets.popper.position = this.options.positionFixed ? "fixed" : "absolute", e = R(this.modifiers, e), this.state.isCreated ? this.options.onUpdate(e) : (this.state.isCreated = !0, this.options.onCreate(e)) } }.call(this) } }, { key: "destroy", value: function () { return function () { return this.state.isDestroyed = !0, M(this.modifiers, "applyStyle") && (this.popper.removeAttribute("x-placement"), this.popper.style.position = "", this.popper.style.top = "", this.popper.style.left = "", this.popper.style.right = "", this.popper.style.bottom = "", this.popper.style.willChange = "", this.popper.style[U("transform")] = ""), this.disableEventListeners(), this.options.removeOnDestroy && this.popper.parentNode.removeChild(this.popper), this }.call(this) } }, { key: "enableEventListeners", value: function () { return function () { this.state.eventsEnabled || (this.state = B(this.reference, this.options, this.state, this.scheduleUpdate)) }.call(this) } }, { key: "disableEventListeners", value: function () { return F.call(this) } }]), e }(); Q.Utils = ("undefined" != typeof window ? window : e).PopperUtils, Q.placements = G, Q.Defaults = $, t.default = Q
    }.call(this, n("yLpj"))
  }, "8OJ3": function (e, t, n) {
    "use strict"; var i = n("vgmO"), r = n.n(i), s = n("7zRj"), a = n.n(s), o = n("jBAH"), l = n.n(o), u = n("3zPy"), c = n.n(u), h = n("7sdD"), d = n.n(h), f = n("K4wu"), p = n.n(f), m = n("0Tbm"), g = n.n(m);
    /*! @name m3u8-parser @version 4.4.0 @license Apache-2.0 */
    function v() { return (v = Object.assign || function (e) { for (var t = 1; t < arguments.length; t++) { var n = arguments[t]; for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]) } return e }).apply(this, arguments) } function y(e, t) { e.prototype = Object.create(t.prototype), e.prototype.constructor = e, e.__proto__ = t } var _ = function () { function e() { this.listeners = {} } var t = e.prototype; return t.on = function (e, t) { this.listeners[e] || (this.listeners[e] = []), this.listeners[e].push(t) }, t.off = function (e, t) { if (!this.listeners[e]) return !1; var n = this.listeners[e].indexOf(t); return this.listeners[e].splice(n, 1), n > -1 }, t.trigger = function (e) { var t, n, i, r = this.listeners[e]; if (r) if (2 === arguments.length) for (n = r.length, t = 0; t < n; ++t)r[t].call(this, arguments[1]); else for (i = Array.prototype.slice.call(arguments, 1), n = r.length, t = 0; t < n; ++t)r[t].apply(this, i) }, t.dispose = function () { this.listeners = {} }, t.pipe = function (e) { this.on("data", function (t) { e.push(t) }) }, e }(), b = function (e) { function t() { var t; return (t = e.call(this) || this).buffer = "", t } return y(t, e), t.prototype.push = function (e) { var t; for (this.buffer += e, t = this.buffer.indexOf("\n"); t > -1; t = this.buffer.indexOf("\n"))this.trigger("data", this.buffer.substring(0, t)), this.buffer = this.buffer.substring(t + 1) }, t }(_), T = function (e) { for (var t, n = e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')), i = {}, r = n.length; r--;)"" !== n[r] && ((t = /([^=]*)=(.*)/.exec(n[r]).slice(1))[0] = t[0].replace(/^\s+|\s+$/g, ""), t[1] = t[1].replace(/^\s+|\s+$/g, ""), t[1] = t[1].replace(/^['"](.*)['"]$/g, "$1"), i[t[0]] = t[1]); return i }, S = function (e) { function t() { var t; return (t = e.call(this) || this).customParsers = [], t.tagMappers = [], t } y(t, e); var n = t.prototype; return n.push = function (e) { var t, n, i = this; 0 !== (e = e.trim()).length && ("#" === e[0] ? this.tagMappers.reduce(function (t, n) { var i = n(e); return i === e ? t : t.concat([i]) }, [e]).forEach(function (e) { for (var r = 0; r < i.customParsers.length; r++)if (i.customParsers[r].call(i, e)) return; if (0 === e.indexOf("#EXT")) if (e = e.replace("\r", ""), t = /^#EXTM3U/.exec(e)) i.trigger("data", { type: "tag", tagType: "m3u" }); else { if (t = /^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e)) return n = { type: "tag", tagType: "inf" }, t[1] && (n.duration = parseFloat(t[1])), t[2] && (n.title = t[2]), void i.trigger("data", n); if (t = /^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e)) return n = { type: "tag", tagType: "targetduration" }, t[1] && (n.duration = parseInt(t[1], 10)), void i.trigger("data", n); if (t = /^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e)) return n = { type: "tag", tagType: "totalduration" }, t[1] && (n.duration = parseInt(t[1], 10)), void i.trigger("data", n); if (t = /^#EXT-X-VERSION:?([0-9.]*)?/.exec(e)) return n = { type: "tag", tagType: "version" }, t[1] && (n.version = parseInt(t[1], 10)), void i.trigger("data", n); if (t = /^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e)) return n = { type: "tag", tagType: "media-sequence" }, t[1] && (n.number = parseInt(t[1], 10)), void i.trigger("data", n); if (t = /^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e)) return n = { type: "tag", tagType: "discontinuity-sequence" }, t[1] && (n.number = parseInt(t[1], 10)), void i.trigger("data", n); if (t = /^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e)) return n = { type: "tag", tagType: "playlist-type" }, t[1] && (n.playlistType = t[1]), void i.trigger("data", n); if (t = /^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e)) return n = { type: "tag", tagType: "byterange" }, t[1] && (n.length = parseInt(t[1], 10)), t[2] && (n.offset = parseInt(t[2], 10)), void i.trigger("data", n); if (t = /^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e)) return n = { type: "tag", tagType: "allow-cache" }, t[1] && (n.allowed = !/NO/.test(t[1])), void i.trigger("data", n); if (t = /^#EXT-X-MAP:?(.*)$/.exec(e)) { if (n = { type: "tag", tagType: "map" }, t[1]) { var s = T(t[1]); if (s.URI && (n.uri = s.URI), s.BYTERANGE) { var a = s.BYTERANGE.split("@"), o = a[0], l = a[1]; n.byterange = {}, o && (n.byterange.length = parseInt(o, 10)), l && (n.byterange.offset = parseInt(l, 10)) } } i.trigger("data", n) } else if (t = /^#EXT-X-STREAM-INF:?(.*)$/.exec(e)) { if (n = { type: "tag", tagType: "stream-inf" }, t[1]) { if (n.attributes = T(t[1]), n.attributes.RESOLUTION) { var u = n.attributes.RESOLUTION.split("x"), c = {}; u[0] && (c.width = parseInt(u[0], 10)), u[1] && (c.height = parseInt(u[1], 10)), n.attributes.RESOLUTION = c } n.attributes.BANDWIDTH && (n.attributes.BANDWIDTH = parseInt(n.attributes.BANDWIDTH, 10)), n.attributes["PROGRAM-ID"] && (n.attributes["PROGRAM-ID"] = parseInt(n.attributes["PROGRAM-ID"], 10)) } i.trigger("data", n) } else { if (t = /^#EXT-X-MEDIA:?(.*)$/.exec(e)) return n = { type: "tag", tagType: "media" }, t[1] && (n.attributes = T(t[1])), void i.trigger("data", n); if (t = /^#EXT-X-ENDLIST/.exec(e)) i.trigger("data", { type: "tag", tagType: "endlist" }); else if (t = /^#EXT-X-DISCONTINUITY/.exec(e)) i.trigger("data", { type: "tag", tagType: "discontinuity" }); else { if (t = /^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e)) return n = { type: "tag", tagType: "program-date-time" }, t[1] && (n.dateTimeString = t[1], n.dateTimeObject = new Date(t[1])), void i.trigger("data", n); if (t = /^#EXT-X-KEY:?(.*)$/.exec(e)) return n = { type: "tag", tagType: "key" }, t[1] && (n.attributes = T(t[1]), n.attributes.IV && ("0x" === n.attributes.IV.substring(0, 2).toLowerCase() && (n.attributes.IV = n.attributes.IV.substring(2)), n.attributes.IV = n.attributes.IV.match(/.{8}/g), n.attributes.IV[0] = parseInt(n.attributes.IV[0], 16), n.attributes.IV[1] = parseInt(n.attributes.IV[1], 16), n.attributes.IV[2] = parseInt(n.attributes.IV[2], 16), n.attributes.IV[3] = parseInt(n.attributes.IV[3], 16), n.attributes.IV = new Uint32Array(n.attributes.IV))), void i.trigger("data", n); if (t = /^#EXT-X-START:?(.*)$/.exec(e)) return n = { type: "tag", tagType: "start" }, t[1] && (n.attributes = T(t[1]), n.attributes["TIME-OFFSET"] = parseFloat(n.attributes["TIME-OFFSET"]), n.attributes.PRECISE = /YES/.test(n.attributes.PRECISE)), void i.trigger("data", n); if (t = /^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e)) return n = { type: "tag", tagType: "cue-out-cont" }, t[1] ? n.data = t[1] : n.data = "", void i.trigger("data", n); if (t = /^#EXT-X-CUE-OUT:?(.*)?$/.exec(e)) return n = { type: "tag", tagType: "cue-out" }, t[1] ? n.data = t[1] : n.data = "", void i.trigger("data", n); if (t = /^#EXT-X-CUE-IN:?(.*)?$/.exec(e)) return n = { type: "tag", tagType: "cue-in" }, t[1] ? n.data = t[1] : n.data = "", void i.trigger("data", n); i.trigger("data", { type: "tag", data: e.slice(4) }) } } } else i.trigger("data", { type: "comment", text: e.slice(1) }) }) : this.trigger("data", { type: "uri", uri: e })) }, n.addParser = function (e) { var t = this, n = e.expression, i = e.customType, r = e.dataParser, s = e.segment; "function" != typeof r && (r = function (e) { return e }), this.customParsers.push(function (e) { if (n.exec(e)) return t.trigger("data", { type: "custom", data: r(e), customType: i, segment: s }), !0 }) }, n.addTagMapper = function (e) { var t = e.expression, n = e.map; this.tagMappers.push(function (e) { return t.test(e) ? n(e) : e }) }, t }(_); function E(e) { for (var t = r.a.atob(e || ""), n = new Uint8Array(t.length), i = 0; i < t.length; i++)n[i] = t.charCodeAt(i); return n } var C = function (e) { function t() { var t; (t = e.call(this) || this).lineStream = new b, t.parseStream = new S, t.lineStream.pipe(t.parseStream); var n, i, r = function (e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e }(t), s = [], a = {}, o = { AUDIO: {}, VIDEO: {}, "CLOSED-CAPTIONS": {}, SUBTITLES: {} }, l = 0; return t.manifest = { allowCache: !0, discontinuityStarts: [], segments: [] }, t.parseStream.on("data", function (e) { var t, u; ({ tag: function () { ({ "allow-cache": function () { this.manifest.allowCache = e.allowed, "allowed" in e || (this.trigger("info", { message: "defaulting allowCache to YES" }), this.manifest.allowCache = !0) }, byterange: function () { var t = {}; "length" in e && (a.byterange = t, t.length = e.length, "offset" in e || (this.trigger("info", { message: "defaulting offset to zero" }), e.offset = 0)), "offset" in e && (a.byterange = t, t.offset = e.offset) }, endlist: function () { this.manifest.endList = !0 }, inf: function () { "mediaSequence" in this.manifest || (this.manifest.mediaSequence = 0, this.trigger("info", { message: "defaulting media sequence to zero" })), "discontinuitySequence" in this.manifest || (this.manifest.discontinuitySequence = 0, this.trigger("info", { message: "defaulting discontinuity sequence to zero" })), e.duration > 0 && (a.duration = e.duration), 0 === e.duration && (a.duration = .01, this.trigger("info", { message: "updating zero segment duration to a small value" })), this.manifest.segments = s }, key: function () { if (e.attributes) if ("NONE" !== e.attributes.METHOD) if (e.attributes.URI) { if ("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed" === e.attributes.KEYFORMAT) { return -1 === ["SAMPLE-AES", "SAMPLE-AES-CTR", "SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD) ? void this.trigger("warn", { message: "invalid key method provided for Widevine" }) : ("SAMPLE-AES-CENC" === e.attributes.METHOD && this.trigger("warn", { message: "SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead" }), "data:text/plain;base64," !== e.attributes.URI.substring(0, 23) ? void this.trigger("warn", { message: "invalid key URI provided for Widevine" }) : e.attributes.KEYID && "0x" === e.attributes.KEYID.substring(0, 2) ? void (this.manifest.contentProtection = { "com.widevine.alpha": { attributes: { schemeIdUri: e.attributes.KEYFORMAT, keyId: e.attributes.KEYID.substring(2) }, pssh: E(e.attributes.URI.split(",")[1]) } }) : void this.trigger("warn", { message: "invalid key ID provided for Widevine" })) } e.attributes.METHOD || this.trigger("warn", { message: "defaulting key method to AES-128" }), i = { method: e.attributes.METHOD || "AES-128", uri: e.attributes.URI }, void 0 !== e.attributes.IV && (i.iv = e.attributes.IV) } else this.trigger("warn", { message: "ignoring key declaration without URI" }); else i = null; else this.trigger("warn", { message: "ignoring key declaration without attribute list" }) }, "media-sequence": function () { isFinite(e.number) ? this.manifest.mediaSequence = e.number : this.trigger("warn", { message: "ignoring invalid media sequence: " + e.number }) }, "discontinuity-sequence": function () { isFinite(e.number) ? (this.manifest.discontinuitySequence = e.number, l = e.number) : this.trigger("warn", { message: "ignoring invalid discontinuity sequence: " + e.number }) }, "playlist-type": function () { /VOD|EVENT/.test(e.playlistType) ? this.manifest.playlistType = e.playlistType : this.trigger("warn", { message: "ignoring unknown playlist type: " + e.playlist }) }, map: function () { n = {}, e.uri && (n.uri = e.uri), e.byterange && (n.byterange = e.byterange) }, "stream-inf": function () { this.manifest.playlists = s, this.manifest.mediaGroups = this.manifest.mediaGroups || o, e.attributes ? (a.attributes || (a.attributes = {}), v(a.attributes, e.attributes)) : this.trigger("warn", { message: "ignoring empty stream-inf attributes" }) }, media: function () { if (this.manifest.mediaGroups = this.manifest.mediaGroups || o, e.attributes && e.attributes.TYPE && e.attributes["GROUP-ID"] && e.attributes.NAME) { var n = this.manifest.mediaGroups[e.attributes.TYPE]; n[e.attributes["GROUP-ID"]] = n[e.attributes["GROUP-ID"]] || {}, t = n[e.attributes["GROUP-ID"]], (u = { default: /yes/i.test(e.attributes.DEFAULT) }).default ? u.autoselect = !0 : u.autoselect = /yes/i.test(e.attributes.AUTOSELECT), e.attributes.LANGUAGE && (u.language = e.attributes.LANGUAGE), e.attributes.URI && (u.uri = e.attributes.URI), e.attributes["INSTREAM-ID"] && (u.instreamId = e.attributes["INSTREAM-ID"]), e.attributes.CHARACTERISTICS && (u.characteristics = e.attributes.CHARACTERISTICS), e.attributes.FORCED && (u.forced = /yes/i.test(e.attributes.FORCED)), t[e.attributes.NAME] = u } else this.trigger("warn", { message: "ignoring incomplete or missing media group" }) }, discontinuity: function () { l += 1, a.discontinuity = !0, this.manifest.discontinuityStarts.push(s.length) }, "program-date-time": function () { void 0 === this.manifest.dateTimeString && (this.manifest.dateTimeString = e.dateTimeString, this.manifest.dateTimeObject = e.dateTimeObject), a.dateTimeString = e.dateTimeString, a.dateTimeObject = e.dateTimeObject }, targetduration: function () { !isFinite(e.duration) || e.duration < 0 ? this.trigger("warn", { message: "ignoring invalid target duration: " + e.duration }) : this.manifest.targetDuration = e.duration }, totalduration: function () { !isFinite(e.duration) || e.duration < 0 ? this.trigger("warn", { message: "ignoring invalid total duration: " + e.duration }) : this.manifest.totalDuration = e.duration }, start: function () { e.attributes && !isNaN(e.attributes["TIME-OFFSET"]) ? this.manifest.start = { timeOffset: e.attributes["TIME-OFFSET"], precise: e.attributes.PRECISE } : this.trigger("warn", { message: "ignoring start declaration without appropriate attribute list" }) }, "cue-out": function () { a.cueOut = e.data }, "cue-out-cont": function () { a.cueOutCont = e.data }, "cue-in": function () { a.cueIn = e.data } }[e.tagType] || function () { }).call(r) }, uri: function () { a.uri = e.uri, s.push(a), !this.manifest.targetDuration || "duration" in a || (this.trigger("warn", { message: "defaulting segment duration to the target duration" }), a.duration = this.manifest.targetDuration), i && (a.key = i), a.timeline = l, n && (a.map = n), a = {} }, comment: function () { }, custom: function () { e.segment ? (a.custom = a.custom || {}, a.custom[e.customType] = e.data) : (this.manifest.custom = this.manifest.custom || {}, this.manifest.custom[e.customType] = e.data) } })[e.type].call(r) }), t } y(t, e); var n = t.prototype; return n.push = function (e) { this.lineStream.push(e) }, n.end = function () { this.lineStream.push("\n") }, n.addParser = function (e) { this.parseStream.addParser(e) }, n.addTagMapper = function (e) { this.parseStream.addTagMapper(e) }, t }(_), w = n("hIRe"), k = n("mvqA"), A = n.n(k), x = n("KAYj"), I = n.n(x), O = n("qOD0"), D = n.n(O), L = n("3D7k"), P = n.n(L); var N = function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }, R = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } return function (t, n, i) { return n && e(t.prototype, n), i && e(t, i), t } }(), M = function (e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }, U = function () { var e = [[[], [], [], [], []], [[], [], [], [], []]], t = e[0], n = e[1], i = t[4], r = n[4], s = void 0, a = void 0, o = void 0, l = [], u = [], c = void 0, h = void 0, d = void 0, f = void 0, p = void 0; for (s = 0; s < 256; s++)u[(l[s] = s << 1 ^ 283 * (s >> 7)) ^ s] = s; for (a = o = 0; !i[a]; a ^= c || 1, o = u[o] || 1)for (d = (d = o ^ o << 1 ^ o << 2 ^ o << 3 ^ o << 4) >> 8 ^ 255 & d ^ 99, i[a] = d, r[d] = a, p = 16843009 * l[h = l[c = l[a]]] ^ 65537 * h ^ 257 * c ^ 16843008 * a, f = 257 * l[d] ^ 16843008 * d, s = 0; s < 4; s++)t[s][a] = f = f << 24 ^ f >>> 8, n[s][d] = p = p << 24 ^ p >>> 8; for (s = 0; s < 5; s++)t[s] = t[s].slice(0), n[s] = n[s].slice(0); return e }, j = null, B = function () { function e(t) { N(this, e), j || (j = U()), this._tables = [[j[0][0].slice(), j[0][1].slice(), j[0][2].slice(), j[0][3].slice(), j[0][4].slice()], [j[1][0].slice(), j[1][1].slice(), j[1][2].slice(), j[1][3].slice(), j[1][4].slice()]]; var n = void 0, i = void 0, r = void 0, s = void 0, a = void 0, o = this._tables[0][4], l = this._tables[1], u = t.length, c = 1; if (4 !== u && 6 !== u && 8 !== u) throw new Error("Invalid aes key size"); for (s = t.slice(0), a = [], this._key = [s, a], n = u; n < 4 * u + 28; n++)r = s[n - 1], (n % u == 0 || 8 === u && n % u == 4) && (r = o[r >>> 24] << 24 ^ o[r >> 16 & 255] << 16 ^ o[r >> 8 & 255] << 8 ^ o[255 & r], n % u == 0 && (r = r << 8 ^ r >>> 24 ^ c << 24, c = c << 1 ^ 283 * (c >> 7))), s[n] = s[n - u] ^ r; for (i = 0; n; i++, n--)r = s[3 & i ? n : n - 4], a[i] = n <= 4 || i < 4 ? r : l[0][o[r >>> 24]] ^ l[1][o[r >> 16 & 255]] ^ l[2][o[r >> 8 & 255]] ^ l[3][o[255 & r]] } return e.prototype.decrypt = function (e, t, n, i, r, s) { var a = this._key[1], o = e ^ a[0], l = i ^ a[1], u = n ^ a[2], c = t ^ a[3], h = void 0, d = void 0, f = void 0, p = a.length / 4 - 2, m = void 0, g = 4, v = this._tables[1], y = v[0], _ = v[1], b = v[2], T = v[3], S = v[4]; for (m = 0; m < p; m++)h = y[o >>> 24] ^ _[l >> 16 & 255] ^ b[u >> 8 & 255] ^ T[255 & c] ^ a[g], d = y[l >>> 24] ^ _[u >> 16 & 255] ^ b[c >> 8 & 255] ^ T[255 & o] ^ a[g + 1], f = y[u >>> 24] ^ _[c >> 16 & 255] ^ b[o >> 8 & 255] ^ T[255 & l] ^ a[g + 2], c = y[c >>> 24] ^ _[o >> 16 & 255] ^ b[l >> 8 & 255] ^ T[255 & u] ^ a[g + 3], g += 4, o = h, l = d, u = f; for (m = 0; m < 4; m++)r[(3 & -m) + s] = S[o >>> 24] << 24 ^ S[l >> 16 & 255] << 16 ^ S[u >> 8 & 255] << 8 ^ S[255 & c] ^ a[g++], h = o, o = l, l = u, u = c, c = h }, e }(), F = function () { function e() { N(this, e), this.listeners = {} } return e.prototype.on = function (e, t) { this.listeners[e] || (this.listeners[e] = []), this.listeners[e].push(t) }, e.prototype.off = function (e, t) { if (!this.listeners[e]) return !1; var n = this.listeners[e].indexOf(t); return this.listeners[e].splice(n, 1), n > -1 }, e.prototype.trigger = function (e) { var t = this.listeners[e]; if (t) if (2 === arguments.length) for (var n = t.length, i = 0; i < n; ++i)t[i].call(this, arguments[1]); else for (var r = Array.prototype.slice.call(arguments, 1), s = t.length, a = 0; a < s; ++a)t[a].apply(this, r) }, e.prototype.dispose = function () { this.listeners = {} }, e.prototype.pipe = function (e) { this.on("data", function (t) { e.push(t) }) }, e }(), H = function (e) { function t() { N(this, t); var n = M(this, e.call(this, F)); return n.jobs = [], n.delay = 1, n.timeout_ = null, n } return function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(t, e), t.prototype.processJob_ = function () { this.jobs.shift()(), this.jobs.length ? this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay) : this.timeout_ = null }, t.prototype.push = function (e) { this.jobs.push(e), this.timeout_ || (this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay)) }, t }(F), q = function (e) { return e << 24 | (65280 & e) << 8 | (16711680 & e) >> 8 | e >>> 24 }, V = function (e, t, n) { var i = new Int32Array(e.buffer, e.byteOffset, e.byteLength >> 2), r = new B(Array.prototype.slice.call(t)), s = new Uint8Array(e.byteLength), a = new Int32Array(s.buffer), o = void 0, l = void 0, u = void 0, c = void 0, h = void 0, d = void 0, f = void 0, p = void 0, m = void 0; for (o = n[0], l = n[1], u = n[2], c = n[3], m = 0; m < i.length; m += 4)h = q(i[m]), d = q(i[m + 1]), f = q(i[m + 2]), p = q(i[m + 3]), r.decrypt(h, d, f, p, a, m), a[m] = q(a[m] ^ o), a[m + 1] = q(a[m + 1] ^ l), a[m + 2] = q(a[m + 2] ^ u), a[m + 3] = q(a[m + 3] ^ c), o = h, l = d, u = f, c = p; return s }, W = function () { function e(t, n, i, r) { N(this, e); var s = e.STEP, a = new Int32Array(t.buffer), o = new Uint8Array(t.byteLength), l = 0; for (this.asyncStream_ = new H, this.asyncStream_.push(this.decryptChunk_(a.subarray(l, l + s), n, i, o)), l = s; l < a.length; l += s)i = new Uint32Array([q(a[l - 4]), q(a[l - 3]), q(a[l - 2]), q(a[l - 1])]), this.asyncStream_.push(this.decryptChunk_(a.subarray(l, l + s), n, i, o)); this.asyncStream_.push(function () { var e; r(null, (e = o).subarray(0, e.byteLength - e[e.byteLength - 1])) }) } return e.prototype.decryptChunk_ = function (e, t, n, i) { return function () { var r = V(e, t, n); i.set(r, e.byteOffset) } }, R(e, null, [{ key: "STEP", get: function () { return 32e3 } }]), e }(), G = "7.6.6", z = [], K = function (e, t) { return function (n, i, s) { var a = t.levels[i], o = new RegExp("^(" + a + ")$"); if ("log" !== n && s.unshift(n.toUpperCase() + ":"), s.unshift(e + ":"), z && z.push([].concat(s)), r.a.console) { var l = r.a.console[n]; l || "debug" !== n || (l = r.a.console.info || r.a.console.log), l && a && o.test(n) && l[Array.isArray(s) ? "apply" : "call"](r.a.console, s) } } }; var X = function e(t) { var n, i = "info", r = function () { for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++)t[r] = arguments[r]; n("log", i, t) }; return n = K(t, r), r.createLogger = function (n) { return e(t + ": " + n) }, r.levels = { all: "debug|log|warn|error", off: "", debug: "debug|log|warn|error", info: "log|warn|error", warn: "warn|error", error: "error", DEFAULT: i }, r.level = function (e) { if ("string" == typeof e) { if (!r.levels.hasOwnProperty(e)) throw new Error('"' + e + '" in not a valid log level'); i = e } return i }, (r.history = function () { return z ? [].concat(z) : [] }).filter = function (e) { return (z || []).filter(function (t) { return new RegExp(".*" + e + ".*").test(t[0]) }) }, r.history.clear = function () { z && (z.length = 0) }, r.history.disable = function () { null !== z && (z.length = 0, z = null) }, r.history.enable = function () { null === z && (z = []) }, r.error = function () { for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++)t[r] = arguments[r]; return n("error", i, t) }, r.warn = function () { for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++)t[r] = arguments[r]; return n("warn", i, t) }, r.debug = function () { for (var e = arguments.length, t = new Array(e), r = 0; r < e; r++)t[r] = arguments[r]; return n("debug", i, t) }, r }("VIDEOJS"), Y = X.createLogger, $ = Object.prototype.toString, Q = function (e) { return ee(e) ? Object.keys(e) : [] }; function J(e, t) { Q(e).forEach(function (n) { return t(e[n], n) }) } function Z(e) { for (var t = arguments.length, n = new Array(t > 1 ? t - 1 : 0), i = 1; i < t; i++)n[i - 1] = arguments[i]; return Object.assign ? Object.assign.apply(Object, [e].concat(n)) : (n.forEach(function (t) { t && J(t, function (t, n) { e[n] = t }) }), e) } function ee(e) { return !!e && "object" == typeof e } function te(e) { return ee(e) && "[object Object]" === $.call(e) && e.constructor === Object } function ne(e, t) { if (!e || !t) return ""; if ("function" == typeof r.a.getComputedStyle) { var n = r.a.getComputedStyle(e); return n ? n.getPropertyValue(t) || n[t] : "" } return "" } function ie(e) { return "string" == typeof e && /\S/.test(e) } function re(e) { if (/\s/.test(e)) throw new Error("class has illegal whitespace characters") } function se() { return a.a === r.a.document } function ae(e) { return ee(e) && 1 === e.nodeType } function oe() { try { return r.a.parent !== r.a.self } catch (e) { return !0 } } function le(e) { return function (t, n) { if (!ie(t)) return a.a[e](null); ie(n) && (n = a.a.querySelector(n)); var i = ae(n) ? n : a.a; return i[e] && i[e](t) } } function ue(e, t, n, i) { void 0 === e && (e = "div"), void 0 === t && (t = {}), void 0 === n && (n = {}); var r = a.a.createElement(e); return Object.getOwnPropertyNames(t).forEach(function (e) { var n = t[e]; -1 !== e.indexOf("aria-") || "role" === e || "type" === e ? (X.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set " + e + " to " + n + "."), r.setAttribute(e, n)) : "textContent" === e ? ce(r, n) : r[e] = n }), Object.getOwnPropertyNames(n).forEach(function (e) { r.setAttribute(e, n[e]) }), i && Ie(r, i), r } function ce(e, t) { return void 0 === e.textContent ? e.innerText = t : e.textContent = t, e } function he(e, t) { t.firstChild ? t.insertBefore(e, t.firstChild) : t.appendChild(e) } function de(e, t) { return re(t), e.classList ? e.classList.contains(t) : (n = t, new RegExp("(^|\\s)" + n + "($|\\s)")).test(e.className); var n } function fe(e, t) { return e.classList ? e.classList.add(t) : de(e, t) || (e.className = (e.className + " " + t).trim()), e } function pe(e, t) { return e.classList ? e.classList.remove(t) : (re(t), e.className = e.className.split(/\s+/).filter(function (e) { return e !== t }).join(" ")), e } function me(e, t, n) { var i = de(e, t); if ("function" == typeof n && (n = n(e, t)), "boolean" != typeof n && (n = !i), n !== i) return n ? fe(e, t) : pe(e, t), e } function ge(e, t) { Object.getOwnPropertyNames(t).forEach(function (n) { var i = t[n]; null == i || !1 === i ? e.removeAttribute(n) : e.setAttribute(n, !0 === i ? "" : i) }) } function ve(e) { var t = {}, n = ",autoplay,controls,playsinline,loop,muted,default,defaultMuted,"; if (e && e.attributes && e.attributes.length > 0) for (var i = e.attributes, r = i.length - 1; r >= 0; r--) { var s = i[r].name, a = i[r].value; "boolean" != typeof e[s] && -1 === n.indexOf("," + s + ",") || (a = null !== a), t[s] = a } return t } function ye(e, t) { return e.getAttribute(t) } function _e(e, t, n) { e.setAttribute(t, n) } function be(e, t) { e.removeAttribute(t) } function Te() { a.a.body.focus(), a.a.onselectstart = function () { return !1 } } function Se() { a.a.onselectstart = function () { return !0 } } function Ee(e) { if (e && e.getBoundingClientRect && e.parentNode) { var t = e.getBoundingClientRect(), n = {}; return ["bottom", "height", "left", "right", "top", "width"].forEach(function (e) { void 0 !== t[e] && (n[e] = t[e]) }), n.height || (n.height = parseFloat(ne(e, "height"))), n.width || (n.width = parseFloat(ne(e, "width"))), n } } function Ce(e) { var t; if (e.getBoundingClientRect && e.parentNode && (t = e.getBoundingClientRect()), !t) return { left: 0, top: 0 }; var n = a.a.documentElement, i = a.a.body, s = n.clientLeft || i.clientLeft || 0, o = r.a.pageXOffset || i.scrollLeft, l = t.left + o - s, u = n.clientTop || i.clientTop || 0, c = r.a.pageYOffset || i.scrollTop, h = t.top + c - u; return { left: Math.round(l), top: Math.round(h) } } function we(e, t) { var n = {}, i = Ce(e), r = e.offsetWidth, s = e.offsetHeight, a = i.top, o = i.left, l = t.pageY, u = t.pageX; return t.changedTouches && (u = t.changedTouches[0].pageX, l = t.changedTouches[0].pageY), n.y = Math.max(0, Math.min(1, (a - l + s) / s)), n.x = Math.max(0, Math.min(1, (u - o) / r)), n } function ke(e) { return ee(e) && 3 === e.nodeType } function Ae(e) { for (; e.firstChild;)e.removeChild(e.firstChild); return e } function xe(e) { return "function" == typeof e && (e = e()), (Array.isArray(e) ? e : [e]).map(function (e) { return "function" == typeof e && (e = e()), ae(e) || ke(e) ? e : "string" == typeof e && /\S/.test(e) ? a.a.createTextNode(e) : void 0 }).filter(function (e) { return e }) } function Ie(e, t) { return xe(t).forEach(function (t) { return e.appendChild(t) }), e } function Oe(e, t) { return Ie(Ae(e), t) } function De(e) { return void 0 === e.button && void 0 === e.buttons || (0 === e.button && void 0 === e.buttons || ("mouseup" === e.type && 0 === e.button && 0 === e.buttons || 0 === e.button && 1 === e.buttons)) } var Le, Pe = le("querySelector"), Ne = le("querySelectorAll"), Re = Object.freeze({ isReal: se, isEl: ae, isInFrame: oe, createEl: ue, textContent: ce, prependTo: he, hasClass: de, addClass: fe, removeClass: pe, toggleClass: me, setAttributes: ge, getAttributes: ve, getAttribute: ye, setAttribute: _e, removeAttribute: be, blockTextSelection: Te, unblockTextSelection: Se, getBoundingClientRect: Ee, findPosition: Ce, getPointerPosition: we, isTextNode: ke, emptyEl: Ae, normalizeContent: xe, appendContent: Ie, insertContent: Oe, isSingleLeftClick: De, $: Pe, $$: Ne }), Me = !1, Ue = function () { if (se() && !1 !== Le.options.autoSetup) { var e = Array.prototype.slice.call(a.a.getElementsByTagName("video")), t = Array.prototype.slice.call(a.a.getElementsByTagName("audio")), n = Array.prototype.slice.call(a.a.getElementsByTagName("video-js")), i = e.concat(t, n); if (i && i.length > 0) for (var r = 0, s = i.length; r < s; r++) { var o = i[r]; if (!o || !o.getAttribute) { je(1); break } void 0 === o.player && null !== o.getAttribute("data-setup") && Le(o) } else Me || je(1) } }; function je(e, t) { t && (Le = t), r.a.setTimeout(Ue, e) } function Be() { Me = !0, r.a.removeEventListener("load", Be) } se() && ("complete" === a.a.readyState ? Be() : r.a.addEventListener("load", Be)); var Fe, He = function (e) { var t = a.a.createElement("style"); return t.className = e, t }, qe = function (e, t) { e.styleSheet ? e.styleSheet.cssText = t : e.textContent = t }, Ve = 3; function We() { return Ve++ } r.a.WeakMap || (Fe = function () { function e() { this.vdata = "vdata" + Math.floor(r.a.performance && r.a.performance.now() || Date.now()), this.data = {} } var t = e.prototype; return t.set = function (e, t) { var n = e[this.vdata] || We(); return e[this.vdata] || (e[this.vdata] = n), this.data[n] = t, this }, t.get = function (e) { var t = e[this.vdata]; if (t) return this.data[t]; X("We have no data for this element", e) }, t.has = function (e) { return e[this.vdata] in this.data }, t.delete = function (e) { var t = e[this.vdata]; t && (delete this.data[t], delete e[this.vdata]) }, e }()); var Ge = r.a.WeakMap ? new WeakMap : new Fe; function ze(e, t) { if (Ge.has(e)) { var n = Ge.get(e); 0 === n.handlers[t].length && (delete n.handlers[t], e.removeEventListener ? e.removeEventListener(t, n.dispatcher, !1) : e.detachEvent && e.detachEvent("on" + t, n.dispatcher)), Object.getOwnPropertyNames(n.handlers).length <= 0 && (delete n.handlers, delete n.dispatcher, delete n.disabled), 0 === Object.getOwnPropertyNames(n).length && Ge.delete(e) } } function Ke(e, t, n, i) { n.forEach(function (n) { e(t, n, i) }) } function Xe(e) { function t() { return !0 } function n() { return !1 } if (!e || !e.isPropagationStopped) { var i = e || r.a.event; for (var s in e = {}, i) "layerX" !== s && "layerY" !== s && "keyLocation" !== s && "webkitMovementX" !== s && "webkitMovementY" !== s && ("returnValue" === s && i.preventDefault || (e[s] = i[s])); if (e.target || (e.target = e.srcElement || a.a), e.relatedTarget || (e.relatedTarget = e.fromElement === e.target ? e.toElement : e.fromElement), e.preventDefault = function () { i.preventDefault && i.preventDefault(), e.returnValue = !1, i.returnValue = !1, e.defaultPrevented = !0 }, e.defaultPrevented = !1, e.stopPropagation = function () { i.stopPropagation && i.stopPropagation(), e.cancelBubble = !0, i.cancelBubble = !0, e.isPropagationStopped = t }, e.isPropagationStopped = n, e.stopImmediatePropagation = function () { i.stopImmediatePropagation && i.stopImmediatePropagation(), e.isImmediatePropagationStopped = t, e.stopPropagation() }, e.isImmediatePropagationStopped = n, null !== e.clientX && void 0 !== e.clientX) { var o = a.a.documentElement, l = a.a.body; e.pageX = e.clientX + (o && o.scrollLeft || l && l.scrollLeft || 0) - (o && o.clientLeft || l && l.clientLeft || 0), e.pageY = e.clientY + (o && o.scrollTop || l && l.scrollTop || 0) - (o && o.clientTop || l && l.clientTop || 0) } e.which = e.charCode || e.keyCode, null !== e.button && void 0 !== e.button && (e.button = 1 & e.button ? 0 : 4 & e.button ? 1 : 2 & e.button ? 2 : 0) } return e } var Ye = !1; !function () { try { var e = Object.defineProperty({}, "passive", { get: function () { Ye = !0 } }); r.a.addEventListener("test", null, e), r.a.removeEventListener("test", null, e) } catch (e) { } }(); var $e = ["touchstart", "touchmove"]; function Qe(e, t, n) { if (Array.isArray(t)) return Ke(Qe, e, t, n); Ge.has(e) || Ge.set(e, {}); var i = Ge.get(e); if (i.handlers || (i.handlers = {}), i.handlers[t] || (i.handlers[t] = []), n.guid || (n.guid = We()), i.handlers[t].push(n), i.dispatcher || (i.disabled = !1, i.dispatcher = function (t, n) { if (!i.disabled) { t = Xe(t); var r = i.handlers[t.type]; if (r) for (var s = r.slice(0), a = 0, o = s.length; a < o && !t.isImmediatePropagationStopped(); a++)try { s[a].call(e, t, n) } catch (e) { X.error(e) } } }), 1 === i.handlers[t].length) if (e.addEventListener) { var r = !1; Ye && $e.indexOf(t) > -1 && (r = { passive: !0 }), e.addEventListener(t, i.dispatcher, r) } else e.attachEvent && e.attachEvent("on" + t, i.dispatcher) } function Je(e, t, n) { if (Ge.has(e)) { var i = Ge.get(e); if (i.handlers) { if (Array.isArray(t)) return Ke(Je, e, t, n); var r = function (e, t) { i.handlers[t] = [], ze(e, t) }; if (void 0 !== t) { var s = i.handlers[t]; if (s) if (n) { if (n.guid) for (var a = 0; a < s.length; a++)s[a].guid === n.guid && s.splice(a--, 1); ze(e, t) } else r(e, t) } else for (var o in i.handlers) Object.prototype.hasOwnProperty.call(i.handlers || {}, o) && r(e, o) } } } function Ze(e, t, n) { var i = Ge.has(e) ? Ge.get(e) : {}, r = e.parentNode || e.ownerDocument; if ("string" == typeof t ? t = { type: t, target: e } : t.target || (t.target = e), t = Xe(t), i.dispatcher && i.dispatcher.call(e, t, n), r && !t.isPropagationStopped() && !0 === t.bubbles) Ze.call(null, r, t, n); else if (!r && !t.defaultPrevented && t.target && t.target[t.type]) { Ge.has(t.target) || Ge.set(t.target, {}); var s = Ge.get(t.target); t.target[t.type] && (s.disabled = !0, "function" == typeof t.target[t.type] && t.target[t.type](), s.disabled = !1) } return !t.defaultPrevented } function et(e, t, n) { if (Array.isArray(t)) return Ke(et, e, t, n); var i = function i() { Je(e, t, i), n.apply(this, arguments) }; i.guid = n.guid = n.guid || We(), Qe(e, t, i) } function tt(e, t, n) { var i = function i() { Je(e, t, i), n.apply(this, arguments) }; i.guid = n.guid = n.guid || We(), Qe(e, t, i) } var nt, it = Object.freeze({ fixEvent: Xe, on: Qe, off: Je, trigger: Ze, one: et, any: tt }), rt = 30, st = function (e, t, n) { t.guid || (t.guid = We()); var i = t.bind(e); return i.guid = n ? n + "_" + t.guid : t.guid, i }, at = function (e, t) { var n = r.a.performance.now(); return function () { var i = r.a.performance.now(); i - n >= t && (e.apply(void 0, arguments), n = i) } }, ot = function (e, t, n, i) { var s; void 0 === i && (i = r.a); var a = function () { var r = this, a = arguments, o = function () { s = null, o = null, n || e.apply(r, a) }; !s && n && e.apply(r, a), i.clearTimeout(s), s = i.setTimeout(o, t) }; return a.cancel = function () { i.clearTimeout(s), s = null }, a }, lt = function () { }; lt.prototype.allowedEvents_ = {}, lt.prototype.on = function (e, t) { var n = this.addEventListener; this.addEventListener = function () { }, Qe(this, e, t), this.addEventListener = n }, lt.prototype.addEventListener = lt.prototype.on, lt.prototype.off = function (e, t) { Je(this, e, t) }, lt.prototype.removeEventListener = lt.prototype.off, lt.prototype.one = function (e, t) { var n = this.addEventListener; this.addEventListener = function () { }, et(this, e, t), this.addEventListener = n }, lt.prototype.any = function (e, t) { var n = this.addEventListener; this.addEventListener = function () { }, tt(this, e, t), this.addEventListener = n }, lt.prototype.trigger = function (e) { var t = e.type || e; "string" == typeof e && (e = { type: t }), e = Xe(e), this.allowedEvents_[t] && this["on" + t] && this["on" + t](e), Ze(this, e) }, lt.prototype.dispatchEvent = lt.prototype.trigger, lt.prototype.queueTrigger = function (e) { var t = this; nt || (nt = new Map); var n = e.type || e, i = nt.get(this); i || (i = new Map, nt.set(this, i)); var s = i.get(n); i.delete(n), r.a.clearTimeout(s); var a = r.a.setTimeout(function () { 0 === i.size && (i = null, nt.delete(t)), t.trigger(e) }, 0); i.set(n, a) }; var ut = function (e) { return e instanceof lt || !!e.eventBusEl_ && ["on", "one", "off", "trigger"].every(function (t) { return "function" == typeof e[t] }) }, ct = function (e) { return "string" == typeof e && /\S/.test(e) || Array.isArray(e) && !!e.length }, ht = function (e) { if (!e.nodeName && !ut(e)) throw new Error("Invalid target; must be a DOM node or evented object.") }, dt = function (e) { if (!ct(e)) throw new Error("Invalid event type; must be a non-empty string or array.") }, ft = function (e) { if ("function" != typeof e) throw new Error("Invalid listener; must be a function.") }, pt = function (e, t) { var n, i, r, s = t.length < 3 || t[0] === e || t[0] === e.eventBusEl_; return s ? (n = e.eventBusEl_, t.length >= 3 && t.shift(), i = t[0], r = t[1]) : (n = t[0], i = t[1], r = t[2]), ht(n), dt(i), ft(r), { isTargetingSelf: s, target: n, type: i, listener: r = st(e, r) } }, mt = function (e, t, n, i) { ht(e), e.nodeName ? it[t](e, n, i) : e[t](n, i) }, gt = { on: function () { for (var e = this, t = arguments.length, n = new Array(t), i = 0; i < t; i++)n[i] = arguments[i]; var r = pt(this, n), s = r.isTargetingSelf, a = r.target, o = r.type, l = r.listener; if (mt(a, "on", o, l), !s) { var u = function () { return e.off(a, o, l) }; u.guid = l.guid; var c = function () { return e.off("dispose", u) }; c.guid = l.guid, mt(this, "on", "dispose", u), mt(a, "on", "dispose", c) } }, one: function () { for (var e = this, t = arguments.length, n = new Array(t), i = 0; i < t; i++)n[i] = arguments[i]; var r = pt(this, n), s = r.isTargetingSelf, a = r.target, o = r.type, l = r.listener; if (s) mt(a, "one", o, l); else { var u = function t() { e.off(a, o, t); for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)i[r] = arguments[r]; l.apply(null, i) }; u.guid = l.guid, mt(a, "one", o, u) } }, any: function () { for (var e = this, t = arguments.length, n = new Array(t), i = 0; i < t; i++)n[i] = arguments[i]; var r = pt(this, n), s = r.isTargetingSelf, a = r.target, o = r.type, l = r.listener; if (s) mt(a, "any", o, l); else { var u = function t() { e.off(a, o, t); for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)i[r] = arguments[r]; l.apply(null, i) }; u.guid = l.guid, mt(a, "any", o, u) } }, off: function (e, t, n) { if (!e || ct(e)) Je(this.eventBusEl_, e, t); else { var i = e, r = t; ht(i), dt(r), ft(n), n = st(this, n), this.off("dispose", n), i.nodeName ? (Je(i, r, n), Je(i, "dispose", n)) : ut(i) && (i.off(r, n), i.off("dispose", n)) } }, trigger: function (e, t) { return Ze(this.eventBusEl_, e, t) } }; function vt(e, t) { void 0 === t && (t = {}); var n = t.eventBusKey; if (n) { if (!e[n].nodeName) throw new Error('The eventBusKey "' + n + '" does not refer to an element.'); e.eventBusEl_ = e[n] } else e.eventBusEl_ = ue("span", { className: "vjs-event-bus" }); return Z(e, gt), e.eventedCallbacks && e.eventedCallbacks.forEach(function (e) { e() }), e.on("dispose", function () { e.off(), r.a.setTimeout(function () { e.eventBusEl_ = null }, 0) }), e } var yt = { state: {}, setState: function (e) { var t, n = this; return "function" == typeof e && (e = e()), J(e, function (e, i) { n.state[i] !== e && ((t = t || {})[i] = { from: n.state[i], to: e }), n.state[i] = e }), t && ut(this) && this.trigger({ changes: t, type: "statechanged" }), t } }; function _t(e, t) { return Z(e, yt), e.state = Z({}, e.state, t), "function" == typeof e.handleStateChanged && ut(e) && e.on("statechanged", e.handleStateChanged), e } var bt = function (e) { return "string" != typeof e ? e : e.replace(/./, function (e) { return e.toLowerCase() }) }, Tt = function (e) { return "string" != typeof e ? e : e.replace(/./, function (e) { return e.toUpperCase() }) }; function St() { for (var e = {}, t = arguments.length, n = new Array(t), i = 0; i < t; i++)n[i] = arguments[i]; return n.forEach(function (t) { t && J(t, function (t, n) { te(t) ? (te(e[n]) || (e[n] = {}), e[n] = St(e[n], t)) : e[n] = t }) }), e } var Et = function () { function e(e, t, n) { if (!e && this.play ? this.player_ = e = this : this.player_ = e, this.parentComponent_ = null, this.options_ = St({}, this.options_), t = this.options_ = St(this.options_, t), this.id_ = t.id || t.el && t.el.id, !this.id_) { var i = e && e.id && e.id() || "no_player"; this.id_ = i + "_component_" + We() } var s; this.name_ = t.name || null, t.el ? this.el_ = t.el : !1 !== t.createEl && (this.el_ = this.createEl()), !1 !== t.evented && vt(this, { eventBusKey: this.el_ ? "el_" : null }), _t(this, this.constructor.defaultState), this.children_ = [], this.childIndex_ = {}, this.childNameIndex_ = {}, r.a.Set || (s = function () { function e() { this.set_ = {} } var t = e.prototype; return t.has = function (e) { return e in this.set_ }, t.delete = function (e) { var t = this.has(e); return delete this.set_[e], t }, t.add = function (e) { return this.set_[e] = 1, this }, t.forEach = function (e, t) { for (var n in this.set_) e.call(t, n, n, this) }, e }()), this.setTimeoutIds_ = r.a.Set ? new Set : new s, this.setIntervalIds_ = r.a.Set ? new Set : new s, this.rafIds_ = r.a.Set ? new Set : new s, this.clearingTimersOnDispose_ = !1, !1 !== t.initChildren && this.initChildren(), this.ready(n), !1 !== t.reportTouchActivity && this.enableTouchActivity() } var t = e.prototype; return t.dispose = function () { if (this.trigger({ type: "dispose", bubbles: !1 }), this.children_) for (var e = this.children_.length - 1; e >= 0; e--)this.children_[e].dispose && this.children_[e].dispose(); this.children_ = null, this.childIndex_ = null, this.childNameIndex_ = null, this.parentComponent_ = null, this.el_ && (this.el_.parentNode && this.el_.parentNode.removeChild(this.el_), Ge.has(this.el_) && Ge.delete(this.el_), this.el_ = null), this.player_ = null }, t.player = function () { return this.player_ }, t.options = function (e) { return e ? (this.options_ = St(this.options_, e), this.options_) : this.options_ }, t.el = function () { return this.el_ }, t.createEl = function (e, t, n) { return ue(e, t, n) }, t.localize = function (e, t, n) { void 0 === n && (n = e); var i = this.player_.language && this.player_.language(), r = this.player_.languages && this.player_.languages(), s = r && r[i], a = i && i.split("-")[0], o = r && r[a], l = n; return s && s[e] ? l = s[e] : o && o[e] && (l = o[e]), t && (l = l.replace(/\{(\d+)\}/g, function (e, n) { var i = t[n - 1], r = i; return void 0 === i && (r = e), r })), l }, t.contentEl = function () { return this.contentEl_ || this.el_ }, t.id = function () { return this.id_ }, t.name = function () { return this.name_ }, t.children = function () { return this.children_ }, t.getChildById = function (e) { return this.childIndex_[e] }, t.getChild = function (e) { if (e) return this.childNameIndex_[e] }, t.addChild = function (t, n, i) { var r, s; if (void 0 === n && (n = {}), void 0 === i && (i = this.children_.length), "string" == typeof t) { s = Tt(t); var a = n.componentClass || s; n.name = s; var o = e.getComponent(a); if (!o) throw new Error("Component " + a + " does not exist"); if ("function" != typeof o) return null; r = new o(this.player_ || this, n) } else r = t; if (r.parentComponent_ && r.parentComponent_.removeChild(r), this.children_.splice(i, 0, r), r.parentComponent_ = this, "function" == typeof r.id && (this.childIndex_[r.id()] = r), (s = s || r.name && Tt(r.name())) && (this.childNameIndex_[s] = r, this.childNameIndex_[bt(s)] = r), "function" == typeof r.el && r.el()) { var l = this.contentEl().children[i] || null; this.contentEl().insertBefore(r.el(), l) } return r }, t.removeChild = function (e) { if ("string" == typeof e && (e = this.getChild(e)), e && this.children_) { for (var t = !1, n = this.children_.length - 1; n >= 0; n--)if (this.children_[n] === e) { t = !0, this.children_.splice(n, 1); break } if (t) { e.parentComponent_ = null, this.childIndex_[e.id()] = null, this.childNameIndex_[Tt(e.name())] = null, this.childNameIndex_[bt(e.name())] = null; var i = e.el(); i && i.parentNode === this.contentEl() && this.contentEl().removeChild(e.el()) } } }, t.initChildren = function () { var t = this, n = this.options_.children; if (n) { var i, r = this.options_, s = e.getComponent("Tech"); (i = Array.isArray(n) ? n : Object.keys(n)).concat(Object.keys(this.options_).filter(function (e) { return !i.some(function (t) { return "string" == typeof t ? e === t : e === t.name }) })).map(function (e) { var i, r; return "string" == typeof e ? r = n[i = e] || t.options_[i] || {} : (i = e.name, r = e), { name: i, opts: r } }).filter(function (t) { var n = e.getComponent(t.opts.componentClass || Tt(t.name)); return n && !s.isTech(n) }).forEach(function (e) { var n = e.name, i = e.opts; if (void 0 !== r[n] && (i = r[n]), !1 !== i) { !0 === i && (i = {}), i.playerOptions = t.options_.playerOptions; var s = t.addChild(n, i); s && (t[n] = s) } }) } }, t.buildCSSClass = function () { return "" }, t.ready = function (e, t) { if (void 0 === t && (t = !1), e) return this.isReady_ ? void (t ? e.call(this) : this.setTimeout(e, 1)) : (this.readyQueue_ = this.readyQueue_ || [], void this.readyQueue_.push(e)) }, t.triggerReady = function () { this.isReady_ = !0, this.setTimeout(function () { var e = this.readyQueue_; this.readyQueue_ = [], e && e.length > 0 && e.forEach(function (e) { e.call(this) }, this), this.trigger("ready") }, 1) }, t.$ = function (e, t) { return Pe(e, t || this.contentEl()) }, t.$$ = function (e, t) { return Ne(e, t || this.contentEl()) }, t.hasClass = function (e) { return de(this.el_, e) }, t.addClass = function (e) { fe(this.el_, e) }, t.removeClass = function (e) { pe(this.el_, e) }, t.toggleClass = function (e, t) { me(this.el_, e, t) }, t.show = function () { this.removeClass("vjs-hidden") }, t.hide = function () { this.addClass("vjs-hidden") }, t.lockShowing = function () { this.addClass("vjs-lock-showing") }, t.unlockShowing = function () { this.removeClass("vjs-lock-showing") }, t.getAttribute = function (e) { return ye(this.el_, e) }, t.setAttribute = function (e, t) { _e(this.el_, e, t) }, t.removeAttribute = function (e) { be(this.el_, e) }, t.width = function (e, t) { return this.dimension("width", e, t) }, t.height = function (e, t) { return this.dimension("height", e, t) }, t.dimensions = function (e, t) { this.width(e, !0), this.height(t) }, t.dimension = function (e, t, n) { if (void 0 !== t) return null !== t && t == t || (t = 0), -1 !== ("" + t).indexOf("%") || -1 !== ("" + t).indexOf("px") ? this.el_.style[e] = t : this.el_.style[e] = "auto" === t ? "" : t + "px", void (n || this.trigger("componentresize")); if (!this.el_) return 0; var i = this.el_.style[e], r = i.indexOf("px"); return -1 !== r ? parseInt(i.slice(0, r), 10) : parseInt(this.el_["offset" + Tt(e)], 10) }, t.currentDimension = function (e) { var t = 0; if ("width" !== e && "height" !== e) throw new Error("currentDimension only accepts width or height value"); if (t = ne(this.el_, e), 0 === (t = parseFloat(t)) || isNaN(t)) { var n = "offset" + Tt(e); t = this.el_[n] } return t }, t.currentDimensions = function () { return { width: this.currentDimension("width"), height: this.currentDimension("height") } }, t.currentWidth = function () { return this.currentDimension("width") }, t.currentHeight = function () { return this.currentDimension("height") }, t.focus = function () { this.el_.focus() }, t.blur = function () { this.el_.blur() }, t.handleKeyDown = function (e) { this.player_ && (e.stopPropagation(), this.player_.handleKeyDown(e)) }, t.handleKeyPress = function (e) { this.handleKeyDown(e) }, t.emitTapEvents = function () { var e, t = 0, n = null; this.on("touchstart", function (i) { 1 === i.touches.length && (n = { pageX: i.touches[0].pageX, pageY: i.touches[0].pageY }, t = r.a.performance.now(), e = !0) }), this.on("touchmove", function (t) { if (t.touches.length > 1) e = !1; else if (n) { var i = t.touches[0].pageX - n.pageX, r = t.touches[0].pageY - n.pageY; Math.sqrt(i * i + r * r) > 10 && (e = !1) } }); var i = function () { e = !1 }; this.on("touchleave", i), this.on("touchcancel", i), this.on("touchend", function (i) { (n = null, !0 === e) && (r.a.performance.now() - t < 200 && (i.preventDefault(), this.trigger("tap"))) }) }, t.enableTouchActivity = function () { if (this.player() && this.player().reportUserActivity) { var e, t = st(this.player(), this.player().reportUserActivity); this.on("touchstart", function () { t(), this.clearInterval(e), e = this.setInterval(t, 250) }); var n = function (n) { t(), this.clearInterval(e) }; this.on("touchmove", t), this.on("touchend", n), this.on("touchcancel", n) } }, t.setTimeout = function (e, t) { var n, i = this; return e = st(this, e), this.clearTimersOnDispose_(), n = r.a.setTimeout(function () { i.setTimeoutIds_.has(n) && i.setTimeoutIds_.delete(n), e() }, t), this.setTimeoutIds_.add(n), n }, t.clearTimeout = function (e) { return this.setTimeoutIds_.has(e) && (this.setTimeoutIds_.delete(e), r.a.clearTimeout(e)), e }, t.setInterval = function (e, t) { e = st(this, e), this.clearTimersOnDispose_(); var n = r.a.setInterval(e, t); return this.setIntervalIds_.add(n), n }, t.clearInterval = function (e) { return this.setIntervalIds_.has(e) && (this.setIntervalIds_.delete(e), r.a.clearInterval(e)), e }, t.requestAnimationFrame = function (e) { var t, n = this; return this.supportsRaf_ ? (this.clearTimersOnDispose_(), e = st(this, e), t = r.a.requestAnimationFrame(function () { n.rafIds_.has(t) && n.rafIds_.delete(t), e() }), this.rafIds_.add(t), t) : this.setTimeout(e, 1e3 / 60) }, t.cancelAnimationFrame = function (e) { return this.supportsRaf_ ? (this.rafIds_.has(e) && (this.rafIds_.delete(e), r.a.cancelAnimationFrame(e)), e) : this.clearTimeout(e) }, t.clearTimersOnDispose_ = function () { var e = this; this.clearingTimersOnDispose_ || (this.clearingTimersOnDispose_ = !0, this.one("dispose", function () { [["rafIds_", "cancelAnimationFrame"], ["setTimeoutIds_", "clearTimeout"], ["setIntervalIds_", "clearInterval"]].forEach(function (t) { var n = t[0], i = t[1]; e[n].forEach(e[i], e) }), e.clearingTimersOnDispose_ = !1 })) }, e.registerComponent = function (t, n) { if ("string" != typeof t || !t) throw new Error('Illegal component name, "' + t + '"; must be a non-empty string.'); var i, r = e.getComponent("Tech"), s = r && r.isTech(n), a = e === n || e.prototype.isPrototypeOf(n.prototype); if (s || !a) throw i = s ? "techs must be registered using Tech.registerTech()" : "must be a Component subclass", new Error('Illegal component, "' + t + '"; ' + i + "."); t = Tt(t), e.components_ || (e.components_ = {}); var o = e.getComponent("Player"); if ("Player" === t && o && o.players) { var l = o.players, u = Object.keys(l); if (l && u.length > 0 && u.map(function (e) { return l[e] }).every(Boolean)) throw new Error("Can not register Player component after player has been created.") } return e.components_[t] = n, e.components_[bt(t)] = n, n }, e.getComponent = function (t) { if (t && e.components_) return e.components_[t] }, e }(); function Ct(e, t) { e.prototype = Object.create(t.prototype), e.prototype.constructor = e, e.__proto__ = t } function wt(e, t) { return (wt = Object.setPrototypeOf || function (e, t) { return e.__proto__ = t, e })(e, t) } function kt(e, t, n) { return (kt = function () { if ("undefined" == typeof Reflect || !Reflect.construct) return !1; if (Reflect.construct.sham) return !1; if ("function" == typeof Proxy) return !0; try { return Date.prototype.toString.call(Reflect.construct(Date, [], function () { })), !0 } catch (e) { return !1 } }() ? Reflect.construct : function (e, t, n) { var i = [null]; i.push.apply(i, t); var r = new (Function.bind.apply(e, i)); return n && wt(r, n.prototype), r }).apply(null, arguments) } function At(e) { if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return e } Et.prototype.supportsRaf_ = "function" == typeof r.a.requestAnimationFrame && "function" == typeof r.a.cancelAnimationFrame, Et.registerComponent("Component", Et); var xt, It = r.a.navigator && r.a.navigator.userAgent || "", Ot = /AppleWebKit\/([\d.]+)/i.exec(It), Dt = Ot ? parseFloat(Ot.pop()) : null, Lt = /iPad/i.test(It), Pt = /iPhone/i.test(It) && !Lt, Nt = /iPod/i.test(It), Rt = Pt || Lt || Nt, Mt = (xt = It.match(/OS (\d+)_/i)) && xt[1] ? xt[1] : null, Ut = /Android/i.test(It), jt = function () { var e = It.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i); if (!e) return null; var t = e[1] && parseFloat(e[1]), n = e[2] && parseFloat(e[2]); return t && n ? parseFloat(e[1] + "." + e[2]) : t || null }(), Bt = Ut && jt < 5 && Dt < 537, Ft = /Firefox/i.test(It), Ht = /Edge/i.test(It), qt = !Ht && (/Chrome/i.test(It) || /CriOS/i.test(It)), Vt = function () { var e = It.match(/(Chrome|CriOS)\/(\d+)/); return e && e[2] ? parseFloat(e[2]) : null }(), Wt = function () { var e = /MSIE\s(\d+)\.\d/.exec(It), t = e && parseFloat(e[1]); return !t && /Trident\/7.0/i.test(It) && /rv:11.0/.test(It) && (t = 11), t }(), Gt = /Safari/i.test(It) && !qt && !Ut && !Ht, zt = (Gt || Rt) && !qt, Kt = /Windows/i.test(It), Xt = se() && ("ontouchstart" in r.a || r.a.navigator.maxTouchPoints || r.a.DocumentTouch && r.a.document instanceof r.a.DocumentTouch), Yt = Object.freeze({ IS_IPAD: Lt, IS_IPHONE: Pt, IS_IPOD: Nt, IS_IOS: Rt, IOS_VERSION: Mt, IS_ANDROID: Ut, ANDROID_VERSION: jt, IS_NATIVE_ANDROID: Bt, IS_FIREFOX: Ft, IS_EDGE: Ht, IS_CHROME: qt, CHROME_VERSION: Vt, IE_VERSION: Wt, IS_SAFARI: Gt, IS_ANY_SAFARI: zt, IS_WINDOWS: Kt, TOUCH_ENABLED: Xt }); function $t(e, t, n, i) { return function (e, t, n) { if ("number" != typeof t || t < 0 || t > n) throw new Error("Failed to execute '" + e + "' on 'TimeRanges': The index provided (" + t + ") is non-numeric or out of bounds (0-" + n + ").") }(e, i, n.length - 1), n[i][t] } function Qt(e) { return void 0 === e || 0 === e.length ? { length: 0, start: function () { throw new Error("This TimeRanges object is empty") }, end: function () { throw new Error("This TimeRanges object is empty") } } : { length: e.length, start: $t.bind(null, "start", 0, e), end: $t.bind(null, "end", 1, e) } } function Jt(e, t) { return Array.isArray(e) ? Qt(e) : void 0 === e || void 0 === t ? Qt() : Qt([[e, t]]) } function Zt(e, t) { var n, i, r = 0; if (!t) return 0; e && e.length || (e = Jt(0, 0)); for (var s = 0; s < e.length; s++)n = e.start(s), (i = e.end(s)) > t && (i = t), r += i - n; return r / t } for (var en, tn = { prefixed: !0 }, nn = [["requestFullscreen", "exitFullscreen", "fullscreenElement", "fullscreenEnabled", "fullscreenchange", "fullscreenerror", "fullscreen"], ["webkitRequestFullscreen", "webkitExitFullscreen", "webkitFullscreenElement", "webkitFullscreenEnabled", "webkitfullscreenchange", "webkitfullscreenerror", "-webkit-full-screen"], ["mozRequestFullScreen", "mozCancelFullScreen", "mozFullScreenElement", "mozFullScreenEnabled", "mozfullscreenchange", "mozfullscreenerror", "-moz-full-screen"], ["msRequestFullscreen", "msExitFullscreen", "msFullscreenElement", "msFullscreenEnabled", "MSFullscreenChange", "MSFullscreenError", "-ms-fullscreen"]], rn = nn[0], sn = 0; sn < nn.length; sn++)if (nn[sn][1] in a.a) { en = nn[sn]; break } if (en) { for (var an = 0; an < en.length; an++)tn[rn[an]] = en[an]; tn.prefixed = en[0] !== rn[0] } function on(e) { if (e instanceof on) return e; "number" == typeof e ? this.code = e : "string" == typeof e ? this.message = e : ee(e) && ("number" == typeof e.code && (this.code = e.code), Z(this, e)), this.message || (this.message = on.defaultMessages[this.code] || "") } on.prototype.code = 0, on.prototype.message = "", on.prototype.status = null, on.errorTypes = ["MEDIA_ERR_CUSTOM", "MEDIA_ERR_ABORTED", "MEDIA_ERR_NETWORK", "MEDIA_ERR_DECODE", "MEDIA_ERR_SRC_NOT_SUPPORTED", "MEDIA_ERR_ENCRYPTED"], on.defaultMessages = { 1: "You aborted the media playback", 2: "A network error caused the media download to fail part-way.", 3: "The media playback was aborted due to a corruption problem or because the media used features your browser did not support.", 4: "The media could not be loaded, either because the server or network failed or because the format is not supported.", 5: "The media is encrypted and we do not have the keys to decrypt it." }; for (var ln = 0; ln < on.errorTypes.length; ln++)on[on.errorTypes[ln]] = ln, on.prototype[on.errorTypes[ln]] = ln; function un(e) { return null != e && "function" == typeof e.then } function cn(e) { un(e) && e.then(null, function (e) { }) } var hn = function (e) { return ["kind", "label", "language", "id", "inBandMetadataTrackDispatchType", "mode", "src"].reduce(function (t, n, i) { return e[n] && (t[n] = e[n]), t }, { cues: e.cues && Array.prototype.map.call(e.cues, function (e) { return { startTime: e.startTime, endTime: e.endTime, text: e.text, id: e.id } }) }) }, dn = function (e) { var t = e.$$("track"), n = Array.prototype.map.call(t, function (e) { return e.track }); return Array.prototype.map.call(t, function (e) { var t = hn(e.track); return e.src && (t.src = e.src), t }).concat(Array.prototype.filter.call(e.textTracks(), function (e) { return -1 === n.indexOf(e) }).map(hn)) }, fn = function (e, t) { return e.forEach(function (e) { var n = t.addRemoteTextTrack(e).track; !e.src && e.cues && e.cues.forEach(function (e) { return n.addCue(e) }) }), t.textTracks() }, pn = "vjs-modal-dialog", mn = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).opened_ = i.hasBeenOpened_ = i.hasBeenFilled_ = !1, i.closeable(!i.options_.uncloseable), i.content(i.options_.content), i.contentEl_ = ue("div", { className: pn + "-content" }, { role: "document" }), i.descEl_ = ue("p", { className: pn + "-description vjs-control-text", id: i.el().getAttribute("aria-describedby") }), ce(i.descEl_, i.description()), i.el_.appendChild(i.descEl_), i.el_.appendChild(i.contentEl_), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: this.buildCSSClass(), tabIndex: -1 }, { "aria-describedby": this.id() + "_description", "aria-hidden": "true", "aria-label": this.label(), role: "dialog" }) }, n.dispose = function () { this.contentEl_ = null, this.descEl_ = null, this.previouslyActiveEl_ = null, e.prototype.dispose.call(this) }, n.buildCSSClass = function () { return pn + " vjs-hidden " + e.prototype.buildCSSClass.call(this) }, n.label = function () { return this.localize(this.options_.label || "Modal Window") }, n.description = function () { var e = this.options_.description || this.localize("This is a modal window."); return this.closeable() && (e += " " + this.localize("This modal can be closed by pressing the Escape key or activating the close button.")), e }, n.open = function () { if (!this.opened_) { var e = this.player(); this.trigger("beforemodalopen"), this.opened_ = !0, (this.options_.fillAlways || !this.hasBeenOpened_ && !this.hasBeenFilled_) && this.fill(), this.wasPlaying_ = !e.paused(), this.options_.pauseOnOpen && this.wasPlaying_ && e.pause(), this.on("keydown", this.handleKeyDown), this.hadControls_ = e.controls(), e.controls(!1), this.show(), this.conditionalFocus_(), this.el().setAttribute("aria-hidden", "false"), this.trigger("modalopen"), this.hasBeenOpened_ = !0 } }, n.opened = function (e) { return "boolean" == typeof e && this[e ? "open" : "close"](), this.opened_ }, n.close = function () { if (this.opened_) { var e = this.player(); this.trigger("beforemodalclose"), this.opened_ = !1, this.wasPlaying_ && this.options_.pauseOnOpen && e.play(), this.off("keydown", this.handleKeyDown), this.hadControls_ && e.controls(!0), this.hide(), this.el().setAttribute("aria-hidden", "true"), this.trigger("modalclose"), this.conditionalBlur_(), this.options_.temporary && this.dispose() } }, n.closeable = function (e) { if ("boolean" == typeof e) { var t = this.closeable_ = !!e, n = this.getChild("closeButton"); if (t && !n) { var i = this.contentEl_; this.contentEl_ = this.el_, n = this.addChild("closeButton", { controlText: "Close Modal Dialog" }), this.contentEl_ = i, this.on(n, "close", this.close) } !t && n && (this.off(n, "close", this.close), this.removeChild(n), n.dispose()) } return this.closeable_ }, n.fill = function () { this.fillWith(this.content()) }, n.fillWith = function (e) { var t = this.contentEl(), n = t.parentNode, i = t.nextSibling; this.trigger("beforemodalfill"), this.hasBeenFilled_ = !0, n.removeChild(t), this.empty(), Oe(t, e), this.trigger("modalfill"), i ? n.insertBefore(t, i) : n.appendChild(t); var r = this.getChild("closeButton"); r && n.appendChild(r.el_) }, n.empty = function () { this.trigger("beforemodalempty"), Ae(this.contentEl()), this.trigger("modalempty") }, n.content = function (e) { return void 0 !== e && (this.content_ = e), this.content_ }, n.conditionalFocus_ = function () { var e = a.a.activeElement, t = this.player_.el_; this.previouslyActiveEl_ = null, (t.contains(e) || t === e) && (this.previouslyActiveEl_ = e, this.focus()) }, n.conditionalBlur_ = function () { this.previouslyActiveEl_ && (this.previouslyActiveEl_.focus(), this.previouslyActiveEl_ = null) }, n.handleKeyDown = function (e) { if (e.stopPropagation(), c.a.isEventKey(e, "Escape") && this.closeable()) return e.preventDefault(), void this.close(); if (c.a.isEventKey(e, "Tab")) { for (var t, n = this.focusableEls_(), i = this.el_.querySelector(":focus"), r = 0; r < n.length; r++)if (i === n[r]) { t = r; break } a.a.activeElement === this.el_ && (t = 0), e.shiftKey && 0 === t ? (n[n.length - 1].focus(), e.preventDefault()) : e.shiftKey || t !== n.length - 1 || (n[0].focus(), e.preventDefault()) } }, n.focusableEls_ = function () { var e = this.el_.querySelectorAll("*"); return Array.prototype.filter.call(e, function (e) { return (e instanceof r.a.HTMLAnchorElement || e instanceof r.a.HTMLAreaElement) && e.hasAttribute("href") || (e instanceof r.a.HTMLInputElement || e instanceof r.a.HTMLSelectElement || e instanceof r.a.HTMLTextAreaElement || e instanceof r.a.HTMLButtonElement) && !e.hasAttribute("disabled") || e instanceof r.a.HTMLIFrameElement || e instanceof r.a.HTMLObjectElement || e instanceof r.a.HTMLEmbedElement || e.hasAttribute("tabindex") && -1 !== e.getAttribute("tabindex") || e.hasAttribute("contenteditable") }) }, t }(Et); mn.prototype.options_ = { pauseOnOpen: !0, temporary: !0 }, Et.registerComponent("ModalDialog", mn); var gn = function (e) { function t(t) { var n; void 0 === t && (t = []), (n = e.call(this) || this).tracks_ = [], Object.defineProperty(At(n), "length", { get: function () { return this.tracks_.length } }); for (var i = 0; i < t.length; i++)n.addTrack(t[i]); return n } Ct(t, e); var n = t.prototype; return n.addTrack = function (e) { var t = this.tracks_.length; "" + t in this || Object.defineProperty(this, t, { get: function () { return this.tracks_[t] } }), -1 === this.tracks_.indexOf(e) && (this.tracks_.push(e), this.trigger({ track: e, type: "addtrack", target: this })) }, n.removeTrack = function (e) { for (var t, n = 0, i = this.length; n < i; n++)if (this[n] === e) { (t = this[n]).off && t.off(), this.tracks_.splice(n, 1); break } t && this.trigger({ track: t, type: "removetrack", target: this }) }, n.getTrackById = function (e) { for (var t = null, n = 0, i = this.length; n < i; n++) { var r = this[n]; if (r.id === e) { t = r; break } } return t }, t }(lt); for (var vn in gn.prototype.allowedEvents_ = { change: "change", addtrack: "addtrack", removetrack: "removetrack" }, gn.prototype.allowedEvents_) gn.prototype["on" + vn] = null; var yn = function (e, t) { for (var n = 0; n < e.length; n++)Object.keys(e[n]).length && t.id !== e[n].id && (e[n].enabled = !1) }, _n = function (e) { function t(t) { var n; void 0 === t && (t = []); for (var i = t.length - 1; i >= 0; i--)if (t[i].enabled) { yn(t, t[i]); break } return (n = e.call(this, t) || this).changing_ = !1, n } Ct(t, e); var n = t.prototype; return n.addTrack = function (t) { var n = this; t.enabled && yn(this, t), e.prototype.addTrack.call(this, t), t.addEventListener && (t.enabledChange_ = function () { n.changing_ || (n.changing_ = !0, yn(n, t), n.changing_ = !1, n.trigger("change")) }, t.addEventListener("enabledchange", t.enabledChange_)) }, n.removeTrack = function (t) { e.prototype.removeTrack.call(this, t), t.removeEventListener && t.enabledChange_ && (t.removeEventListener("enabledchange", t.enabledChange_), t.enabledChange_ = null) }, t }(gn), bn = function (e, t) { for (var n = 0; n < e.length; n++)Object.keys(e[n]).length && t.id !== e[n].id && (e[n].selected = !1) }, Tn = function (e) { function t(t) { var n; void 0 === t && (t = []); for (var i = t.length - 1; i >= 0; i--)if (t[i].selected) { bn(t, t[i]); break } return (n = e.call(this, t) || this).changing_ = !1, Object.defineProperty(At(n), "selectedIndex", { get: function () { for (var e = 0; e < this.length; e++)if (this[e].selected) return e; return -1 }, set: function () { } }), n } Ct(t, e); var n = t.prototype; return n.addTrack = function (t) { var n = this; t.selected && bn(this, t), e.prototype.addTrack.call(this, t), t.addEventListener && (t.selectedChange_ = function () { n.changing_ || (n.changing_ = !0, bn(n, t), n.changing_ = !1, n.trigger("change")) }, t.addEventListener("selectedchange", t.selectedChange_)) }, n.removeTrack = function (t) { e.prototype.removeTrack.call(this, t), t.removeEventListener && t.selectedChange_ && (t.removeEventListener("selectedchange", t.selectedChange_), t.selectedChange_ = null) }, t }(gn), Sn = function (e) { function t() { return e.apply(this, arguments) || this } Ct(t, e); var n = t.prototype; return n.addTrack = function (t) { var n = this; e.prototype.addTrack.call(this, t), this.queueChange_ || (this.queueChange_ = function () { return n.queueTrigger("change") }), this.triggerSelectedlanguagechange || (this.triggerSelectedlanguagechange_ = function () { return n.trigger("selectedlanguagechange") }), t.addEventListener("modechange", this.queueChange_); -1 === ["metadata", "chapters"].indexOf(t.kind) && t.addEventListener("modechange", this.triggerSelectedlanguagechange_) }, n.removeTrack = function (t) { e.prototype.removeTrack.call(this, t), t.removeEventListener && (this.queueChange_ && t.removeEventListener("modechange", this.queueChange_), this.selectedlanguagechange_ && t.removeEventListener("modechange", this.triggerSelectedlanguagechange_)) }, t }(gn), En = function () { function e(e) { void 0 === e && (e = []), this.trackElements_ = [], Object.defineProperty(this, "length", { get: function () { return this.trackElements_.length } }); for (var t = 0, n = e.length; t < n; t++)this.addTrackElement_(e[t]) } var t = e.prototype; return t.addTrackElement_ = function (e) { var t = this.trackElements_.length; "" + t in this || Object.defineProperty(this, t, { get: function () { return this.trackElements_[t] } }), -1 === this.trackElements_.indexOf(e) && this.trackElements_.push(e) }, t.getTrackElementByTrack_ = function (e) { for (var t, n = 0, i = this.trackElements_.length; n < i; n++)if (e === this.trackElements_[n].track) { t = this.trackElements_[n]; break } return t }, t.removeTrackElement_ = function (e) { for (var t = 0, n = this.trackElements_.length; t < n; t++)if (e === this.trackElements_[t]) { this.trackElements_[t].track && "function" == typeof this.trackElements_[t].track.off && this.trackElements_[t].track.off(), "function" == typeof this.trackElements_[t].off && this.trackElements_[t].off(), this.trackElements_.splice(t, 1); break } }, e }(), Cn = function () { function e(t) { e.prototype.setCues_.call(this, t), Object.defineProperty(this, "length", { get: function () { return this.length_ } }) } var t = e.prototype; return t.setCues_ = function (e) { var t = this.length || 0, n = 0, i = e.length; this.cues_ = e, this.length_ = e.length; var r = function (e) { "" + e in this || Object.defineProperty(this, "" + e, { get: function () { return this.cues_[e] } }) }; if (t < i) for (n = t; n < i; n++)r.call(this, n) }, t.getCueById = function (e) { for (var t = null, n = 0, i = this.length; n < i; n++) { var r = this[n]; if (r.id === e) { t = r; break } } return t }, e }(), wn = { alternative: "alternative", captions: "captions", main: "main", sign: "sign", subtitles: "subtitles", commentary: "commentary" }, kn = { alternative: "alternative", descriptions: "descriptions", main: "main", "main-desc": "main-desc", translation: "translation", commentary: "commentary" }, An = { subtitles: "subtitles", captions: "captions", descriptions: "descriptions", chapters: "chapters", metadata: "metadata" }, xn = { disabled: "disabled", hidden: "hidden", showing: "showing" }, In = function (e) { function t(t) { var n; void 0 === t && (t = {}), n = e.call(this) || this; var i = { id: t.id || "vjs_track_" + We(), kind: t.kind || "", label: t.label || "", language: t.language || "" }, r = function (e) { Object.defineProperty(At(n), e, { get: function () { return i[e] }, set: function () { } }) }; for (var s in i) r(s); return n } return Ct(t, e), t }(lt), On = function (e) { var t = ["protocol", "hostname", "port", "pathname", "search", "hash", "host"], n = a.a.createElement("a"); n.href = e; var i, s = "" === n.host && "file:" !== n.protocol; s && ((i = a.a.createElement("div")).innerHTML = '<a href="' + e + '"></a>', n = i.firstChild, i.setAttribute("style", "display:none; position:absolute;"), a.a.body.appendChild(i)); for (var o = {}, l = 0; l < t.length; l++)o[t[l]] = n[t[l]]; return "http:" === o.protocol && (o.host = o.host.replace(/:80$/, "")), "https:" === o.protocol && (o.host = o.host.replace(/:443$/, "")), o.protocol || (o.protocol = r.a.location.protocol), s && a.a.body.removeChild(i), o }, Dn = function (e) { if (!e.match(/^https?:\/\//)) { var t = a.a.createElement("div"); t.innerHTML = '<a href="' + e + '">x</a>', e = t.firstChild.href } return e }, Ln = function (e) { if ("string" == typeof e) { var t = /^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e); if (t) return t.pop().toLowerCase() } return "" }, Pn = function (e) { var t = r.a.location, n = On(e); return (":" === n.protocol ? t.protocol : n.protocol) + n.host !== t.protocol + t.host }, Nn = Object.freeze({ parseUrl: On, getAbsoluteURL: Dn, getFileExtension: Ln, isCrossOrigin: Pn }), Rn = function (e, t) { var n = new r.a.WebVTT.Parser(r.a, r.a.vttjs, r.a.WebVTT.StringDecoder()), i = []; n.oncue = function (e) { t.addCue(e) }, n.onparsingerror = function (e) { i.push(e) }, n.onflush = function () { t.trigger({ type: "loadeddata", target: t }) }, n.parse(e), i.length > 0 && (r.a.console && r.a.console.groupCollapsed && r.a.console.groupCollapsed("Text Track parsing errors for " + t.src), i.forEach(function (e) { return X.error(e) }), r.a.console && r.a.console.groupEnd && r.a.console.groupEnd()), n.flush() }, Mn = function (e, t) { var n = { uri: e }, i = Pn(e); i && (n.cors = i), d()(n, st(this, function (e, n, i) { if (e) return X.error(e, n); t.loaded_ = !0, "function" != typeof r.a.WebVTT ? t.tech_ && t.tech_.any(["vttjsloaded", "vttjserror"], function (e) { if ("vttjserror" !== e.type) return Rn(i, t); X.error("vttjs failed to load, stopping trying to process " + t.src) }) : Rn(i, t) })) }, Un = function (e) { function t(t) { var n; if (void 0 === t && (t = {}), !t.tech) throw new Error("A tech was not provided."); var i = St(t, { kind: An[t.kind] || "subtitles", language: t.language || t.srclang || "" }), r = xn[i.mode] || "disabled", s = i.default; "metadata" !== i.kind && "chapters" !== i.kind || (r = "hidden"), (n = e.call(this, i) || this).tech_ = i.tech, n.cues_ = [], n.activeCues_ = []; var a = new Cn(n.cues_), o = new Cn(n.activeCues_), l = !1, u = st(At(n), function () { this.activeCues = this.activeCues, l && (this.trigger("cuechange"), l = !1) }); return "disabled" !== r && n.tech_.ready(function () { n.tech_.on("timeupdate", u) }, !0), Object.defineProperties(At(n), { default: { get: function () { return s }, set: function () { } }, mode: { get: function () { return r }, set: function (e) { var t = this; xn[e] && ("disabled" !== (r = e) ? this.tech_.ready(function () { t.tech_.on("timeupdate", u) }, !0) : this.tech_.off("timeupdate", u), this.trigger("modechange")) } }, cues: { get: function () { return this.loaded_ ? a : null }, set: function () { } }, activeCues: { get: function () { if (!this.loaded_) return null; if (0 === this.cues.length) return o; for (var e = this.tech_.currentTime(), t = [], n = 0, i = this.cues.length; n < i; n++) { var r = this.cues[n]; r.startTime <= e && r.endTime >= e ? t.push(r) : r.startTime === r.endTime && r.startTime <= e && r.startTime + .5 >= e && t.push(r) } if (l = !1, t.length !== this.activeCues_.length) l = !0; else for (var s = 0; s < t.length; s++)-1 === this.activeCues_.indexOf(t[s]) && (l = !0); return this.activeCues_ = t, o.setCues_(this.activeCues_), o }, set: function () { } } }), i.src ? (n.src = i.src, Mn(i.src, At(n))) : n.loaded_ = !0, n } Ct(t, e); var n = t.prototype; return n.addCue = function (e) { var t = e; if (r.a.vttjs && !(e instanceof r.a.vttjs.VTTCue)) { for (var n in t = new r.a.vttjs.VTTCue(e.startTime, e.endTime, e.text), e) n in t || (t[n] = e[n]); t.id = e.id, t.originalCue_ = e } for (var i = this.tech_.textTracks(), s = 0; s < i.length; s++)i[s] !== this && i[s].removeCue(t); this.cues_.push(t), this.cues.setCues_(this.cues_) }, n.removeCue = function (e) { for (var t = this.cues_.length; t--;) { var n = this.cues_[t]; if (n === e || n.originalCue_ && n.originalCue_ === e) { this.cues_.splice(t, 1), this.cues.setCues_(this.cues_); break } } }, t }(In); Un.prototype.allowedEvents_ = { cuechange: "cuechange" }; var jn = function (e) { function t(t) { var n; void 0 === t && (t = {}); var i = St(t, { kind: kn[t.kind] || "" }); n = e.call(this, i) || this; var r = !1; return Object.defineProperty(At(n), "enabled", { get: function () { return r }, set: function (e) { "boolean" == typeof e && e !== r && (r = e, this.trigger("enabledchange")) } }), i.enabled && (n.enabled = i.enabled), n.loaded_ = !0, n } return Ct(t, e), t }(In), Bn = function (e) { function t(t) { var n; void 0 === t && (t = {}); var i = St(t, { kind: wn[t.kind] || "" }); n = e.call(this, i) || this; var r = !1; return Object.defineProperty(At(n), "selected", { get: function () { return r }, set: function (e) { "boolean" == typeof e && e !== r && (r = e, this.trigger("selectedchange")) } }), i.selected && (n.selected = i.selected), n } return Ct(t, e), t }(In), Fn = 0, Hn = 2, qn = function (e) { function t(t) { var n, i; void 0 === t && (t = {}), n = e.call(this) || this; var r = new Un(t); return n.kind = r.kind, n.src = r.src, n.srclang = r.language, n.label = r.label, n.default = r.default, Object.defineProperties(At(n), { readyState: { get: function () { return i } }, track: { get: function () { return r } } }), i = Fn, r.addEventListener("loadeddata", function () { i = Hn, n.trigger({ type: "load", target: At(n) }) }), n } return Ct(t, e), t }(lt); qn.prototype.allowedEvents_ = { load: "load" }, qn.NONE = Fn, qn.LOADING = 1, qn.LOADED = Hn, qn.ERROR = 3; var Vn = { audio: { ListClass: _n, TrackClass: jn, capitalName: "Audio" }, video: { ListClass: Tn, TrackClass: Bn, capitalName: "Video" }, text: { ListClass: Sn, TrackClass: Un, capitalName: "Text" } }; Object.keys(Vn).forEach(function (e) { Vn[e].getterName = e + "Tracks", Vn[e].privateName = e + "Tracks_" }); var Wn = { remoteText: { ListClass: Sn, TrackClass: Un, capitalName: "RemoteText", getterName: "remoteTextTracks", privateName: "remoteTextTracks_" }, remoteTextEl: { ListClass: En, TrackClass: qn, capitalName: "RemoteTextTrackEls", getterName: "remoteTextTrackEls", privateName: "remoteTextTrackEls_" } }, Gn = St(Vn, Wn); Wn.names = Object.keys(Wn), Vn.names = Object.keys(Vn), Gn.names = [].concat(Wn.names).concat(Vn.names); var zn = function (e) { function t(t, n) { var i; return void 0 === t && (t = {}), void 0 === n && (n = function () { }), t.reportTouchActivity = !1, (i = e.call(this, null, t, n) || this).hasStarted_ = !1, i.on("playing", function () { this.hasStarted_ = !0 }), i.on("loadstart", function () { this.hasStarted_ = !1 }), Gn.names.forEach(function (e) { var n = Gn[e]; t && t[n.getterName] && (i[n.privateName] = t[n.getterName]) }), i.featuresProgressEvents || i.manualProgressOn(), i.featuresTimeupdateEvents || i.manualTimeUpdatesOn(), ["Text", "Audio", "Video"].forEach(function (e) { !1 === t["native" + e + "Tracks"] && (i["featuresNative" + e + "Tracks"] = !1) }), !1 === t.nativeCaptions || !1 === t.nativeTextTracks ? i.featuresNativeTextTracks = !1 : !0 !== t.nativeCaptions && !0 !== t.nativeTextTracks || (i.featuresNativeTextTracks = !0), i.featuresNativeTextTracks || i.emulateTextTracks(), i.autoRemoteTextTracks_ = new Gn.text.ListClass, i.initTrackListeners(), t.nativeControlsForTouch || i.emitTapEvents(), i.constructor && (i.name_ = i.constructor.name || "Unknown Tech"), i } Ct(t, e); var n = t.prototype; return n.triggerSourceset = function (e) { var t = this; this.isReady_ || this.one("ready", function () { return t.setTimeout(function () { return t.triggerSourceset(e) }, 1) }), this.trigger({ src: e, type: "sourceset" }) }, n.manualProgressOn = function () { this.on("durationchange", this.onDurationChange), this.manualProgress = !0, this.one("ready", this.trackProgress) }, n.manualProgressOff = function () { this.manualProgress = !1, this.stopTrackingProgress(), this.off("durationchange", this.onDurationChange) }, n.trackProgress = function (e) { this.stopTrackingProgress(), this.progressInterval = this.setInterval(st(this, function () { var e = this.bufferedPercent(); this.bufferedPercent_ !== e && this.trigger("progress"), this.bufferedPercent_ = e, 1 === e && this.stopTrackingProgress() }), 500) }, n.onDurationChange = function (e) { this.duration_ = this.duration() }, n.buffered = function () { return Jt(0, 0) }, n.bufferedPercent = function () { return Zt(this.buffered(), this.duration_) }, n.stopTrackingProgress = function () { this.clearInterval(this.progressInterval) }, n.manualTimeUpdatesOn = function () { this.manualTimeUpdates = !0, this.on("play", this.trackCurrentTime), this.on("pause", this.stopTrackingCurrentTime) }, n.manualTimeUpdatesOff = function () { this.manualTimeUpdates = !1, this.stopTrackingCurrentTime(), this.off("play", this.trackCurrentTime), this.off("pause", this.stopTrackingCurrentTime) }, n.trackCurrentTime = function () { this.currentTimeInterval && this.stopTrackingCurrentTime(), this.currentTimeInterval = this.setInterval(function () { this.trigger({ type: "timeupdate", target: this, manuallyTriggered: !0 }) }, 250) }, n.stopTrackingCurrentTime = function () { this.clearInterval(this.currentTimeInterval), this.trigger({ type: "timeupdate", target: this, manuallyTriggered: !0 }) }, n.dispose = function () { this.clearTracks(Vn.names), this.manualProgress && this.manualProgressOff(), this.manualTimeUpdates && this.manualTimeUpdatesOff(), e.prototype.dispose.call(this) }, n.clearTracks = function (e) { var t = this; (e = [].concat(e)).forEach(function (e) { for (var n = t[e + "Tracks"]() || [], i = n.length; i--;) { var r = n[i]; "text" === e && t.removeRemoteTextTrack(r), n.removeTrack(r) } }) }, n.cleanupAutoTextTracks = function () { for (var e = this.autoRemoteTextTracks_ || [], t = e.length; t--;) { var n = e[t]; this.removeRemoteTextTrack(n) } }, n.reset = function () { }, n.error = function (e) { return void 0 !== e && (this.error_ = new on(e), this.trigger("error")), this.error_ }, n.played = function () { return this.hasStarted_ ? Jt(0, 0) : Jt() }, n.setCurrentTime = function () { this.manualTimeUpdates && this.trigger({ type: "timeupdate", target: this, manuallyTriggered: !0 }) }, n.initTrackListeners = function () { var e = this; Vn.names.forEach(function (t) { var n = Vn[t], i = function () { e.trigger(t + "trackchange") }, r = e[n.getterName](); r.addEventListener("removetrack", i), r.addEventListener("addtrack", i), e.on("dispose", function () { r.removeEventListener("removetrack", i), r.removeEventListener("addtrack", i) }) }) }, n.addWebVttScript_ = function () { var e = this; if (!r.a.WebVTT) if (a.a.body.contains(this.el())) { if (!this.options_["vtt.js"] && te(p.a) && Object.keys(p.a).length > 0) return void this.trigger("vttjsloaded"); var t = a.a.createElement("script"); t.src = this.options_["vtt.js"] || "https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js", t.onload = function () { e.trigger("vttjsloaded") }, t.onerror = function () { e.trigger("vttjserror") }, this.on("dispose", function () { t.onload = null, t.onerror = null }), r.a.WebVTT = !0, this.el().parentNode.appendChild(t) } else this.ready(this.addWebVttScript_) }, n.emulateTextTracks = function () { var e = this, t = this.textTracks(), n = this.remoteTextTracks(), i = function (e) { return t.addTrack(e.track) }, r = function (e) { return t.removeTrack(e.track) }; n.on("addtrack", i), n.on("removetrack", r), this.addWebVttScript_(); var s = function () { return e.trigger("texttrackchange") }, a = function () { s(); for (var e = 0; e < t.length; e++) { var n = t[e]; n.removeEventListener("cuechange", s), "showing" === n.mode && n.addEventListener("cuechange", s) } }; a(), t.addEventListener("change", a), t.addEventListener("addtrack", a), t.addEventListener("removetrack", a), this.on("dispose", function () { n.off("addtrack", i), n.off("removetrack", r), t.removeEventListener("change", a), t.removeEventListener("addtrack", a), t.removeEventListener("removetrack", a); for (var e = 0; e < t.length; e++) { t[e].removeEventListener("cuechange", s) } }) }, n.addTextTrack = function (e, t, n) { if (!e) throw new Error("TextTrack kind is required but was not provided"); return function (e, t, n, i, r) { void 0 === r && (r = {}); var s = e.textTracks(); r.kind = t, n && (r.label = n), i && (r.language = i), r.tech = e; var a = new Gn.text.TrackClass(r); return s.addTrack(a), a }(this, e, t, n) }, n.createRemoteTextTrack = function (e) { var t = St(e, { tech: this }); return new Wn.remoteTextEl.TrackClass(t) }, n.addRemoteTextTrack = function (e, t) { var n = this; void 0 === e && (e = {}); var i = this.createRemoteTextTrack(e); return !0 !== t && !1 !== t && (X.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'), t = !0), this.remoteTextTrackEls().addTrackElement_(i), this.remoteTextTracks().addTrack(i.track), !0 !== t && this.ready(function () { return n.autoRemoteTextTracks_.addTrack(i.track) }), i }, n.removeRemoteTextTrack = function (e) { var t = this.remoteTextTrackEls().getTrackElementByTrack_(e); this.remoteTextTrackEls().removeTrackElement_(t), this.remoteTextTracks().removeTrack(e), this.autoRemoteTextTracks_.removeTrack(e) }, n.getVideoPlaybackQuality = function () { return {} }, n.requestPictureInPicture = function () { var e = this.options_.Promise || r.a.Promise; if (e) return e.reject() }, n.setPoster = function () { }, n.playsinline = function () { }, n.setPlaysinline = function () { }, n.overrideNativeAudioTracks = function () { }, n.overrideNativeVideoTracks = function () { }, n.canPlayType = function () { return "" }, t.canPlayType = function () { return "" }, t.canPlaySource = function (e, n) { return t.canPlayType(e.type) }, t.isTech = function (e) { return e.prototype instanceof t || e instanceof t || e === t }, t.registerTech = function (e, n) { if (t.techs_ || (t.techs_ = {}), !t.isTech(n)) throw new Error("Tech " + e + " must be a Tech"); if (!t.canPlayType) throw new Error("Techs must have a static canPlayType method on them"); if (!t.canPlaySource) throw new Error("Techs must have a static canPlaySource method on them"); return e = Tt(e), t.techs_[e] = n, t.techs_[bt(e)] = n, "Tech" !== e && t.defaultTechOrder_.push(e), n }, t.getTech = function (e) { if (e) return t.techs_ && t.techs_[e] ? t.techs_[e] : (e = Tt(e), r.a && r.a.videojs && r.a.videojs[e] ? (X.warn("The " + e + " tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"), r.a.videojs[e]) : void 0) }, t }(Et); Gn.names.forEach(function (e) { var t = Gn[e]; zn.prototype[t.getterName] = function () { return this[t.privateName] = this[t.privateName] || new t.ListClass, this[t.privateName] } }), zn.prototype.featuresVolumeControl = !0, zn.prototype.featuresMuteControl = !0, zn.prototype.featuresFullscreenResize = !1, zn.prototype.featuresPlaybackRate = !1, zn.prototype.featuresProgressEvents = !1, zn.prototype.featuresSourceset = !1, zn.prototype.featuresTimeupdateEvents = !1, zn.prototype.featuresNativeTextTracks = !1, zn.withSourceHandlers = function (e) { e.registerSourceHandler = function (t, n) { var i = e.sourceHandlers; i || (i = e.sourceHandlers = []), void 0 === n && (n = i.length), i.splice(n, 0, t) }, e.canPlayType = function (t) { for (var n, i = e.sourceHandlers || [], r = 0; r < i.length; r++)if (n = i[r].canPlayType(t)) return n; return "" }, e.selectSourceHandler = function (t, n) { for (var i = e.sourceHandlers || [], r = 0; r < i.length; r++)if (i[r].canHandleSource(t, n)) return i[r]; return null }, e.canPlaySource = function (t, n) { var i = e.selectSourceHandler(t, n); return i ? i.canHandleSource(t, n) : "" };["seekable", "seeking", "duration"].forEach(function (e) { var t = this[e]; "function" == typeof t && (this[e] = function () { return this.sourceHandler_ && this.sourceHandler_[e] ? this.sourceHandler_[e].apply(this.sourceHandler_, arguments) : t.apply(this, arguments) }) }, e.prototype), e.prototype.setSource = function (t) { var n = e.selectSourceHandler(t, this.options_); n || (e.nativeSourceHandler ? n = e.nativeSourceHandler : X.error("No source handler found for the current source.")), this.disposeSourceHandler(), this.off("dispose", this.disposeSourceHandler), n !== e.nativeSourceHandler && (this.currentSource_ = t), this.sourceHandler_ = n.handleSource(t, this, this.options_), this.one("dispose", this.disposeSourceHandler) }, e.prototype.disposeSourceHandler = function () { this.currentSource_ && (this.clearTracks(["audio", "video"]), this.currentSource_ = null), this.cleanupAutoTextTracks(), this.sourceHandler_ && (this.sourceHandler_.dispose && this.sourceHandler_.dispose(), this.sourceHandler_ = null) } }, Et.registerComponent("Tech", zn), zn.registerTech("Tech", zn), zn.defaultTechOrder_ = []; var Kn = {}, Xn = {}, Yn = {}; function $n(e, t, n) { e.setTimeout(function () { return function e(t, n, i, r, s, a) { void 0 === t && (t = {}); void 0 === n && (n = []); void 0 === s && (s = []); void 0 === a && (a = !1); var o = n, l = o[0], u = o.slice(1); if ("string" == typeof l) e(t, Kn[l], i, r, s, a); else if (l) { var c = function (e, t) { var n = Xn[e.id()], i = null; if (null == n) return i = t(e), Xn[e.id()] = [[t, i]], i; for (var r = 0; r < n.length; r++) { var s = n[r], a = s[0], o = s[1]; a === t && (i = o) } null === i && (i = t(e), n.push([t, i])); return i }(r, l); if (!c.setSource) return s.push(c), e(t, u, i, r, s, a); c.setSource(Z({}, t), function (n, o) { if (n) return e(t, u, i, r, s, a); s.push(c), e(o, t.type === o.type ? u : Kn[o.type], i, r, s, a) }) } else u.length ? e(t, u, i, r, s, a) : a ? i(t, s) : e(t, Kn["*"], i, r, s, !0) }(t, Kn[t.type], n, e) }, 1) } function Qn(e, t, n, i) { void 0 === i && (i = null); var r = "call" + Tt(n), s = e.reduce(ti(r), i), a = s === Yn, o = a ? null : t[n](s); return function (e, t, n, i) { for (var r = e.length - 1; r >= 0; r--) { var s = e[r]; s[t] && s[t](i, n) } }(e, n, o, a), o } var Jn = { buffered: 1, currentTime: 1, duration: 1, seekable: 1, played: 1, paused: 1, volume: 1 }, Zn = { setCurrentTime: 1, setVolume: 1 }, ei = { play: 1, pause: 1 }; function ti(e) { return function (t, n) { return t === Yn ? Yn : n[e] ? n[e](t) : t } } var ni = { opus: "video/ogg", ogv: "video/ogg", mp4: "video/mp4", mov: "video/mp4", m4v: "video/mp4", mkv: "video/x-matroska", m4a: "audio/mp4", mp3: "audio/mpeg", aac: "audio/aac", oga: "audio/ogg", m3u8: "application/x-mpegURL", jpg: "image/jpeg", jpeg: "image/jpeg", gif: "image/gif", png: "image/png", svg: "image/svg+xml", webp: "image/webp" }, ii = function (e) { void 0 === e && (e = ""); var t = Ln(e); return ni[t.toLowerCase()] || "" }; function ri(e) { if (!e.type) { var t = ii(e.src); t && (e.type = t) } return e } var si = function (e) { function t(t, n, i) { var r, s = St({ createEl: !1 }, n); if (r = e.call(this, t, s, i) || this, n.playerOptions.sources && 0 !== n.playerOptions.sources.length) t.src(n.playerOptions.sources); else for (var a = 0, o = n.playerOptions.techOrder; a < o.length; a++) { var l = Tt(o[a]), u = zn.getTech(l); if (l || (u = Et.getComponent(l)), u && u.isSupported()) { t.loadTech_(l); break } } return r } return Ct(t, e), t }(Et); Et.registerComponent("MediaLoader", si); var ai = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).emitTapEvents(), i.enable(), i } Ct(t, e); var n = t.prototype; return n.createEl = function (t, n, i) { void 0 === t && (t = "div"), void 0 === n && (n = {}), void 0 === i && (i = {}), n = Z({ innerHTML: '<span aria-hidden="true" class="vjs-icon-placeholder"></span>', className: this.buildCSSClass(), tabIndex: 0 }, n), "button" === t && X.error("Creating a ClickableComponent with an HTML element of " + t + " is not supported; use a Button instead."), i = Z({ role: "button" }, i), this.tabIndex_ = n.tabIndex; var r = e.prototype.createEl.call(this, t, n, i); return this.createControlTextEl(r), r }, n.dispose = function () { this.controlTextEl_ = null, e.prototype.dispose.call(this) }, n.createControlTextEl = function (e) { return this.controlTextEl_ = ue("span", { className: "vjs-control-text" }, { "aria-live": "polite" }), e && e.appendChild(this.controlTextEl_), this.controlText(this.controlText_, e), this.controlTextEl_ }, n.controlText = function (e, t) { if (void 0 === t && (t = this.el()), void 0 === e) return this.controlText_ || "Need Text"; var n = this.localize(e); this.controlText_ = e, ce(this.controlTextEl_, n), this.nonIconControl || t.setAttribute("title", n) }, n.buildCSSClass = function () { return "vjs-control vjs-button " + e.prototype.buildCSSClass.call(this) }, n.enable = function () { this.enabled_ || (this.enabled_ = !0, this.removeClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "false"), void 0 !== this.tabIndex_ && this.el_.setAttribute("tabIndex", this.tabIndex_), this.on(["tap", "click"], this.handleClick), this.on("keydown", this.handleKeyDown)) }, n.disable = function () { this.enabled_ = !1, this.addClass("vjs-disabled"), this.el_.setAttribute("aria-disabled", "true"), void 0 !== this.tabIndex_ && this.el_.removeAttribute("tabIndex"), this.off("mouseover", this.handleMouseOver), this.off("mouseout", this.handleMouseOut), this.off(["tap", "click"], this.handleClick), this.off("keydown", this.handleKeyDown) }, n.handleClick = function (e) { }, n.handleKeyDown = function (t) { c.a.isEventKey(t, "Space") || c.a.isEventKey(t, "Enter") ? (t.preventDefault(), t.stopPropagation(), this.trigger("click")) : e.prototype.handleKeyDown.call(this, t) }, t }(Et); Et.registerComponent("ClickableComponent", ai); var oi = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).update(), t.on("posterchange", st(At(i), i.update)), i } Ct(t, e); var n = t.prototype; return n.dispose = function () { this.player().off("posterchange", this.update), e.prototype.dispose.call(this) }, n.createEl = function () { return ue("div", { className: "vjs-poster", tabIndex: -1 }) }, n.update = function (e) { var t = this.player().poster(); this.setSrc(t), t ? this.show() : this.hide() }, n.setSrc = function (e) { var t = ""; e && (t = 'url("' + e + '")'), this.el_.style.backgroundImage = t }, n.handleClick = function (e) { this.player_.controls() && (this.player_.tech(!0) && this.player_.tech(!0).focus(), this.player_.paused() ? cn(this.player_.play()) : this.player_.pause()) }, t }(ai); Et.registerComponent("PosterImage", oi); var li = { monospace: "monospace", sansSerif: "sans-serif", serif: "serif", monospaceSansSerif: '"Andale Mono", "Lucida Console", monospace', monospaceSerif: '"Courier New", monospace', proportionalSansSerif: "sans-serif", proportionalSerif: "serif", casual: '"Comic Sans MS", Impact, fantasy', script: '"Monotype Corsiva", cursive', smallcaps: '"Andale Mono", "Lucida Console", monospace, sans-serif' }; function ui(e, t) { var n; if (4 === e.length) n = e[1] + e[1] + e[2] + e[2] + e[3] + e[3]; else { if (7 !== e.length) throw new Error("Invalid color code provided, " + e + "; must be formatted as e.g. #f0e or #f604e2."); n = e.slice(1) } return "rgba(" + parseInt(n.slice(0, 2), 16) + "," + parseInt(n.slice(2, 4), 16) + "," + parseInt(n.slice(4, 6), 16) + "," + t + ")" } function ci(e, t, n) { try { e.style[t] = n } catch (e) { return } } var hi = function (e) { function t(t, n, i) { var s; s = e.call(this, t, n, i) || this; var a = st(At(s), s.updateDisplay); return t.on("loadstart", st(At(s), s.toggleDisplay)), t.on("texttrackchange", a), t.on("loadedmetadata", st(At(s), s.preselectTrack)), t.ready(st(At(s), function () { if (t.tech_ && t.tech_.featuresNativeTextTracks) this.hide(); else { t.on("fullscreenchange", a), t.on("playerresize", a), r.a.addEventListener("orientationchange", a), t.on("dispose", function () { return r.a.removeEventListener("orientationchange", a) }); for (var e = this.options_.playerOptions.tracks || [], n = 0; n < e.length; n++)this.player_.addRemoteTextTrack(e[n], !0); this.preselectTrack() } })), s } Ct(t, e); var n = t.prototype; return n.preselectTrack = function () { for (var e, t, n, i = { captions: 1, subtitles: 1 }, r = this.player_.textTracks(), s = this.player_.cache_.selectedLanguage, a = 0; a < r.length; a++) { var o = r[a]; s && s.enabled && s.language && s.language === o.language && o.kind in i ? o.kind === s.kind ? n = o : n || (n = o) : s && !s.enabled ? (n = null, e = null, t = null) : o.default && ("descriptions" !== o.kind || e ? o.kind in i && !t && (t = o) : e = o) } n ? n.mode = "showing" : t ? t.mode = "showing" : e && (e.mode = "showing") }, n.toggleDisplay = function () { this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks ? this.hide() : this.show() }, n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-text-track-display" }, { "aria-live": "off", "aria-atomic": "true" }) }, n.clearDisplay = function () { "function" == typeof r.a.WebVTT && r.a.WebVTT.processCues(r.a, [], this.el_) }, n.updateDisplay = function () { var e = this.player_.textTracks(), t = this.options_.allowMultipleShowingTracks; if (this.clearDisplay(), t) { for (var n = [], i = 0; i < e.length; ++i) { var r = e[i]; "showing" === r.mode && n.push(r) } this.updateForTrack(n) } else { for (var s = null, a = null, o = e.length; o--;) { var l = e[o]; "showing" === l.mode && ("descriptions" === l.kind ? s = l : a = l) } a ? ("off" !== this.getAttribute("aria-live") && this.setAttribute("aria-live", "off"), this.updateForTrack(a)) : s && ("assertive" !== this.getAttribute("aria-live") && this.setAttribute("aria-live", "assertive"), this.updateForTrack(s)) } }, n.updateDisplayState = function (e) { for (var t = this.player_.textTrackSettings.getValues(), n = e.activeCues, i = n.length; i--;) { var s = n[i]; if (s) { var a = s.displayState; if (t.color && (a.firstChild.style.color = t.color), t.textOpacity && ci(a.firstChild, "color", ui(t.color || "#fff", t.textOpacity)), t.backgroundColor && (a.firstChild.style.backgroundColor = t.backgroundColor), t.backgroundOpacity && ci(a.firstChild, "backgroundColor", ui(t.backgroundColor || "#000", t.backgroundOpacity)), t.windowColor && (t.windowOpacity ? ci(a, "backgroundColor", ui(t.windowColor, t.windowOpacity)) : a.style.backgroundColor = t.windowColor), t.edgeStyle && ("dropshadow" === t.edgeStyle ? a.firstChild.style.textShadow = "2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222" : "raised" === t.edgeStyle ? a.firstChild.style.textShadow = "1px 1px #222, 2px 2px #222, 3px 3px #222" : "depressed" === t.edgeStyle ? a.firstChild.style.textShadow = "1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222" : "uniform" === t.edgeStyle && (a.firstChild.style.textShadow = "0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")), t.fontPercent && 1 !== t.fontPercent) { var o = r.a.parseFloat(a.style.fontSize); a.style.fontSize = o * t.fontPercent + "px", a.style.height = "auto", a.style.top = "auto", a.style.bottom = "2px" } t.fontFamily && "default" !== t.fontFamily && ("small-caps" === t.fontFamily ? a.firstChild.style.fontVariant = "small-caps" : a.firstChild.style.fontFamily = li[t.fontFamily]) } } }, n.updateForTrack = function (e) { if (Array.isArray(e) || (e = [e]), "function" == typeof r.a.WebVTT && !e.every(function (e) { return !e.activeCues })) { for (var t = [], n = 0; n < e.length; ++n)for (var i = e[n], s = 0; s < i.activeCues.length; ++s)t.push(i.activeCues[s]); r.a.WebVTT.processCues(r.a, t, this.el_); for (var a = 0; a < e.length; ++a) { for (var o = e[a], l = 0; l < o.activeCues.length; ++l) { var u = o.activeCues[l].displayState; fe(u, "vjs-text-track-cue"), fe(u, "vjs-text-track-cue-" + (o.language ? o.language : a)) } this.player_.textTrackSettings && this.updateDisplayState(o) } } }, t }(Et); Et.registerComponent("TextTrackDisplay", hi); var di = function (e) { function t() { return e.apply(this, arguments) || this } return Ct(t, e), t.prototype.createEl = function () { var t = this.player_.isAudio(), n = this.localize(t ? "Audio Player" : "Video Player"), i = ue("span", { className: "vjs-control-text", innerHTML: this.localize("{1} is loading.", [n]) }), r = e.prototype.createEl.call(this, "div", { className: "vjs-loading-spinner", dir: "ltr" }); return r.appendChild(i), r }, t }(Et); Et.registerComponent("LoadingSpinner", di); var fi = function (e) { function t() { return e.apply(this, arguments) || this } Ct(t, e); var n = t.prototype; return n.createEl = function (e, t, n) { void 0 === t && (t = {}), void 0 === n && (n = {}), t = Z({ innerHTML: '<span aria-hidden="true" class="vjs-icon-placeholder"></span>', className: this.buildCSSClass() }, t), n = Z({ type: "button" }, n); var i = Et.prototype.createEl.call(this, "button", t, n); return this.createControlTextEl(i), i }, n.addChild = function (e, t) { void 0 === t && (t = {}); var n = this.constructor.name; return X.warn("Adding an actionable (user controllable) child to a Button (" + n + ") is not supported; use a ClickableComponent instead."), Et.prototype.addChild.call(this, e, t) }, n.enable = function () { e.prototype.enable.call(this), this.el_.removeAttribute("disabled") }, n.disable = function () { e.prototype.disable.call(this), this.el_.setAttribute("disabled", "disabled") }, n.handleKeyDown = function (t) { c.a.isEventKey(t, "Space") || c.a.isEventKey(t, "Enter") ? t.stopPropagation() : e.prototype.handleKeyDown.call(this, t) }, t }(ai); Et.registerComponent("Button", fi); var pi = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).mouseused_ = !1, i.on("mousedown", i.handleMouseDown), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-big-play-button" }, n.handleClick = function (e) { var t = this.player_.play(); if (this.mouseused_ && e.clientX && e.clientY) return cn(t), void (this.player_.tech(!0) && this.player_.tech(!0).focus()); var n = this.player_.getChild("controlBar"), i = n && n.getChild("playToggle"); if (i) { var r = function () { return i.focus() }; un(t) ? t.then(r, function () { }) : this.setTimeout(r, 1) } else this.player_.tech(!0).focus() }, n.handleKeyDown = function (t) { this.mouseused_ = !1, e.prototype.handleKeyDown.call(this, t) }, n.handleMouseDown = function (e) { this.mouseused_ = !0 }, t }(fi); pi.prototype.controlText_ = "Play Video", Et.registerComponent("BigPlayButton", pi); var mi = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).controlText(n && n.controlText || i.localize("Close")), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-close-button " + e.prototype.buildCSSClass.call(this) }, n.handleClick = function (e) { this.trigger({ type: "close", bubbles: !1 }) }, n.handleKeyDown = function (t) { c.a.isEventKey(t, "Esc") ? (t.preventDefault(), t.stopPropagation(), this.trigger("click")) : e.prototype.handleKeyDown.call(this, t) }, t }(fi); Et.registerComponent("CloseButton", mi); var gi = function (e) { function t(t, n) { var i; return void 0 === n && (n = {}), i = e.call(this, t, n) || this, n.replay = void 0 === n.replay || n.replay, i.on(t, "play", i.handlePlay), i.on(t, "pause", i.handlePause), n.replay && i.on(t, "ended", i.handleEnded), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-play-control " + e.prototype.buildCSSClass.call(this) }, n.handleClick = function (e) { this.player_.paused() ? this.player_.play() : this.player_.pause() }, n.handleSeeked = function (e) { this.removeClass("vjs-ended"), this.player_.paused() ? this.handlePause(e) : this.handlePlay(e) }, n.handlePlay = function (e) { this.removeClass("vjs-ended"), this.removeClass("vjs-paused"), this.addClass("vjs-playing"), this.controlText("Pause") }, n.handlePause = function (e) { this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.controlText("Play") }, n.handleEnded = function (e) { this.removeClass("vjs-playing"), this.addClass("vjs-ended"), this.controlText("Replay"), this.one(this.player_, "seeked", this.handleSeeked) }, t }(fi); gi.prototype.controlText_ = "Play", Et.registerComponent("PlayToggle", gi); var vi = function (e, t) { e = e < 0 ? 0 : e; var n = Math.floor(e % 60), i = Math.floor(e / 60 % 60), r = Math.floor(e / 3600), s = Math.floor(t / 60 % 60), a = Math.floor(t / 3600); return (isNaN(e) || e === 1 / 0) && (r = i = n = "-"), (r = r > 0 || a > 0 ? r + ":" : "") + (i = ((r || s >= 10) && i < 10 ? "0" + i : i) + ":") + (n = n < 10 ? "0" + n : n) }, yi = vi; function _i(e, t) { return void 0 === t && (t = e), yi(e, t) } var bi = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).throttledUpdateContent = at(st(At(i), i.updateContent), rt), i.on(t, "timeupdate", i.throttledUpdateContent), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { var t = this.buildCSSClass(), n = e.prototype.createEl.call(this, "div", { className: t + " vjs-time-control vjs-control", innerHTML: '<span class="vjs-control-text" role="presentation">' + this.localize(this.labelText_) + " </span>" }); return this.contentEl_ = ue("span", { className: t + "-display" }, { "aria-live": "off", role: "presentation" }), this.updateTextNode_(), n.appendChild(this.contentEl_), n }, n.dispose = function () { this.contentEl_ = null, this.textNode_ = null, e.prototype.dispose.call(this) }, n.updateTextNode_ = function () { if (this.contentEl_) { for (; this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild); this.textNode_ = a.a.createTextNode(this.formattedTime_ || this.formatTime_(0)), this.contentEl_.appendChild(this.textNode_) } }, n.formatTime_ = function (e) { return _i(e) }, n.updateFormattedTime_ = function (e) { var t = this.formatTime_(e); t !== this.formattedTime_ && (this.formattedTime_ = t, this.requestAnimationFrame(this.updateTextNode_)) }, n.updateContent = function (e) { }, t }(Et); bi.prototype.labelText_ = "Time", bi.prototype.controlText_ = "Time", Et.registerComponent("TimeDisplay", bi); var Ti = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).on(t, "ended", i.handleEnded), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-current-time" }, n.updateContent = function (e) { var t = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime(); this.updateFormattedTime_(t) }, n.handleEnded = function (e) { this.player_.duration() && this.updateFormattedTime_(this.player_.duration()) }, t }(bi); Ti.prototype.labelText_ = "Current Time", Ti.prototype.controlText_ = "Current Time", Et.registerComponent("CurrentTimeDisplay", Ti); var Si = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).on(t, "durationchange", i.updateContent), i.on(t, "loadstart", i.updateContent), i.on(t, "loadedmetadata", i.throttledUpdateContent), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-duration" }, n.updateContent = function (e) { var t = this.player_.duration(); this.duration_ !== t && (this.duration_ = t, this.updateFormattedTime_(t)) }, t }(bi); Si.prototype.labelText_ = "Duration", Si.prototype.controlText_ = "Duration", Et.registerComponent("DurationDisplay", Si); var Ei = function (e) { function t() { return e.apply(this, arguments) || this } return Ct(t, e), t.prototype.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-time-control vjs-time-divider", innerHTML: "<div><span>/</span></div>" }, { "aria-hidden": !0 }) }, t }(Et); Et.registerComponent("TimeDivider", Ei); var Ci = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).on(t, "durationchange", i.throttledUpdateContent), i.on(t, "ended", i.handleEnded), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-remaining-time" }, n.createEl = function () { var t = e.prototype.createEl.call(this); return t.insertBefore(ue("span", {}, { "aria-hidden": !0 }, "-"), this.contentEl_), t }, n.updateContent = function (e) { "number" == typeof this.player_.duration() && (this.player_.remainingTimeDisplay ? this.updateFormattedTime_(this.player_.remainingTimeDisplay()) : this.updateFormattedTime_(this.player_.remainingTime())) }, n.handleEnded = function (e) { this.player_.duration() && this.updateFormattedTime_(0) }, t }(bi); Ci.prototype.labelText_ = "Remaining Time", Ci.prototype.controlText_ = "Remaining Time", Et.registerComponent("RemainingTimeDisplay", Ci); var wi = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).updateShowing(), i.on(i.player(), "durationchange", i.updateShowing), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { var t = e.prototype.createEl.call(this, "div", { className: "vjs-live-control vjs-control" }); return this.contentEl_ = ue("div", { className: "vjs-live-display", innerHTML: '<span class="vjs-control-text">' + this.localize("Stream Type") + " </span>" + this.localize("LIVE") }, { "aria-live": "off" }), t.appendChild(this.contentEl_), t }, n.dispose = function () { this.contentEl_ = null, e.prototype.dispose.call(this) }, n.updateShowing = function (e) { this.player().duration() === 1 / 0 ? this.show() : this.hide() }, t }(Et); Et.registerComponent("LiveDisplay", wi); var ki = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).updateLiveEdgeStatus(), i.player_.liveTracker && i.on(i.player_.liveTracker, "liveedgechange", i.updateLiveEdgeStatus), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { var t = e.prototype.createEl.call(this, "button", { className: "vjs-seek-to-live-control vjs-control" }); return this.textEl_ = ue("span", { className: "vjs-seek-to-live-text", innerHTML: this.localize("LIVE") }, { "aria-hidden": "true" }), t.appendChild(this.textEl_), t }, n.updateLiveEdgeStatus = function (e) { !this.player_.liveTracker || this.player_.liveTracker.atLiveEdge() ? (this.setAttribute("aria-disabled", !0), this.addClass("vjs-at-live-edge"), this.controlText("Seek to live, currently playing live")) : (this.setAttribute("aria-disabled", !1), this.removeClass("vjs-at-live-edge"), this.controlText("Seek to live, currently behind live")) }, n.handleClick = function () { this.player_.liveTracker.seekToLiveEdge() }, n.dispose = function () { this.player_.liveTracker && this.off(this.player_.liveTracker, "liveedgechange", this.updateLiveEdgeStatus), this.textEl_ = null, e.prototype.dispose.call(this) }, t }(fi); ki.prototype.controlText_ = "Seek to live, currently playing live", Et.registerComponent("SeekToLive", ki); var Ai = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).bar = i.getChild(i.options_.barName), i.vertical(!!i.options_.vertical), i.enable(), i } Ct(t, e); var n = t.prototype; return n.enabled = function () { return this.enabled_ }, n.enable = function () { this.enabled() || (this.on("mousedown", this.handleMouseDown), this.on("touchstart", this.handleMouseDown), this.on("keydown", this.handleKeyDown), this.on("click", this.handleClick), this.on(this.player_, "controlsvisible", this.update), this.playerEvent && this.on(this.player_, this.playerEvent, this.update), this.removeClass("disabled"), this.setAttribute("tabindex", 0), this.enabled_ = !0) }, n.disable = function () { if (this.enabled()) { var e = this.bar.el_.ownerDocument; this.off("mousedown", this.handleMouseDown), this.off("touchstart", this.handleMouseDown), this.off("keydown", this.handleKeyDown), this.off("click", this.handleClick), this.off(this.player_, "controlsvisible", this.update), this.off(e, "mousemove", this.handleMouseMove), this.off(e, "mouseup", this.handleMouseUp), this.off(e, "touchmove", this.handleMouseMove), this.off(e, "touchend", this.handleMouseUp), this.removeAttribute("tabindex"), this.addClass("disabled"), this.playerEvent && this.off(this.player_, this.playerEvent, this.update), this.enabled_ = !1 } }, n.createEl = function (t, n, i) { return void 0 === n && (n = {}), void 0 === i && (i = {}), n.className = n.className + " vjs-slider", n = Z({ tabIndex: 0 }, n), i = Z({ role: "slider", "aria-valuenow": 0, "aria-valuemin": 0, "aria-valuemax": 100, tabIndex: 0 }, i), e.prototype.createEl.call(this, t, n, i) }, n.handleMouseDown = function (e) { var t = this.bar.el_.ownerDocument; "mousedown" === e.type && e.preventDefault(), "touchstart" !== e.type || qt || e.preventDefault(), Te(), this.addClass("vjs-sliding"), this.trigger("slideractive"), this.on(t, "mousemove", this.handleMouseMove), this.on(t, "mouseup", this.handleMouseUp), this.on(t, "touchmove", this.handleMouseMove), this.on(t, "touchend", this.handleMouseUp), this.handleMouseMove(e) }, n.handleMouseMove = function (e) { }, n.handleMouseUp = function () { var e = this.bar.el_.ownerDocument; Se(), this.removeClass("vjs-sliding"), this.trigger("sliderinactive"), this.off(e, "mousemove", this.handleMouseMove), this.off(e, "mouseup", this.handleMouseUp), this.off(e, "touchmove", this.handleMouseMove), this.off(e, "touchend", this.handleMouseUp), this.update() }, n.update = function () { if (this.el_) { var e = this.getPercent(), t = this.bar; if (t) { ("number" != typeof e || e != e || e < 0 || e === 1 / 0) && (e = 0); var n = (100 * e).toFixed(2) + "%", i = t.el().style, r = this.vertical() ? "height" : "width"; return i[r] !== n && (i[r] = n), e } } }, n.calculateDistance = function (e) { var t = we(this.el_, e); return this.vertical() ? t.y : t.x }, n.handleKeyDown = function (t) { c.a.isEventKey(t, "Left") || c.a.isEventKey(t, "Down") ? (t.preventDefault(), t.stopPropagation(), this.stepBack()) : c.a.isEventKey(t, "Right") || c.a.isEventKey(t, "Up") ? (t.preventDefault(), t.stopPropagation(), this.stepForward()) : e.prototype.handleKeyDown.call(this, t) }, n.handleClick = function (e) { e.stopPropagation(), e.preventDefault() }, n.vertical = function (e) { if (void 0 === e) return this.vertical_ || !1; this.vertical_ = !!e, this.vertical_ ? this.addClass("vjs-slider-vertical") : this.addClass("vjs-slider-horizontal") }, t }(Et); Et.registerComponent("Slider", Ai); var xi = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).partEls_ = [], i.on(t, "progress", i.update), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-load-progress", innerHTML: '<span class="vjs-control-text"><span>' + this.localize("Loaded") + '</span>: <span class="vjs-control-text-loaded-percentage">0%</span></span>' }) }, n.dispose = function () { this.partEls_ = null, e.prototype.dispose.call(this) }, n.update = function (e) { var t = this.player_.liveTracker, n = this.player_.buffered(), i = t && t.isLive() ? t.seekableEnd() : this.player_.duration(), r = this.player_.bufferedEnd(), s = this.partEls_, a = this.$(".vjs-control-text-loaded-percentage"), o = function (e, t, n) { var i = e / t || 0; return i = 100 * (i >= 1 ? 1 : i), n && (i = i.toFixed(2)), i + "%" }; this.el_.style.width = o(r, i), ce(a, o(r, i, !0)); for (var l = 0; l < n.length; l++) { var u = n.start(l), c = n.end(l), h = s[l]; h || (h = this.el_.appendChild(ue()), s[l] = h), h.style.left = o(u, r), h.style.width = o(c - u, r) } for (var d = s.length; d > n.length; d--)this.el_.removeChild(s[d - 1]); s.length = n.length }, t }(Et); Et.registerComponent("LoadProgressBar", xi); var Ii = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).update = at(st(At(i), i.update), rt), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-time-tooltip" }, { "aria-hidden": "true" }) }, n.update = function (e, t, n) { var i = Ee(this.el_), r = Ee(this.player_.el()), s = e.width * t; if (r && i) { var a = e.left - r.left + s, o = e.width - s + (r.right - e.right), l = i.width / 2; a < l ? l += l - a : o < l && (l = o), l < 0 ? l = 0 : l > i.width && (l = i.width), this.el_.style.right = "-" + l + "px", this.write(n) } }, n.write = function (e) { ce(this.el_, e) }, n.updateTime = function (e, t, n, i) { var r = this; this.rafId_ && this.cancelAnimationFrame(this.rafId_), this.rafId_ = this.requestAnimationFrame(function () { var s, a = r.player_.duration(); if (r.player_.liveTracker && r.player_.liveTracker.isLive()) { var o = r.player_.liveTracker.liveWindow(), l = o - t * o; s = (l < 1 ? "" : "-") + _i(l, o) } else s = _i(n, a); r.update(e, t, s), i && i() }) }, t }(Et); Et.registerComponent("TimeTooltip", Ii); var Oi = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).update = at(st(At(i), i.update), rt), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-play-progress vjs-slider-bar" }, { "aria-hidden": "true" }) }, n.update = function (e, t) { var n = this.getChild("timeTooltip"); if (n) { var i = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime(); n.updateTime(e, t, i) } }, t }(Et); Oi.prototype.options_ = { children: [] }, Rt || Ut || Oi.prototype.options_.children.push("timeTooltip"), Et.registerComponent("PlayProgressBar", Oi); var Di = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).update = at(st(At(i), i.update), rt), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-mouse-display" }) }, n.update = function (e, t) { var n = this, i = t * this.player_.duration(); this.getChild("timeTooltip").updateTime(e, t, i, function () { n.el_.style.left = e.width * t + "px" }) }, t }(Et); Di.prototype.options_ = { children: ["timeTooltip"] }, Et.registerComponent("MouseTimeDisplay", Di); var Li = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).setEventHandlers_(), i } Ct(t, e); var n = t.prototype; return n.setEventHandlers_ = function () { this.update = at(st(this, this.update), 30), this.on(this.player_, "timeupdate", this.update), this.on(this.player_, "ended", this.handleEnded), this.on(this.player_, "durationchange", this.update), this.player_.liveTracker && this.on(this.player_.liveTracker, "liveedgechange", this.update), this.updateInterval = null, this.on(this.player_, ["playing"], this.enableInterval_), this.on(this.player_, ["ended", "pause", "waiting"], this.disableInterval_), "hidden" in a.a && "visibilityState" in a.a && this.on(a.a, "visibilitychange", this.toggleVisibility_) }, n.toggleVisibility_ = function (e) { a.a.hidden ? this.disableInterval_(e) : (this.enableInterval_(), this.requestAnimationFrame(this.update)) }, n.enableInterval_ = function () { var e = this; this.clearInterval(this.updateInterval), this.updateInterval = this.setInterval(function () { e.requestAnimationFrame(e.update) }, 30) }, n.disableInterval_ = function (e) { this.player_.liveTracker && this.player_.liveTracker.isLive() && "ended" !== e.type || this.clearInterval(this.updateInterval) }, n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-progress-holder" }, { "aria-label": this.localize("Progress Bar") }) }, n.update_ = function (e, t) { var n = this.player_.liveTracker, i = this.player_.duration(); n && n.isLive() && (i = this.player_.liveTracker.liveCurrentTime()), this.el_.setAttribute("aria-valuenow", (100 * t).toFixed(2)), this.el_.setAttribute("aria-valuetext", this.localize("progress bar timing: currentTime={1} duration={2}", [_i(e, i), _i(i, i)], "{1} of {2}")), this.bar && this.bar.update(Ee(this.el_), t) }, n.update = function (t) { if (null !== this.el().offsetParent) { var n = e.prototype.update.call(this); return this.update_(this.getCurrentTime_(), n), n } }, n.getCurrentTime_ = function () { return this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime() }, n.handleEnded = function (e) { this.update_(this.player_.duration(), 1) }, n.getPercent = function () { var e, t = this.getCurrentTime_(), n = this.player_.liveTracker; return n && n.isLive() ? (e = (t - n.seekableStart()) / n.liveWindow(), n.atLiveEdge() && (e = 1)) : e = t / this.player_.duration(), e >= 1 ? 1 : e || 0 }, n.handleMouseDown = function (t) { De(t) && (t.stopPropagation(), this.player_.scrubbing(!0), this.videoWasPlaying = !this.player_.paused(), this.player_.pause(), e.prototype.handleMouseDown.call(this, t)) }, n.handleMouseMove = function (e) { if (De(e)) { var t, n = this.calculateDistance(e), i = this.player_.liveTracker; if (i && i.isLive()) { var r = i.seekableStart(), s = i.liveCurrentTime(); if ((t = r + n * i.liveWindow()) >= s && (t = s), t <= r && (t = r + .1), t === 1 / 0) return } else (t = n * this.player_.duration()) === this.player_.duration() && (t -= .1); this.player_.currentTime(t) } }, n.enable = function () { e.prototype.enable.call(this); var t = this.getChild("mouseTimeDisplay"); t && t.show() }, n.disable = function () { e.prototype.disable.call(this); var t = this.getChild("mouseTimeDisplay"); t && t.hide() }, n.handleMouseUp = function (t) { e.prototype.handleMouseUp.call(this, t), t && t.stopPropagation(), this.player_.scrubbing(!1), this.player_.trigger({ type: "timeupdate", target: this, manuallyTriggered: !0 }), this.videoWasPlaying && cn(this.player_.play()) }, n.stepForward = function () { this.player_.currentTime(this.player_.currentTime() + 5) }, n.stepBack = function () { this.player_.currentTime(this.player_.currentTime() - 5) }, n.handleAction = function (e) { this.player_.paused() ? this.player_.play() : this.player_.pause() }, n.handleKeyDown = function (t) { if (c.a.isEventKey(t, "Space") || c.a.isEventKey(t, "Enter")) t.preventDefault(), t.stopPropagation(), this.handleAction(t); else if (c.a.isEventKey(t, "Home")) t.preventDefault(), t.stopPropagation(), this.player_.currentTime(0); else if (c.a.isEventKey(t, "End")) t.preventDefault(), t.stopPropagation(), this.player_.currentTime(this.player_.duration()); else if (/^[0-9]$/.test(c()(t))) { t.preventDefault(), t.stopPropagation(); var n = 10 * (c.a.codes[c()(t)] - c.a.codes[0]) / 100; this.player_.currentTime(this.player_.duration() * n) } else c.a.isEventKey(t, "PgDn") ? (t.preventDefault(), t.stopPropagation(), this.player_.currentTime(this.player_.currentTime() - 60)) : c.a.isEventKey(t, "PgUp") ? (t.preventDefault(), t.stopPropagation(), this.player_.currentTime(this.player_.currentTime() + 60)) : e.prototype.handleKeyDown.call(this, t) }, t }(Ai); Li.prototype.options_ = { children: ["loadProgressBar", "playProgressBar"], barName: "playProgressBar" }, Rt || Ut || Li.prototype.options_.children.splice(1, 0, "mouseTimeDisplay"), Et.registerComponent("SeekBar", Li); var Pi = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).handleMouseMove = at(st(At(i), i.handleMouseMove), rt), i.throttledHandleMouseSeek = at(st(At(i), i.handleMouseSeek), rt), i.enable(), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-progress-control vjs-control" }) }, n.handleMouseMove = function (e) { var t = this.getChild("seekBar"); if (t) { var n = t.getChild("mouseTimeDisplay"), i = t.el(), r = Ee(i), s = we(i, e).x; s > 1 ? s = 1 : s < 0 && (s = 0), n && n.update(r, s) } }, n.handleMouseSeek = function (e) { var t = this.getChild("seekBar"); t && t.handleMouseMove(e) }, n.enabled = function () { return this.enabled_ }, n.disable = function () { this.children().forEach(function (e) { return e.disable && e.disable() }), this.enabled() && (this.off(["mousedown", "touchstart"], this.handleMouseDown), this.off(this.el_, "mousemove", this.handleMouseMove), this.handleMouseUp(), this.addClass("disabled"), this.enabled_ = !1) }, n.enable = function () { this.children().forEach(function (e) { return e.enable && e.enable() }), this.enabled() || (this.on(["mousedown", "touchstart"], this.handleMouseDown), this.on(this.el_, "mousemove", this.handleMouseMove), this.removeClass("disabled"), this.enabled_ = !0) }, n.handleMouseDown = function (e) { var t = this.el_.ownerDocument, n = this.getChild("seekBar"); n && n.handleMouseDown(e), this.on(t, "mousemove", this.throttledHandleMouseSeek), this.on(t, "touchmove", this.throttledHandleMouseSeek), this.on(t, "mouseup", this.handleMouseUp), this.on(t, "touchend", this.handleMouseUp) }, n.handleMouseUp = function (e) { var t = this.el_.ownerDocument, n = this.getChild("seekBar"); n && n.handleMouseUp(e), this.off(t, "mousemove", this.throttledHandleMouseSeek), this.off(t, "touchmove", this.throttledHandleMouseSeek), this.off(t, "mouseup", this.handleMouseUp), this.off(t, "touchend", this.handleMouseUp) }, t }(Et); Pi.prototype.options_ = { children: ["seekBar"] }, Et.registerComponent("ProgressControl", Pi); var Ni = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).on(t, ["enterpictureinpicture", "leavepictureinpicture"], i.handlePictureInPictureChange), a.a.pictureInPictureEnabled || i.disable(), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-picture-in-picture-control " + e.prototype.buildCSSClass.call(this) }, n.handlePictureInPictureChange = function (e) { this.player_.isInPictureInPicture() ? this.controlText("Exit Picture-in-Picture") : this.controlText("Picture-in-Picture") }, n.handleClick = function (e) { this.player_.isInPictureInPicture() ? this.player_.exitPictureInPicture() : this.player_.requestPictureInPicture() }, t }(fi); Ni.prototype.controlText_ = "Picture-in-Picture", Et.registerComponent("PictureInPictureToggle", Ni); var Ri = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).on(t, "fullscreenchange", i.handleFullscreenChange), !1 === a.a[t.fsApi_.fullscreenEnabled] && i.disable(), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-fullscreen-control " + e.prototype.buildCSSClass.call(this) }, n.handleFullscreenChange = function (e) { this.player_.isFullscreen() ? this.controlText("Non-Fullscreen") : this.controlText("Fullscreen") }, n.handleClick = function (e) { this.player_.isFullscreen() ? this.player_.exitFullscreen() : this.player_.requestFullscreen() }, t }(fi); Ri.prototype.controlText_ = "Fullscreen", Et.registerComponent("FullscreenToggle", Ri); var Mi = function (e, t) { t.tech_ && !t.tech_.featuresVolumeControl && e.addClass("vjs-hidden"), e.on(t, "loadstart", function () { t.tech_.featuresVolumeControl ? e.removeClass("vjs-hidden") : e.addClass("vjs-hidden") }) }, Ui = function (e) { function t() { return e.apply(this, arguments) || this } return Ct(t, e), t.prototype.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-volume-level", innerHTML: '<span class="vjs-control-text"></span>' }) }, t }(Et); Et.registerComponent("VolumeLevel", Ui); var ji = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).on("slideractive", i.updateLastVolume_), i.on(t, "volumechange", i.updateARIAAttributes), t.ready(function () { return i.updateARIAAttributes() }), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-volume-bar vjs-slider-bar" }, { "aria-label": this.localize("Volume Level"), "aria-live": "polite" }) }, n.handleMouseDown = function (t) { De(t) && e.prototype.handleMouseDown.call(this, t) }, n.handleMouseMove = function (e) { De(e) && (this.checkMuted(), this.player_.volume(this.calculateDistance(e))) }, n.checkMuted = function () { this.player_.muted() && this.player_.muted(!1) }, n.getPercent = function () { return this.player_.muted() ? 0 : this.player_.volume() }, n.stepForward = function () { this.checkMuted(), this.player_.volume(this.player_.volume() + .1) }, n.stepBack = function () { this.checkMuted(), this.player_.volume(this.player_.volume() - .1) }, n.updateARIAAttributes = function (e) { var t = this.player_.muted() ? 0 : this.volumeAsPercentage_(); this.el_.setAttribute("aria-valuenow", t), this.el_.setAttribute("aria-valuetext", t + "%") }, n.volumeAsPercentage_ = function () { return Math.round(100 * this.player_.volume()) }, n.updateLastVolume_ = function () { var e = this, t = this.player_.volume(); this.one("sliderinactive", function () { 0 === e.player_.volume() && e.player_.lastVolume_(t) }) }, t }(Ai); ji.prototype.options_ = { children: ["volumeLevel"], barName: "volumeLevel" }, ji.prototype.playerEvent = "volumechange", Et.registerComponent("VolumeBar", ji); var Bi = function (e) { function t(t, n) { var i; return void 0 === n && (n = {}), n.vertical = n.vertical || !1, (void 0 === n.volumeBar || te(n.volumeBar)) && (n.volumeBar = n.volumeBar || {}, n.volumeBar.vertical = n.vertical), i = e.call(this, t, n) || this, Mi(At(i), t), i.throttledHandleMouseMove = at(st(At(i), i.handleMouseMove), rt), i.on("mousedown", i.handleMouseDown), i.on("touchstart", i.handleMouseDown), i.on(i.volumeBar, ["focus", "slideractive"], function () { i.volumeBar.addClass("vjs-slider-active"), i.addClass("vjs-slider-active"), i.trigger("slideractive") }), i.on(i.volumeBar, ["blur", "sliderinactive"], function () { i.volumeBar.removeClass("vjs-slider-active"), i.removeClass("vjs-slider-active"), i.trigger("sliderinactive") }), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { var t = "vjs-volume-horizontal"; return this.options_.vertical && (t = "vjs-volume-vertical"), e.prototype.createEl.call(this, "div", { className: "vjs-volume-control vjs-control " + t }) }, n.handleMouseDown = function (e) { var t = this.el_.ownerDocument; this.on(t, "mousemove", this.throttledHandleMouseMove), this.on(t, "touchmove", this.throttledHandleMouseMove), this.on(t, "mouseup", this.handleMouseUp), this.on(t, "touchend", this.handleMouseUp) }, n.handleMouseUp = function (e) { var t = this.el_.ownerDocument; this.off(t, "mousemove", this.throttledHandleMouseMove), this.off(t, "touchmove", this.throttledHandleMouseMove), this.off(t, "mouseup", this.handleMouseUp), this.off(t, "touchend", this.handleMouseUp) }, n.handleMouseMove = function (e) { this.volumeBar.handleMouseMove(e) }, t }(Et); Bi.prototype.options_ = { children: ["volumeBar"] }, Et.registerComponent("VolumeControl", Bi); var Fi = function (e, t) { t.tech_ && !t.tech_.featuresMuteControl && e.addClass("vjs-hidden"), e.on(t, "loadstart", function () { t.tech_.featuresMuteControl ? e.removeClass("vjs-hidden") : e.addClass("vjs-hidden") }) }, Hi = function (e) { function t(t, n) { var i; return i = e.call(this, t, n) || this, Fi(At(i), t), i.on(t, ["loadstart", "volumechange"], i.update), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-mute-control " + e.prototype.buildCSSClass.call(this) }, n.handleClick = function (e) { var t = this.player_.volume(), n = this.player_.lastVolume_(); if (0 === t) { var i = n < .1 ? .1 : n; this.player_.volume(i), this.player_.muted(!1) } else this.player_.muted(!this.player_.muted()) }, n.update = function (e) { this.updateIcon_(), this.updateControlText_() }, n.updateIcon_ = function () { var e = this.player_.volume(), t = 3; Rt && this.player_.tech_ && this.player_.tech_.el_ && this.player_.muted(this.player_.tech_.el_.muted), 0 === e || this.player_.muted() ? t = 0 : e < .33 ? t = 1 : e < .67 && (t = 2); for (var n = 0; n < 4; n++)pe(this.el_, "vjs-vol-" + n); fe(this.el_, "vjs-vol-" + t) }, n.updateControlText_ = function () { var e = this.player_.muted() || 0 === this.player_.volume() ? "Unmute" : "Mute"; this.controlText() !== e && this.controlText(e) }, t }(fi); Hi.prototype.controlText_ = "Mute", Et.registerComponent("MuteToggle", Hi); var qi = function (e) { function t(t, n) { var i; return void 0 === n && (n = {}), void 0 !== n.inline ? n.inline = n.inline : n.inline = !0, (void 0 === n.volumeControl || te(n.volumeControl)) && (n.volumeControl = n.volumeControl || {}, n.volumeControl.vertical = !n.inline), (i = e.call(this, t, n) || this).on(t, ["loadstart"], i.volumePanelState_), i.on(i.muteToggle, "keyup", i.handleKeyPress), i.on(i.volumeControl, "keyup", i.handleVolumeControlKeyUp), i.on("keydown", i.handleKeyPress), i.on("mouseover", i.handleMouseOver), i.on("mouseout", i.handleMouseOut), i.on(i.volumeControl, ["slideractive"], i.sliderActive_), i.on(i.volumeControl, ["sliderinactive"], i.sliderInactive_), i } Ct(t, e); var n = t.prototype; return n.sliderActive_ = function () { this.addClass("vjs-slider-active") }, n.sliderInactive_ = function () { this.removeClass("vjs-slider-active") }, n.volumePanelState_ = function () { this.volumeControl.hasClass("vjs-hidden") && this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-hidden"), this.volumeControl.hasClass("vjs-hidden") && !this.muteToggle.hasClass("vjs-hidden") && this.addClass("vjs-mute-toggle-only") }, n.createEl = function () { var t = "vjs-volume-panel-horizontal"; return this.options_.inline || (t = "vjs-volume-panel-vertical"), e.prototype.createEl.call(this, "div", { className: "vjs-volume-panel vjs-control " + t }) }, n.dispose = function () { this.handleMouseOut(), e.prototype.dispose.call(this) }, n.handleVolumeControlKeyUp = function (e) { c.a.isEventKey(e, "Esc") && this.muteToggle.focus() }, n.handleMouseOver = function (e) { this.addClass("vjs-hover"), Qe(a.a, "keyup", st(this, this.handleKeyPress)) }, n.handleMouseOut = function (e) { this.removeClass("vjs-hover"), Je(a.a, "keyup", st(this, this.handleKeyPress)) }, n.handleKeyPress = function (e) { c.a.isEventKey(e, "Esc") && this.handleMouseOut() }, t }(Et); qi.prototype.options_ = { children: ["muteToggle", "volumeControl"] }, Et.registerComponent("VolumePanel", qi); var Vi = function (e) { function t(t, n) { var i; return i = e.call(this, t, n) || this, n && (i.menuButton_ = n.menuButton), i.focusedChild_ = -1, i.on("keydown", i.handleKeyDown), i.boundHandleBlur_ = st(At(i), i.handleBlur), i.boundHandleTapClick_ = st(At(i), i.handleTapClick), i } Ct(t, e); var n = t.prototype; return n.addEventListenerForItem = function (e) { e instanceof Et && (this.on(e, "blur", this.boundHandleBlur_), this.on(e, ["tap", "click"], this.boundHandleTapClick_)) }, n.removeEventListenerForItem = function (e) { e instanceof Et && (this.off(e, "blur", this.boundHandleBlur_), this.off(e, ["tap", "click"], this.boundHandleTapClick_)) }, n.removeChild = function (t) { "string" == typeof t && (t = this.getChild(t)), this.removeEventListenerForItem(t), e.prototype.removeChild.call(this, t) }, n.addItem = function (e) { var t = this.addChild(e); t && this.addEventListenerForItem(t) }, n.createEl = function () { var t = this.options_.contentElType || "ul"; this.contentEl_ = ue(t, { className: "vjs-menu-content" }), this.contentEl_.setAttribute("role", "menu"); var n = e.prototype.createEl.call(this, "div", { append: this.contentEl_, className: "vjs-menu" }); return n.appendChild(this.contentEl_), Qe(n, "click", function (e) { e.preventDefault(), e.stopImmediatePropagation() }), n }, n.dispose = function () { this.contentEl_ = null, this.boundHandleBlur_ = null, this.boundHandleTapClick_ = null, e.prototype.dispose.call(this) }, n.handleBlur = function (e) { var t = e.relatedTarget || a.a.activeElement; if (!this.children().some(function (e) { return e.el() === t })) { var n = this.menuButton_; n && n.buttonPressed_ && t !== n.el().firstChild && n.unpressButton() } }, n.handleTapClick = function (e) { if (this.menuButton_) { this.menuButton_.unpressButton(); var t = this.children(); if (!Array.isArray(t)) return; var n = t.filter(function (t) { return t.el() === e.target })[0]; if (!n) return; "CaptionSettingsMenuItem" !== n.name() && this.menuButton_.focus() } }, n.handleKeyDown = function (e) { c.a.isEventKey(e, "Left") || c.a.isEventKey(e, "Down") ? (e.preventDefault(), e.stopPropagation(), this.stepForward()) : (c.a.isEventKey(e, "Right") || c.a.isEventKey(e, "Up")) && (e.preventDefault(), e.stopPropagation(), this.stepBack()) }, n.stepForward = function () { var e = 0; void 0 !== this.focusedChild_ && (e = this.focusedChild_ + 1), this.focus(e) }, n.stepBack = function () { var e = 0; void 0 !== this.focusedChild_ && (e = this.focusedChild_ - 1), this.focus(e) }, n.focus = function (e) { void 0 === e && (e = 0); var t = this.children().slice(); t.length && t[0].className && /vjs-menu-title/.test(t[0].className) && t.shift(), t.length > 0 && (e < 0 ? e = 0 : e >= t.length && (e = t.length - 1), this.focusedChild_ = e, t[e].el_.focus()) }, t }(Et); Et.registerComponent("Menu", Vi); var Wi = function (e) { function t(t, n) { var i; void 0 === n && (n = {}), (i = e.call(this, t, n) || this).menuButton_ = new fi(t, n), i.menuButton_.controlText(i.controlText_), i.menuButton_.el_.setAttribute("aria-haspopup", "true"); var r = fi.prototype.buildCSSClass(); return i.menuButton_.el_.className = i.buildCSSClass() + " " + r, i.menuButton_.removeClass("vjs-control"), i.addChild(i.menuButton_), i.update(), i.enabled_ = !0, i.on(i.menuButton_, "tap", i.handleClick), i.on(i.menuButton_, "click", i.handleClick), i.on(i.menuButton_, "keydown", i.handleKeyDown), i.on(i.menuButton_, "mouseenter", function () { i.addClass("vjs-hover"), i.menu.show(), Qe(a.a, "keyup", st(At(i), i.handleMenuKeyUp)) }), i.on("mouseleave", i.handleMouseLeave), i.on("keydown", i.handleSubmenuKeyDown), i } Ct(t, e); var n = t.prototype; return n.update = function () { var e = this.createMenu(); this.menu && (this.menu.dispose(), this.removeChild(this.menu)), this.menu = e, this.addChild(e), this.buttonPressed_ = !1, this.menuButton_.el_.setAttribute("aria-expanded", "false"), this.items && this.items.length <= this.hideThreshold_ ? this.hide() : this.show() }, n.createMenu = function () { var e = new Vi(this.player_, { menuButton: this }); if (this.hideThreshold_ = 0, this.options_.title) { var t = ue("li", { className: "vjs-menu-title", innerHTML: Tt(this.options_.title), tabIndex: -1 }); this.hideThreshold_ += 1; var n = new Et(this.player_, { el: t }); e.addItem(n) } if (this.items = this.createItems(), this.items) for (var i = 0; i < this.items.length; i++)e.addItem(this.items[i]); return e }, n.createItems = function () { }, n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: this.buildWrapperCSSClass() }, {}) }, n.buildWrapperCSSClass = function () { var t = "vjs-menu-button"; return !0 === this.options_.inline ? t += "-inline" : t += "-popup", "vjs-menu-button " + t + " " + fi.prototype.buildCSSClass() + " " + e.prototype.buildCSSClass.call(this) }, n.buildCSSClass = function () { var t = "vjs-menu-button"; return !0 === this.options_.inline ? t += "-inline" : t += "-popup", "vjs-menu-button " + t + " " + e.prototype.buildCSSClass.call(this) }, n.controlText = function (e, t) { return void 0 === t && (t = this.menuButton_.el()), this.menuButton_.controlText(e, t) }, n.dispose = function () { this.handleMouseLeave(), e.prototype.dispose.call(this) }, n.handleClick = function (e) { this.buttonPressed_ ? this.unpressButton() : this.pressButton() }, n.handleMouseLeave = function (e) { this.removeClass("vjs-hover"), Je(a.a, "keyup", st(this, this.handleMenuKeyUp)) }, n.focus = function () { this.menuButton_.focus() }, n.blur = function () { this.menuButton_.blur() }, n.handleKeyDown = function (e) { c.a.isEventKey(e, "Esc") || c.a.isEventKey(e, "Tab") ? (this.buttonPressed_ && this.unpressButton(), c.a.isEventKey(e, "Tab") || (e.preventDefault(), this.menuButton_.focus())) : (c.a.isEventKey(e, "Up") || c.a.isEventKey(e, "Down")) && (this.buttonPressed_ || (e.preventDefault(), this.pressButton())) }, n.handleMenuKeyUp = function (e) { (c.a.isEventKey(e, "Esc") || c.a.isEventKey(e, "Tab")) && this.removeClass("vjs-hover") }, n.handleSubmenuKeyPress = function (e) { this.handleSubmenuKeyDown(e) }, n.handleSubmenuKeyDown = function (e) { (c.a.isEventKey(e, "Esc") || c.a.isEventKey(e, "Tab")) && (this.buttonPressed_ && this.unpressButton(), c.a.isEventKey(e, "Tab") || (e.preventDefault(), this.menuButton_.focus())) }, n.pressButton = function () { if (this.enabled_) { if (this.buttonPressed_ = !0, this.menu.show(), this.menu.lockShowing(), this.menuButton_.el_.setAttribute("aria-expanded", "true"), Rt && oe()) return; this.menu.focus() } }, n.unpressButton = function () { this.enabled_ && (this.buttonPressed_ = !1, this.menu.unlockShowing(), this.menu.hide(), this.menuButton_.el_.setAttribute("aria-expanded", "false")) }, n.disable = function () { this.unpressButton(), this.enabled_ = !1, this.addClass("vjs-disabled"), this.menuButton_.disable() }, n.enable = function () { this.enabled_ = !0, this.removeClass("vjs-disabled"), this.menuButton_.enable() }, t }(Et); Et.registerComponent("MenuButton", Wi); var Gi = function (e) { function t(t, n) { var i, r = n.tracks; if ((i = e.call(this, t, n) || this).items.length <= 1 && i.hide(), !r) return At(i); var s = st(At(i), i.update); return r.addEventListener("removetrack", s), r.addEventListener("addtrack", s), i.player_.on("ready", s), i.player_.on("dispose", function () { r.removeEventListener("removetrack", s), r.removeEventListener("addtrack", s) }), i } return Ct(t, e), t }(Wi); Et.registerComponent("TrackButton", Gi); var zi = ["Tab", "Esc", "Up", "Down", "Right", "Left"], Ki = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).selectable = n.selectable, i.isSelected_ = n.selected || !1, i.multiSelectable = n.multiSelectable, i.selected(i.isSelected_), i.selectable ? i.multiSelectable ? i.el_.setAttribute("role", "menuitemcheckbox") : i.el_.setAttribute("role", "menuitemradio") : i.el_.setAttribute("role", "menuitem"), i } Ct(t, e); var n = t.prototype; return n.createEl = function (t, n, i) { return this.nonIconControl = !0, e.prototype.createEl.call(this, "li", Z({ className: "vjs-menu-item", innerHTML: '<span class="vjs-menu-item-text">' + this.localize(this.options_.label) + "</span>", tabIndex: -1 }, n), i) }, n.handleKeyDown = function (t) { zi.some(function (e) { return c.a.isEventKey(t, e) }) || e.prototype.handleKeyDown.call(this, t) }, n.handleClick = function (e) { this.selected(!0) }, n.selected = function (e) { this.selectable && (e ? (this.addClass("vjs-selected"), this.el_.setAttribute("aria-checked", "true"), this.controlText(", selected"), this.isSelected_ = !0) : (this.removeClass("vjs-selected"), this.el_.setAttribute("aria-checked", "false"), this.controlText(""), this.isSelected_ = !1)) }, t }(ai); Et.registerComponent("MenuItem", Ki); var Xi = function (e) { function t(t, n) { var i, s = n.track, o = t.textTracks(); n.label = s.label || s.language || "Unknown", n.selected = "showing" === s.mode, (i = e.call(this, t, n) || this).track = s, i.kinds = (n.kinds || [n.kind || i.track.kind]).filter(Boolean); var l, u = function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; i.handleTracksChange.apply(At(i), t) }, c = function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; i.handleSelectedLanguageChange.apply(At(i), t) }; (t.on(["loadstart", "texttrackchange"], u), o.addEventListener("change", u), o.addEventListener("selectedlanguagechange", c), i.on("dispose", function () { t.off(["loadstart", "texttrackchange"], u), o.removeEventListener("change", u), o.removeEventListener("selectedlanguagechange", c) }), void 0 === o.onchange) && i.on(["tap", "click"], function () { if ("object" != typeof r.a.Event) try { l = new r.a.Event("change") } catch (e) { } l || (l = a.a.createEvent("Event")).initEvent("change", !0, !0), o.dispatchEvent(l) }); return i.handleTracksChange(), i } Ct(t, e); var n = t.prototype; return n.handleClick = function (t) { var n = this.track, i = this.player_.textTracks(); if (e.prototype.handleClick.call(this, t), i) for (var r = 0; r < i.length; r++) { var s = i[r]; -1 !== this.kinds.indexOf(s.kind) && (s === n ? "showing" !== s.mode && (s.mode = "showing") : "disabled" !== s.mode && (s.mode = "disabled")) } }, n.handleTracksChange = function (e) { var t = "showing" === this.track.mode; t !== this.isSelected_ && this.selected(t) }, n.handleSelectedLanguageChange = function (e) { if ("showing" === this.track.mode) { var t = this.player_.cache_.selectedLanguage; if (t && t.enabled && t.language === this.track.language && t.kind !== this.track.kind) return; this.player_.cache_.selectedLanguage = { enabled: !0, language: this.track.language, kind: this.track.kind } } }, n.dispose = function () { this.track = null, e.prototype.dispose.call(this) }, t }(Ki); Et.registerComponent("TextTrackMenuItem", Xi); var Yi = function (e) { function t(t, n) { return n.track = { player: t, kind: n.kind, kinds: n.kinds, default: !1, mode: "disabled" }, n.kinds || (n.kinds = [n.kind]), n.label ? n.track.label = n.label : n.track.label = n.kinds.join(" and ") + " off", n.selectable = !0, n.multiSelectable = !1, e.call(this, t, n) || this } Ct(t, e); var n = t.prototype; return n.handleTracksChange = function (e) { for (var t = this.player().textTracks(), n = !0, i = 0, r = t.length; i < r; i++) { var s = t[i]; if (this.options_.kinds.indexOf(s.kind) > -1 && "showing" === s.mode) { n = !1; break } } n !== this.isSelected_ && this.selected(n) }, n.handleSelectedLanguageChange = function (e) { for (var t = this.player().textTracks(), n = !0, i = 0, r = t.length; i < r; i++) { var s = t[i]; if (["captions", "descriptions", "subtitles"].indexOf(s.kind) > -1 && "showing" === s.mode) { n = !1; break } } n && (this.player_.cache_.selectedLanguage = { enabled: !1 }) }, t }(Xi); Et.registerComponent("OffTextTrackMenuItem", Yi); var $i = function (e) { function t(t, n) { return void 0 === n && (n = {}), n.tracks = t.textTracks(), e.call(this, t, n) || this } return Ct(t, e), t.prototype.createItems = function (e, t) { var n; void 0 === e && (e = []), void 0 === t && (t = Xi), this.label_ && (n = this.label_ + " off"), e.push(new Yi(this.player_, { kinds: this.kinds_, kind: this.kind_, label: n })), this.hideThreshold_ += 1; var i = this.player_.textTracks(); Array.isArray(this.kinds_) || (this.kinds_ = [this.kind_]); for (var r = 0; r < i.length; r++) { var s = i[r]; if (this.kinds_.indexOf(s.kind) > -1) { var a = new t(this.player_, { track: s, kinds: this.kinds_, kind: this.kind_, selectable: !0, multiSelectable: !1 }); a.addClass("vjs-" + s.kind + "-menu-item"), e.push(a) } } return e }, t }(Gi); Et.registerComponent("TextTrackButton", $i); var Qi = function (e) { function t(t, n) { var i, r = n.track, s = n.cue, a = t.currentTime(); return n.selectable = !0, n.multiSelectable = !1, n.label = s.text, n.selected = s.startTime <= a && a < s.endTime, (i = e.call(this, t, n) || this).track = r, i.cue = s, r.addEventListener("cuechange", st(At(i), i.update)), i } Ct(t, e); var n = t.prototype; return n.handleClick = function (t) { e.prototype.handleClick.call(this), this.player_.currentTime(this.cue.startTime), this.update(this.cue.startTime) }, n.update = function (e) { var t = this.cue, n = this.player_.currentTime(); this.selected(t.startTime <= n && n < t.endTime) }, t }(Ki); Et.registerComponent("ChaptersTrackMenuItem", Qi); var Ji = function (e) { function t(t, n, i) { return e.call(this, t, n, i) || this } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-chapters-button " + e.prototype.buildCSSClass.call(this) }, n.buildWrapperCSSClass = function () { return "vjs-chapters-button " + e.prototype.buildWrapperCSSClass.call(this) }, n.update = function (t) { this.track_ && (!t || "addtrack" !== t.type && "removetrack" !== t.type) || this.setTrack(this.findChaptersTrack()), e.prototype.update.call(this) }, n.setTrack = function (e) { if (this.track_ !== e) { if (this.updateHandler_ || (this.updateHandler_ = this.update.bind(this)), this.track_) { var t = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_); t && t.removeEventListener("load", this.updateHandler_), this.track_ = null } if (this.track_ = e, this.track_) { this.track_.mode = "hidden"; var n = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_); n && n.addEventListener("load", this.updateHandler_) } } }, n.findChaptersTrack = function () { for (var e = this.player_.textTracks() || [], t = e.length - 1; t >= 0; t--) { var n = e[t]; if (n.kind === this.kind_) return n } }, n.getMenuCaption = function () { return this.track_ && this.track_.label ? this.track_.label : this.localize(Tt(this.kind_)) }, n.createMenu = function () { return this.options_.title = this.getMenuCaption(), e.prototype.createMenu.call(this) }, n.createItems = function () { var e = []; if (!this.track_) return e; var t = this.track_.cues; if (!t) return e; for (var n = 0, i = t.length; n < i; n++) { var r = t[n], s = new Qi(this.player_, { track: this.track_, cue: r }); e.push(s) } return e }, t }($i); Ji.prototype.kind_ = "chapters", Ji.prototype.controlText_ = "Chapters", Et.registerComponent("ChaptersButton", Ji); var Zi = function (e) { function t(t, n, i) { var r; r = e.call(this, t, n, i) || this; var s = t.textTracks(), a = st(At(r), r.handleTracksChange); return s.addEventListener("change", a), r.on("dispose", function () { s.removeEventListener("change", a) }), r } Ct(t, e); var n = t.prototype; return n.handleTracksChange = function (e) { for (var t = this.player().textTracks(), n = !1, i = 0, r = t.length; i < r; i++) { var s = t[i]; if (s.kind !== this.kind_ && "showing" === s.mode) { n = !0; break } } n ? this.disable() : this.enable() }, n.buildCSSClass = function () { return "vjs-descriptions-button " + e.prototype.buildCSSClass.call(this) }, n.buildWrapperCSSClass = function () { return "vjs-descriptions-button " + e.prototype.buildWrapperCSSClass.call(this) }, t }($i); Zi.prototype.kind_ = "descriptions", Zi.prototype.controlText_ = "Descriptions", Et.registerComponent("DescriptionsButton", Zi); var er = function (e) { function t(t, n, i) { return e.call(this, t, n, i) || this } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-subtitles-button " + e.prototype.buildCSSClass.call(this) }, n.buildWrapperCSSClass = function () { return "vjs-subtitles-button " + e.prototype.buildWrapperCSSClass.call(this) }, t }($i); er.prototype.kind_ = "subtitles", er.prototype.controlText_ = "Subtitles", Et.registerComponent("SubtitlesButton", er); var tr = function (e) { function t(t, n) { var i; return n.track = { player: t, kind: n.kind, label: n.kind + " settings", selectable: !1, default: !1, mode: "disabled" }, n.selectable = !1, n.name = "CaptionSettingsMenuItem", (i = e.call(this, t, n) || this).addClass("vjs-texttrack-settings"), i.controlText(", opens " + n.kind + " settings dialog"), i } return Ct(t, e), t.prototype.handleClick = function (e) { this.player().getChild("textTrackSettings").open() }, t }(Xi); Et.registerComponent("CaptionSettingsMenuItem", tr); var nr = function (e) { function t(t, n, i) { return e.call(this, t, n, i) || this } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-captions-button " + e.prototype.buildCSSClass.call(this) }, n.buildWrapperCSSClass = function () { return "vjs-captions-button " + e.prototype.buildWrapperCSSClass.call(this) }, n.createItems = function () { var t = []; return this.player().tech_ && this.player().tech_.featuresNativeTextTracks || !this.player().getChild("textTrackSettings") || (t.push(new tr(this.player_, { kind: this.kind_ })), this.hideThreshold_ += 1), e.prototype.createItems.call(this, t) }, t }($i); nr.prototype.kind_ = "captions", nr.prototype.controlText_ = "Captions", Et.registerComponent("CaptionsButton", nr); var ir = function (e) { function t() { return e.apply(this, arguments) || this } return Ct(t, e), t.prototype.createEl = function (t, n, i) { var r = '<span class="vjs-menu-item-text">' + this.localize(this.options_.label); return "captions" === this.options_.track.kind && (r += '\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> ' + this.localize("Captions") + "</span>\n      "), r += "</span>", e.prototype.createEl.call(this, t, Z({ innerHTML: r }, n), i) }, t }(Xi); Et.registerComponent("SubsCapsMenuItem", ir); var rr = function (e) { function t(t, n) { var i; return void 0 === n && (n = {}), (i = e.call(this, t, n) || this).label_ = "subtitles", ["en", "en-us", "en-ca", "fr-ca"].indexOf(i.player_.language_) > -1 && (i.label_ = "captions"), i.menuButton_.controlText(Tt(i.label_)), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-subs-caps-button " + e.prototype.buildCSSClass.call(this) }, n.buildWrapperCSSClass = function () { return "vjs-subs-caps-button " + e.prototype.buildWrapperCSSClass.call(this) }, n.createItems = function () { var t = []; return this.player().tech_ && this.player().tech_.featuresNativeTextTracks || !this.player().getChild("textTrackSettings") || (t.push(new tr(this.player_, { kind: this.label_ })), this.hideThreshold_ += 1), t = e.prototype.createItems.call(this, t, ir) }, t }($i); rr.prototype.kinds_ = ["captions", "subtitles"], rr.prototype.controlText_ = "Subtitles", Et.registerComponent("SubsCapsButton", rr); var sr = function (e) { function t(t, n) { var i, r = n.track, s = t.audioTracks(); n.label = r.label || r.language || "Unknown", n.selected = r.enabled, (i = e.call(this, t, n) || this).track = r, i.addClass("vjs-" + r.kind + "-menu-item"); var a = function () { for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++)t[n] = arguments[n]; i.handleTracksChange.apply(At(i), t) }; return s.addEventListener("change", a), i.on("dispose", function () { s.removeEventListener("change", a) }), i } Ct(t, e); var n = t.prototype; return n.createEl = function (t, n, i) { var r = '<span class="vjs-menu-item-text">' + this.localize(this.options_.label); return "main-desc" === this.options_.track.kind && (r += '\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> ' + this.localize("Descriptions") + "</span>\n      "), r += "</span>", e.prototype.createEl.call(this, t, Z({ innerHTML: r }, n), i) }, n.handleClick = function (t) { var n = this.player_.audioTracks(); e.prototype.handleClick.call(this, t); for (var i = 0; i < n.length; i++) { var r = n[i]; r.enabled = r === this.track } }, n.handleTracksChange = function (e) { this.selected(this.track.enabled) }, t }(Ki); Et.registerComponent("AudioTrackMenuItem", sr); var ar = function (e) { function t(t, n) { return void 0 === n && (n = {}), n.tracks = t.audioTracks(), e.call(this, t, n) || this } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-audio-button " + e.prototype.buildCSSClass.call(this) }, n.buildWrapperCSSClass = function () { return "vjs-audio-button " + e.prototype.buildWrapperCSSClass.call(this) }, n.createItems = function (e) { void 0 === e && (e = []), this.hideThreshold_ = 1; for (var t = this.player_.audioTracks(), n = 0; n < t.length; n++) { var i = t[n]; e.push(new sr(this.player_, { track: i, selectable: !0, multiSelectable: !1 })) } return e }, t }(Gi); ar.prototype.controlText_ = "Audio Track", Et.registerComponent("AudioTrackButton", ar); var or = function (e) { function t(t, n) { var i, r = n.rate, s = parseFloat(r, 10); return n.label = r, n.selected = 1 === s, n.selectable = !0, n.multiSelectable = !1, (i = e.call(this, t, n) || this).label = r, i.rate = s, i.on(t, "ratechange", i.update), i } Ct(t, e); var n = t.prototype; return n.handleClick = function (t) { e.prototype.handleClick.call(this), this.player().playbackRate(this.rate) }, n.update = function (e) { this.selected(this.player().playbackRate() === this.rate) }, t }(Ki); or.prototype.contentElType = "button", Et.registerComponent("PlaybackRateMenuItem", or); var lr = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).updateVisibility(), i.updateLabel(), i.on(t, "loadstart", i.updateVisibility), i.on(t, "ratechange", i.updateLabel), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { var t = e.prototype.createEl.call(this); return this.labelEl_ = ue("div", { className: "vjs-playback-rate-value", innerHTML: "1x" }), t.appendChild(this.labelEl_), t }, n.dispose = function () { this.labelEl_ = null, e.prototype.dispose.call(this) }, n.buildCSSClass = function () { return "vjs-playback-rate " + e.prototype.buildCSSClass.call(this) }, n.buildWrapperCSSClass = function () { return "vjs-playback-rate " + e.prototype.buildWrapperCSSClass.call(this) }, n.createMenu = function () { var e = new Vi(this.player()), t = this.playbackRates(); if (t) for (var n = t.length - 1; n >= 0; n--)e.addChild(new or(this.player(), { rate: t[n] + "x" })); return e }, n.updateARIAAttributes = function () { this.el().setAttribute("aria-valuenow", this.player().playbackRate()) }, n.handleClick = function (e) { for (var t = this.player().playbackRate(), n = this.playbackRates(), i = n[0], r = 0; r < n.length; r++)if (n[r] > t) { i = n[r]; break } this.player().playbackRate(i) }, n.playbackRates = function () { return this.options_.playbackRates || this.options_.playerOptions && this.options_.playerOptions.playbackRates }, n.playbackRateSupported = function () { return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0 }, n.updateVisibility = function (e) { this.playbackRateSupported() ? this.removeClass("vjs-hidden") : this.addClass("vjs-hidden") }, n.updateLabel = function (e) { this.playbackRateSupported() && (this.labelEl_.innerHTML = this.player().playbackRate() + "x") }, t }(Wi); lr.prototype.controlText_ = "Playback Rate", Et.registerComponent("PlaybackRateMenuButton", lr); var ur = function (e) { function t() { return e.apply(this, arguments) || this } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-spacer " + e.prototype.buildCSSClass.call(this) }, n.createEl = function () { return e.prototype.createEl.call(this, "div", { className: this.buildCSSClass() }) }, t }(Et); Et.registerComponent("Spacer", ur); var cr = function (e) { function t() { return e.apply(this, arguments) || this } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-custom-control-spacer " + e.prototype.buildCSSClass.call(this) }, n.createEl = function () { var t = e.prototype.createEl.call(this, { className: this.buildCSSClass() }); return t.innerHTML = " ", t }, t }(ur); Et.registerComponent("CustomControlSpacer", cr); var hr = function (e) { function t() { return e.apply(this, arguments) || this } return Ct(t, e), t.prototype.createEl = function () { return e.prototype.createEl.call(this, "div", { className: "vjs-control-bar", dir: "ltr" }) }, t }(Et); hr.prototype.options_ = { children: ["playToggle", "volumePanel", "currentTimeDisplay", "timeDivider", "durationDisplay", "progressControl", "liveDisplay", "seekToLive", "remainingTimeDisplay", "customControlSpacer", "playbackRateMenuButton", "chaptersButton", "descriptionsButton", "subsCapsButton", "audioTrackButton", "fullscreenToggle"] }, "exitPictureInPicture" in a.a && hr.prototype.options_.children.splice(hr.prototype.options_.children.length - 1, 0, "pictureInPictureToggle"), Et.registerComponent("ControlBar", hr); var dr = function (e) { function t(t, n) { var i; return (i = e.call(this, t, n) || this).on(t, "error", i.open), i } Ct(t, e); var n = t.prototype; return n.buildCSSClass = function () { return "vjs-error-display " + e.prototype.buildCSSClass.call(this) }, n.content = function () { var e = this.player().error(); return e ? this.localize(e.message) : "" }, t }(mn); dr.prototype.options_ = St(mn.prototype.options_, { pauseOnOpen: !1, fillAlways: !0, temporary: !1, uncloseable: !0 }), Et.registerComponent("ErrorDisplay", dr); var fr = ["#000", "Black"], pr = ["#00F", "Blue"], mr = ["#0FF", "Cyan"], gr = ["#0F0", "Green"], vr = ["#F0F", "Magenta"], yr = ["#F00", "Red"], _r = ["#FFF", "White"], br = ["#FF0", "Yellow"], Tr = ["1", "Opaque"], Sr = ["0.5", "Semi-Transparent"], Er = ["0", "Transparent"], Cr = { backgroundColor: { selector: ".vjs-bg-color > select", id: "captions-background-color-%s", label: "Color", options: [fr, _r, yr, gr, pr, br, vr, mr] }, backgroundOpacity: { selector: ".vjs-bg-opacity > select", id: "captions-background-opacity-%s", label: "Transparency", options: [Tr, Sr, Er] }, color: { selector: ".vjs-fg-color > select", id: "captions-foreground-color-%s", label: "Color", options: [_r, fr, yr, gr, pr, br, vr, mr] }, edgeStyle: { selector: ".vjs-edge-style > select", id: "%s", label: "Text Edge Style", options: [["none", "None"], ["raised", "Raised"], ["depressed", "Depressed"], ["uniform", "Uniform"], ["dropshadow", "Dropshadow"]] }, fontFamily: { selector: ".vjs-font-family > select", id: "captions-font-family-%s", label: "Font Family", options: [["proportionalSansSerif", "Proportional Sans-Serif"], ["monospaceSansSerif", "Monospace Sans-Serif"], ["proportionalSerif", "Proportional Serif"], ["monospaceSerif", "Monospace Serif"], ["casual", "Casual"], ["script", "Script"], ["small-caps", "Small Caps"]] }, fontPercent: { selector: ".vjs-font-percent > select", id: "captions-font-size-%s", label: "Font Size", options: [["0.50", "50%"], ["0.75", "75%"], ["1.00", "100%"], ["1.25", "125%"], ["1.50", "150%"], ["1.75", "175%"], ["2.00", "200%"], ["3.00", "300%"], ["4.00", "400%"]], default: 2, parser: function (e) { return "1.00" === e ? null : Number(e) } }, textOpacity: { selector: ".vjs-text-opacity > select", id: "captions-foreground-opacity-%s", label: "Transparency", options: [Tr, Sr] }, windowColor: { selector: ".vjs-window-color > select", id: "captions-window-color-%s", label: "Color" }, windowOpacity: { selector: ".vjs-window-opacity > select", id: "captions-window-opacity-%s", label: "Transparency", options: [Er, Sr, Tr] } }; function wr(e, t) { if (t && (e = t(e)), e && "none" !== e) return e } Cr.windowColor.options = Cr.backgroundColor.options; var kr = function (e) { function t(t, n) { var i; return n.temporary = !1, (i = e.call(this, t, n) || this).updateDisplay = st(At(i), i.updateDisplay), i.fill(), i.hasBeenOpened_ = i.hasBeenFilled_ = !0, i.endDialog = ue("p", { className: "vjs-control-text", textContent: i.localize("End of dialog window.") }), i.el().appendChild(i.endDialog), i.setDefaults(), void 0 === n.persistTextTrackSettings && (i.options_.persistTextTrackSettings = i.options_.playerOptions.persistTextTrackSettings), i.on(i.$(".vjs-done-button"), "click", function () { i.saveSettings(), i.close() }), i.on(i.$(".vjs-default-button"), "click", function () { i.setDefaults(), i.updateDisplay() }), J(Cr, function (e) { i.on(i.$(e.selector), "change", i.updateDisplay) }), i.options_.persistTextTrackSettings && i.restoreSettings(), i } Ct(t, e); var n = t.prototype; return n.dispose = function () { this.endDialog = null, e.prototype.dispose.call(this) }, n.createElSelect_ = function (e, t, n) { var i = this; void 0 === t && (t = ""), void 0 === n && (n = "label"); var r = Cr[e], s = r.id.replace("%s", this.id_), a = [t, s].join(" ").trim(); return ["<" + n + ' id="' + s + '" class="' + ("label" === n ? "vjs-label" : "") + '">', this.localize(r.label), "</" + n + ">", '<select aria-labelledby="' + a + '">'].concat(r.options.map(function (e) { var t = s + "-" + e[1].replace(/\W+/g, ""); return ['<option id="' + t + '" value="' + e[0] + '" ', 'aria-labelledby="' + a + " " + t + '">', i.localize(e[1]), "</option>"].join("") })).concat("</select>").join("") }, n.createElFgColor_ = function () { var e = "captions-text-legend-" + this.id_; return ['<fieldset class="vjs-fg-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Text"), "</legend>", this.createElSelect_("color", e), '<span class="vjs-text-opacity vjs-opacity">', this.createElSelect_("textOpacity", e), "</span>", "</fieldset>"].join("") }, n.createElBgColor_ = function () { var e = "captions-background-" + this.id_; return ['<fieldset class="vjs-bg-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Background"), "</legend>", this.createElSelect_("backgroundColor", e), '<span class="vjs-bg-opacity vjs-opacity">', this.createElSelect_("backgroundOpacity", e), "</span>", "</fieldset>"].join("") }, n.createElWinColor_ = function () { var e = "captions-window-" + this.id_; return ['<fieldset class="vjs-window-color vjs-track-setting">', '<legend id="' + e + '">', this.localize("Window"), "</legend>", this.createElSelect_("windowColor", e), '<span class="vjs-window-opacity vjs-opacity">', this.createElSelect_("windowOpacity", e), "</span>", "</fieldset>"].join("") }, n.createElColors_ = function () { return ue("div", { className: "vjs-track-settings-colors", innerHTML: [this.createElFgColor_(), this.createElBgColor_(), this.createElWinColor_()].join("") }) }, n.createElFont_ = function () { return ue("div", { className: "vjs-track-settings-font", innerHTML: ['<fieldset class="vjs-font-percent vjs-track-setting">', this.createElSelect_("fontPercent", "", "legend"), "</fieldset>", '<fieldset class="vjs-edge-style vjs-track-setting">', this.createElSelect_("edgeStyle", "", "legend"), "</fieldset>", '<fieldset class="vjs-font-family vjs-track-setting">', this.createElSelect_("fontFamily", "", "legend"), "</fieldset>"].join("") }) }, n.createElControls_ = function () { var e = this.localize("restore all settings to the default values"); return ue("div", { className: "vjs-track-settings-controls", innerHTML: ['<button type="button" class="vjs-default-button" title="' + e + '">', this.localize("Reset"), '<span class="vjs-control-text"> ' + e + "</span>", "</button>", '<button type="button" class="vjs-done-button">' + this.localize("Done") + "</button>"].join("") }) }, n.content = function () { return [this.createElColors_(), this.createElFont_(), this.createElControls_()] }, n.label = function () { return this.localize("Caption Settings Dialog") }, n.description = function () { return this.localize("Beginning of dialog window. Escape will cancel and close the window.") }, n.buildCSSClass = function () { return e.prototype.buildCSSClass.call(this) + " vjs-text-track-settings" }, n.getValues = function () { var e, t, n, i = this; return t = function (e, t, n) { var r, s, a = (r = i.$(t.selector), s = t.parser, wr(r.options[r.options.selectedIndex].value, s)); return void 0 !== a && (e[n] = a), e }, void 0 === (n = {}) && (n = 0), Q(e = Cr).reduce(function (n, i) { return t(n, e[i], i) }, n) }, n.setValues = function (e) { var t = this; J(Cr, function (n, i) { !function (e, t, n) { if (t) for (var i = 0; i < e.options.length; i++)if (wr(e.options[i].value, n) === t) { e.selectedIndex = i; break } }(t.$(n.selector), e[i], n.parser) }) }, n.setDefaults = function () { var e = this; J(Cr, function (t) { var n = t.hasOwnProperty("default") ? t.default : 0; e.$(t.selector).selectedIndex = n }) }, n.restoreSettings = function () { var e; try { e = JSON.parse(r.a.localStorage.getItem("vjs-text-track-settings")) } catch (e) { X.warn(e) } e && this.setValues(e) }, n.saveSettings = function () { if (this.options_.persistTextTrackSettings) { var e = this.getValues(); try { Object.keys(e).length ? r.a.localStorage.setItem("vjs-text-track-settings", JSON.stringify(e)) : r.a.localStorage.removeItem("vjs-text-track-settings") } catch (e) { X.warn(e) } } }, n.updateDisplay = function () { var e = this.player_.getChild("textTrackDisplay"); e && e.updateDisplay() }, n.conditionalBlur_ = function () { this.previouslyActiveEl_ = null; var e = this.player_.controlBar, t = e && e.subsCapsButton, n = e && e.captionsButton; t ? t.focus() : n && n.focus() }, t }(mn); Et.registerComponent("TextTrackSettings", kr); var Ar = function (e) { function t(t, n) { var i, s = n.ResizeObserver || r.a.ResizeObserver; null === n.ResizeObserver && (s = !1); var a = St({ createEl: !s, reportTouchActivity: !1 }, n); return (i = e.call(this, t, a) || this).ResizeObserver = n.ResizeObserver || r.a.ResizeObserver, i.loadListener_ = null, i.resizeObserver_ = null, i.debouncedHandler_ = ot(function () { i.resizeHandler() }, 100, !1, At(i)), s ? (i.resizeObserver_ = new i.ResizeObserver(i.debouncedHandler_), i.resizeObserver_.observe(t.el())) : (i.loadListener_ = function () { if (i.el_ && i.el_.contentWindow) { var e = i.debouncedHandler_, t = i.unloadListener_ = function () { Je(this, "resize", e), Je(this, "unload", t), t = null }; Qe(i.el_.contentWindow, "unload", t), Qe(i.el_.contentWindow, "resize", e) } }, i.one("load", i.loadListener_)), i } Ct(t, e); var n = t.prototype; return n.createEl = function () { return e.prototype.createEl.call(this, "iframe", { className: "vjs-resize-manager", tabIndex: -1 }, { "aria-hidden": "true" }) }, n.resizeHandler = function () { this.player_ && this.player_.trigger && this.player_.trigger("playerresize") }, n.dispose = function () { this.debouncedHandler_ && this.debouncedHandler_.cancel(), this.resizeObserver_ && (this.player_.el() && this.resizeObserver_.unobserve(this.player_.el()), this.resizeObserver_.disconnect()), this.loadListener_ && this.off("load", this.loadListener_), this.el_ && this.el_.contentWindow && this.unloadListener_ && this.unloadListener_.call(this.el_.contentWindow), this.ResizeObserver = null, this.resizeObserver = null, this.debouncedHandler_ = null, this.loadListener_ = null, e.prototype.dispose.call(this) }, t }(Et); Et.registerComponent("ResizeManager", Ar); var xr = function (e) { function t(t, n) { var i, r = St({ createEl: !1 }, n); return (i = e.call(this, t, r) || this).reset_(), i.on(i.player_, "durationchange", i.handleDurationchange), Wt && "hidden" in a.a && "visibilityState" in a.a && i.on(a.a, "visibilitychange", i.handleVisibilityChange), i } Ct(t, e); var n = t.prototype; return n.handleVisibilityChange = function () { this.player_.duration() === 1 / 0 && (a.a.hidden ? this.stopTracking() : this.startTracking()) }, n.isBehind_ = function () { if (!this.timeupdateSeen_) return !1; var e = this.liveCurrentTime(), t = this.player_.currentTime(), n = 2 * this.seekableIncrement_ + .07; return e !== 1 / 0 && e - n >= t }, n.trackLive_ = function () { this.pastSeekEnd_ = this.pastSeekEnd_; var e = this.player_.seekable(); if (e && e.length) { var t, n, i, r = this.seekableEnd(); r !== this.lastSeekEnd_ && (this.lastSeekEnd_ && (this.seekableIncrementList_ = this.seekableIncrementList_.slice(-11), this.seekableIncrementList_.push(Math.abs(r - this.lastSeekEnd_)), this.seekableIncrementList_.length > 3 && (this.seekableIncrement_ = (t = this.seekableIncrementList_, n = Math.floor(t.length / 2), i = [].concat(t).sort(function (e, t) { return e - t }), t.length % 2 != 0 ? i[n] : (i[n - 1] + i[n]) / 2))), this.pastSeekEnd_ = 0, this.lastSeekEnd_ = r, this.trigger("seekableendchange")), this.pastSeekEnd_ = this.pastSeekEnd() + .03, this.isBehind_() !== this.behindLiveEdge() && (this.behindLiveEdge_ = this.isBehind_(), this.trigger("liveedgechange")) } }, n.handleDurationchange = function () { this.player_.duration() === 1 / 0 ? this.startTracking() : this.stopTracking() }, n.startTracking = function () { var e = this; this.isTracking() || (this.timeupdateSeen_ || (this.timeupdateSeen_ = this.player_.hasStarted()), this.trackingInterval_ = this.setInterval(this.trackLive_, 30), this.trackLive_(), this.on(this.player_, "play", this.trackLive_), this.on(this.player_, "pause", this.trackLive_), this.timeupdateSeen_ || (this.one(this.player_, "play", this.handlePlay), this.handleTimeupdate = function () { e.timeupdateSeen_ = !0, e.handleTimeupdate = null }, this.one(this.player_, "timeupdate", this.handleTimeupdate))) }, n.handlePlay = function () { this.one(this.player_, "timeupdate", this.seekToLiveEdge) }, n.reset_ = function () { this.pastSeekEnd_ = 0, this.lastSeekEnd_ = null, this.behindLiveEdge_ = null, this.timeupdateSeen_ = !1, this.clearInterval(this.trackingInterval_), this.trackingInterval_ = null, this.seekableIncrement_ = 12, this.seekableIncrementList_ = [], this.off(this.player_, "play", this.trackLive_), this.off(this.player_, "pause", this.trackLive_), this.off(this.player_, "play", this.handlePlay), this.off(this.player_, "timeupdate", this.seekToLiveEdge), this.handleTimeupdate && (this.off(this.player_, "timeupdate", this.handleTimeupdate), this.handleTimeupdate = null) }, n.stopTracking = function () { this.isTracking() && this.reset_() }, n.seekableEnd = function () { for (var e = this.player_.seekable(), t = [], n = e ? e.length : 0; n--;)t.push(e.end(n)); return t.length ? t.sort()[t.length - 1] : 1 / 0 }, n.seekableStart = function () { for (var e = this.player_.seekable(), t = [], n = e ? e.length : 0; n--;)t.push(e.start(n)); return t.length ? t.sort()[0] : 0 }, n.liveWindow = function () { var e = this.liveCurrentTime(); return e === 1 / 0 ? 1 / 0 : e - this.seekableStart() }, n.isLive = function () { return this.isTracking() }, n.atLiveEdge = function () { return !this.behindLiveEdge() }, n.liveCurrentTime = function () { return this.pastSeekEnd() + this.seekableEnd() }, n.pastSeekEnd = function () { return this.pastSeekEnd_ }, n.behindLiveEdge = function () { return this.behindLiveEdge_ }, n.isTracking = function () { return "number" == typeof this.trackingInterval_ }, n.seekToLiveEdge = function () { this.atLiveEdge() || (this.player_.currentTime(this.liveCurrentTime()), this.player_.paused() && this.player_.play()) }, n.dispose = function () { this.stopTracking(), e.prototype.dispose.call(this) }, t }(Et); Et.registerComponent("LiveTracker", xr); var Ir = function (e) { var t = e.el(); if (t.hasAttribute("src")) return e.triggerSourceset(t.src), !0; var n = e.$$("source"), i = [], r = ""; if (!n.length) return !1; for (var s = 0; s < n.length; s++) { var a = n[s].src; a && -1 === i.indexOf(a) && i.push(a) } return !!i.length && (1 === i.length && (r = i[0]), e.triggerSourceset(r), !0) }, Or = Object.defineProperty({}, "innerHTML", { get: function () { return this.cloneNode(!0).innerHTML }, set: function (e) { var t = a.a.createElement(this.nodeName.toLowerCase()); t.innerHTML = e; for (var n = a.a.createDocumentFragment(); t.childNodes.length;)n.appendChild(t.childNodes[0]); return this.innerText = "", r.a.Element.prototype.appendChild.call(this, n), this.innerHTML } }), Dr = function (e, t) { for (var n = {}, i = 0; i < e.length && !((n = Object.getOwnPropertyDescriptor(e[i], t)) && n.set && n.get); i++); return n.enumerable = !0, n.configurable = !0, n }, Lr = function (e) { var t = e.el(); if (!t.resetSourceWatch_) { var n = {}, i = function (e) { return Dr([e.el(), r.a.HTMLMediaElement.prototype, r.a.Element.prototype, Or], "innerHTML") }(e), s = function (n) { return function () { for (var i = arguments.length, r = new Array(i), s = 0; s < i; s++)r[s] = arguments[s]; var a = n.apply(t, r); return Ir(e), a } };["append", "appendChild", "insertAdjacentHTML"].forEach(function (e) { t[e] && (n[e] = t[e], t[e] = s(n[e])) }), Object.defineProperty(t, "innerHTML", St(i, { set: s(i.set) })), t.resetSourceWatch_ = function () { t.resetSourceWatch_ = null, Object.keys(n).forEach(function (e) { t[e] = n[e] }), Object.defineProperty(t, "innerHTML", i) }, e.one("sourceset", t.resetSourceWatch_) } }, Pr = Object.defineProperty({}, "src", { get: function () { return this.hasAttribute("src") ? Dn(r.a.Element.prototype.getAttribute.call(this, "src")) : "" }, set: function (e) { return r.a.Element.prototype.setAttribute.call(this, "src", e), e } }), Nr = function (e) { if (e.featuresSourceset) { var t = e.el(); if (!t.resetSourceset_) { var n = function (e) { return Dr([e.el(), r.a.HTMLMediaElement.prototype, Pr], "src") }(e), i = t.setAttribute, s = t.load; Object.defineProperty(t, "src", St(n, { set: function (i) { var r = n.set.call(t, i); return e.triggerSourceset(t.src), r } })), t.setAttribute = function (n, r) { var s = i.call(t, n, r); return /src/i.test(n) && e.triggerSourceset(t.src), s }, t.load = function () { var n = s.call(t); return Ir(e) || (e.triggerSourceset(""), Lr(e)), n }, t.currentSrc ? e.triggerSourceset(t.currentSrc) : Ir(e) || Lr(e), t.resetSourceset_ = function () { t.resetSourceset_ = null, t.load = s, t.setAttribute = i, Object.defineProperty(t, "src", n), t.resetSourceWatch_ && t.resetSourceWatch_() } } } }, Rr = function (e) { function t(t, n) { var i; i = e.call(this, t, n) || this; var r = t.source, s = !1; if (r && (i.el_.currentSrc !== r.src || t.tag && 3 === t.tag.initNetworkState_) ? i.setSource(r) : i.handleLateInit_(i.el_), t.enableSourceset && i.setupSourcesetHandling_(), i.el_.hasChildNodes()) { for (var a = i.el_.childNodes, o = a.length, l = []; o--;) { var u = a[o]; "track" === u.nodeName.toLowerCase() && (i.featuresNativeTextTracks ? (i.remoteTextTrackEls().addTrackElement_(u), i.remoteTextTracks().addTrack(u.track), i.textTracks().addTrack(u.track), s || i.el_.hasAttribute("crossorigin") || !Pn(u.src) || (s = !0)) : l.push(u)) } for (var c = 0; c < l.length; c++)i.el_.removeChild(l[c]) } return i.proxyNativeTracks_(), i.featuresNativeTextTracks && s && X.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."), i.restoreMetadataTracksInIOSNativePlayer_(), (Xt || Pt || Bt) && !0 === t.nativeControlsForTouch && i.setControls(!0), i.proxyWebkitFullscreen_(), i.triggerReady(), i } Ct(t, e); var n = t.prototype; return n.dispose = function () { this.el_ && this.el_.resetSourceset_ && this.el_.resetSourceset_(), t.disposeMediaElement(this.el_), this.options_ = null, e.prototype.dispose.call(this) }, n.setupSourcesetHandling_ = function () { Nr(this) }, n.restoreMetadataTracksInIOSNativePlayer_ = function () { var e, t = this.textTracks(), n = function () { e = []; for (var n = 0; n < t.length; n++) { var i = t[n]; "metadata" === i.kind && e.push({ track: i, storedMode: i.mode }) } }; n(), t.addEventListener("change", n), this.on("dispose", function () { return t.removeEventListener("change", n) }); var i = function n() { for (var i = 0; i < e.length; i++) { var r = e[i]; "disabled" === r.track.mode && r.track.mode !== r.storedMode && (r.track.mode = r.storedMode) } t.removeEventListener("change", n) }; this.on("webkitbeginfullscreen", function () { t.removeEventListener("change", n), t.removeEventListener("change", i), t.addEventListener("change", i) }), this.on("webkitendfullscreen", function () { t.removeEventListener("change", n), t.addEventListener("change", n), t.removeEventListener("change", i) }) }, n.overrideNative_ = function (e, t) { var n = this; if (t === this["featuresNative" + e + "Tracks"]) { var i = e.toLowerCase(); this[i + "TracksListeners_"] && Object.keys(this[i + "TracksListeners_"]).forEach(function (e) { n.el()[i + "Tracks"].removeEventListener(e, n[i + "TracksListeners_"][e]) }), this["featuresNative" + e + "Tracks"] = !t, this[i + "TracksListeners_"] = null, this.proxyNativeTracksForType_(i) } }, n.overrideNativeAudioTracks = function (e) { this.overrideNative_("Audio", e) }, n.overrideNativeVideoTracks = function (e) { this.overrideNative_("Video", e) }, n.proxyNativeTracksForType_ = function (e) { var t = this, n = Vn[e], i = this.el()[n.getterName], r = this[n.getterName](); if (this["featuresNative" + n.capitalName + "Tracks"] && i && i.addEventListener) { var s = { change: function (e) { r.trigger({ type: "change", target: r, currentTarget: r, srcElement: r }) }, addtrack: function (e) { r.addTrack(e.track) }, removetrack: function (e) { r.removeTrack(e.track) } }, a = function () { for (var e = [], t = 0; t < r.length; t++) { for (var n = !1, s = 0; s < i.length; s++)if (i[s] === r[t]) { n = !0; break } n || e.push(r[t]) } for (; e.length;)r.removeTrack(e.shift()) }; this[n.getterName + "Listeners_"] = s, Object.keys(s).forEach(function (e) { var n = s[e]; i.addEventListener(e, n), t.on("dispose", function (t) { return i.removeEventListener(e, n) }) }), this.on("loadstart", a), this.on("dispose", function (e) { return t.off("loadstart", a) }) } }, n.proxyNativeTracks_ = function () { var e = this; Vn.names.forEach(function (t) { e.proxyNativeTracksForType_(t) }) }, n.createEl = function () { var e = this.options_.tag; if (!e || !this.options_.playerElIngest && !this.movingMediaElementInDOM) { if (e) { var n = e.cloneNode(!0); e.parentNode && e.parentNode.insertBefore(n, e), t.disposeMediaElement(e), e = n } else { e = a.a.createElement("video"); var i = St({}, this.options_.tag && ve(this.options_.tag)); Xt && !0 === this.options_.nativeControlsForTouch || delete i.controls, ge(e, Z(i, { id: this.options_.techId, class: "vjs-tech" })) } e.playerId = this.options_.playerId } void 0 !== this.options_.preload && _e(e, "preload", this.options_.preload); for (var r = ["loop", "muted", "playsinline", "autoplay"], s = 0; s < r.length; s++) { var o = r[s], l = this.options_[o]; void 0 !== l && (l ? _e(e, o, o) : be(e, o), e[o] = l) } return e }, n.handleLateInit_ = function (e) { if (0 !== e.networkState && 3 !== e.networkState) { if (0 === e.readyState) { var t = !1, n = function () { t = !0 }; this.on("loadstart", n); var i = function () { t || this.trigger("loadstart") }; return this.on("loadedmetadata", i), void this.ready(function () { this.off("loadstart", n), this.off("loadedmetadata", i), t || this.trigger("loadstart") }) } var r = ["loadstart"]; r.push("loadedmetadata"), e.readyState >= 2 && r.push("loadeddata"), e.readyState >= 3 && r.push("canplay"), e.readyState >= 4 && r.push("canplaythrough"), this.ready(function () { r.forEach(function (e) { this.trigger(e) }, this) }) } }, n.setCurrentTime = function (e) { try { this.el_.currentTime = e } catch (e) { X(e, "Video is not ready. (Video.js)") } }, n.duration = function () { var e = this; if (this.el_.duration === 1 / 0 && Ut && qt && 0 === this.el_.currentTime) { return this.on("timeupdate", function t() { e.el_.currentTime > 0 && (e.el_.duration === 1 / 0 && e.trigger("durationchange"), e.off("timeupdate", t)) }), NaN } return this.el_.duration || NaN }, n.width = function () { return this.el_.offsetWidth }, n.height = function () { return this.el_.offsetHeight }, n.proxyWebkitFullscreen_ = function () { var e = this; if ("webkitDisplayingFullscreen" in this.el_) { var t = function () { this.trigger("fullscreenchange", { isFullscreen: !1 }) }, n = function () { "webkitPresentationMode" in this.el_ && "picture-in-picture" !== this.el_.webkitPresentationMode && (this.one("webkitendfullscreen", t), this.trigger("fullscreenchange", { isFullscreen: !0 })) }; this.on("webkitbeginfullscreen", n), this.on("dispose", function () { e.off("webkitbeginfullscreen", n), e.off("webkitendfullscreen", t) }) } }, n.supportsFullScreen = function () { if ("function" == typeof this.el_.webkitEnterFullScreen) { var e = r.a.navigator && r.a.navigator.userAgent || ""; if (/Android/.test(e) || !/Chrome|Mac OS X 10.5/.test(e)) return !0 } return !1 }, n.enterFullScreen = function () { var e = this.el_; e.paused && e.networkState <= e.HAVE_METADATA ? (this.el_.play(), this.setTimeout(function () { e.pause(), e.webkitEnterFullScreen() }, 0)) : e.webkitEnterFullScreen() }, n.exitFullScreen = function () { this.el_.webkitExitFullScreen() }, n.requestPictureInPicture = function () { return this.el_.requestPictureInPicture() }, n.src = function (e) { if (void 0 === e) return this.el_.src; this.setSrc(e) }, n.reset = function () { t.resetMediaElement(this.el_) }, n.currentSrc = function () { return this.currentSource_ ? this.currentSource_.src : this.el_.currentSrc }, n.setControls = function (e) { this.el_.controls = !!e }, n.addTextTrack = function (t, n, i) { return this.featuresNativeTextTracks ? this.el_.addTextTrack(t, n, i) : e.prototype.addTextTrack.call(this, t, n, i) }, n.createRemoteTextTrack = function (t) { if (!this.featuresNativeTextTracks) return e.prototype.createRemoteTextTrack.call(this, t); var n = a.a.createElement("track"); return t.kind && (n.kind = t.kind), t.label && (n.label = t.label), (t.language || t.srclang) && (n.srclang = t.language || t.srclang), t.default && (n.default = t.default), t.id && (n.id = t.id), t.src && (n.src = t.src), n }, n.addRemoteTextTrack = function (t, n) { var i = e.prototype.addRemoteTextTrack.call(this, t, n); return this.featuresNativeTextTracks && this.el().appendChild(i), i }, n.removeRemoteTextTrack = function (t) { if (e.prototype.removeRemoteTextTrack.call(this, t), this.featuresNativeTextTracks) for (var n = this.$$("track"), i = n.length; i--;)t !== n[i] && t !== n[i].track || this.el().removeChild(n[i]) }, n.getVideoPlaybackQuality = function () { if ("function" == typeof this.el().getVideoPlaybackQuality) return this.el().getVideoPlaybackQuality(); var e = {}; return void 0 !== this.el().webkitDroppedFrameCount && void 0 !== this.el().webkitDecodedFrameCount && (e.droppedVideoFrames = this.el().webkitDroppedFrameCount, e.totalVideoFrames = this.el().webkitDecodedFrameCount), r.a.performance && "function" == typeof r.a.performance.now ? e.creationTime = r.a.performance.now() : r.a.performance && r.a.performance.timing && "number" == typeof r.a.performance.timing.navigationStart && (e.creationTime = r.a.Date.now() - r.a.performance.timing.navigationStart), e }, t }(zn); if (se()) { Rr.TEST_VID = a.a.createElement("video"); var Mr = a.a.createElement("track"); Mr.kind = "captions", Mr.srclang = "en", Mr.label = "English", Rr.TEST_VID.appendChild(Mr) } Rr.isSupported = function () { try { Rr.TEST_VID.volume = .5 } catch (e) { return !1 } return !(!Rr.TEST_VID || !Rr.TEST_VID.canPlayType) }, Rr.canPlayType = function (e) { return Rr.TEST_VID.canPlayType(e) }, Rr.canPlaySource = function (e, t) { return Rr.canPlayType(e.type) }, Rr.canControlVolume = function () { try { var e = Rr.TEST_VID.volume; return Rr.TEST_VID.volume = e / 2 + .1, e !== Rr.TEST_VID.volume } catch (e) { return !1 } }, Rr.canMuteVolume = function () { try { var e = Rr.TEST_VID.muted; return Rr.TEST_VID.muted = !e, Rr.TEST_VID.muted ? _e(Rr.TEST_VID, "muted", "muted") : be(Rr.TEST_VID, "muted"), e !== Rr.TEST_VID.muted } catch (e) { return !1 } }, Rr.canControlPlaybackRate = function () { if (Ut && qt && Vt < 58) return !1; try { var e = Rr.TEST_VID.playbackRate; return Rr.TEST_VID.playbackRate = e / 2 + .1, e !== Rr.TEST_VID.playbackRate } catch (e) { return !1 } }, Rr.canOverrideAttributes = function () { try { var e = function () { }; Object.defineProperty(a.a.createElement("video"), "src", { get: e, set: e }), Object.defineProperty(a.a.createElement("audio"), "src", { get: e, set: e }), Object.defineProperty(a.a.createElement("video"), "innerHTML", { get: e, set: e }), Object.defineProperty(a.a.createElement("audio"), "innerHTML", { get: e, set: e }) } catch (e) { return !1 } return !0 }, Rr.supportsNativeTextTracks = function () { return zt || Rt && qt }, Rr.supportsNativeVideoTracks = function () { return !(!Rr.TEST_VID || !Rr.TEST_VID.videoTracks) }, Rr.supportsNativeAudioTracks = function () { return !(!Rr.TEST_VID || !Rr.TEST_VID.audioTracks) }, Rr.Events = ["loadstart", "suspend", "abort", "error", "emptied", "stalled", "loadedmetadata", "loadeddata", "canplay", "canplaythrough", "playing", "waiting", "seeking", "seeked", "ended", "durationchange", "timeupdate", "progress", "play", "pause", "ratechange", "resize", "volumechange"], Rr.prototype.featuresVolumeControl = Rr.canControlVolume(), Rr.prototype.featuresMuteControl = Rr.canMuteVolume(), Rr.prototype.featuresPlaybackRate = Rr.canControlPlaybackRate(), Rr.prototype.featuresSourceset = Rr.canOverrideAttributes(), Rr.prototype.movingMediaElementInDOM = !Rt, Rr.prototype.featuresFullscreenResize = !0, Rr.prototype.featuresProgressEvents = !0, Rr.prototype.featuresTimeupdateEvents = !0, Rr.prototype.featuresNativeTextTracks = Rr.supportsNativeTextTracks(), Rr.prototype.featuresNativeVideoTracks = Rr.supportsNativeVideoTracks(), Rr.prototype.featuresNativeAudioTracks = Rr.supportsNativeAudioTracks(); var Ur = Rr.TEST_VID && Rr.TEST_VID.constructor.prototype.canPlayType, jr = /^application\/(?:x-|vnd\.apple\.)mpegurl/i; Rr.patchCanPlayType = function () { jt >= 4 && !Ft && !qt && (Rr.TEST_VID.constructor.prototype.canPlayType = function (e) { return e && jr.test(e) ? "maybe" : Ur.call(this, e) }) }, Rr.unpatchCanPlayType = function () { var e = Rr.TEST_VID.constructor.prototype.canPlayType; return Rr.TEST_VID.constructor.prototype.canPlayType = Ur, e }, Rr.patchCanPlayType(), Rr.disposeMediaElement = function (e) { if (e) { for (e.parentNode && e.parentNode.removeChild(e); e.hasChildNodes();)e.removeChild(e.firstChild); e.removeAttribute("src"), "function" == typeof e.load && function () { try { e.load() } catch (e) { } }() } }, Rr.resetMediaElement = function (e) { if (e) { for (var t = e.querySelectorAll("source"), n = t.length; n--;)e.removeChild(t[n]); e.removeAttribute("src"), "function" == typeof e.load && function () { try { e.load() } catch (e) { } }() } }, ["muted", "defaultMuted", "autoplay", "controls", "loop", "playsinline"].forEach(function (e) { Rr.prototype[e] = function () { return this.el_[e] || this.el_.hasAttribute(e) } }), ["muted", "defaultMuted", "autoplay", "loop", "playsinline"].forEach(function (e) { Rr.prototype["set" + Tt(e)] = function (t) { this.el_[e] = t, t ? this.el_.setAttribute(e, e) : this.el_.removeAttribute(e) } }), ["paused", "currentTime", "buffered", "volume", "poster", "preload", "error", "seeking", "seekable", "ended", "playbackRate", "defaultPlaybackRate", "played", "networkState", "readyState", "videoWidth", "videoHeight"].forEach(function (e) { Rr.prototype[e] = function () { return this.el_[e] } }), ["volume", "src", "poster", "preload", "playbackRate", "defaultPlaybackRate"].forEach(function (e) { Rr.prototype["set" + Tt(e)] = function (t) { this.el_[e] = t } }), ["pause", "load", "play"].forEach(function (e) { Rr.prototype[e] = function () { return this.el_[e]() } }), zn.withSourceHandlers(Rr), Rr.nativeSourceHandler = {}, Rr.nativeSourceHandler.canPlayType = function (e) { try { return Rr.TEST_VID.canPlayType(e) } catch (e) { return "" } }, Rr.nativeSourceHandler.canHandleSource = function (e, t) { if (e.type) return Rr.nativeSourceHandler.canPlayType(e.type); if (e.src) { var n = Ln(e.src); return Rr.nativeSourceHandler.canPlayType("video/" + n) } return "" }, Rr.nativeSourceHandler.handleSource = function (e, t, n) { t.setSrc(e.src) }, Rr.nativeSourceHandler.dispose = function () { }, Rr.registerSourceHandler(Rr.nativeSourceHandler), zn.registerTech("Html5", Rr); var Br = ["progress", "abort", "suspend", "emptied", "stalled", "loadedmetadata", "loadeddata", "timeupdate", "resize", "volumechange", "texttrackchange"], Fr = { canplay: "CanPlay", canplaythrough: "CanPlayThrough", playing: "Playing", seeked: "Seeked" }, Hr = ["tiny", "xsmall", "small", "medium", "large", "xlarge", "huge"], qr = {}; Hr.forEach(function (e) { var t = "x" === e.charAt(0) ? "x-" + e.substring(1) : e; qr[e] = "vjs-layout-" + t }); var Vr = { tiny: 210, xsmall: 320, small: 425, medium: 768, large: 1440, xlarge: 2560, huge: 1 / 0 }, Wr = function (e) { function t(n, i, r) { var s; if (n.id = n.id || i.id || "vjs_video_" + We(), (i = Z(t.getTagSettings(n), i)).initChildren = !1, i.createEl = !1, i.evented = !1, i.reportTouchActivity = !1, !i.language) if ("function" == typeof n.closest) { var a = n.closest("[lang]"); a && a.getAttribute && (i.language = a.getAttribute("lang")) } else for (var o = n; o && 1 === o.nodeType;) { if (ve(o).hasOwnProperty("lang")) { i.language = o.getAttribute("lang"); break } o = o.parentNode } if ((s = e.call(this, null, i, r) || this).boundDocumentFullscreenChange_ = st(At(s), s.documentFullscreenChange_), s.boundFullWindowOnEscKey_ = st(At(s), s.fullWindowOnEscKey), s.log = Y(s.id_), s.fsApi_ = tn, s.isPosterFromTech_ = !1, s.queuedCallbacks_ = [], s.isReady_ = !1, s.hasStarted_ = !1, s.userActive_ = !1, !s.options_ || !s.options_.techOrder || !s.options_.techOrder.length) throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?"); if (s.tag = n, s.tagAttributes = n && ve(n), s.language(s.options_.language), i.languages) { var l = {}; Object.getOwnPropertyNames(i.languages).forEach(function (e) { l[e.toLowerCase()] = i.languages[e] }), s.languages_ = l } else s.languages_ = t.prototype.options_.languages; s.resetCache_(), s.poster_ = i.poster || "", s.controls_ = !!i.controls, n.controls = !1, n.removeAttribute("controls"), s.changingSrc_ = !1, s.playCallbacks_ = [], s.playTerminatedQueue_ = [], n.hasAttribute("autoplay") ? s.autoplay(!0) : s.autoplay(s.options_.autoplay), i.plugins && Object.keys(i.plugins).forEach(function (e) { if ("function" != typeof s[e]) throw new Error('plugin "' + e + '" does not exist') }), s.scrubbing_ = !1, s.el_ = s.createEl(), vt(At(s), { eventBusKey: "el_" }), s.fluid_ && s.on("playerreset", s.updateStyleEl_); var u = St(s.options_); i.plugins && Object.keys(i.plugins).forEach(function (e) { s[e](i.plugins[e]) }), s.options_.playerOptions = u, s.middleware_ = [], s.initChildren(), s.isAudio("audio" === n.nodeName.toLowerCase()), s.controls() ? s.addClass("vjs-controls-enabled") : s.addClass("vjs-controls-disabled"), s.el_.setAttribute("role", "region"), s.isAudio() ? s.el_.setAttribute("aria-label", s.localize("Audio Player")) : s.el_.setAttribute("aria-label", s.localize("Video Player")), s.isAudio() && s.addClass("vjs-audio"), s.flexNotSupported_() && s.addClass("vjs-no-flex"), Xt && s.addClass("vjs-touch-enabled"), Rt || s.addClass("vjs-workinghover"), t.players[s.id_] = At(s); var c = G.split(".")[0]; return s.addClass("vjs-v" + c), s.userActive(!0), s.reportUserActivity(), s.one("play", s.listenForUserActivity_), s.on("stageclick", s.handleStageClick_), s.on("keydown", s.handleKeyDown), s.breakpoints(s.options_.breakpoints), s.responsive(s.options_.responsive), s } Ct(t, e); var n = t.prototype; return n.dispose = function () { var n = this; this.trigger("dispose"), this.off("dispose"), Je(a.a, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_), Je(a.a, "keydown", this.boundFullWindowOnEscKey_), this.styleEl_ && this.styleEl_.parentNode && (this.styleEl_.parentNode.removeChild(this.styleEl_), this.styleEl_ = null), t.players[this.id_] = null, this.tag && this.tag.player && (this.tag.player = null), this.el_ && this.el_.player && (this.el_.player = null), this.tech_ && (this.tech_.dispose(), this.isPosterFromTech_ = !1, this.poster_ = ""), this.playerElIngest_ && (this.playerElIngest_ = null), this.tag && (this.tag = null), Xn[this.id()] = null, Gn.names.forEach(function (e) { var t = Gn[e], i = n[t.getterName](); i && i.off && i.off() }), e.prototype.dispose.call(this) }, n.createEl = function () { var t, n = this.tag, i = this.playerElIngest_ = n.parentNode && n.parentNode.hasAttribute && n.parentNode.hasAttribute("data-vjs-player"), s = "video-js" === this.tag.tagName.toLowerCase(); i ? t = this.el_ = n.parentNode : s || (t = this.el_ = e.prototype.createEl.call(this, "div")); var o = ve(n); if (s) { for (t = this.el_ = n, n = this.tag = a.a.createElement("video"); t.children.length;)n.appendChild(t.firstChild); de(t, "video-js") || fe(t, "video-js"), t.appendChild(n), i = this.playerElIngest_ = t, Object.keys(t).forEach(function (e) { try { n[e] = t[e] } catch (e) { } }) } if (n.setAttribute("tabindex", "-1"), o.tabindex = "-1", (Wt || qt && Kt) && (n.setAttribute("role", "application"), o.role = "application"), n.removeAttribute("width"), n.removeAttribute("height"), "width" in o && delete o.width, "height" in o && delete o.height, Object.getOwnPropertyNames(o).forEach(function (e) { s && "class" === e || t.setAttribute(e, o[e]), s && n.setAttribute(e, o[e]) }), n.playerId = n.id, n.id += "_html5_api", n.className = "vjs-tech", n.player = t.player = this, this.addClass("vjs-paused"), !0 !== r.a.VIDEOJS_NO_DYNAMIC_STYLE) { this.styleEl_ = He("vjs-styles-dimensions"); var l = Pe(".vjs-styles-defaults"), u = Pe("head"); u.insertBefore(this.styleEl_, l ? l.nextSibling : u.firstChild) } this.fill_ = !1, this.fluid_ = !1, this.width(this.options_.width), this.height(this.options_.height), this.fill(this.options_.fill), this.fluid(this.options_.fluid), this.aspectRatio(this.options_.aspectRatio); for (var c = n.getElementsByTagName("a"), h = 0; h < c.length; h++) { var d = c.item(h); fe(d, "vjs-hidden"), d.setAttribute("hidden", "hidden") } return n.initNetworkState_ = n.networkState, n.parentNode && !i && n.parentNode.insertBefore(t, n), he(n, t), this.children_.unshift(n), this.el_.setAttribute("lang", this.language_), this.el_ = t, t }, n.width = function (e) { return this.dimension("width", e) }, n.height = function (e) { return this.dimension("height", e) }, n.dimension = function (e, t) { var n = e + "_"; if (void 0 === t) return this[n] || 0; if ("" === t) return this[n] = void 0, void this.updateStyleEl_(); var i = parseFloat(t); isNaN(i) ? X.error('Improper value "' + t + '" supplied for for ' + e) : (this[n] = i, this.updateStyleEl_()) }, n.fluid = function (e) { if (void 0 === e) return !!this.fluid_; var t, n; this.fluid_ = !!e, ut(this) && this.off("playerreset", this.updateStyleEl_), e ? (this.addClass("vjs-fluid"), this.fill(!1), ut(t = function () { this.on("playerreset", this.updateStyleEl_) }) ? n() : (t.eventedCallbacks || (t.eventedCallbacks = []), t.eventedCallbacks.push(n))) : this.removeClass("vjs-fluid"), this.updateStyleEl_() }, n.fill = function (e) { if (void 0 === e) return !!this.fill_; this.fill_ = !!e, e ? (this.addClass("vjs-fill"), this.fluid(!1)) : this.removeClass("vjs-fill") }, n.aspectRatio = function (e) { if (void 0 === e) return this.aspectRatio_; if (!/^\d+\:\d+$/.test(e)) throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9."); this.aspectRatio_ = e, this.fluid(!0), this.updateStyleEl_() }, n.updateStyleEl_ = function () { if (!0 !== r.a.VIDEOJS_NO_DYNAMIC_STYLE) { var e, t, n, i = (void 0 !== this.aspectRatio_ && "auto" !== this.aspectRatio_ ? this.aspectRatio_ : this.videoWidth() > 0 ? this.videoWidth() + ":" + this.videoHeight() : "16:9").split(":"), s = i[1] / i[0]; e = void 0 !== this.width_ ? this.width_ : void 0 !== this.height_ ? this.height_ / s : this.videoWidth() || 300, t = void 0 !== this.height_ ? this.height_ : e * s, n = /^[^a-zA-Z]/.test(this.id()) ? "dimensions-" + this.id() : this.id() + "-dimensions", this.addClass(n), qe(this.styleEl_, "\n      ." + n + " {\n        width: " + e + "px;\n        height: " + t + "px;\n      }\n\n      ." + n + ".vjs-fluid {\n        padding-top: " + 100 * s + "%;\n      }\n    ") } else { var a = "number" == typeof this.width_ ? this.width_ : this.options_.width, o = "number" == typeof this.height_ ? this.height_ : this.options_.height, l = this.tech_ && this.tech_.el(); l && (a >= 0 && (l.width = a), o >= 0 && (l.height = o)) } }, n.loadTech_ = function (e, t) { var n = this; this.tech_ && this.unloadTech_(); var i = Tt(e), r = e.charAt(0).toLowerCase() + e.slice(1); "Html5" !== i && this.tag && (zn.getTech("Html5").disposeMediaElement(this.tag), this.tag.player = null, this.tag = null), this.techName_ = i, this.isReady_ = !1; var s = { source: t, autoplay: "string" != typeof this.autoplay() && this.autoplay(), nativeControlsForTouch: this.options_.nativeControlsForTouch, playerId: this.id(), techId: this.id() + "_" + r + "_api", playsinline: this.options_.playsinline, preload: this.options_.preload, loop: this.options_.loop, muted: this.options_.muted, poster: this.poster(), language: this.language(), playerElIngest: this.playerElIngest_ || !1, "vtt.js": this.options_["vtt.js"], canOverridePoster: !!this.options_.techCanOverridePoster, enableSourceset: this.options_.enableSourceset, Promise: this.options_.Promise }; Gn.names.forEach(function (e) { var t = Gn[e]; s[t.getterName] = n[t.privateName] }), Z(s, this.options_[i]), Z(s, this.options_[r]), Z(s, this.options_[e.toLowerCase()]), this.tag && (s.tag = this.tag), t && t.src === this.cache_.src && this.cache_.currentTime > 0 && (s.startTime = this.cache_.currentTime); var a = zn.getTech(e); if (!a) throw new Error("No Tech named '" + i + "' exists! '" + i + "' should be registered using videojs.registerTech()'"); this.tech_ = new a(s), this.tech_.ready(st(this, this.handleTechReady_), !0), fn(this.textTracksJson_ || [], this.tech_), Br.forEach(function (e) { n.on(n.tech_, e, n["handleTech" + Tt(e) + "_"]) }), Object.keys(Fr).forEach(function (e) { n.on(n.tech_, e, function (t) { 0 === n.tech_.playbackRate() && n.tech_.seeking() ? n.queuedCallbacks_.push({ callback: n["handleTech" + Fr[e] + "_"].bind(n), event: t }) : n["handleTech" + Fr[e] + "_"](t) }) }), this.on(this.tech_, "loadstart", this.handleTechLoadStart_), this.on(this.tech_, "sourceset", this.handleTechSourceset_), this.on(this.tech_, "waiting", this.handleTechWaiting_), this.on(this.tech_, "ended", this.handleTechEnded_), this.on(this.tech_, "seeking", this.handleTechSeeking_), this.on(this.tech_, "play", this.handleTechPlay_), this.on(this.tech_, "firstplay", this.handleTechFirstPlay_), this.on(this.tech_, "pause", this.handleTechPause_), this.on(this.tech_, "durationchange", this.handleTechDurationChange_), this.on(this.tech_, "fullscreenchange", this.handleTechFullscreenChange_), this.on(this.tech_, "enterpictureinpicture", this.handleTechEnterPictureInPicture_), this.on(this.tech_, "leavepictureinpicture", this.handleTechLeavePictureInPicture_), this.on(this.tech_, "error", this.handleTechError_), this.on(this.tech_, "loadedmetadata", this.updateStyleEl_), this.on(this.tech_, "posterchange", this.handleTechPosterChange_), this.on(this.tech_, "textdata", this.handleTechTextData_), this.on(this.tech_, "ratechange", this.handleTechRateChange_), this.usingNativeControls(this.techGet_("controls")), this.controls() && !this.usingNativeControls() && this.addTechControlsListeners_(), this.tech_.el().parentNode === this.el() || "Html5" === i && this.tag || he(this.tech_.el(), this.el()), this.tag && (this.tag.player = null, this.tag = null) }, n.unloadTech_ = function () { var e = this; Gn.names.forEach(function (t) { var n = Gn[t]; e[n.privateName] = e[n.getterName]() }), this.textTracksJson_ = dn(this.tech_), this.isReady_ = !1, this.tech_.dispose(), this.tech_ = !1, this.isPosterFromTech_ && (this.poster_ = "", this.trigger("posterchange")), this.isPosterFromTech_ = !1 }, n.tech = function (e) { return void 0 === e && X.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"), this.tech_ }, n.addTechControlsListeners_ = function () { this.removeTechControlsListeners_(), this.on(this.tech_, "mouseup", this.handleTechClick_), this.on(this.tech_, "dblclick", this.handleTechDoubleClick_), this.on(this.tech_, "touchstart", this.handleTechTouchStart_), this.on(this.tech_, "touchmove", this.handleTechTouchMove_), this.on(this.tech_, "touchend", this.handleTechTouchEnd_), this.on(this.tech_, "tap", this.handleTechTap_) }, n.removeTechControlsListeners_ = function () { this.off(this.tech_, "tap", this.handleTechTap_), this.off(this.tech_, "touchstart", this.handleTechTouchStart_), this.off(this.tech_, "touchmove", this.handleTechTouchMove_), this.off(this.tech_, "touchend", this.handleTechTouchEnd_), this.off(this.tech_, "mouseup", this.handleTechClick_), this.off(this.tech_, "dblclick", this.handleTechDoubleClick_) }, n.handleTechReady_ = function () { this.triggerReady(), this.cache_.volume && this.techCall_("setVolume", this.cache_.volume), this.handleTechPosterChange_(), this.handleTechDurationChange_() }, n.handleTechLoadStart_ = function () { this.removeClass("vjs-ended"), this.removeClass("vjs-seeking"), this.error(null), this.handleTechDurationChange_(), this.paused() ? (this.hasStarted(!1), this.trigger("loadstart")) : (this.trigger("loadstart"), this.trigger("firstplay")), this.manualAutoplay_(this.autoplay()) }, n.manualAutoplay_ = function (e) { var t = this; if (this.tech_ && "string" == typeof e) { var n, i = function () { var e = t.muted(); t.muted(!0); var n = function () { t.muted(e) }; t.playTerminatedQueue_.push(n); var i = t.play(); if (un(i)) return i.catch(n) }; if ("any" === e && !0 !== this.muted() ? un(n = this.play()) && (n = n.catch(i)) : n = "muted" === e && !0 !== this.muted() ? i() : this.play(), un(n)) return n.then(function () { t.trigger({ type: "autoplay-success", autoplay: e }) }).catch(function (n) { t.trigger({ type: "autoplay-failure", autoplay: e }) }) } }, n.updateSourceCaches_ = function (e) { void 0 === e && (e = ""); var t = e, n = ""; "string" != typeof t && (t = e.src, n = e.type), this.cache_.source = this.cache_.source || {}, this.cache_.sources = this.cache_.sources || [], t && !n && (n = function (e, t) { if (!t) return ""; if (e.cache_.source.src === t && e.cache_.source.type) return e.cache_.source.type; var n = e.cache_.sources.filter(function (e) { return e.src === t }); if (n.length) return n[0].type; for (var i = e.$$("source"), r = 0; r < i.length; r++) { var s = i[r]; if (s.type && s.src && s.src === t) return s.type } return ii(t) }(this, t)), this.cache_.source = St({}, e, { src: t, type: n }); for (var i = this.cache_.sources.filter(function (e) { return e.src && e.src === t }), r = [], s = this.$$("source"), a = [], o = 0; o < s.length; o++) { var l = ve(s[o]); r.push(l), l.src && l.src === t && a.push(l.src) } a.length && !i.length ? this.cache_.sources = r : i.length || (this.cache_.sources = [this.cache_.source]), this.cache_.src = t }, n.handleTechSourceset_ = function (e) { var t = this; if (!this.changingSrc_) { var n = function (e) { return t.updateSourceCaches_(e) }, i = this.currentSource().src, r = e.src; i && !/^blob:/.test(i) && /^blob:/.test(r) && (!this.lastSource_ || this.lastSource_.tech !== r && this.lastSource_.player !== i) && (n = function () { }), n(r), e.src || this.tech_.any(["sourceset", "loadstart"], function (e) { if ("sourceset" !== e.type) { var n = t.techGet("currentSrc"); t.lastSource_.tech = n, t.updateSourceCaches_(n) } }) } this.lastSource_ = { player: this.currentSource().src, tech: e.src }, this.trigger({ src: e.src, type: "sourceset" }) }, n.hasStarted = function (e) { if (void 0 === e) return this.hasStarted_; e !== this.hasStarted_ && (this.hasStarted_ = e, this.hasStarted_ ? (this.addClass("vjs-has-started"), this.trigger("firstplay")) : this.removeClass("vjs-has-started")) }, n.handleTechPlay_ = function () { this.removeClass("vjs-ended"), this.removeClass("vjs-paused"), this.addClass("vjs-playing"), this.hasStarted(!0), this.trigger("play") }, n.handleTechRateChange_ = function () { this.tech_.playbackRate() > 0 && 0 === this.cache_.lastPlaybackRate && (this.queuedCallbacks_.forEach(function (e) { return e.callback(e.event) }), this.queuedCallbacks_ = []), this.cache_.lastPlaybackRate = this.tech_.playbackRate(), this.trigger("ratechange") }, n.handleTechWaiting_ = function () { var e = this; this.addClass("vjs-waiting"), this.trigger("waiting"); var t = this.currentTime(); this.on("timeupdate", function n() { t !== e.currentTime() && (e.removeClass("vjs-waiting"), e.off("timeupdate", n)) }) }, n.handleTechCanPlay_ = function () { this.removeClass("vjs-waiting"), this.trigger("canplay") }, n.handleTechCanPlayThrough_ = function () { this.removeClass("vjs-waiting"), this.trigger("canplaythrough") }, n.handleTechPlaying_ = function () { this.removeClass("vjs-waiting"), this.trigger("playing") }, n.handleTechSeeking_ = function () { this.addClass("vjs-seeking"), this.trigger("seeking") }, n.handleTechSeeked_ = function () { this.removeClass("vjs-seeking"), this.removeClass("vjs-ended"), this.trigger("seeked") }, n.handleTechFirstPlay_ = function () { this.options_.starttime && (X.warn("Passing the `starttime` option to the player will be deprecated in 6.0"), this.currentTime(this.options_.starttime)), this.addClass("vjs-has-started"), this.trigger("firstplay") }, n.handleTechPause_ = function () { this.removeClass("vjs-playing"), this.addClass("vjs-paused"), this.trigger("pause") }, n.handleTechEnded_ = function () { this.addClass("vjs-ended"), this.options_.loop ? (this.currentTime(0), this.play()) : this.paused() || this.pause(), this.trigger("ended") }, n.handleTechDurationChange_ = function () { this.duration(this.techGet_("duration")) }, n.handleTechClick_ = function (e) { De(e) && this.controls_ && (this.paused() ? cn(this.play()) : this.pause()) }, n.handleTechDoubleClick_ = function (e) { this.controls_ && (Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"), function (t) { return t.contains(e.target) }) || void 0 !== this.options_ && void 0 !== this.options_.userActions && void 0 !== this.options_.userActions.doubleClick && !1 === this.options_.userActions.doubleClick || (void 0 !== this.options_ && void 0 !== this.options_.userActions && "function" == typeof this.options_.userActions.doubleClick ? this.options_.userActions.doubleClick.call(this, e) : this.isFullscreen() ? this.exitFullscreen() : this.requestFullscreen())) }, n.handleTechTap_ = function () { this.userActive(!this.userActive()) }, n.handleTechTouchStart_ = function () { this.userWasActive = this.userActive() }, n.handleTechTouchMove_ = function () { this.userWasActive && this.reportUserActivity() }, n.handleTechTouchEnd_ = function (e) { e.preventDefault() }, n.handleStageClick_ = function () { this.reportUserActivity() }, n.toggleFullscreenClass_ = function () { this.isFullscreen() ? this.addClass("vjs-fullscreen") : this.removeClass("vjs-fullscreen") }, n.documentFullscreenChange_ = function (e) { var t = this.el(), n = a.a[this.fsApi_.fullscreenElement] === t; !n && t.matches ? n = t.matches(":" + this.fsApi_.fullscreen) : !n && t.msMatchesSelector && (n = t.msMatchesSelector(":" + this.fsApi_.fullscreen)), this.isFullscreen(n), !1 === this.isFullscreen() && Je(a.a, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_), this.fsApi_.prefixed && this.trigger("fullscreenchange") }, n.handleTechFullscreenChange_ = function (e, t) { t && this.isFullscreen(t.isFullscreen), this.trigger("fullscreenchange") }, n.togglePictureInPictureClass_ = function () { this.isInPictureInPicture() ? this.addClass("vjs-picture-in-picture") : this.removeClass("vjs-picture-in-picture") }, n.handleTechEnterPictureInPicture_ = function (e) { this.isInPictureInPicture(!0) }, n.handleTechLeavePictureInPicture_ = function (e) { this.isInPictureInPicture(!1) }, n.handleTechError_ = function () { var e = this.tech_.error(); this.error(e) }, n.handleTechTextData_ = function () { var e = null; arguments.length > 1 && (e = arguments[1]), this.trigger("textdata", e) }, n.getCache = function () { return this.cache_ }, n.resetCache_ = function () { this.cache_ = { currentTime: 0, inactivityTimeout: this.options_.inactivityTimeout, duration: NaN, lastVolume: 1, lastPlaybackRate: this.defaultPlaybackRate(), media: null, src: "", source: {}, sources: [], volume: 1 } }, n.techCall_ = function (e, t) { this.ready(function () { if (e in Zn) return function (e, t, n, i) { return t[n](e.reduce(ti(n), i)) }(this.middleware_, this.tech_, e, t); if (e in ei) return Qn(this.middleware_, this.tech_, e, t); try { this.tech_ && this.tech_[e](t) } catch (e) { throw X(e), e } }, !0) }, n.techGet_ = function (e) { if (this.tech_ && this.tech_.isReady_) { if (e in Jn) return function (e, t, n) { return e.reduceRight(ti(n), t[n]()) }(this.middleware_, this.tech_, e); if (e in ei) return Qn(this.middleware_, this.tech_, e); try { return this.tech_[e]() } catch (t) { if (void 0 === this.tech_[e]) throw X("Video.js: " + e + " method not defined for " + this.techName_ + " playback technology.", t), t; if ("TypeError" === t.name) throw X("Video.js: " + e + " unavailable on " + this.techName_ + " playback technology element.", t), this.tech_.isReady_ = !1, t; throw X(t), t } } }, n.play = function () { var e = this, t = this.options_.Promise || r.a.Promise; return t ? new t(function (t) { e.play_(t) }) : this.play_() }, n.play_ = function (e) { var t = this; void 0 === e && (e = cn), this.playCallbacks_.push(e); var n = Boolean(!this.changingSrc_ && (this.src() || this.currentSrc())); if (this.waitToPlay_ && (this.off(["ready", "loadstart"], this.waitToPlay_), this.waitToPlay_ = null), !this.isReady_ || !n) return this.waitToPlay_ = function (e) { t.play_() }, this.one(["ready", "loadstart"], this.waitToPlay_), void (n || !zt && !Rt || this.load()); var i = this.techGet_("play"); null === i ? this.runPlayTerminatedQueue_() : this.runPlayCallbacks_(i) }, n.runPlayTerminatedQueue_ = function () { var e = this.playTerminatedQueue_.slice(0); this.playTerminatedQueue_ = [], e.forEach(function (e) { e() }) }, n.runPlayCallbacks_ = function (e) { var t = this.playCallbacks_.slice(0); this.playCallbacks_ = [], this.playTerminatedQueue_ = [], t.forEach(function (t) { t(e) }) }, n.pause = function () { this.techCall_("pause") }, n.paused = function () { return !1 !== this.techGet_("paused") }, n.played = function () { return this.techGet_("played") || Jt(0, 0) }, n.scrubbing = function (e) { if (void 0 === e) return this.scrubbing_; this.scrubbing_ = !!e, e ? this.addClass("vjs-scrubbing") : this.removeClass("vjs-scrubbing") }, n.currentTime = function (e) { return void 0 !== e ? (e < 0 && (e = 0), void this.techCall_("setCurrentTime", e)) : (this.cache_.currentTime = this.techGet_("currentTime") || 0, this.cache_.currentTime) }, n.duration = function (e) { if (void 0 === e) return void 0 !== this.cache_.duration ? this.cache_.duration : NaN; (e = parseFloat(e)) < 0 && (e = 1 / 0), e !== this.cache_.duration && (this.cache_.duration = e, e === 1 / 0 ? (this.addClass("vjs-live"), this.options_.liveui && this.player_.liveTracker && this.addClass("vjs-liveui")) : (this.removeClass("vjs-live"), this.removeClass("vjs-liveui")), isNaN(e) || this.trigger("durationchange")) }, n.remainingTime = function () { return this.duration() - this.currentTime() }, n.remainingTimeDisplay = function () { return Math.floor(this.duration()) - Math.floor(this.currentTime()) }, n.buffered = function () { var e = this.techGet_("buffered"); return e && e.length || (e = Jt(0, 0)), e }, n.bufferedPercent = function () { return Zt(this.buffered(), this.duration()) }, n.bufferedEnd = function () { var e = this.buffered(), t = this.duration(), n = e.end(e.length - 1); return n > t && (n = t), n }, n.volume = function (e) { var t; return void 0 !== e ? (t = Math.max(0, Math.min(1, parseFloat(e))), this.cache_.volume = t, this.techCall_("setVolume", t), void (t > 0 && this.lastVolume_(t))) : (t = parseFloat(this.techGet_("volume")), isNaN(t) ? 1 : t) }, n.muted = function (e) { if (void 0 === e) return this.techGet_("muted") || !1; this.techCall_("setMuted", e) }, n.defaultMuted = function (e) { return void 0 !== e ? this.techCall_("setDefaultMuted", e) : this.techGet_("defaultMuted") || !1 }, n.lastVolume_ = function (e) { if (void 0 === e || 0 === e) return this.cache_.lastVolume; this.cache_.lastVolume = e }, n.supportsFullScreen = function () { return this.techGet_("supportsFullScreen") || !1 }, n.isFullscreen = function (e) { return void 0 !== e ? (this.isFullscreen_ = !!e, void this.toggleFullscreenClass_()) : !!this.isFullscreen_ }, n.requestFullscreen = function (e) { var t; this.isFullscreen(!0), this.fsApi_.requestFullscreen ? (Qe(a.a, this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_), this.fsApi_.prefixed || (t = this.options_.fullscreen && this.options_.fullscreen.options || {}, void 0 !== e && (t = e)), cn(this.el_[this.fsApi_.requestFullscreen](t))) : this.tech_.supportsFullScreen() ? this.techCall_("enterFullScreen") : (this.enterFullWindow(), this.trigger("fullscreenchange")) }, n.exitFullscreen = function () { this.isFullscreen(!1), this.fsApi_.requestFullscreen ? cn(a.a[this.fsApi_.exitFullscreen]()) : this.tech_.supportsFullScreen() ? this.techCall_("exitFullScreen") : (this.exitFullWindow(), this.trigger("fullscreenchange")) }, n.enterFullWindow = function () { this.isFullWindow = !0, this.docOrigOverflow = a.a.documentElement.style.overflow, Qe(a.a, "keydown", this.boundFullWindowOnEscKey_), a.a.documentElement.style.overflow = "hidden", fe(a.a.body, "vjs-full-window"), this.trigger("enterFullWindow") }, n.fullWindowOnEscKey = function (e) { c.a.isEventKey(e, "Esc") && (!0 === this.isFullscreen() ? this.exitFullscreen() : this.exitFullWindow()) }, n.exitFullWindow = function () { this.isFullWindow = !1, Je(a.a, "keydown", this.boundFullWindowOnEscKey_), a.a.documentElement.style.overflow = this.docOrigOverflow, pe(a.a.body, "vjs-full-window"), this.trigger("exitFullWindow") }, n.isInPictureInPicture = function (e) { return void 0 !== e ? (this.isInPictureInPicture_ = !!e, void this.togglePictureInPictureClass_()) : !!this.isInPictureInPicture_ }, n.requestPictureInPicture = function () { if ("pictureInPictureEnabled" in a.a) return this.techGet_("requestPictureInPicture") }, n.exitPictureInPicture = function () { if ("pictureInPictureEnabled" in a.a) return a.a.exitPictureInPicture() }, n.handleKeyDown = function (e) { var t = this.options_.userActions; if (t && t.hotkeys) { (function (e) { var t = e.tagName.toLowerCase(); if (e.isContentEditable) return !0; if ("input" === t) return -1 === ["button", "checkbox", "hidden", "radio", "reset", "submit"].indexOf(e.type); return -1 !== ["textarea"].indexOf(t) })(this.el_.ownerDocument.activeElement) || ("function" == typeof t.hotkeys ? t.hotkeys.call(this, e) : this.handleHotkeys(e)) } }, n.handleHotkeys = function (e) { var t = this.options_.userActions ? this.options_.userActions.hotkeys : {}, n = t.fullscreenKey, i = void 0 === n ? function (e) { return c.a.isEventKey(e, "f") } : n, r = t.muteKey, s = void 0 === r ? function (e) { return c.a.isEventKey(e, "m") } : r, o = t.playPauseKey, l = void 0 === o ? function (e) { return c.a.isEventKey(e, "k") || c.a.isEventKey(e, "Space") } : o; if (i.call(this, e)) { e.preventDefault(), e.stopPropagation(); var u = Et.getComponent("FullscreenToggle"); !1 !== a.a[this.fsApi_.fullscreenEnabled] && u.prototype.handleClick.call(this, e) } else if (s.call(this, e)) { e.preventDefault(), e.stopPropagation(), Et.getComponent("MuteToggle").prototype.handleClick.call(this, e) } else if (l.call(this, e)) { e.preventDefault(), e.stopPropagation(), Et.getComponent("PlayToggle").prototype.handleClick.call(this, e) } }, n.canPlayType = function (e) { for (var t, n = 0, i = this.options_.techOrder; n < i.length; n++) { var r = i[n], s = zn.getTech(r); if (s || (s = Et.getComponent(r)), s) { if (s.isSupported() && (t = s.canPlayType(e))) return t } else X.error('The "' + r + '" tech is undefined. Skipped browser support check for that tech.') } return "" }, n.selectSource = function (e) { var t, n = this, i = this.options_.techOrder.map(function (e) { return [e, zn.getTech(e)] }).filter(function (e) { var t = e[0], n = e[1]; return n ? n.isSupported() : (X.error('The "' + t + '" tech is undefined. Skipped browser support check for that tech.'), !1) }), r = function (e, t, n) { var i; return e.some(function (e) { return t.some(function (t) { if (i = n(e, t)) return !0 }) }), i }, s = function (e, t) { var i = e[0]; if (e[1].canPlaySource(t, n.options_[i.toLowerCase()])) return { source: t, tech: i } }; return (this.options_.sourceOrder ? r(e, i, (t = s, function (e, n) { return t(n, e) })) : r(i, e, s)) || !1 }, n.src = function (e) { var t = this; if (void 0 === e) return this.cache_.src || ""; var n = function e(t) { if (Array.isArray(t)) { var n = []; t.forEach(function (t) { t = e(t), Array.isArray(t) ? n = n.concat(t) : ee(t) && n.push(t) }), t = n } else t = "string" == typeof t && t.trim() ? [ri({ src: t })] : ee(t) && "string" == typeof t.src && t.src && t.src.trim() ? [ri(t)] : []; return t }(e); n.length ? (this.changingSrc_ = !0, this.cache_.sources = n, this.updateSourceCaches_(n[0]), $n(this, n[0], function (e, i) { var r, s; if (t.middleware_ = i, t.cache_.sources = n, t.updateSourceCaches_(e), t.src_(e)) return n.length > 1 ? t.src(n.slice(1)) : (t.changingSrc_ = !1, t.setTimeout(function () { this.error({ code: 4, message: this.localize(this.options_.notSupportedMessage) }) }, 0), void t.triggerReady()); r = i, s = t.tech_, r.forEach(function (e) { return e.setTech && e.setTech(s) }) })) : this.setTimeout(function () { this.error({ code: 4, message: this.localize(this.options_.notSupportedMessage) }) }, 0) }, n.src_ = function (e) { var t, n, i = this, r = this.selectSource([e]); return !r || (t = r.tech, n = this.techName_, Tt(t) !== Tt(n) ? (this.changingSrc_ = !0, this.loadTech_(r.tech, r.source), this.tech_.ready(function () { i.changingSrc_ = !1 }), !1) : (this.ready(function () { this.tech_.constructor.prototype.hasOwnProperty("setSource") ? this.techCall_("setSource", e) : this.techCall_("src", e.src), this.changingSrc_ = !1 }, !0), !1)) }, n.load = function () { this.techCall_("load") }, n.reset = function () { var e = this, t = this.options_.Promise || r.a.Promise; this.paused() || !t ? this.doReset_() : cn(this.play().then(function () { return e.doReset_() })) }, n.doReset_ = function () { this.tech_ && this.tech_.clearTracks("text"), this.resetCache_(), this.poster(""), this.loadTech_(this.options_.techOrder[0], null), this.techCall_("reset"), this.resetControlBarUI_(), ut(this) && this.trigger("playerreset") }, n.resetControlBarUI_ = function () { this.resetProgressBar_(), this.resetPlaybackRate_(), this.resetVolumeBar_() }, n.resetProgressBar_ = function () { this.currentTime(0); var e = this.controlBar, t = e.durationDisplay, n = e.remainingTimeDisplay; t && t.updateContent(), n && n.updateContent() }, n.resetPlaybackRate_ = function () { this.playbackRate(this.defaultPlaybackRate()), this.handleTechRateChange_() }, n.resetVolumeBar_ = function () { this.volume(1), this.trigger("volumechange") }, n.currentSources = function () { var e = this.currentSource(), t = []; return 0 !== Object.keys(e).length && t.push(e), this.cache_.sources || t }, n.currentSource = function () { return this.cache_.source || {} }, n.currentSrc = function () { return this.currentSource() && this.currentSource().src || "" }, n.currentType = function () { return this.currentSource() && this.currentSource().type || "" }, n.preload = function (e) { return void 0 !== e ? (this.techCall_("setPreload", e), void (this.options_.preload = e)) : this.techGet_("preload") }, n.autoplay = function (e) { if (void 0 === e) return this.options_.autoplay || !1; var t; "string" == typeof e && /(any|play|muted)/.test(e) ? (this.options_.autoplay = e, this.manualAutoplay_(e), t = !1) : this.options_.autoplay = !!e, t = void 0 === t ? this.options_.autoplay : t, this.tech_ && this.techCall_("setAutoplay", t) }, n.playsinline = function (e) { return void 0 !== e ? (this.techCall_("setPlaysinline", e), this.options_.playsinline = e, this) : this.techGet_("playsinline") }, n.loop = function (e) { return void 0 !== e ? (this.techCall_("setLoop", e), void (this.options_.loop = e)) : this.techGet_("loop") }, n.poster = function (e) { if (void 0 === e) return this.poster_; e || (e = ""), e !== this.poster_ && (this.poster_ = e, this.techCall_("setPoster", e), this.isPosterFromTech_ = !1, this.trigger("posterchange")) }, n.handleTechPosterChange_ = function () { if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) { var e = this.tech_.poster() || ""; e !== this.poster_ && (this.poster_ = e, this.isPosterFromTech_ = !0, this.trigger("posterchange")) } }, n.controls = function (e) { if (void 0 === e) return !!this.controls_; e = !!e, this.controls_ !== e && (this.controls_ = e, this.usingNativeControls() && this.techCall_("setControls", e), this.controls_ ? (this.removeClass("vjs-controls-disabled"), this.addClass("vjs-controls-enabled"), this.trigger("controlsenabled"), this.usingNativeControls() || this.addTechControlsListeners_()) : (this.removeClass("vjs-controls-enabled"), this.addClass("vjs-controls-disabled"), this.trigger("controlsdisabled"), this.usingNativeControls() || this.removeTechControlsListeners_())) }, n.usingNativeControls = function (e) { if (void 0 === e) return !!this.usingNativeControls_; e = !!e, this.usingNativeControls_ !== e && (this.usingNativeControls_ = e, this.usingNativeControls_ ? (this.addClass("vjs-using-native-controls"), this.trigger("usingnativecontrols")) : (this.removeClass("vjs-using-native-controls"), this.trigger("usingcustomcontrols"))) }, n.error = function (e) { if (void 0 === e) return this.error_ || null; if (this.options_.suppressNotSupportedError && e && e.message && e.message === this.localize(this.options_.notSupportedMessage)) { var t = function () { this.error(e) }; return this.options_.suppressNotSupportedError = !1, this.any(["click", "touchstart"], t), void this.one("loadstart", function () { this.off(["click", "touchstart"], t) }) } if (null === e) return this.error_ = e, this.removeClass("vjs-error"), void (this.errorDisplay && this.errorDisplay.close()); this.error_ = new on(e), this.addClass("vjs-error"), X.error("(CODE:" + this.error_.code + " " + on.errorTypes[this.error_.code] + ")", this.error_.message, this.error_), this.trigger("error") }, n.reportUserActivity = function (e) { this.userActivity_ = !0 }, n.userActive = function (e) { if (void 0 === e) return this.userActive_; if ((e = !!e) !== this.userActive_) { if (this.userActive_ = e, this.userActive_) return this.userActivity_ = !0, this.removeClass("vjs-user-inactive"), this.addClass("vjs-user-active"), void this.trigger("useractive"); this.tech_ && this.tech_.one("mousemove", function (e) { e.stopPropagation(), e.preventDefault() }), this.userActivity_ = !1, this.removeClass("vjs-user-active"), this.addClass("vjs-user-inactive"), this.trigger("userinactive") } }, n.listenForUserActivity_ = function () { var e, t, n, i = st(this, this.reportUserActivity); this.on("mousedown", function () { i(), this.clearInterval(e), e = this.setInterval(i, 250) }), this.on("mousemove", function (e) { e.screenX === t && e.screenY === n || (t = e.screenX, n = e.screenY, i()) }), this.on("mouseup", function (t) { i(), this.clearInterval(e) }); var r, s = this.getChild("controlBar"); !s || Rt || Ut || (s.on("mouseenter", function (e) { this.player().cache_.inactivityTimeout = this.player().options_.inactivityTimeout, this.player().options_.inactivityTimeout = 0 }), s.on("mouseleave", function (e) { this.player().options_.inactivityTimeout = this.player().cache_.inactivityTimeout })), this.on("keydown", i), this.on("keyup", i), this.setInterval(function () { if (this.userActivity_) { this.userActivity_ = !1, this.userActive(!0), this.clearTimeout(r); var e = this.options_.inactivityTimeout; e <= 0 || (r = this.setTimeout(function () { this.userActivity_ || this.userActive(!1) }, e)) } }, 250) }, n.playbackRate = function (e) { if (void 0 === e) return this.tech_ && this.tech_.featuresPlaybackRate ? this.cache_.lastPlaybackRate || this.techGet_("playbackRate") : 1; this.techCall_("setPlaybackRate", e) }, n.defaultPlaybackRate = function (e) { return void 0 !== e ? this.techCall_("setDefaultPlaybackRate", e) : this.tech_ && this.tech_.featuresPlaybackRate ? this.techGet_("defaultPlaybackRate") : 1 }, n.isAudio = function (e) { if (void 0 === e) return !!this.isAudio_; this.isAudio_ = !!e }, n.addTextTrack = function (e, t, n) { if (this.tech_) return this.tech_.addTextTrack(e, t, n) }, n.addRemoteTextTrack = function (e, t) { if (this.tech_) return this.tech_.addRemoteTextTrack(e, t) }, n.removeRemoteTextTrack = function (e) { void 0 === e && (e = {}); var t = e.track; if (t || (t = e), this.tech_) return this.tech_.removeRemoteTextTrack(t) }, n.getVideoPlaybackQuality = function () { return this.techGet_("getVideoPlaybackQuality") }, n.videoWidth = function () { return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0 }, n.videoHeight = function () { return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0 }, n.language = function (e) { if (void 0 === e) return this.language_; this.language_ = String(e).toLowerCase() }, n.languages = function () { return St(t.prototype.options_.languages, this.languages_) }, n.toJSON = function () { var e = St(this.options_), t = e.tracks; e.tracks = []; for (var n = 0; n < t.length; n++) { var i = t[n]; (i = St(i)).player = void 0, e.tracks[n] = i } return e }, n.createModal = function (e, t) { var n = this; (t = t || {}).content = e || ""; var i = new mn(this, t); return this.addChild(i), i.on("dispose", function () { n.removeChild(i) }), i.open(), i }, n.updateCurrentBreakpoint_ = function () { if (this.responsive()) for (var e = this.currentBreakpoint(), t = this.currentWidth(), n = 0; n < Hr.length; n++) { var i = Hr[n]; if (t <= this.breakpoints_[i]) { if (e === i) return; e && this.removeClass(qr[e]), this.addClass(qr[i]), this.breakpoint_ = i; break } } }, n.removeCurrentBreakpoint_ = function () { var e = this.currentBreakpointClass(); this.breakpoint_ = "", e && this.removeClass(e) }, n.breakpoints = function (e) { return void 0 === e ? Z(this.breakpoints_) : (this.breakpoint_ = "", this.breakpoints_ = Z({}, Vr, e), this.updateCurrentBreakpoint_(), Z(this.breakpoints_)) }, n.responsive = function (e) { return void 0 === e ? this.responsive_ : (e = Boolean(e)) !== this.responsive_ ? (this.responsive_ = e, e ? (this.on("playerresize", this.updateCurrentBreakpoint_), this.updateCurrentBreakpoint_()) : (this.off("playerresize", this.updateCurrentBreakpoint_), this.removeCurrentBreakpoint_()), e) : void 0 }, n.currentBreakpoint = function () { return this.breakpoint_ }, n.currentBreakpointClass = function () { return qr[this.breakpoint_] || "" }, n.loadMedia = function (e, t) { var n = this; if (e && "object" == typeof e) { this.reset(), this.cache_.media = St(e); var i = this.cache_.media, r = i.artwork, s = i.poster, a = i.src, o = i.textTracks; !r && s && (this.cache_.media.artwork = [{ src: s, type: ii(s) }]), a && this.src(a), s && this.poster(s), Array.isArray(o) && o.forEach(function (e) { return n.addRemoteTextTrack(e, !1) }), this.ready(t) } }, n.getMedia = function () { if (!this.cache_.media) { var e = this.poster(), t = { src: this.currentSources(), textTracks: Array.prototype.map.call(this.remoteTextTracks(), function (e) { return { kind: e.kind, label: e.label, language: e.language, src: e.src } }) }; return e && (t.poster = e, t.artwork = [{ src: t.poster, type: ii(t.poster) }]), t } return St(this.cache_.media) }, t.getTagSettings = function (e) { var t = { sources: [], tracks: [] }, n = ve(e), i = n["data-setup"]; if (de(e, "vjs-fill") && (n.fill = !0), de(e, "vjs-fluid") && (n.fluid = !0), null !== i) { var r = l()(i || "{}"), s = r[0], a = r[1]; s && X.error(s), Z(n, a) } if (Z(t, n), e.hasChildNodes()) for (var o = e.childNodes, u = 0, c = o.length; u < c; u++) { var h = o[u], d = h.nodeName.toLowerCase(); "source" === d ? t.sources.push(ve(h)) : "track" === d && t.tracks.push(ve(h)) } return t }, n.flexNotSupported_ = function () { var e = a.a.createElement("i"); return !("flexBasis" in e.style || "webkitFlexBasis" in e.style || "mozFlexBasis" in e.style || "msFlexBasis" in e.style || "msFlexOrder" in e.style) }, t }(Et); Gn.names.forEach(function (e) { var t = Gn[e]; Wr.prototype[t.getterName] = function () { return this.tech_ ? this.tech_[t.getterName]() : (this[t.privateName] = this[t.privateName] || new t.ListClass, this[t.privateName]) } }), Wr.players = {}; var Gr = r.a.navigator; Wr.prototype.options_ = { techOrder: zn.defaultTechOrder_, html5: {}, flash: {}, inactivityTimeout: 2e3, playbackRates: [], liveui: !1, children: ["mediaLoader", "posterImage", "textTrackDisplay", "loadingSpinner", "bigPlayButton", "liveTracker", "controlBar", "errorDisplay", "textTrackSettings", "resizeManager"], language: Gr && (Gr.languages && Gr.languages[0] || Gr.userLanguage || Gr.language) || "en", languages: {}, notSupportedMessage: "No compatible source was found for this media.", fullscreen: { options: { navigationUI: "hide" } }, breakpoints: {}, responsive: !1 }, ["ended", "seeking", "seekable", "networkState", "readyState"].forEach(function (e) { Wr.prototype[e] = function () { return this.techGet_(e) } }), Br.forEach(function (e) { Wr.prototype["handleTech" + Tt(e) + "_"] = function () { return this.trigger(e) } }), Et.registerComponent("Player", Wr); var zr = {}, Kr = function (e) { return zr.hasOwnProperty(e) }, Xr = function (e) { return Kr(e) ? zr[e] : void 0 }, Yr = function (e, t) { e.activePlugins_ = e.activePlugins_ || {}, e.activePlugins_[t] = !0 }, $r = function (e, t, n) { var i = (n ? "before" : "") + "pluginsetup"; e.trigger(i, t), e.trigger(i + ":" + t.name, t) }, Qr = function (e, t) { return t.prototype.name = e, function () { $r(this, { name: e, plugin: t, instance: null }, !0); for (var n = arguments.length, i = new Array(n), r = 0; r < n; r++)i[r] = arguments[r]; var s = kt(t, [this].concat(i)); return this[e] = function () { return s }, $r(this, s.getEventHash()), s } }, Jr = function () { function e(t) { if (this.constructor === e) throw new Error("Plugin must be sub-classed; not directly instantiated."); this.player = t, vt(this), delete this.trigger, _t(this, this.constructor.defaultState), Yr(t, this.name), this.dispose = st(this, this.dispose), t.on("dispose", this.dispose) } var t = e.prototype; return t.version = function () { return this.constructor.VERSION }, t.getEventHash = function (e) { return void 0 === e && (e = {}), e.name = this.name, e.plugin = this.constructor, e.instance = this, e }, t.trigger = function (e, t) { return void 0 === t && (t = {}), Ze(this.eventBusEl_, e, this.getEventHash(t)) }, t.handleStateChanged = function (e) { }, t.dispose = function () { var e = this.name, t = this.player; this.trigger("dispose"), this.off(), t.off("dispose", this.dispose), t.activePlugins_[e] = !1, this.player = this.state = null, t[e] = Qr(e, zr[e]) }, e.isBasic = function (t) { var n = "string" == typeof t ? Xr(t) : t; return "function" == typeof n && !e.prototype.isPrototypeOf(n.prototype) }, e.registerPlugin = function (t, n) { if ("string" != typeof t) throw new Error('Illegal plugin name, "' + t + '", must be a string, was ' + typeof t + "."); if (Kr(t)) X.warn('A plugin named "' + t + '" already exists. You may want to avoid re-registering plugins!'); else if (Wr.prototype.hasOwnProperty(t)) throw new Error('Illegal plugin name, "' + t + '", cannot share a name with an existing player method!'); if ("function" != typeof n) throw new Error('Illegal plugin for "' + t + '", must be a function, was ' + typeof n + "."); return zr[t] = n, "plugin" !== t && (e.isBasic(n) ? Wr.prototype[t] = function (e, t) { var n = function () { $r(this, { name: e, plugin: t, instance: null }, !0); var n = t.apply(this, arguments); return Yr(this, e), $r(this, { name: e, plugin: t, instance: n }), n }; return Object.keys(t).forEach(function (e) { n[e] = t[e] }), n }(t, n) : Wr.prototype[t] = Qr(t, n)), n }, e.deregisterPlugin = function (e) { if ("plugin" === e) throw new Error("Cannot de-register base plugin."); Kr(e) && (delete zr[e], delete Wr.prototype[e]) }, e.getPlugins = function (e) { var t; return void 0 === e && (e = Object.keys(zr)), e.forEach(function (e) { var n = Xr(e); n && ((t = t || {})[e] = n) }), t }, e.getPluginVersion = function (e) { var t = Xr(e); return t && t.VERSION || "" }, e }(); Jr.getPlugin = Xr, Jr.BASE_PLUGIN_NAME = "plugin", Jr.registerPlugin("plugin", Jr), Wr.prototype.usingPlugin = function (e) { return !!this.activePlugins_ && !0 === this.activePlugins_[e] }, Wr.prototype.hasPlugin = function (e) { return !!Kr(e) }; var Zr = function (e) { return 0 === e.indexOf("#") ? e.slice(1) : e }; function es(e, t, n) { var i = es.getPlayer(e); if (i) return t && X.warn('Player "' + e + '" is already initialised. Options will not be applied.'), n && i.ready(n), i; var r = "string" == typeof e ? Pe("#" + Zr(e)) : e; if (!ae(r)) throw new TypeError("The element or ID supplied is not valid. (videojs)"); r.ownerDocument.defaultView && r.ownerDocument.body.contains(r) || X.warn("The element supplied is not included in the DOM"), t = t || {}, es.hooks("beforesetup").forEach(function (e) { var n = e(r, St(t)); ee(n) && !Array.isArray(n) ? t = St(t, n) : X.error("please return an object in beforesetup hooks") }); var s = Et.getComponent("Player"); return i = new s(r, t, n), es.hooks("setup").forEach(function (e) { return e(i) }), i } if (es.hooks_ = {}, es.hooks = function (e, t) { return es.hooks_[e] = es.hooks_[e] || [], t && (es.hooks_[e] = es.hooks_[e].concat(t)), es.hooks_[e] }, es.hook = function (e, t) { es.hooks(e, t) }, es.hookOnce = function (e, t) { es.hooks(e, [].concat(t).map(function (t) { return function n() { return es.removeHook(e, n), t.apply(void 0, arguments) } })) }, es.removeHook = function (e, t) { var n = es.hooks(e).indexOf(t); return !(n <= -1) && (es.hooks_[e] = es.hooks_[e].slice(), es.hooks_[e].splice(n, 1), !0) }, !0 !== r.a.VIDEOJS_NO_DYNAMIC_STYLE && se()) { var ts = Pe(".vjs-styles-defaults"); if (!ts) { ts = He("vjs-styles-defaults"); var ns = Pe("head"); ns && ns.insertBefore(ts, ns.firstChild), qe(ts, "\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ") } } je(1, es), es.VERSION = G, es.options = Wr.prototype.options_, es.getPlayers = function () { return Wr.players }, es.getPlayer = function (e) { var t, n = Wr.players; if ("string" == typeof e) { var i = Zr(e), r = n[i]; if (r) return r; t = Pe("#" + i) } else t = e; if (ae(t)) { var s = t, a = s.player, o = s.playerId; if (a || n[o]) return a || n[o] } }, es.getAllPlayers = function () { return Object.keys(Wr.players).map(function (e) { return Wr.players[e] }).filter(Boolean) }, es.players = Wr.players, es.getComponent = Et.getComponent, es.registerComponent = function (e, t) { zn.isTech(t) && X.warn("The " + e + " tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"), Et.registerComponent.call(Et, e, t) }, es.getTech = zn.getTech, es.registerTech = zn.registerTech, es.use = function (e, t) { Kn[e] = Kn[e] || [], Kn[e].push(t) }, Object.defineProperty(es, "middleware", { value: {}, writeable: !1, enumerable: !0 }), Object.defineProperty(es.middleware, "TERMINATOR", { value: Yn, writeable: !1, enumerable: !0 }), es.browser = Yt, es.TOUCH_ENABLED = Xt, es.extend = function (e, t) { void 0 === t && (t = {}); var n = function () { e.apply(this, arguments) }, i = {}; for (var r in "object" == typeof t ? (t.constructor !== Object.prototype.constructor && (n = t.constructor), i = t) : "function" == typeof t && (n = t), function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (e.super_ = t) }(n, e), i) i.hasOwnProperty(r) && (n.prototype[r] = i[r]); return n }, es.mergeOptions = St, es.bind = st, es.registerPlugin = Jr.registerPlugin, es.deregisterPlugin = Jr.deregisterPlugin, es.plugin = function (e, t) { return X.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"), Jr.registerPlugin(e, t) }, es.getPlugins = Jr.getPlugins, es.getPlugin = Jr.getPlugin, es.getPluginVersion = Jr.getPluginVersion, es.addLanguage = function (e, t) { var n; return e = ("" + e).toLowerCase(), es.options.languages = St(es.options.languages, ((n = {})[e] = t, n)), es.options.languages[e] }, es.log = X, es.createLogger = Y, es.createTimeRange = es.createTimeRanges = Jt, es.formatTime = _i, es.setFormatTime = function (e) { yi = e }, es.resetFormatTime = function () { yi = vi }, es.parseUrl = On, es.isCrossOrigin = Pn, es.EventTarget = lt, es.on = Qe, es.one = et, es.off = Je, es.trigger = Ze, es.xhr = d.a, es.TextTrack = Un, es.AudioTrack = jn, es.VideoTrack = Bn, ["isEl", "isTextNode", "createEl", "hasClass", "addClass", "removeClass", "toggleClass", "setAttributes", "getAttributes", "emptyEl", "appendContent", "insertContent"].forEach(function (e) { es[e] = function () { return X.warn("videojs." + e + "() is deprecated; use videojs.dom." + e + "() instead"), Re[e].apply(null, arguments) } }), es.computedStyle = ne, es.dom = Re, es.url = Nn;
    /**
     * @videojs/http-streaming
     * @version 1.10.6
     * @copyright 2019 Brightcove, Inc
     * @license Apache-2.0
     */
    var is = function (e, t) { return /^[a-z]+:/i.test(t) ? t : (/\/\//i.test(e) || (e = g.a.buildAbsoluteURL(r.a.location.href, e)), g.a.buildAbsoluteURL(e, t)) }, rs = function (e, t, n) { return e && n.responseURL && t !== n.responseURL ? n.responseURL : t }, ss = function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }, as = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } return function (t, n, i) { return n && e(t.prototype, n), i && e(t, i), t } }(), os = function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }, ls = function (e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }, us = function () { return function (e, t) { if (Array.isArray(e)) return e; if (Symbol.iterator in Object(e)) return function (e, t) { var n = [], i = !0, r = !1, s = void 0; try { for (var a, o = e[Symbol.iterator](); !(i = (a = o.next()).done) && (n.push(a.value), !t || n.length !== t); i = !0); } catch (e) { r = !0, s = e } finally { try { !i && o.return && o.return() } finally { if (r) throw s } } return n }(e, t); throw new TypeError("Invalid attempt to destructure non-iterable instance") } }(), cs = es.mergeOptions, hs = es.EventTarget, ds = es.log, fs = function (e, t) { ["AUDIO", "SUBTITLES"].forEach(function (n) { for (var i in e.mediaGroups[n]) for (var r in e.mediaGroups[n][i]) { var s = e.mediaGroups[n][i][r]; t(s, n, i, r) } }) }, ps = function (e, t) { var n = cs(e, {}), i = n.playlists[t.uri]; if (!i) return null; if (i.segments && t.segments && i.segments.length === t.segments.length && i.endList === t.endList && i.mediaSequence === t.mediaSequence) return null; var r = cs(i, t); i.segments && (r.segments = function (e, t, n) { var i = t.slice(); n = n || 0; for (var r = Math.min(e.length, t.length + n), s = n; s < r; s++)i[s - n] = cs(e[s], i[s - n]); return i }(i.segments, t.segments, t.mediaSequence - i.mediaSequence)), r.segments.forEach(function (e) { !function (e, t) { e.resolvedUri || (e.resolvedUri = is(t, e.uri)), e.key && !e.key.resolvedUri && (e.key.resolvedUri = is(t, e.key.uri)), e.map && !e.map.resolvedUri && (e.map.resolvedUri = is(t, e.map.uri)) }(e, r.resolvedUri) }); for (var s = 0; s < n.playlists.length; s++)n.playlists[s].uri === t.uri && (n.playlists[s] = r); return n.playlists[t.uri] = r, n }, ms = function (e) { for (var t = e.playlists.length; t--;) { var n = e.playlists[t]; e.playlists[n.uri] = n, n.resolvedUri = is(e.uri, n.uri), n.id = t, n.attributes || (n.attributes = {}, ds.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")) } }, gs = function (e) { fs(e, function (t) { t.uri && (t.resolvedUri = is(e.uri, t.uri)) }) }, vs = function (e, t) { var n = e.segments[e.segments.length - 1]; return t && n && n.duration ? 1e3 * n.duration : 500 * (e.targetDuration || 10) }, ys = function (e) { function t(e, n) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}; ss(this, t); var r = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)), s = i.withCredentials, a = void 0 !== s && s, o = i.handleManifestRedirects, l = void 0 !== o && o; r.srcUrl = e, r.hls_ = n, r.withCredentials = a, r.handleManifestRedirects = l; var u = n.options_; if (r.customTagParsers = u && u.customTagParsers || [], r.customTagMappers = u && u.customTagMappers || [], !r.srcUrl) throw new Error("A non-empty playlist URL is required"); return r.state = "HAVE_NOTHING", r.on("mediaupdatetimeout", function () { "HAVE_METADATA" === r.state && (r.state = "HAVE_CURRENT_METADATA", r.request = r.hls_.xhr({ uri: is(r.master.uri, r.media().uri), withCredentials: r.withCredentials }, function (e, t) { if (r.request) return e ? r.playlistRequestError(r.request, r.media().uri, "HAVE_METADATA") : void r.haveMetadata(r.request, r.media().uri) })) }), r } return os(t, hs), as(t, [{ key: "playlistRequestError", value: function (e, t, n) { this.request = null, n && (this.state = n), this.error = { playlist: this.master.playlists[t], status: e.status, message: "HLS playlist request error at URL: " + t + ".", responseText: e.responseText, code: e.status >= 500 ? 4 : 2 }, this.trigger("error") } }, { key: "haveMetadata", value: function (e, t) { var n = this; this.request = null, this.state = "HAVE_METADATA"; var i = new C; this.customTagParsers.forEach(function (e) { return i.addParser(e) }), this.customTagMappers.forEach(function (e) { return i.addTagMapper(e) }), i.push(e.responseText), i.end(), i.manifest.uri = t, i.manifest.attributes = i.manifest.attributes || {}; var s = ps(this.master, i.manifest); this.targetDuration = i.manifest.targetDuration, s ? (this.master = s, this.media_ = this.master.playlists[i.manifest.uri]) : this.trigger("playlistunchanged"), this.media().endList || (r.a.clearTimeout(this.mediaUpdateTimeout), this.mediaUpdateTimeout = r.a.setTimeout(function () { n.trigger("mediaupdatetimeout") }, vs(this.media(), !!s))), this.trigger("loadedplaylist") } }, { key: "dispose", value: function () { this.stopRequest(), r.a.clearTimeout(this.mediaUpdateTimeout), r.a.clearTimeout(this.finalRenditionTimeout) } }, { key: "stopRequest", value: function () { if (this.request) { var e = this.request; this.request = null, e.onreadystatechange = null, e.abort() } } }, { key: "media", value: function (e, t) { var n = this; if (!e) return this.media_; if ("HAVE_NOTHING" === this.state) throw new Error("Cannot switch media playlist from " + this.state); if ("string" == typeof e) { if (!this.master.playlists[e]) throw new Error("Unknown playlist URI: " + e); e = this.master.playlists[e] } if (r.a.clearTimeout(this.finalRenditionTimeout), t) { var i = e.targetDuration / 2 * 1e3 || 5e3; this.finalRenditionTimeout = r.a.setTimeout(this.media.bind(this, e, !1), i) } else { var s = this.state, a = !this.media_ || e.uri !== this.media_.uri; if (this.master.playlists[e.uri].endList) return this.request && (this.request.onreadystatechange = null, this.request.abort(), this.request = null), this.state = "HAVE_METADATA", this.media_ = e, void (a && (this.trigger("mediachanging"), this.trigger("mediachange"))); if (a) { if (this.state = "SWITCHING_MEDIA", this.request) { if (e.resolvedUri === this.request.url) return; this.request.onreadystatechange = null, this.request.abort(), this.request = null } this.media_ && this.trigger("mediachanging"), this.request = this.hls_.xhr({ uri: e.resolvedUri, withCredentials: this.withCredentials }, function (t, i) { if (n.request) { if (e.resolvedUri = rs(n.handleManifestRedirects, e.resolvedUri, i), t) return n.playlistRequestError(n.request, e.uri, s); n.haveMetadata(i, e.uri), "HAVE_MASTER" === s ? n.trigger("loadedmetadata") : n.trigger("mediachange") } }) } } } }, { key: "pause", value: function () { this.stopRequest(), r.a.clearTimeout(this.mediaUpdateTimeout), "HAVE_NOTHING" === this.state && (this.started = !1), "SWITCHING_MEDIA" === this.state ? this.media_ ? this.state = "HAVE_METADATA" : this.state = "HAVE_MASTER" : "HAVE_CURRENT_METADATA" === this.state && (this.state = "HAVE_METADATA") } }, { key: "load", value: function (e) { var t = this; r.a.clearTimeout(this.mediaUpdateTimeout); var n = this.media(); if (e) { var i = n ? n.targetDuration / 2 * 1e3 : 5e3; this.mediaUpdateTimeout = r.a.setTimeout(function () { return t.load() }, i) } else this.started ? n && !n.endList ? this.trigger("mediaupdatetimeout") : this.trigger("loadedplaylist") : this.start() } }, { key: "start", value: function () { var e = this; this.started = !0, this.request = this.hls_.xhr({ uri: this.srcUrl, withCredentials: this.withCredentials }, function (t, n) { if (e.request) { if (e.request = null, t) return e.error = { status: n.status, message: "HLS playlist request error at URL: " + e.srcUrl + ".", responseText: n.responseText, code: 2 }, "HAVE_NOTHING" === e.state && (e.started = !1), e.trigger("error"); var i = new C; return e.customTagParsers.forEach(function (e) { return i.addParser(e) }), e.customTagMappers.forEach(function (e) { return i.addTagMapper(e) }), i.push(n.responseText), i.end(), e.state = "HAVE_MASTER", e.srcUrl = rs(e.handleManifestRedirects, e.srcUrl, n), i.manifest.uri = e.srcUrl, i.manifest.playlists ? (e.master = i.manifest, ms(e.master), gs(e.master), e.trigger("loadedplaylist"), void (e.request || e.media(i.manifest.playlists[0]))) : (e.master = { mediaGroups: { AUDIO: {}, VIDEO: {}, "CLOSED-CAPTIONS": {}, SUBTITLES: {} }, uri: r.a.location.href, playlists: [{ uri: e.srcUrl, id: 0, resolvedUri: e.srcUrl, attributes: {} }] }, e.master.playlists[e.srcUrl] = e.master.playlists[0], e.haveMetadata(n, e.srcUrl), e.trigger("loadedmetadata")) } }) } }]), t }(), _s = es.createTimeRange, bs = function (e, t, n) { var i, r; return void 0 === t && (t = e.mediaSequence + e.segments.length), t < e.mediaSequence ? 0 : (i = function (e, t) { var n = 0, i = t - e.mediaSequence, r = e.segments[i]; if (r) { if (void 0 !== r.start) return { result: r.start, precise: !0 }; if (void 0 !== r.end) return { result: r.end - r.duration, precise: !0 } } for (; i--;) { if (void 0 !== (r = e.segments[i]).end) return { result: n + r.end, precise: !0 }; if (n += r.duration, void 0 !== r.start) return { result: n + r.start, precise: !0 } } return { result: n, precise: !1 } }(e, t)).precise ? i.result : (r = function (e, t) { for (var n = 0, i = void 0, r = t - e.mediaSequence; r < e.segments.length; r++) { if (void 0 !== (i = e.segments[r]).start) return { result: i.start - n, precise: !0 }; if (n += i.duration, void 0 !== i.end) return { result: i.end - n, precise: !0 } } return { result: -1, precise: !1 } }(e, t)).precise ? r.result : i.result + n }, Ts = function (e, t, n) { if (!e) return 0; if ("number" != typeof n && (n = 0), void 0 === t) { if (e.totalDuration) return e.totalDuration; if (!e.endList) return r.a.Infinity } return bs(e, t, n) }, Ss = function (e, t, n) { var i = 0; if (t > n) { var r = [n, t]; t = r[0], n = r[1] } if (t < 0) { for (var s = t; s < Math.min(0, n); s++)i += e.targetDuration; t = 0 } for (var a = t; a < n; a++)i += e.segments[a].duration; return i }, Es = function (e) { if (!e.segments.length) return 0; for (var t = e.segments.length - 1, n = e.segments[t].duration || e.targetDuration, i = n + 2 * e.targetDuration; t-- && !((n += e.segments[t].duration) >= i);); return Math.max(0, t) }, Cs = function (e, t, n) { if (!e || !e.segments) return null; if (e.endList) return Ts(e); if (null === t) return null; t = t || 0; var i = n ? Es(e) : e.segments.length; return bs(e, e.mediaSequence + i, t) }, ws = function (e) { return e - Math.floor(e) == 0 }, ks = function (e, t) { if (ws(t)) return t + .1 * e; for (var n = t.toString().split(".")[1].length, i = 1; i <= n; i++) { var r = Math.pow(10, i), s = t * r; if (ws(s) || i === n) return (s + e) / r } }, As = ks.bind(null, 1), xs = ks.bind(null, -1), Is = function (e) { return e.excludeUntil && e.excludeUntil > Date.now() }, Os = function (e) { return e.excludeUntil && e.excludeUntil === 1 / 0 }, Ds = function (e) { var t = Is(e); return !e.disabled && !t }, Ls = function (e, t) { return t.attributes && t.attributes[e] }, Ps = function (e, t) { if (1 === e.playlists.length) return !0; var n = t.attributes.BANDWIDTH || Number.MAX_VALUE; return 0 === e.playlists.filter(function (e) { return !!Ds(e) && (e.attributes.BANDWIDTH || 0) < n }).length }, Ns = { duration: Ts, seekable: function (e, t) { var n = t || 0, i = Cs(e, t, !0); return null === i ? _s() : _s(n, i) }, safeLiveIndex: Es, getMediaInfoForTime: function (e, t, n, i) { var r = void 0, s = void 0, a = e.segments.length, o = t - i; if (o < 0) { if (n > 0) for (r = n - 1; r >= 0; r--)if (s = e.segments[r], (o += xs(s.duration)) > 0) return { mediaIndex: r, startTime: i - Ss(e, n, r) }; return { mediaIndex: 0, startTime: t } } if (n < 0) { for (r = n; r < 0; r++)if ((o -= e.targetDuration) < 0) return { mediaIndex: 0, startTime: t }; n = 0 } for (r = n; r < a; r++)if (s = e.segments[r], (o -= As(s.duration)) < 0) return { mediaIndex: r, startTime: i + Ss(e, n, r) }; return { mediaIndex: a - 1, startTime: t } }, isEnabled: Ds, isDisabled: function (e) { return e.disabled }, isBlacklisted: Is, isIncompatible: Os, playlistEnd: Cs, isAes: function (e) { for (var t = 0; t < e.segments.length; t++)if (e.segments[t].key) return !0; return !1 }, isFmp4: function (e) { for (var t = 0; t < e.segments.length; t++)if (e.segments[t].map) return !0; return !1 }, hasAttribute: Ls, estimateSegmentRequestTime: function (e, t, n) { var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 0; return Ls("BANDWIDTH", n) ? (e * n.attributes.BANDWIDTH - 8 * i) / t : NaN }, isLowestEnabledRendition: Ps }, Rs = es.xhr, Ms = es.mergeOptions, Us = function () { return function e(t, n) { t = Ms({ timeout: 45e3 }, t); var i = e.beforeRequest || es.Hls.xhr.beforeRequest; if (i && "function" == typeof i) { var r = i(t); r && (t = r) } var s = Rs(t, function (e, t) { var i = s.response; !e && i && (s.responseTime = Date.now(), s.roundTripTime = s.responseTime - s.requestTime, s.bytesReceived = i.byteLength || i.length, s.bandwidth || (s.bandwidth = Math.floor(s.bytesReceived / s.roundTripTime * 8 * 1e3))), t.headers && (s.responseHeaders = t.headers), e && "ETIMEDOUT" === e.code && (s.timedout = !0), e || s.aborted || 200 === t.statusCode || 206 === t.statusCode || 0 === t.statusCode || (e = new Error("XHR Failed with a response of: " + (s && (i || s.responseText)))), n(e, s) }), a = s.abort; return s.abort = function () { return s.aborted = !0, a.apply(s, arguments) }, s.uri = t.uri, s.requestTime = Date.now(), s } }, js = function (e) { var t, n, i = {}; return e.byterange && (i.Range = (t = e.byterange, n = t.offset + t.length - 1, "bytes=" + t.offset + "-" + n)), i }, Bs = function (e, t) { return e.start(t) + "-" + e.end(t) }, Fs = function (e, t) { var n = e.toString(16); return "00".substring(0, 2 - n.length) + n + (t % 2 ? " " : "") }, Hs = function (e) { return e >= 32 && e < 126 ? String.fromCharCode(e) : "." }, qs = function (e) { var t = {}; return Object.keys(e).forEach(function (n) { var i = e[n]; ArrayBuffer.isView(i) ? t[n] = { bytes: i.buffer, byteOffset: i.byteOffset, byteLength: i.byteLength } : t[n] = i }), t }, Vs = function (e) { var t = e.byterange || { length: 1 / 0, offset: 0 }; return [t.length, t.offset, e.resolvedUri].join(",") }, Ws = function (e) { return e.resolvedUri }, Gs = function (e) { for (var t = Array.prototype.slice.call(e), n = "", i = 0; i < t.length / 16; i++)n += t.slice(16 * i, 16 * i + 16).map(Fs).join("") + " " + t.slice(16 * i, 16 * i + 16).map(Hs).join("") + "\n"; return n }, zs = Object.freeze({ createTransferableMessage: qs, initSegmentId: Vs, segmentKeyId: Ws, hexDump: Gs, tagDump: function (e) { var t = e.bytes; return Gs(t) }, textRanges: function (e) { var t = "", n = void 0; for (n = 0; n < e.length; n++)t += Bs(e, n) + " "; return t } }), Ks = function (e) { var t = e.playlist, n = e.time, i = void 0 === n ? void 0 : n, r = e.callback; if (!r) throw new Error("getProgramTime: callback must be provided"); if (!t || void 0 === i) return r({ message: "getProgramTime: playlist and time must be provided" }); var s = function (e, t) { if (!t || !t.segments || 0 === t.segments.length) return null; for (var n = 0, i = void 0, r = 0; r < t.segments.length && !(e <= (n = (i = t.segments[r]).videoTimingInfo ? i.videoTimingInfo.transmuxedPresentationEnd : n + i.duration)); r++); var s = t.segments[t.segments.length - 1]; if (s.videoTimingInfo && s.videoTimingInfo.transmuxedPresentationEnd < e) return null; if (e > n) { if (e > n + .25 * s.duration) return null; i = s } return { segment: i, estimatedStart: i.videoTimingInfo ? i.videoTimingInfo.transmuxedPresentationStart : n - i.duration, type: i.videoTimingInfo ? "accurate" : "estimate" } }(i, t); if (!s) return r({ message: "valid programTime was not found" }); if ("estimate" === s.type) return r({ message: "Accurate programTime could not be determined. Please seek to e.seekTime and try again", seekTime: s.estimatedStart }); var a = { mediaSeconds: i }, o = function (e, t) { if (!t.dateTimeObject) return null; var n = t.videoTimingInfo.transmuxerPrependedSeconds, i = e - (t.videoTimingInfo.transmuxedPresentationStart + n); return new Date(t.dateTimeObject.getTime() + 1e3 * i) }(i, s.segment); return o && (a.programDateTime = o.toISOString()), r(null, a) }, Xs = function e(t) { var n = t.programTime, i = t.playlist, r = t.retryCount, s = void 0 === r ? 2 : r, a = t.seekTo, o = t.pauseAfterSeek, l = void 0 === o || o, u = t.tech, c = t.callback; if (!c) throw new Error("seekToProgramTime: callback must be provided"); if (void 0 === n || !i || !a) return c({ message: "seekToProgramTime: programTime, seekTo and playlist must be provided" }); if (!i.endList && !u.hasStarted_) return c({ message: "player must be playing a live stream to start buffering" }); if (!function (e) { if (!e.segments || 0 === e.segments.length) return !1; for (var t = 0; t < e.segments.length; t++)if (!e.segments[t].dateTimeObject) return !1; return !0 }(i)) return c({ message: "programDateTime tags must be provided in the manifest " + i.resolvedUri }); var h = function (e, t) { var n = void 0; try { n = new Date(e) } catch (e) { return null } if (!t || !t.segments || 0 === t.segments.length) return null; var i = t.segments[0]; if (n < i.dateTimeObject) return null; for (var r = 0; r < t.segments.length - 1 && (i = t.segments[r], !(n < t.segments[r + 1].dateTimeObject)); r++); var s, a = t.segments[t.segments.length - 1], o = a.dateTimeObject, l = a.videoTimingInfo ? (s = a.videoTimingInfo).transmuxedPresentationEnd - s.transmuxedPresentationStart - s.transmuxerPrependedSeconds : a.duration + .25 * a.duration; return n > new Date(o.getTime() + 1e3 * l) ? null : (n > o && (i = a), { segment: i, estimatedStart: i.videoTimingInfo ? i.videoTimingInfo.transmuxedPresentationStart : Ns.duration(t, t.mediaSequence + t.segments.indexOf(i)), type: i.videoTimingInfo ? "accurate" : "estimate" }) }(n, i); if (!h) return c({ message: n + " was not found in the stream" }); var d = h.segment, f = function (e, t) { var n = void 0, i = void 0; try { n = new Date(e), i = new Date(t) } catch (e) { } var r = n.getTime(); return (i.getTime() - r) / 1e3 }(d.dateTimeObject, n); if ("estimate" === h.type) return 0 === s ? c({ message: n + " is not buffered yet. Try again" }) : (a(h.estimatedStart + f), void u.one("seeked", function () { e({ programTime: n, playlist: i, retryCount: s - 1, seekTo: a, pauseAfterSeek: l, tech: u, callback: c }) })); var p = d.start + f; u.one("seeked", function () { return c(null, u.currentTime()) }), l && u.pause(), a(p) }, Ys = function (e, t) { var n = [], i = void 0; if (e && e.length) for (i = 0; i < e.length; i++)t(e.start(i), e.end(i)) && n.push([e.start(i), e.end(i)]); return es.createTimeRanges(n) }, $s = function (e, t) { return Ys(e, function (e, n) { return e - .1 <= t && n + .1 >= t }) }, Qs = function (e, t) { return Ys(e, function (e) { return e - 1 / 30 >= t }) }, Js = function (e) { var t = []; if (!e || !e.length) return ""; for (var n = 0; n < e.length; n++)t.push(e.start(n) + " => " + e.end(n)); return t.join(", ") }, Zs = function (e) { for (var t = [], n = 0; n < e.length; n++)t.push({ start: e.start(n), end: e.end(n) }); return t }, ea = function (e, t, n) { var i = void 0, r = void 0; if (n && n.cues) for (i = n.cues.length; i--;)(r = n.cues[i]).startTime <= t && r.endTime >= e && n.removeCue(r) }, ta = function (e) { return isNaN(e) || Math.abs(e) === 1 / 0 ? Number.MAX_VALUE : e }, na = function (e, t, n) { var i = r.a.WebKitDataCue || r.a.VTTCue; if (t && t.forEach(function (e) { var t = e.stream; this.inbandTextTracks_[t].addCue(new i(e.startTime + this.timestampOffset, e.endTime + this.timestampOffset, e.text)) }, e), n) { var s = ta(e.mediaSource_.duration); if (n.forEach(function (e) { var t = e.cueTime + this.timestampOffset; !("number" != typeof t || r.a.isNaN(t) || t < 0) && t < 1 / 0 && e.frames.forEach(function (e) { var n = new i(t, t, e.value || e.url || e.data || ""); n.frame = e, n.value = e, function (e) { Object.defineProperties(e.frame, { id: { get: function () { return es.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."), e.value.key } }, value: { get: function () { return es.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."), e.value.data } }, privateData: { get: function () { return es.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."), e.value.data } } }) }(n), this.metadataTrack_.addCue(n) }, this) }, e), e.metadataTrack_ && e.metadataTrack_.cues && e.metadataTrack_.cues.length) { for (var a = e.metadataTrack_.cues, o = [], l = 0; l < a.length; l++)a[l] && o.push(a[l]); var u = o.reduce(function (e, t) { var n = e[t.startTime] || []; return n.push(t), e[t.startTime] = n, e }, {}), c = Object.keys(u).sort(function (e, t) { return Number(e) - Number(t) }); c.forEach(function (e, t) { var n = u[e], i = Number(c[t + 1]) || s; n.forEach(function (e) { e.endTime = i }) }) } } }, ia = "undefined" != typeof window ? window : {}, ra = "undefined" == typeof Symbol ? "__target" : Symbol(), sa = "application/javascript", aa = ia.BlobBuilder || ia.WebKitBlobBuilder || ia.MozBlobBuilder || ia.MSBlobBuilder, oa = ia.URL || ia.webkitURL || oa && oa.msURL, la = ia.Worker; function ua(e, t) { return function (n) { var i = this; if (!t) return new la(e); if (la && !n) { var r = fa(t.toString().replace(/^function.+?{/, "").slice(0, -1)); return this[ra] = new la(r), function (e, t) { if (!e || !t) return; var n = e.terminate; e.objURL = t, e.terminate = function () { e.objURL && oa.revokeObjectURL(e.objURL), n.call(e) } }(this[ra], r), this[ra] } var s = { postMessage: function (e) { i.onmessage && setTimeout(function () { i.onmessage({ data: e, target: s }) }) } }; t.call(s), this.postMessage = function (e) { setTimeout(function () { s.onmessage({ data: e, target: i }) }) }, this.isThisThread = !0 } } if (la) { var ca, ha = fa("self.onmessage = function () {}"), da = new Uint8Array(1); try { (ca = new la(ha)).postMessage(da, [da.buffer]) } catch (e) { la = null } finally { oa.revokeObjectURL(ha), ca && ca.terminate() } } function fa(e) { try { return oa.createObjectURL(new Blob([e], { type: sa })) } catch (n) { var t = new aa; return t.append(e), oa.createObjectURL(t.getBlob(type)) } } var pa = new ua("./transmuxer-worker.worker.js", function (e, t) { var n = this; !function () { var e = function () { this.init = function () { var e = {}; this.on = function (t, n) { e[t] || (e[t] = []), e[t] = e[t].concat(n) }, this.off = function (t, n) { var i; return !!e[t] && (i = e[t].indexOf(n), e[t] = e[t].slice(), e[t].splice(i, 1), i > -1) }, this.trigger = function (t) { var n, i, r, s; if (n = e[t]) if (2 === arguments.length) for (r = n.length, i = 0; i < r; ++i)n[i].call(this, arguments[1]); else { for (s = [], i = arguments.length, i = 1; i < arguments.length; ++i)s.push(arguments[i]); for (r = n.length, i = 0; i < r; ++i)n[i].apply(this, s) } }, this.dispose = function () { e = {} } } }; e.prototype.pipe = function (e) { return this.on("data", function (t) { e.push(t) }), this.on("done", function (t) { e.flush(t) }), this.on("partialdone", function (t) { e.partialFlush(t) }), this.on("endedtimeline", function (t) { e.endTimeline(t) }), this.on("reset", function (t) { e.reset(t) }), e }, e.prototype.push = function (e) { this.trigger("data", e) }, e.prototype.flush = function (e) { this.trigger("done", e) }, e.prototype.partialFlush = function (e) { this.trigger("partialdone", e) }, e.prototype.endTimeline = function (e) { this.trigger("endedtimeline", e) }, e.prototype.reset = function (e) { this.trigger("reset", e) }; var t, i, r, s, a, o, l, u, c, h, d, f, p, m, g, v, y, _, b, T, S, E, C, w, k, A, x, I, O, D, L, P, N, R, M, U, j, B, F, H, q = e, V = Math.pow(2, 32) - 1; !function () { var e; if (E = { avc1: [], avcC: [], btrt: [], dinf: [], dref: [], esds: [], ftyp: [], hdlr: [], mdat: [], mdhd: [], mdia: [], mfhd: [], minf: [], moof: [], moov: [], mp4a: [], mvex: [], mvhd: [], pasp: [], sdtp: [], smhd: [], stbl: [], stco: [], stsc: [], stsd: [], stsz: [], stts: [], styp: [], tfdt: [], tfhd: [], traf: [], trak: [], trun: [], trex: [], tkhd: [], vmhd: [] }, "undefined" != typeof Uint8Array) { for (e in E) E.hasOwnProperty(e) && (E[e] = [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]); C = new Uint8Array(["i".charCodeAt(0), "s".charCodeAt(0), "o".charCodeAt(0), "m".charCodeAt(0)]), k = new Uint8Array(["a".charCodeAt(0), "v".charCodeAt(0), "c".charCodeAt(0), "1".charCodeAt(0)]), w = new Uint8Array([0, 0, 0, 1]), A = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 118, 105, 100, 101, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 86, 105, 100, 101, 111, 72, 97, 110, 100, 108, 101, 114, 0]), x = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 115, 111, 117, 110, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 83, 111, 117, 110, 100, 72, 97, 110, 100, 108, 101, 114, 0]), I = { video: A, audio: x }, L = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 12, 117, 114, 108, 32, 0, 0, 0, 1]), D = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), P = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0]), N = P, R = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]), M = P, O = new Uint8Array([0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0]) } }(), t = function (e) { var t, n, i = [], r = 0; for (t = 1; t < arguments.length; t++)i.push(arguments[t]); for (t = i.length; t--;)r += i[t].byteLength; for (n = new Uint8Array(r + 8), new DataView(n.buffer, n.byteOffset, n.byteLength).setUint32(0, n.byteLength), n.set(e, 4), t = 0, r = 8; t < i.length; t++)n.set(i[t], r), r += i[t].byteLength; return n }, i = function () { return t(E.dinf, t(E.dref, L)) }, r = function (e) { return t(E.esds, new Uint8Array([0, 0, 0, 0, 3, 25, 0, 0, 0, 4, 17, 64, 21, 0, 6, 0, 0, 0, 218, 192, 0, 0, 218, 192, 5, 2, e.audioobjecttype << 3 | e.samplingfrequencyindex >>> 1, e.samplingfrequencyindex << 7 | e.channelcount << 3, 6, 1, 2])) }, g = function (e) { return t(E.hdlr, I[e]) }, m = function (e) { var n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 2, 0, 0, 0, 3, 0, 1, 95, 144, e.duration >>> 24 & 255, e.duration >>> 16 & 255, e.duration >>> 8 & 255, 255 & e.duration, 85, 196, 0, 0]); return e.samplerate && (n[12] = e.samplerate >>> 24 & 255, n[13] = e.samplerate >>> 16 & 255, n[14] = e.samplerate >>> 8 & 255, n[15] = 255 & e.samplerate), t(E.mdhd, n) }, p = function (e) { return t(E.mdia, m(e), g(e.type), o(e)) }, a = function (e) { return t(E.mfhd, new Uint8Array([0, 0, 0, 0, (4278190080 & e) >> 24, (16711680 & e) >> 16, (65280 & e) >> 8, 255 & e])) }, o = function (e) { return t(E.minf, "video" === e.type ? t(E.vmhd, O) : t(E.smhd, D), i(), y(e)) }, l = function (e, n) { for (var i = [], r = n.length; r--;)i[r] = b(n[r]); return t.apply(null, [E.moof, a(e)].concat(i)) }, u = function (e) { for (var n = e.length, i = []; n--;)i[n] = d(e[n]); return t.apply(null, [E.moov, h(4294967295)].concat(i).concat(c(e))) }, c = function (e) { for (var n = e.length, i = []; n--;)i[n] = T(e[n]); return t.apply(null, [E.mvex].concat(i)) }, h = function (e) { var n = new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 2, 0, 1, 95, 144, (4278190080 & e) >> 24, (16711680 & e) >> 16, (65280 & e) >> 8, 255 & e, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 255, 255]); return t(E.mvhd, n) }, v = function (e) { var n, i, r = e.samples || [], s = new Uint8Array(4 + r.length); for (i = 0; i < r.length; i++)n = r[i].flags, s[i + 4] = n.dependsOn << 4 | n.isDependedOn << 2 | n.hasRedundancy; return t(E.sdtp, s) }, y = function (e) { return t(E.stbl, _(e), t(E.stts, M), t(E.stsc, N), t(E.stsz, R), t(E.stco, P)) }, _ = function (e) { return t(E.stsd, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1]), "video" === e.type ? U(e) : j(e)) }, U = function (e) { var n, i, r = e.sps || [], s = e.pps || [], a = [], o = []; for (n = 0; n < r.length; n++)a.push((65280 & r[n].byteLength) >>> 8), a.push(255 & r[n].byteLength), a = a.concat(Array.prototype.slice.call(r[n])); for (n = 0; n < s.length; n++)o.push((65280 & s[n].byteLength) >>> 8), o.push(255 & s[n].byteLength), o = o.concat(Array.prototype.slice.call(s[n])); if (i = [E.avc1, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & e.width) >> 8, 255 & e.width, (65280 & e.height) >> 8, 255 & e.height, 0, 72, 0, 0, 0, 72, 0, 0, 0, 0, 0, 0, 0, 1, 19, 118, 105, 100, 101, 111, 106, 115, 45, 99, 111, 110, 116, 114, 105, 98, 45, 104, 108, 115, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 24, 17, 17]), t(E.avcC, new Uint8Array([1, e.profileIdc, e.profileCompatibility, e.levelIdc, 255].concat([r.length], a, [s.length], o))), t(E.btrt, new Uint8Array([0, 28, 156, 128, 0, 45, 198, 192, 0, 45, 198, 192]))], e.sarRatio) { var l = e.sarRatio[0], u = e.sarRatio[1]; i.push(t(E.pasp, new Uint8Array([(4278190080 & l) >> 24, (16711680 & l) >> 16, (65280 & l) >> 8, 255 & l, (4278190080 & u) >> 24, (16711680 & u) >> 16, (65280 & u) >> 8, 255 & u]))) } return t.apply(null, i) }, j = function (e) { return t(E.mp4a, new Uint8Array([0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, (65280 & e.channelcount) >> 8, 255 & e.channelcount, (65280 & e.samplesize) >> 8, 255 & e.samplesize, 0, 0, 0, 0, (65280 & e.samplerate) >> 8, 255 & e.samplerate, 0, 0]), r(e)) }, f = function (e) { var n = new Uint8Array([0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, 0, (4278190080 & e.id) >> 24, (16711680 & e.id) >> 16, (65280 & e.id) >> 8, 255 & e.id, 0, 0, 0, 0, (4278190080 & e.duration) >> 24, (16711680 & e.duration) >> 16, (65280 & e.duration) >> 8, 255 & e.duration, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 64, 0, 0, 0, (65280 & e.width) >> 8, 255 & e.width, 0, 0, (65280 & e.height) >> 8, 255 & e.height, 0, 0]); return t(E.tkhd, n) }, b = function (e) { var n, i, r, s, a, o; return n = t(E.tfhd, new Uint8Array([0, 0, 0, 58, (4278190080 & e.id) >> 24, (16711680 & e.id) >> 16, (65280 & e.id) >> 8, 255 & e.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0])), a = Math.floor(e.baseMediaDecodeTime / (V + 1)), o = Math.floor(e.baseMediaDecodeTime % (V + 1)), i = t(E.tfdt, new Uint8Array([1, 0, 0, 0, a >>> 24 & 255, a >>> 16 & 255, a >>> 8 & 255, 255 & a, o >>> 24 & 255, o >>> 16 & 255, o >>> 8 & 255, 255 & o])), 92, "audio" === e.type ? (r = S(e, 92), t(E.traf, n, i, r)) : (s = v(e), r = S(e, s.length + 92), t(E.traf, n, i, r, s)) }, d = function (e) { return e.duration = e.duration || 4294967295, t(E.trak, f(e), p(e)) }, T = function (e) { var n = new Uint8Array([0, 0, 0, 0, (4278190080 & e.id) >> 24, (16711680 & e.id) >> 16, (65280 & e.id) >> 8, 255 & e.id, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1]); return "video" !== e.type && (n[n.length - 1] = 0), t(E.trex, n) }, H = function (e, t) { var n = 0, i = 0, r = 0, s = 0; return e.length && (void 0 !== e[0].duration && (n = 1), void 0 !== e[0].size && (i = 2), void 0 !== e[0].flags && (r = 4), void 0 !== e[0].compositionTimeOffset && (s = 8)), [0, 0, n | i | r | s, 1, (4278190080 & e.length) >>> 24, (16711680 & e.length) >>> 16, (65280 & e.length) >>> 8, 255 & e.length, (4278190080 & t) >>> 24, (16711680 & t) >>> 16, (65280 & t) >>> 8, 255 & t] }, F = function (e, n) { var i, r, s, a; for (n += 20 + 16 * (r = e.samples || []).length, i = H(r, n), a = 0; a < r.length; a++)s = r[a], i = i.concat([(4278190080 & s.duration) >>> 24, (16711680 & s.duration) >>> 16, (65280 & s.duration) >>> 8, 255 & s.duration, (4278190080 & s.size) >>> 24, (16711680 & s.size) >>> 16, (65280 & s.size) >>> 8, 255 & s.size, s.flags.isLeading << 2 | s.flags.dependsOn, s.flags.isDependedOn << 6 | s.flags.hasRedundancy << 4 | s.flags.paddingValue << 1 | s.flags.isNonSyncSample, 61440 & s.flags.degradationPriority, 15 & s.flags.degradationPriority, (4278190080 & s.compositionTimeOffset) >>> 24, (16711680 & s.compositionTimeOffset) >>> 16, (65280 & s.compositionTimeOffset) >>> 8, 255 & s.compositionTimeOffset]); return t(E.trun, new Uint8Array(i)) }, B = function (e, n) { var i, r, s, a; for (n += 20 + 8 * (r = e.samples || []).length, i = H(r, n), a = 0; a < r.length; a++)s = r[a], i = i.concat([(4278190080 & s.duration) >>> 24, (16711680 & s.duration) >>> 16, (65280 & s.duration) >>> 8, 255 & s.duration, (4278190080 & s.size) >>> 24, (16711680 & s.size) >>> 16, (65280 & s.size) >>> 8, 255 & s.size]); return t(E.trun, new Uint8Array(i)) }, S = function (e, t) { return "audio" === e.type ? B(e, t) : F(e, t) }; s = function () { return t(E.ftyp, C, w, C, k) }; var W, G, z, K, X, Y, $, Q, J = function (e) { return t(E.mdat, e) }, Z = l, ee = function (e) { var t, n = s(), i = u(e); return (t = new Uint8Array(n.byteLength + i.byteLength)).set(n), t.set(i, n.byteLength), t }, te = function (e, t) { var n = { size: 0, flags: { isLeading: 0, dependsOn: 1, isDependedOn: 0, hasRedundancy: 0, degradationPriority: 0, isNonSyncSample: 1 } }; return n.dataOffset = t, n.compositionTimeOffset = e.pts - e.dts, n.duration = e.duration, n.size = 4 * e.length, n.size += e.byteLength, e.keyFrame && (n.flags.dependsOn = 2, n.flags.isNonSyncSample = 0), n }, ne = function (e) { var t, n, i = [], r = []; for (r.byteLength = 0, r.nalCount = 0, r.duration = 0, i.byteLength = 0, t = 0; t < e.length; t++)"access_unit_delimiter_rbsp" === (n = e[t]).nalUnitType ? (i.length && (i.duration = n.dts - i.dts, r.byteLength += i.byteLength, r.nalCount += i.length, r.duration += i.duration, r.push(i)), (i = [n]).byteLength = n.data.byteLength, i.pts = n.pts, i.dts = n.dts) : ("slice_layer_without_partitioning_rbsp_idr" === n.nalUnitType && (i.keyFrame = !0), i.duration = n.dts - i.dts, i.byteLength += n.data.byteLength, i.push(n)); return r.length && (!i.duration || i.duration <= 0) && (i.duration = r[r.length - 1].duration), r.byteLength += i.byteLength, r.nalCount += i.length, r.duration += i.duration, r.push(i), r }, ie = function (e) { var t, n, i = [], r = []; for (i.byteLength = 0, i.nalCount = 0, i.duration = 0, i.pts = e[0].pts, i.dts = e[0].dts, r.byteLength = 0, r.nalCount = 0, r.duration = 0, r.pts = e[0].pts, r.dts = e[0].dts, t = 0; t < e.length; t++)(n = e[t]).keyFrame ? (i.length && (r.push(i), r.byteLength += i.byteLength, r.nalCount += i.nalCount, r.duration += i.duration), (i = [n]).nalCount = n.length, i.byteLength = n.byteLength, i.pts = n.pts, i.dts = n.dts, i.duration = n.duration) : (i.duration += n.duration, i.nalCount += n.length, i.byteLength += n.byteLength, i.push(n)); return r.length && i.duration <= 0 && (i.duration = r[r.length - 1].duration), r.byteLength += i.byteLength, r.nalCount += i.nalCount, r.duration += i.duration, r.push(i), r }, re = function (e) { var t; return !e[0][0].keyFrame && e.length > 1 && (t = e.shift(), e.byteLength -= t.byteLength, e.nalCount -= t.nalCount, e[0][0].dts = t.dts, e[0][0].pts = t.pts, e[0][0].duration += t.duration), e }, se = function (e, t) { var n, i, r, s, a, o = t || 0, l = []; for (n = 0; n < e.length; n++)for (s = e[n], i = 0; i < s.length; i++)a = s[i], o += (r = te(a, o)).size, l.push(r); return l }, ae = function (e) { var t, n, i, r, s, a, o = 0, l = e.byteLength, u = e.nalCount, c = new Uint8Array(l + 4 * u), h = new DataView(c.buffer); for (t = 0; t < e.length; t++)for (r = e[t], n = 0; n < r.length; n++)for (s = r[n], i = 0; i < s.length; i++)a = s[i], h.setUint32(o, a.data.byteLength), o += 4, c.set(a.data, o), o += a.data.byteLength; return c }, oe = [33, 16, 5, 32, 164, 27], le = [33, 65, 108, 84, 1, 2, 4, 8, 168, 2, 4, 8, 17, 191, 252], ue = function (e) { for (var t = []; e--;)t.push(0); return t }, ce = { 96000: [oe, [227, 64], ue(154), [56]], 88200: [oe, [231], ue(170), [56]], 64000: [oe, [248, 192], ue(240), [56]], 48000: [oe, [255, 192], ue(268), [55, 148, 128], ue(54), [112]], 44100: [oe, [255, 192], ue(268), [55, 163, 128], ue(84), [112]], 32000: [oe, [255, 192], ue(268), [55, 234], ue(226), [112]], 24000: [oe, [255, 192], ue(268), [55, 255, 128], ue(268), [111, 112], ue(126), [224]], 16000: [oe, [255, 192], ue(268), [55, 255, 128], ue(268), [111, 255], ue(269), [223, 108], ue(195), [1, 192]], 12000: [le, ue(268), [3, 127, 248], ue(268), [6, 255, 240], ue(268), [13, 255, 224], ue(268), [27, 253, 128], ue(259), [56]], 11025: [le, ue(268), [3, 127, 248], ue(268), [6, 255, 240], ue(268), [13, 255, 224], ue(268), [27, 255, 192], ue(268), [55, 175, 128], ue(108), [112]], 8000: [le, ue(268), [3, 121, 16], ue(47), [7]] }, he = (W = ce, Object.keys(W).reduce(function (e, t) { return e[t] = new Uint8Array(W[t].reduce(function (e, t) { return e.concat(t) }, [])), e }, {})); Y = function (e, t) { return G(X(e, t)) }, $ = function (e, t) { return z(K(e), t) }, Q = function (e, t, n) { return K(n ? e : e - t) }; var de = 9e4, fe = (G = function (e) { return 9e4 * e }, z = function (e, t) { return e * t }, K = function (e) { return e / 9e4 }, X = function (e, t) { return e / t }, Y), pe = $, me = Q, ge = function (e, t, n, i) { var r, s, a, o, l, u = 0, c = 0, h = 0; if (t.length && (r = fe(e.baseMediaDecodeTime, e.samplerate), s = Math.ceil(de / (e.samplerate / 1024)), n && i && (u = r - Math.max(n, i), h = (c = Math.floor(u / s)) * s), !(c < 1 || h > de / 2))) { for ((a = he[e.samplerate]) || (a = t[0].data), o = 0; o < c; o++)l = t[0], t.splice(0, 0, { data: a, dts: l.dts - s, pts: l.pts - s }); e.baseMediaDecodeTime -= Math.floor(pe(h, e.samplerate)) } }, ve = function (e, t, n) { return t.minSegmentDts >= n ? e : (t.minSegmentDts = 1 / 0, e.filter(function (e) { return e.dts >= n && (t.minSegmentDts = Math.min(t.minSegmentDts, e.dts), t.minSegmentPts = t.minSegmentDts, !0) })) }, ye = function (e) { var t, n, i = []; for (t = 0; t < e.length; t++)n = e[t], i.push({ size: n.data.byteLength, duration: 1024 }); return i }, _e = function (e) { var t, n, i = 0, r = new Uint8Array(function (e) { var t, n = 0; for (t = 0; t < e.length; t++)n += e[t].data.byteLength; return n }(e)); for (t = 0; t < e.length; t++)n = e[t], r.set(n.data, i), i += n.data.byteLength; return r }, be = de, Te = function (e) { delete e.minSegmentDts, delete e.maxSegmentDts, delete e.minSegmentPts, delete e.maxSegmentPts }, Se = function (e, t) { var n, i = e.minSegmentDts; return t || (i -= e.timelineStartInfo.dts), n = e.timelineStartInfo.baseMediaDecodeTime, n += i, n = Math.max(0, n), "audio" === e.type && (n *= e.samplerate / be, n = Math.floor(n)), n }, Ee = function (e, t) { "number" == typeof t.pts && (void 0 === e.timelineStartInfo.pts && (e.timelineStartInfo.pts = t.pts), void 0 === e.minSegmentPts ? e.minSegmentPts = t.pts : e.minSegmentPts = Math.min(e.minSegmentPts, t.pts), void 0 === e.maxSegmentPts ? e.maxSegmentPts = t.pts : e.maxSegmentPts = Math.max(e.maxSegmentPts, t.pts)), "number" == typeof t.dts && (void 0 === e.timelineStartInfo.dts && (e.timelineStartInfo.dts = t.dts), void 0 === e.minSegmentDts ? e.minSegmentDts = t.dts : e.minSegmentDts = Math.min(e.minSegmentDts, t.dts), void 0 === e.maxSegmentDts ? e.maxSegmentDts = t.dts : e.maxSegmentDts = Math.max(e.maxSegmentDts, t.dts)) }, Ce = function (e) { for (var t = 0, n = { payloadType: -1, payloadSize: 0 }, i = 0, r = 0; t < e.byteLength && 128 !== e[t];) { for (; 255 === e[t];)i += 255, t++; for (i += e[t++]; 255 === e[t];)r += 255, t++; if (r += e[t++], !n.payload && 4 === i) { n.payloadType = i, n.payloadSize = r, n.payload = e.subarray(t, t + r); break } t += r, i = 0, r = 0 } return n }, we = function (e) { return 181 !== e.payload[0] ? null : 49 != (e.payload[1] << 8 | e.payload[2]) ? null : "GA94" !== String.fromCharCode(e.payload[3], e.payload[4], e.payload[5], e.payload[6]) ? null : 3 !== e.payload[7] ? null : e.payload.subarray(8, e.payload.length - 1) }, ke = function (e, t) { var n, i, r, s, a = []; if (!(64 & t[0])) return a; for (i = 31 & t[0], n = 0; n < i; n++)s = { type: 3 & t[2 + (r = 3 * n)], pts: e }, 4 & t[r + 2] && (s.ccData = t[r + 3] << 8 | t[r + 4], a.push(s)); return a }, Ae = 4, xe = function e() { e.prototype.init.call(this), this.captionPackets_ = [], this.ccStreams_ = [new Pe(0, 0), new Pe(0, 1), new Pe(1, 0), new Pe(1, 1)], this.reset(), this.ccStreams_.forEach(function (e) { e.on("data", this.trigger.bind(this, "data")), e.on("partialdone", this.trigger.bind(this, "partialdone")), e.on("done", this.trigger.bind(this, "done")) }, this) }; (xe.prototype = new q).push = function (e) { var t, n, i; if ("sei_rbsp" === e.nalUnitType && (t = Ce(e.escapedRBSP)).payloadType === Ae && (n = we(t))) if (e.dts < this.latestDts_) this.ignoreNextEqualDts_ = !0; else { if (e.dts === this.latestDts_ && this.ignoreNextEqualDts_) return this.numSameDts_--, void (this.numSameDts_ || (this.ignoreNextEqualDts_ = !1)); i = ke(e.pts, n), this.captionPackets_ = this.captionPackets_.concat(i), this.latestDts_ !== e.dts && (this.numSameDts_ = 0), this.numSameDts_++, this.latestDts_ = e.dts } }, xe.prototype.flushCCStreams = function (e) { this.ccStreams_.forEach(function (t) { return "flush" === e ? t.flush() : t.partialFlush() }, this) }, xe.prototype.flushStream = function (e) { this.captionPackets_.length ? (this.captionPackets_.forEach(function (e, t) { e.presortIndex = t }), this.captionPackets_.sort(function (e, t) { return e.pts === t.pts ? e.presortIndex - t.presortIndex : e.pts - t.pts }), this.captionPackets_.forEach(function (e) { e.type < 2 && this.dispatchCea608Packet(e) }, this), this.captionPackets_.length = 0, this.flushCCStreams(e)) : this.flushCCStreams(e) }, xe.prototype.flush = function () { return this.flushStream("flush") }, xe.prototype.partialFlush = function () { return this.flushStream("partialFlush") }, xe.prototype.reset = function () { this.latestDts_ = null, this.ignoreNextEqualDts_ = !1, this.numSameDts_ = 0, this.activeCea608Channel_ = [null, null], this.ccStreams_.forEach(function (e) { e.reset() }) }, xe.prototype.dispatchCea608Packet = function (e) { this.setsTextOrXDSActive(e) ? this.activeCea608Channel_[e.type] = null : this.setsChannel1Active(e) ? this.activeCea608Channel_[e.type] = 0 : this.setsChannel2Active(e) && (this.activeCea608Channel_[e.type] = 1), null !== this.activeCea608Channel_[e.type] && this.ccStreams_[(e.type << 1) + this.activeCea608Channel_[e.type]].push(e) }, xe.prototype.setsChannel1Active = function (e) { return 4096 == (30720 & e.ccData) }, xe.prototype.setsChannel2Active = function (e) { return 6144 == (30720 & e.ccData) }, xe.prototype.setsTextOrXDSActive = function (e) { return 256 == (28928 & e.ccData) || 4138 == (30974 & e.ccData) || 6186 == (30974 & e.ccData) }; var Ie = { 42: 225, 92: 233, 94: 237, 95: 243, 96: 250, 123: 231, 124: 247, 125: 209, 126: 241, 127: 9608, 304: 174, 305: 176, 306: 189, 307: 191, 308: 8482, 309: 162, 310: 163, 311: 9834, 312: 224, 313: 160, 314: 232, 315: 226, 316: 234, 317: 238, 318: 244, 319: 251, 544: 193, 545: 201, 546: 211, 547: 218, 548: 220, 549: 252, 550: 8216, 551: 161, 552: 42, 553: 39, 554: 8212, 555: 169, 556: 8480, 557: 8226, 558: 8220, 559: 8221, 560: 192, 561: 194, 562: 199, 563: 200, 564: 202, 565: 203, 566: 235, 567: 206, 568: 207, 569: 239, 570: 212, 571: 217, 572: 249, 573: 219, 574: 171, 575: 187, 800: 195, 801: 227, 802: 205, 803: 204, 804: 236, 805: 210, 806: 242, 807: 213, 808: 245, 809: 123, 810: 125, 811: 92, 812: 94, 813: 95, 814: 124, 815: 126, 816: 196, 817: 228, 818: 214, 819: 246, 820: 223, 821: 165, 822: 164, 823: 9474, 824: 197, 825: 229, 826: 216, 827: 248, 828: 9484, 829: 9488, 830: 9492, 831: 9496 }, Oe = function (e) { return null === e ? "" : (e = Ie[e] || e, String.fromCharCode(e)) }, De = [4352, 4384, 4608, 4640, 5376, 5408, 5632, 5664, 5888, 5920, 4096, 4864, 4896, 5120, 5152], Le = function () { for (var e = [], t = 15; t--;)e.push(""); return e }, Pe = function e(t, n) { e.prototype.init.call(this), this.field_ = t || 0, this.dataChannel_ = n || 0, this.name_ = "CC" + (1 + (this.field_ << 1 | this.dataChannel_)), this.setConstants(), this.reset(), this.push = function (e) { var t, n, i, r, s; if ((t = 32639 & e.ccData) !== this.lastControlCode_) { if (4096 == (61440 & t) ? this.lastControlCode_ = t : t !== this.PADDING_ && (this.lastControlCode_ = null), i = t >>> 8, r = 255 & t, t !== this.PADDING_) if (t === this.RESUME_CAPTION_LOADING_) this.mode_ = "popOn"; else if (t === this.END_OF_CAPTION_) this.mode_ = "popOn", this.clearFormatting(e.pts), this.flushDisplayed(e.pts), n = this.displayed_, this.displayed_ = this.nonDisplayed_, this.nonDisplayed_ = n, this.startPts_ = e.pts; else if (t === this.ROLL_UP_2_ROWS_) this.rollUpRows_ = 2, this.setRollUp(e.pts); else if (t === this.ROLL_UP_3_ROWS_) this.rollUpRows_ = 3, this.setRollUp(e.pts); else if (t === this.ROLL_UP_4_ROWS_) this.rollUpRows_ = 4, this.setRollUp(e.pts); else if (t === this.CARRIAGE_RETURN_) this.clearFormatting(e.pts), this.flushDisplayed(e.pts), this.shiftRowsUp_(), this.startPts_ = e.pts; else if (t === this.BACKSPACE_) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1); else if (t === this.ERASE_DISPLAYED_MEMORY_) this.flushDisplayed(e.pts), this.displayed_ = Le(); else if (t === this.ERASE_NON_DISPLAYED_MEMORY_) this.nonDisplayed_ = Le(); else if (t === this.RESUME_DIRECT_CAPTIONING_) "paintOn" !== this.mode_ && (this.flushDisplayed(e.pts), this.displayed_ = Le()), this.mode_ = "paintOn", this.startPts_ = e.pts; else if (this.isSpecialCharacter(i, r)) s = Oe((i = (3 & i) << 8) | r), this[this.mode_](e.pts, s), this.column_++; else if (this.isExtCharacter(i, r)) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1), s = Oe((i = (3 & i) << 8) | r), this[this.mode_](e.pts, s), this.column_++; else if (this.isMidRowCode(i, r)) this.clearFormatting(e.pts), this[this.mode_](e.pts, " "), this.column_++, 14 == (14 & r) && this.addFormatting(e.pts, ["i"]), 1 == (1 & r) && this.addFormatting(e.pts, ["u"]); else if (this.isOffsetControlCode(i, r)) this.column_ += 3 & r; else if (this.isPAC(i, r)) { var a = De.indexOf(7968 & t); "rollUp" === this.mode_ && (a - this.rollUpRows_ + 1 < 0 && (a = this.rollUpRows_ - 1), this.setRollUp(e.pts, a)), a !== this.row_ && (this.clearFormatting(e.pts), this.row_ = a), 1 & r && -1 === this.formatting_.indexOf("u") && this.addFormatting(e.pts, ["u"]), 16 == (16 & t) && (this.column_ = 4 * ((14 & t) >> 1)), this.isColorPAC(r) && 14 == (14 & r) && this.addFormatting(e.pts, ["i"]) } else this.isNormalChar(i) && (0 === r && (r = null), s = Oe(i), s += Oe(r), this[this.mode_](e.pts, s), this.column_ += s.length) } else this.lastControlCode_ = null } }; Pe.prototype = new q, Pe.prototype.flushDisplayed = function (e) { var t = this.displayed_.map(function (e) { try { return e.trim() } catch (e) { return console.error("Skipping malformed caption."), "" } }).join("\n").replace(/^\n+|\n+$/g, ""); t.length && this.trigger("data", { startPts: this.startPts_, endPts: e, text: t, stream: this.name_ }) }, Pe.prototype.reset = function () { this.mode_ = "popOn", this.topRow_ = 0, this.startPts_ = 0, this.displayed_ = Le(), this.nonDisplayed_ = Le(), this.lastControlCode_ = null, this.column_ = 0, this.row_ = 14, this.rollUpRows_ = 2, this.formatting_ = [] }, Pe.prototype.setConstants = function () { 0 === this.dataChannel_ ? (this.BASE_ = 16, this.EXT_ = 17, this.CONTROL_ = (20 | this.field_) << 8, this.OFFSET_ = 23) : 1 === this.dataChannel_ && (this.BASE_ = 24, this.EXT_ = 25, this.CONTROL_ = (28 | this.field_) << 8, this.OFFSET_ = 31), this.PADDING_ = 0, this.RESUME_CAPTION_LOADING_ = 32 | this.CONTROL_, this.END_OF_CAPTION_ = 47 | this.CONTROL_, this.ROLL_UP_2_ROWS_ = 37 | this.CONTROL_, this.ROLL_UP_3_ROWS_ = 38 | this.CONTROL_, this.ROLL_UP_4_ROWS_ = 39 | this.CONTROL_, this.CARRIAGE_RETURN_ = 45 | this.CONTROL_, this.RESUME_DIRECT_CAPTIONING_ = 41 | this.CONTROL_, this.BACKSPACE_ = 33 | this.CONTROL_, this.ERASE_DISPLAYED_MEMORY_ = 44 | this.CONTROL_, this.ERASE_NON_DISPLAYED_MEMORY_ = 46 | this.CONTROL_ }, Pe.prototype.isSpecialCharacter = function (e, t) { return e === this.EXT_ && t >= 48 && t <= 63 }, Pe.prototype.isExtCharacter = function (e, t) { return (e === this.EXT_ + 1 || e === this.EXT_ + 2) && t >= 32 && t <= 63 }, Pe.prototype.isMidRowCode = function (e, t) { return e === this.EXT_ && t >= 32 && t <= 47 }, Pe.prototype.isOffsetControlCode = function (e, t) { return e === this.OFFSET_ && t >= 33 && t <= 35 }, Pe.prototype.isPAC = function (e, t) { return e >= this.BASE_ && e < this.BASE_ + 8 && t >= 64 && t <= 127 }, Pe.prototype.isColorPAC = function (e) { return e >= 64 && e <= 79 || e >= 96 && e <= 127 }, Pe.prototype.isNormalChar = function (e) { return e >= 32 && e <= 127 }, Pe.prototype.setRollUp = function (e, t) { if ("rollUp" !== this.mode_ && (this.row_ = 14, this.mode_ = "rollUp", this.flushDisplayed(e), this.nonDisplayed_ = Le(), this.displayed_ = Le()), void 0 !== t && t !== this.row_) for (var n = 0; n < this.rollUpRows_; n++)this.displayed_[t - n] = this.displayed_[this.row_ - n], this.displayed_[this.row_ - n] = ""; void 0 === t && (t = this.row_), this.topRow_ = t - this.rollUpRows_ + 1 }, Pe.prototype.addFormatting = function (e, t) { this.formatting_ = this.formatting_.concat(t); var n = t.reduce(function (e, t) { return e + "<" + t + ">" }, ""); this[this.mode_](e, n) }, Pe.prototype.clearFormatting = function (e) { if (this.formatting_.length) { var t = this.formatting_.reverse().reduce(function (e, t) { return e + "</" + t + ">" }, ""); this.formatting_ = [], this[this.mode_](e, t) } }, Pe.prototype.popOn = function (e, t) { var n = this.nonDisplayed_[this.row_]; n += t, this.nonDisplayed_[this.row_] = n }, Pe.prototype.rollUp = function (e, t) { var n = this.displayed_[this.row_]; n += t, this.displayed_[this.row_] = n }, Pe.prototype.shiftRowsUp_ = function () { var e; for (e = 0; e < this.topRow_; e++)this.displayed_[e] = ""; for (e = this.row_ + 1; e < 15; e++)this.displayed_[e] = ""; for (e = this.topRow_; e < this.row_; e++)this.displayed_[e] = this.displayed_[e + 1]; this.displayed_[this.row_] = "" }, Pe.prototype.paintOn = function (e, t) { var n = this.displayed_[this.row_]; n += t, this.displayed_[this.row_] = n }; var Ne = { CaptionStream: xe, Cea608Stream: Pe }, Re = { H264_STREAM_TYPE: 27, ADTS_STREAM_TYPE: 15, METADATA_STREAM_TYPE: 21 }, Me = function (e, t) { var n = 1; for (e > t && (n = -1); Math.abs(t - e) > 4294967296;)e += 8589934592 * n; return e }, Ue = function e(t) { var n, i; e.prototype.init.call(this), this.type_ = t || "shared", this.push = function (e) { "shared" !== this.type_ && e.type !== this.type_ || (void 0 === i && (i = e.dts), e.dts = Me(e.dts, i), e.pts = Me(e.pts, i), n = e.dts, this.trigger("data", e)) }, this.flush = function () { i = n, this.trigger("done") }, this.endTimeline = function () { this.flush(), this.trigger("endedtimeline") }, this.discontinuity = function () { i = void 0, n = void 0 }, this.reset = function () { this.discontinuity(), this.trigger("reset") } }; Ue.prototype = new q; var je, Be = Ue, Fe = function (e, t, n) { var i, r = ""; for (i = t; i < n; i++)r += "%" + ("00" + e[i].toString(16)).slice(-2); return r }, He = function (e, t, n) { return decodeURIComponent(Fe(e, t, n)) }, qe = function (e) { return e[0] << 21 | e[1] << 14 | e[2] << 7 | e[3] }, Ve = { TXXX: function (e) { var t; if (3 === e.data[0]) { for (t = 1; t < e.data.length; t++)if (0 === e.data[t]) { e.description = He(e.data, 1, t), e.value = He(e.data, t + 1, e.data.length).replace(/\0*$/, ""); break } e.data = e.value } }, WXXX: function (e) { var t; if (3 === e.data[0]) for (t = 1; t < e.data.length; t++)if (0 === e.data[t]) { e.description = He(e.data, 1, t), e.url = He(e.data, t + 1, e.data.length); break } }, PRIV: function (e) { var t, n; for (t = 0; t < e.data.length; t++)if (0 === e.data[t]) { e.owner = (n = e.data, unescape(Fe(n, 0, t))); break } e.privateData = e.data.subarray(t + 1), e.data = e.privateData } }; (je = function (e) { var t, n = { debug: !(!e || !e.debug), descriptor: e && e.descriptor }, i = 0, r = [], s = 0; if (je.prototype.init.call(this), this.dispatchType = Re.METADATA_STREAM_TYPE.toString(16), n.descriptor) for (t = 0; t < n.descriptor.length; t++)this.dispatchType += ("00" + n.descriptor[t].toString(16)).slice(-2); this.push = function (e) { var t, a, o, l, u; if ("timed-metadata" === e.type) if (e.dataAlignmentIndicator && (s = 0, r.length = 0), 0 === r.length && (e.data.length < 10 || e.data[0] !== "I".charCodeAt(0) || e.data[1] !== "D".charCodeAt(0) || e.data[2] !== "3".charCodeAt(0))) n.debug && console.log("Skipping unrecognized metadata packet"); else if (r.push(e), s += e.data.byteLength, 1 === r.length && (i = qe(e.data.subarray(6, 10)), i += 10), !(s < i)) { for (t = { data: new Uint8Array(i), frames: [], pts: r[0].pts, dts: r[0].dts }, u = 0; u < i;)t.data.set(r[0].data.subarray(0, i - u), u), u += r[0].data.byteLength, s -= r[0].data.byteLength, r.shift(); a = 10, 64 & t.data[5] && (a += 4, a += qe(t.data.subarray(10, 14)), i -= qe(t.data.subarray(16, 20))); do { if ((o = qe(t.data.subarray(a + 4, a + 8))) < 1) return console.log("Malformed ID3 frame encountered. Skipping metadata parsing."); if ((l = { id: String.fromCharCode(t.data[a], t.data[a + 1], t.data[a + 2], t.data[a + 3]), data: t.data.subarray(a + 10, a + o + 10) }).key = l.id, Ve[l.id] && (Ve[l.id](l), "com.apple.streaming.transportStreamTimestamp" === l.owner)) { var c = l.data, h = (1 & c[3]) << 30 | c[4] << 22 | c[5] << 14 | c[6] << 6 | c[7] >>> 2; h *= 4, h += 3 & c[7], l.timeStamp = h, void 0 === t.pts && void 0 === t.dts && (t.pts = l.timeStamp, t.dts = l.timeStamp), this.trigger("timestamp", l) } t.frames.push(l), a += 10, a += o } while (a < i); this.trigger("data", t) } } }).prototype = new q; var We, Ge, ze, Ke = je, Xe = Be; (We = function () { var e = new Uint8Array(188), t = 0; We.prototype.init.call(this), this.push = function (n) { var i, r = 0, s = 188; for (t ? ((i = new Uint8Array(n.byteLength + t)).set(e.subarray(0, t)), i.set(n, t), t = 0) : i = n; s < i.byteLength;)71 !== i[r] || 71 !== i[s] ? (r++, s++) : (this.trigger("data", i.subarray(r, s)), r += 188, s += 188); r < i.byteLength && (e.set(i.subarray(r), 0), t = i.byteLength - r) }, this.flush = function () { 188 === t && 71 === e[0] && (this.trigger("data", e), t = 0), this.trigger("done") }, this.endTimeline = function () { this.flush(), this.trigger("endedtimeline") }, this.reset = function () { t = 0, this.trigger("reset") } }).prototype = new q, (Ge = function () { var e, t, n, i; Ge.prototype.init.call(this), i = this, this.packetsWaitingForPmt = [], this.programMapTable = void 0, e = function (e, i) { var r = 0; i.payloadUnitStartIndicator && (r += e[r] + 1), "pat" === i.type ? t(e.subarray(r), i) : n(e.subarray(r), i) }, t = function (e, t) { t.section_number = e[7], t.last_section_number = e[8], i.pmtPid = (31 & e[10]) << 8 | e[11], t.pmtPid = i.pmtPid }, n = function (e, t) { var n, r; if (1 & e[5]) { for (i.programMapTable = { video: null, audio: null, "timed-metadata": {} }, n = 3 + ((15 & e[1]) << 8 | e[2]) - 4, r = 12 + ((15 & e[10]) << 8 | e[11]); r < n;) { var s = e[r], a = (31 & e[r + 1]) << 8 | e[r + 2]; s === Re.H264_STREAM_TYPE && null === i.programMapTable.video ? i.programMapTable.video = a : s === Re.ADTS_STREAM_TYPE && null === i.programMapTable.audio ? i.programMapTable.audio = a : s === Re.METADATA_STREAM_TYPE && (i.programMapTable["timed-metadata"][a] = s), r += 5 + ((15 & e[r + 3]) << 8 | e[r + 4]) } t.programMapTable = i.programMapTable } }, this.push = function (t) { var n = {}, i = 4; if (n.payloadUnitStartIndicator = !!(64 & t[1]), n.pid = 31 & t[1], n.pid <<= 8, n.pid |= t[2], (48 & t[3]) >>> 4 > 1 && (i += t[i] + 1), 0 === n.pid) n.type = "pat", e(t.subarray(i), n), this.trigger("data", n); else if (n.pid === this.pmtPid) for (n.type = "pmt", e(t.subarray(i), n), this.trigger("data", n); this.packetsWaitingForPmt.length;)this.processPes_.apply(this, this.packetsWaitingForPmt.shift()); else void 0 === this.programMapTable ? this.packetsWaitingForPmt.push([t, i, n]) : this.processPes_(t, i, n) }, this.processPes_ = function (e, t, n) { n.pid === this.programMapTable.video ? n.streamType = Re.H264_STREAM_TYPE : n.pid === this.programMapTable.audio ? n.streamType = Re.ADTS_STREAM_TYPE : n.streamType = this.programMapTable["timed-metadata"][n.pid], n.type = "pes", n.data = e.subarray(t), this.trigger("data", n) } }).prototype = new q, Ge.STREAM_TYPES = { h264: 27, adts: 15 }, (ze = function () { var e, t = this, n = { data: [], size: 0 }, i = { data: [], size: 0 }, r = { data: [], size: 0 }, s = function (e, n, i) { var r, s, a = new Uint8Array(e.size), o = { type: n }, l = 0, u = 0; if (e.data.length && !(e.size < 9)) { for (o.trackId = e.data[0].pid, l = 0; l < e.data.length; l++)s = e.data[l], a.set(s.data, u), u += s.data.byteLength; var c, h, d; c = a, (h = o).packetLength = 6 + (c[4] << 8 | c[5]), h.dataAlignmentIndicator = 0 != (4 & c[6]), 192 & (d = c[7]) && (h.pts = (14 & c[9]) << 27 | (255 & c[10]) << 20 | (254 & c[11]) << 12 | (255 & c[12]) << 5 | (254 & c[13]) >>> 3, h.pts *= 4, h.pts += (6 & c[13]) >>> 1, h.dts = h.pts, 64 & d && (h.dts = (14 & c[14]) << 27 | (255 & c[15]) << 20 | (254 & c[16]) << 12 | (255 & c[17]) << 5 | (254 & c[18]) >>> 3, h.dts *= 4, h.dts += (6 & c[18]) >>> 1)), h.data = c.subarray(9 + c[8]), r = "video" === n || o.packetLength <= e.size, (i || r) && (e.size = 0, e.data.length = 0), r && t.trigger("data", o) } }; ze.prototype.init.call(this), this.push = function (a) { ({ pat: function () { }, pes: function () { var e, t; switch (a.streamType) { case Re.H264_STREAM_TYPE: case Re.H264_STREAM_TYPE: e = n, t = "video"; break; case Re.ADTS_STREAM_TYPE: e = i, t = "audio"; break; case Re.METADATA_STREAM_TYPE: e = r, t = "timed-metadata"; break; default: return }a.payloadUnitStartIndicator && s(e, t, !0), e.data.push(a), e.size += a.data.byteLength }, pmt: function () { var n = { type: "metadata", tracks: [] }; null !== (e = a.programMapTable).video && n.tracks.push({ timelineStartInfo: { baseMediaDecodeTime: 0 }, id: +e.video, codec: "avc", type: "video" }), null !== e.audio && n.tracks.push({ timelineStartInfo: { baseMediaDecodeTime: 0 }, id: +e.audio, codec: "adts", type: "audio" }), t.trigger("data", n) } })[a.type]() }, this.reset = function () { n.size = 0, n.data.length = 0, i.size = 0, i.data.length = 0, this.trigger("reset") }, this.flushStreams_ = function () { s(n, "video"), s(i, "audio"), s(r, "timed-metadata") }, this.flush = function () { this.flushStreams_(), this.trigger("done") } }).prototype = new q; var Ye = { PAT_PID: 0, MP2T_PACKET_LENGTH: 188, TransportPacketStream: We, TransportParseStream: Ge, ElementaryStream: ze, TimestampRolloverStream: Xe, CaptionStream: Ne.CaptionStream, Cea608Stream: Ne.Cea608Stream, MetadataStream: Ke }; for (var $e in Re) Re.hasOwnProperty($e) && (Ye[$e] = Re[$e]); var Qe, Je = Ye, Ze = de, et = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350]; (Qe = function (e) { var t, n = 0; Qe.prototype.init.call(this), this.push = function (i) { var r, s, a, o, l, u, c = 0; if (e || (n = 0), "audio" === i.type) for (t ? (o = t, (t = new Uint8Array(o.byteLength + i.data.byteLength)).set(o), t.set(i.data, o.byteLength)) : t = i.data; c + 5 < t.length;)if (255 === t[c] && 240 == (246 & t[c + 1])) { if (s = 2 * (1 & ~t[c + 1]), r = (3 & t[c + 3]) << 11 | t[c + 4] << 3 | (224 & t[c + 5]) >> 5, u = (l = 1024 * (1 + (3 & t[c + 6]))) * Ze / et[(60 & t[c + 2]) >>> 2], a = c + r, t.byteLength < a) return; if (this.trigger("data", { pts: i.pts + n * u, dts: i.dts + n * u, sampleCount: l, audioobjecttype: 1 + (t[c + 2] >>> 6 & 3), channelcount: (1 & t[c + 2]) << 2 | (192 & t[c + 3]) >>> 6, samplerate: et[(60 & t[c + 2]) >>> 2], samplingfrequencyindex: (60 & t[c + 2]) >>> 2, samplesize: 16, data: t.subarray(c + 7 + s, a) }), n++, t.byteLength === a) return void (t = void 0); t = t.subarray(a) } else c++ }, this.flush = function () { n = 0, this.trigger("done") }, this.reset = function () { t = void 0, this.trigger("reset") }, this.endTimeline = function () { t = void 0, this.trigger("endedtimeline") } }).prototype = new q; var tt, nt, it, rt = Qe, st = function (e) { var t = e.byteLength, n = 0, i = 0; this.length = function () { return 8 * t }, this.bitsAvailable = function () { return 8 * t + i }, this.loadWord = function () { var r = e.byteLength - t, s = new Uint8Array(4), a = Math.min(4, t); if (0 === a) throw new Error("no bytes available"); s.set(e.subarray(r, r + a)), n = new DataView(s.buffer).getUint32(0), i = 8 * a, t -= a }, this.skipBits = function (e) { var r; i > e ? (n <<= e, i -= e) : (e -= i, e -= 8 * (r = Math.floor(e / 8)), t -= r, this.loadWord(), n <<= e, i -= e) }, this.readBits = function (e) { var r = Math.min(i, e), s = n >>> 32 - r; return (i -= r) > 0 ? n <<= r : t > 0 && this.loadWord(), (r = e - r) > 0 ? s << r | this.readBits(r) : s }, this.skipLeadingZeros = function () { var e; for (e = 0; e < i; ++e)if (0 != (n & 2147483648 >>> e)) return n <<= e, i -= e, e; return this.loadWord(), e + this.skipLeadingZeros() }, this.skipUnsignedExpGolomb = function () { this.skipBits(1 + this.skipLeadingZeros()) }, this.skipExpGolomb = function () { this.skipBits(1 + this.skipLeadingZeros()) }, this.readUnsignedExpGolomb = function () { var e = this.skipLeadingZeros(); return this.readBits(e + 1) - 1 }, this.readExpGolomb = function () { var e = this.readUnsignedExpGolomb(); return 1 & e ? 1 + e >>> 1 : -1 * (e >>> 1) }, this.readBoolean = function () { return 1 === this.readBits(1) }, this.readUnsignedByte = function () { return this.readBits(8) }, this.loadWord() }; (nt = function () { var e, t, n = 0; nt.prototype.init.call(this), this.push = function (i) { var r; t ? ((r = new Uint8Array(t.byteLength + i.data.byteLength)).set(t), r.set(i.data, t.byteLength), t = r) : t = i.data; for (var s = t.byteLength; n < s - 3; n++)if (1 === t[n + 2]) { e = n + 5; break } for (; e < s;)switch (t[e]) { case 0: if (0 !== t[e - 1]) { e += 2; break } if (0 !== t[e - 2]) { e++; break } n + 3 !== e - 2 && this.trigger("data", t.subarray(n + 3, e - 2)); do { e++ } while (1 !== t[e] && e < s); n = e - 2, e += 3; break; case 1: if (0 !== t[e - 1] || 0 !== t[e - 2]) { e += 3; break } this.trigger("data", t.subarray(n + 3, e - 2)), n = e - 2, e += 3; break; default: e += 3 }t = t.subarray(n), e -= n, n = 0 }, this.reset = function () { t = null, n = 0, this.trigger("reset") }, this.flush = function () { t && t.byteLength > 3 && this.trigger("data", t.subarray(n + 3)), t = null, n = 0, this.trigger("done") }, this.endTimeline = function () { this.flush(), this.trigger("endedtimeline") } }).prototype = new q, it = { 100: !0, 110: !0, 122: !0, 244: !0, 44: !0, 83: !0, 86: !0, 118: !0, 128: !0, 138: !0, 139: !0, 134: !0 }, (tt = function () { var e, t, n, i, r, s, a, o = new nt; tt.prototype.init.call(this), e = this, this.push = function (e) { "video" === e.type && (t = e.trackId, n = e.pts, i = e.dts, o.push(e)) }, o.on("data", function (a) { var o = { trackId: t, pts: n, dts: i, data: a }; switch (31 & a[0]) { case 5: o.nalUnitType = "slice_layer_without_partitioning_rbsp_idr"; break; case 6: o.nalUnitType = "sei_rbsp", o.escapedRBSP = r(a.subarray(1)); break; case 7: o.nalUnitType = "seq_parameter_set_rbsp", o.escapedRBSP = r(a.subarray(1)), o.config = s(o.escapedRBSP); break; case 8: o.nalUnitType = "pic_parameter_set_rbsp"; break; case 9: o.nalUnitType = "access_unit_delimiter_rbsp" }e.trigger("data", o) }), o.on("done", function () { e.trigger("done") }), o.on("partialdone", function () { e.trigger("partialdone") }), o.on("reset", function () { e.trigger("reset") }), o.on("endedtimeline", function () { e.trigger("endedtimeline") }), this.flush = function () { o.flush() }, this.partialFlush = function () { o.partialFlush() }, this.reset = function () { o.reset() }, this.endTimeline = function () { o.endTimeline() }, a = function (e, t) { var n, i = 8, r = 8; for (n = 0; n < e; n++)0 !== r && (r = (i + t.readExpGolomb() + 256) % 256), i = 0 === r ? i : r }, r = function (e) { for (var t, n, i = e.byteLength, r = [], s = 1; s < i - 2;)0 === e[s] && 0 === e[s + 1] && 3 === e[s + 2] ? (r.push(s + 2), s += 2) : s++; if (0 === r.length) return e; t = i - r.length, n = new Uint8Array(t); var a = 0; for (s = 0; s < t; a++, s++)a === r[0] && (a++, r.shift()), n[s] = e[a]; return n }, s = function (e) { var t, n, i, r, s, o, l, u, c, h, d, f, p, m = 0, g = 0, v = 0, y = 0, _ = 1; if (n = (t = new st(e)).readUnsignedByte(), r = t.readUnsignedByte(), i = t.readUnsignedByte(), t.skipUnsignedExpGolomb(), it[n] && (3 === (s = t.readUnsignedExpGolomb()) && t.skipBits(1), t.skipUnsignedExpGolomb(), t.skipUnsignedExpGolomb(), t.skipBits(1), t.readBoolean())) for (d = 3 !== s ? 8 : 12, p = 0; p < d; p++)t.readBoolean() && a(p < 6 ? 16 : 64, t); if (t.skipUnsignedExpGolomb(), 0 === (o = t.readUnsignedExpGolomb())) t.readUnsignedExpGolomb(); else if (1 === o) for (t.skipBits(1), t.skipExpGolomb(), t.skipExpGolomb(), l = t.readUnsignedExpGolomb(), p = 0; p < l; p++)t.skipExpGolomb(); if (t.skipUnsignedExpGolomb(), t.skipBits(1), u = t.readUnsignedExpGolomb(), c = t.readUnsignedExpGolomb(), 0 === (h = t.readBits(1)) && t.skipBits(1), t.skipBits(1), t.readBoolean() && (m = t.readUnsignedExpGolomb(), g = t.readUnsignedExpGolomb(), v = t.readUnsignedExpGolomb(), y = t.readUnsignedExpGolomb()), t.readBoolean() && t.readBoolean()) { switch (t.readUnsignedByte()) { case 1: f = [1, 1]; break; case 2: f = [12, 11]; break; case 3: f = [10, 11]; break; case 4: f = [16, 11]; break; case 5: f = [40, 33]; break; case 6: f = [24, 11]; break; case 7: f = [20, 11]; break; case 8: f = [32, 11]; break; case 9: f = [80, 33]; break; case 10: f = [18, 11]; break; case 11: f = [15, 11]; break; case 12: f = [64, 33]; break; case 13: f = [160, 99]; break; case 14: f = [4, 3]; break; case 15: f = [3, 2]; break; case 16: f = [2, 1]; break; case 255: f = [t.readUnsignedByte() << 8 | t.readUnsignedByte(), t.readUnsignedByte() << 8 | t.readUnsignedByte()] }f && (_ = f[0] / f[1]) } return { profileIdc: n, levelIdc: i, profileCompatibility: r, width: Math.ceil((16 * (u + 1) - 2 * m - 2 * g) * _), height: (2 - h) * (c + 1) * 16 - 2 * v - 2 * y, sarRatio: f } } }).prototype = new q; var at, ot = { H264Stream: tt, NalByteStream: nt }, lt = function (e) { return e[0] === "I".charCodeAt(0) && e[1] === "D".charCodeAt(0) && e[2] === "3".charCodeAt(0) }, ut = function (e, t) { var n = e[t + 6] << 21 | e[t + 7] << 14 | e[t + 8] << 7 | e[t + 9]; return (16 & e[t + 5]) >> 4 ? n + 20 : n + 10 }, ct = function (e, t) { var n = (224 & e[t + 5]) >> 5, i = e[t + 4] << 3; return 6144 & e[t + 3] | i | n }; (at = function () { var e = new Uint8Array, t = 0; at.prototype.init.call(this), this.setTimestamp = function (e) { t = e }, this.push = function (n) { var i, r, s, a, o = 0, l = 0; for (e.length ? (a = e.length, (e = new Uint8Array(n.byteLength + a)).set(e.subarray(0, a)), e.set(n, a)) : e = n; e.length - l >= 3;)if (e[l] !== "I".charCodeAt(0) || e[l + 1] !== "D".charCodeAt(0) || e[l + 2] !== "3".charCodeAt(0)) if (255 != (255 & e[l]) || 240 != (240 & e[l + 1])) l++; else { if (e.length - l < 7) break; if (l + (o = ct(e, l)) > e.length) break; s = { type: "audio", data: e.subarray(l, l + o), pts: t, dts: t }, this.trigger("data", s), l += o } else { if (e.length - l < 10) break; if (l + (o = ut(e, l)) > e.length) break; r = { type: "timed-metadata", data: e.subarray(l, l + o) }, this.trigger("data", r), l += o } i = e.length - l, e = i > 0 ? e.subarray(l) : new Uint8Array }, this.reset = function () { e = new Uint8Array, this.trigger("reset") }, this.endTimeline = function () { e = new Uint8Array, this.trigger("endedtimeline") } }).prototype = new q; var ht, dt, ft, pt, mt = at, gt = ot.H264Stream, vt = lt, yt = de, _t = ["audioobjecttype", "channelcount", "samplerate", "samplingfrequencyindex", "samplesize"], bt = ["width", "height", "profileIdc", "levelIdc", "profileCompatibility", "sarRatio"], Tt = function (e, t) { var n; if (e.length !== t.length) return !1; for (n = 0; n < e.length; n++)if (e[n] !== t[n]) return !1; return !0 }, St = function (e, t, n, i, r, s) { return { start: { dts: e, pts: e + (n - t) }, end: { dts: e + (i - t), pts: e + (r - n) }, prependedContentDuration: s, baseMediaDecodeTime: e } }; (dt = function (e, t) { var n = [], i = 0, r = 0, s = 0, a = 1 / 0; t = t || {}, dt.prototype.init.call(this), this.push = function (t) { Ee(e, t), e && _t.forEach(function (n) { e[n] = t[n] }), n.push(t) }, this.setEarliestDts = function (t) { r = t - e.timelineStartInfo.baseMediaDecodeTime }, this.setVideoBaseMediaDecodeTime = function (e) { a = e }, this.setAudioAppendStart = function (e) { s = e }, this.flush = function () { var o, l, u, c, h; 0 !== n.length ? (o = ve(n, e, r), e.baseMediaDecodeTime = Se(e, t.keepOriginalTimestamps), ge(e, o, s, a), e.samples = ye(o), u = J(_e(o)), n = [], l = Z(i, [e]), c = new Uint8Array(l.byteLength + u.byteLength), i++, c.set(l), c.set(u, l.byteLength), Te(e), h = Math.ceil(1024 * yt / e.samplerate), o.length && this.trigger("timingInfo", { start: o[0].dts, end: o[0].dts + o.length * h }), this.trigger("data", { track: e, boxes: c }), this.trigger("done", "AudioSegmentStream")) : this.trigger("done", "AudioSegmentStream") }, this.reset = function () { Te(e), n = [], this.trigger("reset") } }).prototype = new q, (ht = function (e, t) { var n, i, r = 0, s = [], a = []; t = t || {}, ht.prototype.init.call(this), delete e.minPTS, this.gopCache_ = [], this.push = function (t) { Ee(e, t), "seq_parameter_set_rbsp" !== t.nalUnitType || n || (n = t.config, e.sps = [t.data], bt.forEach(function (t) { e[t] = n[t] }, this)), "pic_parameter_set_rbsp" !== t.nalUnitType || i || (i = t.data, e.pps = [t.data]), s.push(t) }, this.flush = function () { for (var n, i, o, l, u, c, h, d, f = 0; s.length && "access_unit_delimiter_rbsp" !== s[0].nalUnitType;)s.shift(); if (0 === s.length) return this.resetStream_(), void this.trigger("done", "VideoSegmentStream"); if (n = ne(s), (o = ie(n))[0][0].keyFrame || ((i = this.getGopForFusion_(s[0], e)) ? (f = i.duration, o.unshift(i), o.byteLength += i.byteLength, o.nalCount += i.nalCount, o.pts = i.pts, o.dts = i.dts, o.duration += i.duration) : o = re(o)), a.length) { var p; if (!(p = t.alignGopsAtEnd ? this.alignGopsAtEnd_(o) : this.alignGopsAtStart_(o))) return this.gopCache_.unshift({ gop: o.pop(), pps: e.pps, sps: e.sps }), this.gopCache_.length = Math.min(6, this.gopCache_.length), s = [], this.resetStream_(), void this.trigger("done", "VideoSegmentStream"); Te(e), o = p } Ee(e, o), e.samples = se(o), u = J(ae(o)), e.baseMediaDecodeTime = Se(e, t.keepOriginalTimestamps), this.trigger("processedGopsInfo", o.map(function (e) { return { pts: e.pts, dts: e.dts, byteLength: e.byteLength } })), h = o[0], d = o[o.length - 1], this.trigger("segmentTimingInfo", St(e.baseMediaDecodeTime, h.dts, h.pts, d.dts + d.duration, d.pts + d.duration, f)), this.trigger("timingInfo", { start: o[0].dts, end: o[o.length - 1].dts + o[o.length - 1].duration }), this.gopCache_.unshift({ gop: o.pop(), pps: e.pps, sps: e.sps }), this.gopCache_.length = Math.min(6, this.gopCache_.length), s = [], this.trigger("baseMediaDecodeTime", e.baseMediaDecodeTime), this.trigger("timelineStartInfo", e.timelineStartInfo), l = Z(r, [e]), c = new Uint8Array(l.byteLength + u.byteLength), r++, c.set(l), c.set(u, l.byteLength), this.trigger("data", { track: e, boxes: c }), this.resetStream_(), this.trigger("done", "VideoSegmentStream") }, this.reset = function () { this.resetStream_(), s = [], this.gopCache_.length = 0, a.length = 0, this.trigger("reset") }, this.resetStream_ = function () { Te(e), n = void 0, i = void 0 }, this.getGopForFusion_ = function (t) { var n, i, r, s, a, o = 1 / 0; for (a = 0; a < this.gopCache_.length; a++)r = (s = this.gopCache_[a]).gop, e.pps && Tt(e.pps[0], s.pps[0]) && e.sps && Tt(e.sps[0], s.sps[0]) && (r.dts < e.timelineStartInfo.dts || (n = t.dts - r.dts - r.duration) >= -1e4 && n <= 45e3 && (!i || o > n) && (i = s, o = n)); return i ? i.gop : null }, this.alignGopsAtStart_ = function (e) { var t, n, i, r, s, o, l, u; for (s = e.byteLength, o = e.nalCount, l = e.duration, t = n = 0; t < a.length && n < e.length && (i = a[t], r = e[n], i.pts !== r.pts);)r.pts > i.pts ? t++ : (n++, s -= r.byteLength, o -= r.nalCount, l -= r.duration); return 0 === n ? e : n === e.length ? null : ((u = e.slice(n)).byteLength = s, u.duration = l, u.nalCount = o, u.pts = u[0].pts, u.dts = u[0].dts, u) }, this.alignGopsAtEnd_ = function (e) { var t, n, i, r, s, o, l; for (t = a.length - 1, n = e.length - 1, s = null, o = !1; t >= 0 && n >= 0;) { if (i = a[t], r = e[n], i.pts === r.pts) { o = !0; break } i.pts > r.pts ? t-- : (t === a.length - 1 && (s = n), n--) } if (!o && null === s) return null; if (0 === (l = o ? n : s)) return e; var u = e.slice(l), c = u.reduce(function (e, t) { return e.byteLength += t.byteLength, e.duration += t.duration, e.nalCount += t.nalCount, e }, { byteLength: 0, duration: 0, nalCount: 0 }); return u.byteLength = c.byteLength, u.duration = c.duration, u.nalCount = c.nalCount, u.pts = u[0].pts, u.dts = u[0].dts, u }, this.alignGopsWith = function (e) { a = e } }).prototype = new q, (pt = function (e, t) { this.numberOfTracks = 0, this.metadataStream = t, void 0 !== (e = e || {}).remux ? this.remuxTracks = !!e.remux : this.remuxTracks = !0, "boolean" == typeof e.keepOriginalTimestamps ? this.keepOriginalTimestamps = e.keepOriginalTimestamps : this.keepOriginalTimestamps = !1, this.pendingTracks = [], this.videoTrack = null, this.pendingBoxes = [], this.pendingCaptions = [], this.pendingMetadata = [], this.pendingBytes = 0, this.emittedTracks = 0, pt.prototype.init.call(this), this.push = function (e) { return e.text ? this.pendingCaptions.push(e) : e.frames ? this.pendingMetadata.push(e) : (this.pendingTracks.push(e.track), this.pendingBytes += e.boxes.byteLength, "video" === e.track.type && (this.videoTrack = e.track, this.pendingBoxes.push(e.boxes)), void ("audio" === e.track.type && (this.audioTrack = e.track, this.pendingBoxes.unshift(e.boxes)))) } }).prototype = new q, pt.prototype.flush = function (e) { var t, n, i, r, s = 0, a = { captions: [], captionStreams: {}, metadata: [], info: {} }, o = 0; if (this.pendingTracks.length < this.numberOfTracks) { if ("VideoSegmentStream" !== e && "AudioSegmentStream" !== e) return; if (this.remuxTracks) return; if (0 === this.pendingTracks.length) return this.emittedTracks++, void (this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0)) } if (this.videoTrack ? (o = this.videoTrack.timelineStartInfo.pts, bt.forEach(function (e) { a.info[e] = this.videoTrack[e] }, this)) : this.audioTrack && (o = this.audioTrack.timelineStartInfo.pts, _t.forEach(function (e) { a.info[e] = this.audioTrack[e] }, this)), this.videoTrack || this.audioTrack) { for (1 === this.pendingTracks.length ? a.type = this.pendingTracks[0].type : a.type = "combined", this.emittedTracks += this.pendingTracks.length, i = ee(this.pendingTracks), a.initSegment = new Uint8Array(i.byteLength), a.initSegment.set(i), a.data = new Uint8Array(this.pendingBytes), r = 0; r < this.pendingBoxes.length; r++)a.data.set(this.pendingBoxes[r], s), s += this.pendingBoxes[r].byteLength; for (r = 0; r < this.pendingCaptions.length; r++)(t = this.pendingCaptions[r]).startTime = me(t.startPts, o, this.keepOriginalTimestamps), t.endTime = me(t.endPts, o, this.keepOriginalTimestamps), a.captionStreams[t.stream] = !0, a.captions.push(t); for (r = 0; r < this.pendingMetadata.length; r++)(n = this.pendingMetadata[r]).cueTime = me(n.pts, o, this.keepOriginalTimestamps), a.metadata.push(n); for (a.metadata.dispatchType = this.metadataStream.dispatchType, this.pendingTracks.length = 0, this.videoTrack = null, this.pendingBoxes.length = 0, this.pendingCaptions.length = 0, this.pendingBytes = 0, this.pendingMetadata.length = 0, this.trigger("data", a), r = 0; r < a.captions.length; r++)t = a.captions[r], this.trigger("caption", t); for (r = 0; r < a.metadata.length; r++)n = a.metadata[r], this.trigger("id3Frame", n) } this.emittedTracks >= this.numberOfTracks && (this.trigger("done"), this.emittedTracks = 0) }, pt.prototype.setRemux = function (e) { this.remuxTracks = e }, (ft = function (e) { var t, n, i = this, r = !0; ft.prototype.init.call(this), e = e || {}, this.baseMediaDecodeTime = e.baseMediaDecodeTime || 0, this.transmuxPipeline_ = {}, this.setupAacPipeline = function () { var r = {}; this.transmuxPipeline_ = r, r.type = "aac", r.metadataStream = new Je.MetadataStream, r.aacStream = new mt, r.audioTimestampRolloverStream = new Je.TimestampRolloverStream("audio"), r.timedMetadataTimestampRolloverStream = new Je.TimestampRolloverStream("timed-metadata"), r.adtsStream = new rt, r.coalesceStream = new pt(e, r.metadataStream), r.headOfPipeline = r.aacStream, r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream), r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream), r.metadataStream.on("timestamp", function (e) { r.aacStream.setTimestamp(e.timeStamp) }), r.aacStream.on("data", function (s) { "timed-metadata" !== s.type || r.audioSegmentStream || (n = n || { timelineStartInfo: { baseMediaDecodeTime: i.baseMediaDecodeTime }, codec: "adts", type: "audio" }, r.coalesceStream.numberOfTracks++, r.audioSegmentStream = new dt(n, e), r.audioSegmentStream.on("timingInfo", i.trigger.bind(i, "audioTimingInfo")), r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)), i.trigger("trackinfo", { hasAudio: !!n, hasVideo: !!t }) }), r.coalesceStream.on("data", this.trigger.bind(this, "data")), r.coalesceStream.on("done", this.trigger.bind(this, "done")) }, this.setupTsPipeline = function () { var r = {}; this.transmuxPipeline_ = r, r.type = "ts", r.metadataStream = new Je.MetadataStream, r.packetStream = new Je.TransportPacketStream, r.parseStream = new Je.TransportParseStream, r.elementaryStream = new Je.ElementaryStream, r.timestampRolloverStream = new Je.TimestampRolloverStream, r.adtsStream = new rt, r.h264Stream = new gt, r.captionStream = new Je.CaptionStream, r.coalesceStream = new pt(e, r.metadataStream), r.headOfPipeline = r.packetStream, r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream), r.timestampRolloverStream.pipe(r.h264Stream), r.timestampRolloverStream.pipe(r.adtsStream), r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream), r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream), r.elementaryStream.on("data", function (s) { var a; if ("metadata" === s.type) { for (a = s.tracks.length; a--;)t || "video" !== s.tracks[a].type ? n || "audio" !== s.tracks[a].type || ((n = s.tracks[a]).timelineStartInfo.baseMediaDecodeTime = i.baseMediaDecodeTime) : (t = s.tracks[a]).timelineStartInfo.baseMediaDecodeTime = i.baseMediaDecodeTime; t && !r.videoSegmentStream && (r.coalesceStream.numberOfTracks++, r.videoSegmentStream = new ht(t, e), r.videoSegmentStream.on("timelineStartInfo", function (e) { n && (n.timelineStartInfo = e, r.audioSegmentStream.setEarliestDts(e.dts)) }), r.videoSegmentStream.on("processedGopsInfo", i.trigger.bind(i, "gopInfo")), r.videoSegmentStream.on("segmentTimingInfo", i.trigger.bind(i, "videoSegmentTimingInfo")), r.videoSegmentStream.on("baseMediaDecodeTime", function (e) { n && r.audioSegmentStream.setVideoBaseMediaDecodeTime(e) }), r.videoSegmentStream.on("timingInfo", i.trigger.bind(i, "videoTimingInfo")), r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)), n && !r.audioSegmentStream && (r.coalesceStream.numberOfTracks++, r.audioSegmentStream = new dt(n, e), r.audioSegmentStream.on("timingInfo", i.trigger.bind(i, "audioTimingInfo")), r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)), i.trigger("trackinfo", { hasAudio: !!n, hasVideo: !!t }) } }), r.coalesceStream.on("data", this.trigger.bind(this, "data")), r.coalesceStream.on("id3Frame", function (e) { e.dispatchType = r.metadataStream.dispatchType, i.trigger("id3Frame", e) }), r.coalesceStream.on("caption", this.trigger.bind(this, "caption")), r.coalesceStream.on("done", this.trigger.bind(this, "done")) }, this.setBaseMediaDecodeTime = function (i) { var r = this.transmuxPipeline_; e.keepOriginalTimestamps || (this.baseMediaDecodeTime = i), n && (n.timelineStartInfo.dts = void 0, n.timelineStartInfo.pts = void 0, Te(n), e.keepOriginalTimestamps || (n.timelineStartInfo.baseMediaDecodeTime = i), r.audioTimestampRolloverStream && r.audioTimestampRolloverStream.discontinuity()), t && (r.videoSegmentStream && (r.videoSegmentStream.gopCache_ = []), t.timelineStartInfo.dts = void 0, t.timelineStartInfo.pts = void 0, Te(t), r.captionStream.reset(), e.keepOriginalTimestamps || (t.timelineStartInfo.baseMediaDecodeTime = i)), r.timestampRolloverStream && r.timestampRolloverStream.discontinuity() }, this.setAudioAppendStart = function (e) { n && this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e) }, this.setRemux = function (t) { var n = this.transmuxPipeline_; e.remux = t, n && n.coalesceStream && n.coalesceStream.setRemux(t) }, this.alignGopsWith = function (e) { t && this.transmuxPipeline_.videoSegmentStream && this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e) }, this.push = function (e) { if (r) { var t = vt(e); t && "aac" !== this.transmuxPipeline_.type ? this.setupAacPipeline() : t || "ts" === this.transmuxPipeline_.type || this.setupTsPipeline(), r = !1 } this.transmuxPipeline_.headOfPipeline.push(e) }, this.flush = function () { r = !0, this.transmuxPipeline_.headOfPipeline.flush() }, this.endTimeline = function () { this.transmuxPipeline_.headOfPipeline.endTimeline() }, this.reset = function () { this.transmuxPipeline_.headOfPipeline && this.transmuxPipeline_.headOfPipeline.reset() }, this.resetCaptions = function () { this.transmuxPipeline_.captionStream && this.transmuxPipeline_.captionStream.reset() } }).prototype = new q; var Et = { Transmuxer: ft, VideoSegmentStream: ht, AudioSegmentStream: dt, AUDIO_PROPERTIES: _t, VIDEO_PROPERTIES: bt, generateVideoSegmentTimingInfo: St }, Ct = function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }, wt = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } return function (t, n, i) { return n && e(t.prototype, n), i && e(t, i), t } }(), kt = function () { function e(t, n) { Ct(this, e), this.options = n || {}, this.self = t, this.init() } return wt(e, [{ key: "init", value: function () { var e, t; this.transmuxer && this.transmuxer.dispose(), this.transmuxer = new Et.Transmuxer(this.options), e = this.self, (t = this.transmuxer).on("data", function (t) { var n = t.initSegment; t.initSegment = { data: n.buffer, byteOffset: n.byteOffset, byteLength: n.byteLength }; var i = t.data; t.data = i.buffer, e.postMessage({ action: "data", segment: t, byteOffset: i.byteOffset, byteLength: i.byteLength }, [t.data]) }), t.captionStream && t.captionStream.on("data", function (t) { e.postMessage({ action: "caption", data: t }) }), t.on("done", function (t) { e.postMessage({ action: "done" }) }), t.on("gopInfo", function (t) { e.postMessage({ action: "gopInfo", gopInfo: t }) }), t.on("videoSegmentTimingInfo", function (t) { e.postMessage({ action: "videoSegmentTimingInfo", videoSegmentTimingInfo: t }) }) } }, { key: "push", value: function (e) { var t = new Uint8Array(e.data, e.byteOffset, e.byteLength); this.transmuxer.push(t) } }, { key: "reset", value: function () { this.init() } }, { key: "setTimestampOffset", value: function (e) { var t = e.timestampOffset || 0; this.transmuxer.setBaseMediaDecodeTime(Math.round(9e4 * t)) } }, { key: "setAudioAppendStart", value: function (e) { this.transmuxer.setAudioAppendStart(Math.ceil(9e4 * e.appendStart)) } }, { key: "flush", value: function (e) { this.transmuxer.flush() } }, { key: "resetCaptions", value: function () { this.transmuxer.resetCaptions() } }, { key: "alignGopsWith", value: function (e) { this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice()) } }]), e }(); new function (e) { e.onmessage = function (t) { "init" === t.data.action && t.data.options ? this.messageHandlers = new kt(e, t.data.options) : (this.messageHandlers || (this.messageHandlers = new kt(e)), t.data && t.data.action && "init" !== t.data.action && this.messageHandlers[t.data.action] && this.messageHandlers[t.data.action](t.data)) } }(n) }() }), ma = { videoCodec: "avc1", videoObjectTypeIndicator: ".4d400d", audioProfile: "2" }, ga = function (e) { return e.map(function (e) { return e.replace(/avc1\.(\d+)\.(\d+)/i, function (e, t, n) { return "avc1." + ("00" + Number(t).toString(16)).slice(-2) + "00" + ("00" + Number(n).toString(16)).slice(-2) }) }) }, va = function () { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : "", n = { codecCount: 0 }; return n.codecCount = t.split(",").length, n.codecCount = n.codecCount || 2, (e = /(^|\s|,)+(avc[13])([^ ,]*)/i.exec(t)) && (n.videoCodec = e[2], n.videoObjectTypeIndicator = e[3]), n.audioProfile = /(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t), n.audioProfile = n.audioProfile && n.audioProfile[2], n }, ya = function (e, t, n) { return e + "/" + t + '; codecs="' + n.filter(function (e) { return !!e }).join(", ") + '"' }, _a = function (e, t) { var n = function (e) { return e.segments && e.segments.length && e.segments[0].map ? "mp4" : "mp2t" }(t), i = function (e) { var t = e.attributes || {}; return t.CODECS ? va(t.CODECS) : ma }(t), r = t.attributes || {}, s = !0, a = !1; if (!t) return []; if (e.mediaGroups.AUDIO && r.AUDIO) { var o = e.mediaGroups.AUDIO[r.AUDIO]; if (o) for (var l in a = !0, s = !1, o) if (!o[l].uri && !o[l].playlists) { s = !0; break } } a && !i.audioProfile && (s || (i.audioProfile = function (e, t) { if (!e.mediaGroups.AUDIO || !t) return null; var n = e.mediaGroups.AUDIO[t]; if (!n) return null; for (var i in n) { var r = n[i]; if (r.default && r.playlists) return va(r.playlists[0].attributes.CODECS).audioProfile } return null }(e, r.AUDIO)), i.audioProfile || (es.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"), i.audioProfile = ma.audioProfile)); var u = {}; i.videoCodec && (u.video = "" + i.videoCodec + i.videoObjectTypeIndicator), i.audioProfile && (u.audio = "mp4a.40." + i.audioProfile); var c = ya("audio", n, [u.audio]), h = ya("video", n, [u.video]), d = ya("video", n, [u.video, u.audio]); return a ? !s && u.video ? [h, c] : s || u.video ? [d, c] : [c, c] : u.video ? [d] : [c] }, ba = function (e) { return /mp4a\.\d+.\d+/i.test(e) }, Ta = function (e) { return /avc1\.[\da-f]+/i.test(e) }, Sa = function (e, t, n) { if (null == t || !e.length) return []; var i = Math.ceil(9e4 * (t - n + 3)), r = void 0; for (r = 0; r < e.length && !(e[r].pts > i); r++); return e.slice(r) }, Ea = function (e, t, n) { var i = null, r = null, s = 0, a = [], o = []; if (!e && !t) return es.createTimeRange(); if (!e) return t.buffered; if (!t) return e.buffered; if (n) return e.buffered; if (0 === e.buffered.length && 0 === t.buffered.length) return es.createTimeRange(); for (var l = e.buffered, u = t.buffered, c = l.length; c--;)a.push({ time: l.start(c), type: "start" }), a.push({ time: l.end(c), type: "end" }); for (c = u.length; c--;)a.push({ time: u.start(c), type: "start" }), a.push({ time: u.end(c), type: "end" }); for (a.sort(function (e, t) { return e.time - t.time }), c = 0; c < a.length; c++)"start" === a[c].type ? 2 === ++s && (i = a[c].time) : "end" === a[c].type && 1 === --s && (r = a[c].time), null !== i && null !== r && (o.push([i, r]), i = null, r = null); return es.createTimeRanges(o) }, Ca = function (e) { function t(e, n) { ss(this, t); var i = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, es.EventTarget)); i.timestampOffset_ = 0, i.pendingBuffers_ = [], i.bufferUpdating_ = !1, i.mediaSource_ = e, i.codecs_ = n, i.audioCodec_ = null, i.videoCodec_ = null, i.audioDisabled_ = !1, i.appendAudioInitSegment_ = !0, i.gopBuffer_ = [], i.timeMapping_ = 0, i.safeAppend_ = es.browser.IE_VERSION >= 11; var r = { remux: !1, alignGopsAtEnd: i.safeAppend_ }; return i.codecs_.forEach(function (e) { ba(e) ? i.audioCodec_ = e : Ta(e) && (i.videoCodec_ = e) }), i.transmuxer_ = new pa, i.transmuxer_.postMessage({ action: "init", options: r }), i.transmuxer_.onmessage = function (e) { return "data" === e.data.action ? i.data_(e) : "done" === e.data.action ? i.done_(e) : "gopInfo" === e.data.action ? i.appendGopInfo_(e) : "videoSegmentTimingInfo" === e.data.action ? i.videoSegmentTimingInfo_(e.data.videoSegmentTimingInfo) : void 0 }, Object.defineProperty(i, "timestampOffset", { get: function () { return this.timestampOffset_ }, set: function (e) { "number" == typeof e && e >= 0 && (this.timestampOffset_ = e, this.appendAudioInitSegment_ = !0, this.gopBuffer_.length = 0, this.timeMapping_ = 0, this.transmuxer_.postMessage({ action: "setTimestampOffset", timestampOffset: e })) } }), Object.defineProperty(i, "appendWindowStart", { get: function () { return (this.videoBuffer_ || this.audioBuffer_).appendWindowStart }, set: function (e) { this.videoBuffer_ && (this.videoBuffer_.appendWindowStart = e), this.audioBuffer_ && (this.audioBuffer_.appendWindowStart = e) } }), Object.defineProperty(i, "updating", { get: function () { return !!(this.bufferUpdating_ || !this.audioDisabled_ && this.audioBuffer_ && this.audioBuffer_.updating || this.videoBuffer_ && this.videoBuffer_.updating) } }), Object.defineProperty(i, "buffered", { get: function () { return Ea(this.videoBuffer_, this.audioBuffer_, this.audioDisabled_) } }), i } return os(t, e), as(t, [{ key: "data_", value: function (e) { var t = e.data.segment; t.data = new Uint8Array(t.data, e.data.byteOffset, e.data.byteLength), t.initSegment = new Uint8Array(t.initSegment.data, t.initSegment.byteOffset, t.initSegment.byteLength), function (e, t, n) { var i = t.player_; if (n.captions && n.captions.length) for (var r in e.inbandTextTracks_ || (e.inbandTextTracks_ = {}), n.captionStreams) if (!e.inbandTextTracks_[r]) { i.tech_.trigger({ type: "usage", name: "hls-608" }); var s = i.textTracks().getTrackById(r); e.inbandTextTracks_[r] = s || i.addRemoteTextTrack({ kind: "captions", id: r, label: r }, !1).track } n.metadata && n.metadata.length && !e.metadataTrack_ && (e.metadataTrack_ = i.addRemoteTextTrack({ kind: "metadata", label: "Timed Metadata" }, !1).track, e.metadataTrack_.inBandMetadataTrackDispatchType = n.metadata.dispatchType) }(this, this.mediaSource_, t), this.pendingBuffers_.push(t) } }, { key: "done_", value: function (e) { "closed" !== this.mediaSource_.readyState ? this.processPendingSegments_() : this.pendingBuffers_.length = 0 } }, { key: "videoSegmentTimingInfo_", value: function (e) { var t = { start: { decode: e.start.dts / 9e4, presentation: e.start.pts / 9e4 }, end: { decode: e.end.dts / 9e4, presentation: e.end.pts / 9e4 }, baseMediaDecodeTime: e.baseMediaDecodeTime / 9e4 }; e.prependedContentDuration && (t.prependedContentDuration = e.prependedContentDuration / 9e4), this.trigger({ type: "videoSegmentTimingInfo", videoSegmentTimingInfo: t }) } }, { key: "createRealSourceBuffers_", value: function () { var e = this, t = ["audio", "video"]; t.forEach(function (n) { if (e[n + "Codec_"] && !e[n + "Buffer_"]) { var i = null; if (e.mediaSource_[n + "Buffer_"]) (i = e.mediaSource_[n + "Buffer_"]).updating = !1; else { var r = n + '/mp4;codecs="' + e[n + "Codec_"] + '"'; i = function (e, t) { var n = e.addSourceBuffer(t), i = Object.create(null); i.updating = !1, i.realBuffer_ = n; var r = function (e) { "function" == typeof n[e] ? i[e] = function () { return n[e].apply(n, arguments) } : void 0 === i[e] && Object.defineProperty(i, e, { get: function () { return n[e] }, set: function (t) { return n[e] = t } }) }; for (var s in n) r(s); return i }(e.mediaSource_.nativeMediaSource_, r), e.mediaSource_[n + "Buffer_"] = i } e[n + "Buffer_"] = i, ["update", "updatestart", "updateend"].forEach(function (r) { i.addEventListener(r, function () { if ("audio" !== n || !e.audioDisabled_) return "updateend" === r && (e[n + "Buffer_"].updating = !1), t.every(function (t) { return !("audio" !== t || !e.audioDisabled_) || (n === t || !e[t + "Buffer_"] || !e[t + "Buffer_"].updating) }) ? e.trigger(r) : void 0 }) }) } }) } }, { key: "appendBuffer", value: function (e) { if (this.bufferUpdating_ = !0, this.audioBuffer_ && this.audioBuffer_.buffered.length) { var t = this.audioBuffer_.buffered; this.transmuxer_.postMessage({ action: "setAudioAppendStart", appendStart: t.end(t.length - 1) }) } this.videoBuffer_ && this.transmuxer_.postMessage({ action: "alignGopsWith", gopsToAlignWith: Sa(this.gopBuffer_, this.mediaSource_.player_ ? this.mediaSource_.player_.currentTime() : null, this.timeMapping_) }), this.transmuxer_.postMessage({ action: "push", data: e.buffer, byteOffset: e.byteOffset, byteLength: e.byteLength }, [e.buffer]), this.transmuxer_.postMessage({ action: "flush" }) } }, { key: "appendGopInfo_", value: function (e) { this.gopBuffer_ = function (e, t, n) { if (!t.length) return e; if (n) return t.slice(); for (var i = t[0].pts, r = 0; r < e.length && !(e[r].pts >= i); r++); return e.slice(0, r).concat(t) }(this.gopBuffer_, e.data.gopInfo, this.safeAppend_) } }, { key: "remove", value: function (e, t) { if (this.videoBuffer_ && (this.videoBuffer_.updating = !0, this.videoBuffer_.remove(e, t), this.gopBuffer_ = function (e, t, n, i) { for (var r = Math.ceil(9e4 * (t - i)), s = Math.ceil(9e4 * (n - i)), a = e.slice(), o = e.length; o-- && !(e[o].pts <= s);); if (-1 === o) return a; for (var l = o + 1; l-- && !(e[l].pts <= r);); return l = Math.max(l, 0), a.splice(l, o - l + 1), a }(this.gopBuffer_, e, t, this.timeMapping_)), !this.audioDisabled_ && this.audioBuffer_ && (this.audioBuffer_.updating = !0, this.audioBuffer_.remove(e, t)), ea(e, t, this.metadataTrack_), this.inbandTextTracks_) for (var n in this.inbandTextTracks_) ea(e, t, this.inbandTextTracks_[n]) } }, { key: "processPendingSegments_", value: function () { var e = { video: { segments: [], bytes: 0 }, audio: { segments: [], bytes: 0 }, captions: [], metadata: [] }; if (!this.pendingBuffers_.length) return this.trigger("updateend"), void (this.bufferUpdating_ = !1); e = this.pendingBuffers_.reduce(function (e, t) { var n = t.type, i = t.data, r = t.initSegment; return e[n].segments.push(i), e[n].bytes += i.byteLength, e[n].initSegment = r, t.captions && (e.captions = e.captions.concat(t.captions)), t.info && (e[n].info = t.info), t.metadata && (e.metadata = e.metadata.concat(t.metadata)), e }, e), this.videoBuffer_ || this.audioBuffer_ || (0 === e.video.bytes && (this.videoCodec_ = null), 0 === e.audio.bytes && (this.audioCodec_ = null), this.createRealSourceBuffers_()), e.audio.info && this.mediaSource_.trigger({ type: "audioinfo", info: e.audio.info }), e.video.info && this.mediaSource_.trigger({ type: "videoinfo", info: e.video.info }), this.appendAudioInitSegment_ && (!this.audioDisabled_ && this.audioBuffer_ && (e.audio.segments.unshift(e.audio.initSegment), e.audio.bytes += e.audio.initSegment.byteLength), this.appendAudioInitSegment_ = !1); var t = !1; this.videoBuffer_ && e.video.bytes ? (e.video.segments.unshift(e.video.initSegment), e.video.bytes += e.video.initSegment.byteLength, this.concatAndAppendSegments_(e.video, this.videoBuffer_)) : !this.videoBuffer_ || !this.audioDisabled_ && this.audioBuffer_ || (t = !0), na(this, e.captions, e.metadata), !this.audioDisabled_ && this.audioBuffer_ && this.concatAndAppendSegments_(e.audio, this.audioBuffer_), this.pendingBuffers_.length = 0, t && this.trigger("updateend"), this.bufferUpdating_ = !1 } }, { key: "concatAndAppendSegments_", value: function (e, t) { var n = 0, i = void 0; if (e.bytes) { i = new Uint8Array(e.bytes), e.segments.forEach(function (e) { i.set(e, n), n += e.byteLength }); try { t.updating = !0, t.appendBuffer(i) } catch (e) { this.mediaSource_.player_ && this.mediaSource_.player_.error({ code: -3, type: "APPEND_BUFFER_ERR", message: e.message, originalError: e }) } } } }, { key: "abort", value: function () { this.videoBuffer_ && this.videoBuffer_.abort(), !this.audioDisabled_ && this.audioBuffer_ && this.audioBuffer_.abort(), this.transmuxer_ && this.transmuxer_.postMessage({ action: "reset" }), this.pendingBuffers_.length = 0, this.bufferUpdating_ = !1 } }]), t }(es.EventTarget), wa = function (e) { function t() { ss(this, t); var e = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)), n = void 0; for (n in e.nativeMediaSource_ = new r.a.MediaSource, e.nativeMediaSource_) n in t.prototype || "function" != typeof e.nativeMediaSource_[n] || (e[n] = e.nativeMediaSource_[n].bind(e.nativeMediaSource_)); return e.duration_ = NaN, Object.defineProperty(e, "duration", { get: function () { return this.duration_ === 1 / 0 ? this.duration_ : this.nativeMediaSource_.duration }, set: function (e) { this.duration_ = e, e === 1 / 0 || (this.nativeMediaSource_.duration = e) } }), Object.defineProperty(e, "seekable", { get: function () { return this.duration_ === 1 / 0 ? es.createTimeRanges([[0, this.nativeMediaSource_.duration]]) : this.nativeMediaSource_.seekable } }), Object.defineProperty(e, "readyState", { get: function () { return this.nativeMediaSource_.readyState } }), Object.defineProperty(e, "activeSourceBuffers", { get: function () { return this.activeSourceBuffers_ } }), e.sourceBuffers = [], e.activeSourceBuffers_ = [], e.updateActiveSourceBuffers_ = function () { if (e.activeSourceBuffers_.length = 0, 1 === e.sourceBuffers.length) { var t = e.sourceBuffers[0]; return t.appendAudioInitSegment_ = !0, t.audioDisabled_ = !t.audioCodec_, void e.activeSourceBuffers_.push(t) } for (var n = !1, i = !0, r = 0; r < e.player_.audioTracks().length; r++) { var s = e.player_.audioTracks()[r]; if (s.enabled && "main" !== s.kind) { n = !0, i = !1; break } } e.sourceBuffers.forEach(function (t, r) { if (t.appendAudioInitSegment_ = !0, t.videoCodec_ && t.audioCodec_) t.audioDisabled_ = n; else if (t.videoCodec_ && !t.audioCodec_) t.audioDisabled_ = !0, i = !1; else if (!t.videoCodec_ && t.audioCodec_ && (t.audioDisabled_ = r ? i : !i, t.audioDisabled_)) return; e.activeSourceBuffers_.push(t) }) }, e.onPlayerMediachange_ = function () { e.sourceBuffers.forEach(function (e) { e.appendAudioInitSegment_ = !0 }) }, e.onHlsReset_ = function () { e.sourceBuffers.forEach(function (e) { e.transmuxer_ && e.transmuxer_.postMessage({ action: "resetCaptions" }) }) }, e.onHlsSegmentTimeMapping_ = function (t) { e.sourceBuffers.forEach(function (e) { return e.timeMapping_ = t.mapping }) }, ["sourceopen", "sourceclose", "sourceended"].forEach(function (e) { this.nativeMediaSource_.addEventListener(e, this.trigger.bind(this)) }, e), e.on("sourceopen", function (t) { var n = a.a.querySelector('[src="' + e.url_ + '"]'); n && (e.player_ = es(n.parentNode), e.player_ && (e.player_.tech_.on("hls-reset", e.onHlsReset_), e.player_.tech_.on("hls-segment-time-mapping", e.onHlsSegmentTimeMapping_), e.player_.audioTracks && e.player_.audioTracks() && (e.player_.audioTracks().on("change", e.updateActiveSourceBuffers_), e.player_.audioTracks().on("addtrack", e.updateActiveSourceBuffers_), e.player_.audioTracks().on("removetrack", e.updateActiveSourceBuffers_)), e.player_.on("mediachange", e.onPlayerMediachange_))) }), e.on("sourceended", function (t) { for (var n = ta(e.duration), i = 0; i < e.sourceBuffers.length; i++) { var r = e.sourceBuffers[i], s = r.metadataTrack_ && r.metadataTrack_.cues; s && s.length && (s[s.length - 1].endTime = n) } }), e.on("sourceclose", function (e) { this.sourceBuffers.forEach(function (e) { e.transmuxer_ && e.transmuxer_.terminate() }), this.sourceBuffers.length = 0, this.player_ && (this.player_.audioTracks && this.player_.audioTracks() && (this.player_.audioTracks().off("change", this.updateActiveSourceBuffers_), this.player_.audioTracks().off("addtrack", this.updateActiveSourceBuffers_), this.player_.audioTracks().off("removetrack", this.updateActiveSourceBuffers_)), this.player_.el_ && this.player_.off("mediachange", this.onPlayerMediachange_), this.player_.tech_ && this.player_.tech_.el_ && (this.player_.tech_.off("hls-reset", this.onHlsReset_), this.player_.tech_.off("hls-segment-time-mapping", this.onHlsSegmentTimeMapping_))) }), e } return os(t, e), as(t, [{ key: "addSeekableRange_", value: function (e, t) { var n = void 0; if (this.duration !== 1 / 0) throw (n = new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity")).name = "InvalidStateError", n.code = 11, n; (t > this.nativeMediaSource_.duration || isNaN(this.nativeMediaSource_.duration)) && (this.nativeMediaSource_.duration = t) } }, { key: "addSourceBuffer", value: function (e) { var t = void 0, n = function (e) { var t = { type: "", parameters: {} }, n = e.trim().split(";"); return t.type = n.shift().trim(), n.forEach(function (e) { var n = e.trim().split("="); if (n.length > 1) { var i = n[0].replace(/"/g, "").trim(), r = n[1].replace(/"/g, "").trim(); t.parameters[i] = r } }), t }(e); if (/^(video|audio)\/mp2t$/i.test(n.type)) { var i = []; n.parameters && n.parameters.codecs && (i = n.parameters.codecs.split(","), i = (i = ga(i)).filter(function (e) { return ba(e) || Ta(e) })), 0 === i.length && (i = ["avc1.4d400d", "mp4a.40.2"]), t = new Ca(this, i), 0 !== this.sourceBuffers.length && (this.sourceBuffers[0].createRealSourceBuffers_(), t.createRealSourceBuffers_(), this.sourceBuffers[0].audioDisabled_ = !0) } else t = this.nativeMediaSource_.addSourceBuffer(e); return this.sourceBuffers.push(t), t } }]), t }(es.EventTarget), ka = 0; es.mediaSources = {}; var Aa = function (e, t) { var n = es.mediaSources[e]; if (!n) throw new Error("Media Source not found (Video.js)"); n.trigger({ type: "sourceopen", swfId: t }) }, xa = function () { return !!r.a.MediaSource && !!r.a.MediaSource.isTypeSupported && r.a.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"') }, Ia = function () { if (this.MediaSource = { open: Aa, supportsNativeMediaSources: xa }, xa()) return new wa; throw new Error("Cannot use create a virtual MediaSource for this video") }; Ia.open = Aa, Ia.supportsNativeMediaSources = xa; var Oa = { createObjectURL: function (e) { var t = void 0; return e instanceof wa ? (t = r.a.URL.createObjectURL(e.nativeMediaSource_), e.url_ = t, t) : e instanceof wa ? (t = "blob:vjs-media-source/" + ka, ka++, es.mediaSources[t] = e, t) : (t = r.a.URL.createObjectURL(e), e.url_ = t, t) } }; es.MediaSource = Ia, es.URL = Oa; var Da = es.EventTarget, La = es.mergeOptions, Pa = function (e, t) { for (var n = void 0, i = La(e, { duration: t.duration, minimumUpdatePeriod: t.minimumUpdatePeriod }), r = 0; r < t.playlists.length; r++) { var s = ps(i, t.playlists[r]); s ? i = s : n = !0 } return fs(t, function (e, t, r, s) { if (e.playlists && e.playlists.length) { var a = e.playlists[0].uri, o = ps(i, e.playlists[0]); o && ((i = o).mediaGroups[t][r][s].playlists[0] = i.playlists[a], n = !1) } }), n ? null : i }, Na = function (e) { var t = e.byterange.offset + e.byterange.length - 1; return e.uri + "-" + e.byterange.offset + "-" + t }, Ra = function (e, t) { var n, i, r = {}; for (var s in e) { var a = e[s].sidx; if (a) { var o = Na(a); if (!t[o]) break; var l = t[o].sidxInfo; n = l, i = a, (Boolean(!n.map && !i.map) || Boolean(n.map && i.map && n.map.byterange.offset === i.map.byterange.offset && n.map.byterange.length === i.map.byterange.length)) && n.uri === i.uri && n.byterange.offset === i.byterange.offset && n.byterange.length === i.byterange.length && (r[o] = t[o]) } } return r }, Ma = function (e, t, n, i, r) { var s = { uri: rs(i.handleManifestRedirects, e.resolvedUri), byterange: e.byterange, playlist: t }; return n(es.mergeOptions(s, { responseType: "arraybuffer", headers: js(s) }), r) }, Ua = function (e) { function t(e, n) { var i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, r = arguments[3]; ss(this, t); var s = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)), a = i.withCredentials, o = void 0 !== a && a, l = i.handleManifestRedirects, u = void 0 !== l && l; if (s.hls_ = n, s.withCredentials = o, s.handleManifestRedirects = u, !e) throw new Error("A non-empty playlist URL or playlist is required"); return s.on("minimumUpdatePeriod", function () { s.refreshXml_() }), s.on("mediaupdatetimeout", function () { s.refreshMedia_(s.media().uri) }), s.state = "HAVE_NOTHING", s.loadedPlaylists_ = {}, "string" == typeof e ? (s.srcUrl = e, s.sidxMapping_ = {}, ls(s)) : (s.setupChildLoader(r, e), s) } return os(t, Da), as(t, [{ key: "setupChildLoader", value: function (e, t) { this.masterPlaylistLoader_ = e, this.childPlaylist_ = t } }, { key: "dispose", value: function () { this.stopRequest(), this.loadedPlaylists_ = {}, r.a.clearTimeout(this.minimumUpdatePeriodTimeout_), r.a.clearTimeout(this.mediaRequest_), r.a.clearTimeout(this.mediaUpdateTimeout) } }, { key: "hasPendingRequest", value: function () { return this.request || this.mediaRequest_ } }, { key: "stopRequest", value: function () { if (this.request) { var e = this.request; this.request = null, e.onreadystatechange = null, e.abort() } } }, { key: "sidxRequestFinished_", value: function (e, t, n, i) { var r = this; return function (s, a) { if (r.request) { if (r.request = null, s) return r.error = { status: a.status, message: "DASH playlist request error at URL: " + e.uri, response: a.response, code: 2 }, n && (r.state = n), r.trigger("error"), i(t, null); var o = new Uint8Array(a.response), l = A.a.parseSidx(o.subarray(8)); return i(t, l) } } } }, { key: "media", value: function (e) { var t = this; if (!e) return this.media_; if ("HAVE_NOTHING" === this.state) throw new Error("Cannot switch media playlist from " + this.state); var n = this.state; if ("string" == typeof e) { if (!this.master.playlists[e]) throw new Error("Unknown playlist URI: " + e); e = this.master.playlists[e] } var i = !this.media_ || e.uri !== this.media_.uri; if (i && this.loadedPlaylists_[e.uri] && this.loadedPlaylists_[e.uri].endList) return this.state = "HAVE_METADATA", this.media_ = e, void (i && (this.trigger("mediachanging"), this.trigger("mediachange"))); if (i) if (this.media_ && this.trigger("mediachanging"), e.sidx) { var s = void 0, a = void 0; this.masterPlaylistLoader_ ? (s = this.masterPlaylistLoader_.master, a = this.masterPlaylistLoader_.sidxMapping_) : (s = this.master, a = this.sidxMapping_); var o = Na(e.sidx); a[o] = { sidxInfo: e.sidx }, this.request = Ma(e.sidx, e, this.hls_.xhr, { handleManifestRedirects: this.handleManifestRedirects }, this.sidxRequestFinished_(e, s, n, function (i, r) { if (!i || !r) throw new Error("failed to request sidx"); a[o].sidx = r, t.haveMetadata({ startingState: n, playlist: i.playlists[e.uri] }) })) } else this.mediaRequest_ = r.a.setTimeout(this.haveMetadata.bind(this, { startingState: n, playlist: e }), 0) } }, { key: "haveMetadata", value: function (e) { var t = e.startingState, n = e.playlist; this.state = "HAVE_METADATA", this.loadedPlaylists_[n.uri] = n, this.mediaRequest_ = null, this.refreshMedia_(n.uri), "HAVE_MASTER" === t ? this.trigger("loadedmetadata") : this.trigger("mediachange") } }, { key: "pause", value: function () { this.stopRequest(), r.a.clearTimeout(this.mediaUpdateTimeout), r.a.clearTimeout(this.minimumUpdatePeriodTimeout_), "HAVE_NOTHING" === this.state && (this.started = !1) } }, { key: "load", value: function (e) { var t = this; r.a.clearTimeout(this.mediaUpdateTimeout), r.a.clearTimeout(this.minimumUpdatePeriodTimeout_); var n = this.media(); if (e) { var i = n ? n.targetDuration / 2 * 1e3 : 5e3; this.mediaUpdateTimeout = r.a.setTimeout(function () { return t.load() }, i) } else this.started ? this.trigger("loadedplaylist") : this.start() } }, { key: "parseMasterXml", value: function () { var e = Object(w.a)(this.masterXml_, { manifestUri: this.srcUrl, clientOffset: this.clientOffset_, sidxMapping: this.sidxMapping_ }); e.uri = this.srcUrl; for (var t = 0; t < e.playlists.length; t++) { var n = "placeholder-uri-" + t; e.playlists[t].uri = n, e.playlists[n] = e.playlists[t] } return fs(e, function (t, n, i, r) { if (t.playlists && t.playlists.length) { var s = "placeholder-uri-" + n + "-" + i + "-" + r; t.playlists[0].uri = s, e.playlists[s] = t.playlists[0] } }), ms(e), gs(e), e } }, { key: "start", value: function () { var e = this; this.started = !0, this.masterPlaylistLoader_ ? this.mediaRequest_ = r.a.setTimeout(this.haveMaster_.bind(this), 0) : this.request = this.hls_.xhr({ uri: this.srcUrl, withCredentials: this.withCredentials }, function (t, n) { if (e.request) { if (e.request = null, t) return e.error = { status: n.status, message: "DASH playlist request error at URL: " + e.srcUrl, responseText: n.responseText, code: 2 }, "HAVE_NOTHING" === e.state && (e.started = !1), e.trigger("error"); e.masterXml_ = n.responseText, n.responseHeaders && n.responseHeaders.date ? e.masterLoaded_ = Date.parse(n.responseHeaders.date) : e.masterLoaded_ = Date.now(), e.srcUrl = rs(e.handleManifestRedirects, e.srcUrl, n), e.syncClientServerClock_(e.onClientServerClockSync_.bind(e)) } }) } }, { key: "syncClientServerClock_", value: function (e) { var t = this, n = Object(w.b)(this.masterXml_); return null === n ? (this.clientOffset_ = this.masterLoaded_ - Date.now(), e()) : "DIRECT" === n.method ? (this.clientOffset_ = n.value - Date.now(), e()) : void (this.request = this.hls_.xhr({ uri: is(this.srcUrl, n.value), method: n.method, withCredentials: this.withCredentials }, function (i, r) { if (t.request) { if (i) return t.clientOffset_ = t.masterLoaded_ - Date.now(), e(); var s = void 0; s = "HEAD" === n.method ? r.responseHeaders && r.responseHeaders.date ? Date.parse(r.responseHeaders.date) : t.masterLoaded_ : Date.parse(r.responseText), t.clientOffset_ = s - Date.now(), e() } })) } }, { key: "haveMaster_", value: function () { this.state = "HAVE_MASTER", this.mediaRequest_ = null, this.masterPlaylistLoader_ ? this.media_ || this.media(this.childPlaylist_) : (this.master = this.parseMasterXml(), this.trigger("loadedplaylist")) } }, { key: "onClientServerClockSync_", value: function () { var e = this; this.haveMaster_(), this.hasPendingRequest() || this.media_ || this.media(this.master.playlists[0]), this.master && this.master.minimumUpdatePeriod && (this.minimumUpdatePeriodTimeout_ = r.a.setTimeout(function () { e.trigger("minimumUpdatePeriod") }, this.master.minimumUpdatePeriod)) } }, { key: "refreshXml_", value: function () { var e = this; this.request = this.hls_.xhr({ uri: this.srcUrl, withCredentials: this.withCredentials }, function (t, n) { if (e.request) { if (e.request = null, t) return e.error = { status: n.status, message: "DASH playlist request error at URL: " + e.srcUrl, responseText: n.responseText, code: 2 }, "HAVE_NOTHING" === e.state && (e.started = !1), e.trigger("error"); e.masterXml_ = n.responseText, e.sidxMapping_ = function (e, t, n, i) { var r = Object(w.a)(e, { manifestUri: t, clientOffset: n }), s = Ra(r.playlists, i); return fs(r, function (e, t, n, r) { if (e.playlists && e.playlists.length) { var a = e.playlists; s = La(s, Ra(a, i)) } }), s }(e.masterXml_, e.srcUrl, e.clientOffset_, e.sidxMapping_); var i = e.parseMasterXml(), s = Pa(e.master, i), a = e.media().sidx; if (s) if (a) { var o = Na(a); if (!e.sidxMapping_[o]) { var l = e.media(); e.request = Ma(l.sidx, l, e.hls_.xhr, { handleManifestRedirects: e.handleManifestRedirects }, e.sidxRequestFinished_(l, i, e.state, function (t, n) { if (!t || !n) throw new Error("failed to request sidx on minimumUpdatePeriod"); e.sidxMapping_[o].sidx = n, e.minimumUpdatePeriodTimeout_ = r.a.setTimeout(function () { e.trigger("minimumUpdatePeriod") }, e.master.minimumUpdatePeriod), e.refreshMedia_(e.media().uri) })) } } else e.master = s; e.minimumUpdatePeriodTimeout_ = r.a.setTimeout(function () { e.trigger("minimumUpdatePeriod") }, e.master.minimumUpdatePeriod) } }) } }, { key: "refreshMedia_", value: function (e) { var t = this; if (!e) throw new Error("refreshMedia_ must take a media uri"); var n = void 0, i = void 0; this.masterPlaylistLoader_ ? (n = this.masterPlaylistLoader_.master, i = this.masterPlaylistLoader_.parseMasterXml()) : (n = this.master, i = this.parseMasterXml()); var s = Pa(n, i); s ? (this.masterPlaylistLoader_ ? this.masterPlaylistLoader_.master = s : this.master = s, this.media_ = s.playlists[e]) : (this.media_ = i.playlists[e], this.trigger("playlistunchanged")), this.media().endList || (this.mediaUpdateTimeout = r.a.setTimeout(function () { t.trigger("mediaupdatetimeout") }, vs(this.media(), !!s))), this.trigger("loadedplaylist") } }]), t }(), ja = function (e) { return es.log.debug ? es.log.debug.bind(es, "VHS:", e + " >") : function () { } }; function Ba() { } var Fa = function () { function e(t, n, i, r) { ss(this, e), this.callbacks_ = [], this.pendingCallback_ = null, this.timestampOffset_ = 0, this.mediaSource = t, this.processedAppend_ = !1, this.type_ = i, this.mimeType_ = n, this.logger_ = ja("SourceUpdater[" + i + "][" + n + "]"), "closed" === t.readyState ? t.addEventListener("sourceopen", this.createSourceBuffer_.bind(this, n, r)) : this.createSourceBuffer_(n, r) } return as(e, [{ key: "createSourceBuffer_", value: function (e, t) { var n = this; this.sourceBuffer_ = this.mediaSource.addSourceBuffer(e), this.logger_("created SourceBuffer"), t && (t.trigger("sourcebufferadded"), this.mediaSource.sourceBuffers.length < 2) ? t.on("sourcebufferadded", function () { n.start_() }) : this.start_() } }, { key: "start_", value: function () { var e = this; this.started_ = !0, this.onUpdateendCallback_ = function () { var t = e.pendingCallback_; e.pendingCallback_ = null, e.sourceBuffer_.removing = !1, e.logger_("buffered [" + Js(e.buffered()) + "]"), t && t(), e.runCallback_() }, this.sourceBuffer_.addEventListener("updateend", this.onUpdateendCallback_), this.runCallback_() } }, { key: "abort", value: function (e) { var t = this; this.processedAppend_ && this.queueCallback_(function () { t.sourceBuffer_.abort() }, e) } }, { key: "appendBuffer", value: function (e, t) { var n = this; this.processedAppend_ = !0, this.queueCallback_(function () { e.videoSegmentTimingInfoCallback && n.sourceBuffer_.addEventListener("videoSegmentTimingInfo", e.videoSegmentTimingInfoCallback), n.sourceBuffer_.appendBuffer(e.bytes) }, function () { e.videoSegmentTimingInfoCallback && n.sourceBuffer_.removeEventListener("videoSegmentTimingInfo", e.videoSegmentTimingInfoCallback), t() }) } }, { key: "buffered", value: function () { return this.sourceBuffer_ ? this.sourceBuffer_.buffered : es.createTimeRanges() } }, { key: "remove", value: function (e, t) { var n = this, i = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : Ba; this.processedAppend_ && this.queueCallback_(function () { n.logger_("remove [" + e + " => " + t + "]"), n.sourceBuffer_.removing = !0, n.sourceBuffer_.remove(e, t) }, i) } }, { key: "updating", value: function () { return !this.sourceBuffer_ || this.sourceBuffer_.updating || !!this.pendingCallback_ && this.pendingCallback_ !== Ba } }, { key: "timestampOffset", value: function (e) { var t = this; return void 0 !== e && (this.queueCallback_(function () { t.sourceBuffer_.timestampOffset = e, t.runCallback_() }), this.timestampOffset_ = e), this.timestampOffset_ } }, { key: "queueCallback_", value: function (e, t) { this.callbacks_.push([e.bind(this), t]), this.runCallback_() } }, { key: "runCallback_", value: function () { var e = void 0; !this.updating() && this.callbacks_.length && this.started_ && (e = this.callbacks_.shift(), this.pendingCallback_ = e[1], e[0]()) } }, { key: "dispose", value: function () { var e = this, t = function t() { e.sourceBuffer_ && "open" === e.mediaSource.readyState && e.sourceBuffer_.abort(), e.sourceBuffer_.removeEventListener("updateend", t) }; this.sourceBuffer_.removeEventListener("updateend", this.onUpdateendCallback_), this.sourceBuffer_.removing ? this.sourceBuffer_.addEventListener("updateend", t) : t() } }]), e }(), Ha = { GOAL_BUFFER_LENGTH: 30, MAX_GOAL_BUFFER_LENGTH: 60, GOAL_BUFFER_LENGTH_RATE: 1, INITIAL_BANDWIDTH: 4194304, BANDWIDTH_VARIANCE: 1.2, BUFFER_LOW_WATER_LINE: 0, MAX_BUFFER_LOW_WATER_LINE: 30, BUFFER_LOW_WATER_LINE_RATE: 1 }, qa = 2, Va = -101, Wa = -102, Ga = function (e) { e.forEach(function (e) { e.abort() }) }, za = function (e, t) { return t.timedout ? { status: t.status, message: "HLS request timed-out at URL: " + t.uri, code: Va, xhr: t } : t.aborted ? { status: t.status, message: "HLS request aborted at URL: " + t.uri, code: Wa, xhr: t } : e ? { status: t.status, message: "HLS request errored at URL: " + t.uri, code: qa, xhr: t } : null }, Ka = function (e, t, n) { var i = 0, r = !1; return function (s, a) { if (!r) return s ? (r = !0, Ga(e), n(s, a)) : (i += 1) === e.length ? (a.endOfAllRequests = Date.now(), a.encryptedBytes ? function (e, t, n) { e.addEventListener("message", function i(r) { if (r.data.source === t.requestId) { e.removeEventListener("message", i); var s = r.data.decrypted; return t.bytes = new Uint8Array(s.bytes, s.byteOffset, s.byteLength), n(null, t) } }); var i = void 0; i = t.key.bytes.slice ? t.key.bytes.slice() : new Uint32Array(Array.prototype.slice.call(t.key.bytes)), e.postMessage(qs({ source: t.requestId, encrypted: t.encryptedBytes, key: i, iv: t.key.iv }), [t.encryptedBytes.buffer, i.buffer]) }(t, a, n) : n(null, a)) : void 0 } }, Xa = function (e, t) { return function (n) { var i, r, s; return e.stats = es.mergeOptions(e.stats, (r = (i = n).target, (s = { bandwidth: 1 / 0, bytesReceived: 0, roundTripTime: Date.now() - r.requestTime || 0 }).bytesReceived = i.loaded, s.bandwidth = Math.floor(s.bytesReceived / s.roundTripTime * 8 * 1e3), s)), !e.stats.firstBytesReceivedAt && e.stats.bytesReceived && (e.stats.firstBytesReceivedAt = Date.now()), t(n, e) } }, Ya = function (e, t, n, i, r, s, a) { var o = [], l = Ka(o, n, a); if (r.key && !r.key.bytes) { var u = e(es.mergeOptions(t, { uri: r.key.resolvedUri, responseType: "arraybuffer" }), function (e, t) { return function (n, i) { var r = i.response, s = za(n, i); if (s) return t(s, e); if (16 !== r.byteLength) return t({ status: i.status, message: "Invalid HLS key at URL: " + i.uri, code: qa, xhr: i }, e); var a = new DataView(r); return e.key.bytes = new Uint32Array([a.getUint32(0), a.getUint32(4), a.getUint32(8), a.getUint32(12)]), t(null, e) } }(r, l)); o.push(u) } if (r.map && !r.map.bytes) { var c = e(es.mergeOptions(t, { uri: r.map.resolvedUri, responseType: "arraybuffer", headers: js(r.map) }), function (e, t, n) { return function (i, r) { var s = r.response, a = za(i, r); return a ? n(a, e) : 0 === s.byteLength ? n({ status: r.status, message: "Empty HLS segment content at URL: " + r.uri, code: qa, xhr: r }, e) : (e.map.bytes = new Uint8Array(r.response), t && !t.isInitialized() && t.init(), e.map.timescales = I.a.timescale(e.map.bytes), e.map.videoTrackIds = I.a.videoTrackIds(e.map.bytes), n(null, e)) } }(r, i, l)); o.push(c) } var h = e(es.mergeOptions(t, { uri: r.resolvedUri, responseType: "arraybuffer", headers: js(r) }), function (e, t, n) { return function (i, r) { var s = r.response, a = za(i, r), o = void 0; return a ? n(a, e) : 0 === s.byteLength ? n({ status: r.status, message: "Empty HLS segment content at URL: " + r.uri, code: qa, xhr: r }, e) : (e.stats = function (e) { return { bandwidth: e.bandwidth, bytesReceived: e.bytesReceived || 0, roundTripTime: e.roundTripTime || 0 } }(r), e.key ? e.encryptedBytes = new Uint8Array(r.response) : e.bytes = new Uint8Array(r.response), t && e.map && e.map.bytes && (t.isInitialized() || t.init(), (o = t.parse(e.bytes, e.map.videoTrackIds, e.map.timescales)) && o.captions && (e.captionStreams = o.captionStreams, e.fmp4Captions = o.captions)), n(null, e)) } }(r, i, l)); return h.addEventListener("progress", Xa(r, s)), o.push(h), function () { return Ga(o) } }, $a = function (e, t) { var n; return e && (n = r.a.getComputedStyle(e)) ? n[t] : "" }, Qa = function (e, t) { var n = e.slice(); e.sort(function (e, i) { var r = t(e, i); return 0 === r ? n.indexOf(e) - n.indexOf(i) : r }) }, Ja = function (e, t) { var n = void 0, i = void 0; return e.attributes.BANDWIDTH && (n = e.attributes.BANDWIDTH), n = n || r.a.Number.MAX_VALUE, t.attributes.BANDWIDTH && (i = t.attributes.BANDWIDTH), n - (i = i || r.a.Number.MAX_VALUE) }, Za = function (e) { return "number" == typeof e && isFinite(e) }, eo = function (e) { function t(e) { ss(this, t); var n = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); if (!e) throw new TypeError("Initialization settings are required"); if ("function" != typeof e.currentTime) throw new TypeError("No currentTime getter specified"); if (!e.mediaSource) throw new TypeError("No MediaSource specified"); return n.bandwidth = e.bandwidth, n.throughput = { rate: 0, count: 0 }, n.roundTrip = NaN, n.resetStats_(), n.mediaIndex = null, n.hasPlayed_ = e.hasPlayed, n.currentTime_ = e.currentTime, n.seekable_ = e.seekable, n.seeking_ = e.seeking, n.duration_ = e.duration, n.mediaSource_ = e.mediaSource, n.hls_ = e.hls, n.loaderType_ = e.loaderType, n.startingMedia_ = void 0, n.segmentMetadataTrack_ = e.segmentMetadataTrack, n.goalBufferLength_ = e.goalBufferLength, n.sourceType_ = e.sourceType, n.inbandTextTracks_ = e.inbandTextTracks, n.state_ = "INIT", n.checkBufferTimeout_ = null, n.error_ = void 0, n.currentTimeline_ = -1, n.pendingSegment_ = null, n.mimeType_ = null, n.sourceUpdater_ = null, n.xhrOptions_ = null, n.activeInitSegmentId_ = null, n.initSegments_ = {}, n.cacheEncryptionKeys_ = e.cacheEncryptionKeys, n.keyCache_ = {}, "main" === n.loaderType_ ? n.captionParser_ = new D.a : n.captionParser_ = null, n.decrypter_ = e.decrypter, n.syncController_ = e.syncController, n.syncPoint_ = { segmentIndex: 0, time: 0 }, n.syncController_.on("syncinfoupdate", function () { return n.trigger("syncinfoupdate") }), n.mediaSource_.addEventListener("sourceopen", function () { return n.ended_ = !1 }), n.fetchAtBuffer_ = !1, n.logger_ = ja("SegmentLoader[" + n.loaderType_ + "]"), Object.defineProperty(n, "state", { get: function () { return this.state_ }, set: function (e) { e !== this.state_ && (this.logger_(this.state_ + " -> " + e), this.state_ = e) } }), n } return os(t, e), as(t, [{ key: "resetStats_", value: function () { this.mediaBytesTransferred = 0, this.mediaRequests = 0, this.mediaRequestsAborted = 0, this.mediaRequestsTimedout = 0, this.mediaRequestsErrored = 0, this.mediaTransferDuration = 0, this.mediaSecondsLoaded = 0 } }, { key: "dispose", value: function () { this.state = "DISPOSED", this.pause(), this.abort_(), this.sourceUpdater_ && this.sourceUpdater_.dispose(), this.resetStats_(), this.captionParser_ && this.captionParser_.reset() } }, { key: "abort", value: function () { "WAITING" === this.state ? (this.abort_(), this.state = "READY", this.paused() || this.monitorBuffer_()) : this.pendingSegment_ && (this.pendingSegment_ = null) } }, { key: "abort_", value: function () { this.pendingSegment_ && this.pendingSegment_.abortRequests(), this.pendingSegment_ = null } }, { key: "error", value: function (e) { return void 0 !== e && (this.error_ = e), this.pendingSegment_ = null, this.error_ } }, { key: "endOfStream", value: function () { this.ended_ = !0, this.pause(), this.trigger("ended") } }, { key: "buffered_", value: function () { return this.sourceUpdater_ ? this.sourceUpdater_.buffered() : es.createTimeRanges() } }, { key: "initSegment", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (!e) return null; var n = Vs(e), i = this.initSegments_[n]; return t && !i && e.bytes && (this.initSegments_[n] = i = { resolvedUri: e.resolvedUri, byterange: e.byterange, bytes: e.bytes, timescales: e.timescales, videoTrackIds: e.videoTrackIds }), i || e } }, { key: "segmentKey", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (!e) return null; var n = Ws(e), i = this.keyCache_[n]; this.cacheEncryptionKeys_ && t && !i && e.bytes && (this.keyCache_[n] = i = { resolvedUri: e.resolvedUri, bytes: e.bytes }); var r = { resolvedUri: (i || e).resolvedUri }; return i && (r.bytes = i.bytes), r } }, { key: "couldBeginLoading_", value: function () { return this.playlist_ && (this.sourceUpdater_ || this.mimeType_ && "INIT" === this.state) && !this.paused() } }, { key: "load", value: function () { if (this.monitorBuffer_(), this.playlist_) { if (this.syncController_.setDateTimeMapping(this.playlist_), "INIT" === this.state && this.couldBeginLoading_()) return this.init_(); !this.couldBeginLoading_() || "READY" !== this.state && "INIT" !== this.state || (this.state = "READY") } } }, { key: "init_", value: function () { return this.state = "READY", this.sourceUpdater_ = new Fa(this.mediaSource_, this.mimeType_, this.loaderType_, this.sourceBufferEmitter_), this.resetEverything(), this.monitorBuffer_() } }, { key: "playlist", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; if (e) { var n = this.playlist_, i = this.pendingSegment_; this.playlist_ = e, this.xhrOptions_ = t, this.hasPlayed_() || (e.syncInfo = { mediaSequence: e.mediaSequence, time: 0 }); var r = null; if (n && (n.id ? r = n.id : n.uri && (r = n.uri)), this.logger_("playlist update [" + r + " => " + (e.id || e.uri) + "]"), this.trigger("syncinfoupdate"), "INIT" === this.state && this.couldBeginLoading_()) return this.init_(); if (n && n.uri === e.uri) { var s = e.mediaSequence - n.mediaSequence; this.logger_("live window shift [" + s + "]"), null !== this.mediaIndex && (this.mediaIndex -= s), i && (i.mediaIndex -= s, i.mediaIndex >= 0 && (i.segment = e.segments[i.mediaIndex])), this.syncController_.saveExpiredSegmentInfo(n, e) } else null !== this.mediaIndex && this.resyncLoader() } } }, { key: "pause", value: function () { this.checkBufferTimeout_ && (r.a.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = null) } }, { key: "paused", value: function () { return null === this.checkBufferTimeout_ } }, { key: "mimeType", value: function (e, t) { this.mimeType_ || (this.mimeType_ = e, this.sourceBufferEmitter_ = t, "INIT" === this.state && this.couldBeginLoading_() && this.init_()) } }, { key: "resetEverything", value: function (e) { this.ended_ = !1, this.resetLoader(), this.remove(0, this.duration_(), e), this.captionParser_ && this.captionParser_.clearAllCaptions(), this.trigger("reseteverything") } }, { key: "resetLoader", value: function () { this.fetchAtBuffer_ = !1, this.resyncLoader() } }, { key: "resyncLoader", value: function () { this.mediaIndex = null, this.syncPoint_ = null, this.abort() } }, { key: "remove", value: function (e, t, n) { if (this.sourceUpdater_ && this.sourceUpdater_.remove(e, t, n), ea(e, t, this.segmentMetadataTrack_), this.inbandTextTracks_) for (var i in this.inbandTextTracks_) ea(e, t, this.inbandTextTracks_[i]) } }, { key: "monitorBuffer_", value: function () { this.checkBufferTimeout_ && r.a.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = r.a.setTimeout(this.monitorBufferTick_.bind(this), 1) } }, { key: "monitorBufferTick_", value: function () { "READY" === this.state && this.fillBuffer_(), this.checkBufferTimeout_ && r.a.clearTimeout(this.checkBufferTimeout_), this.checkBufferTimeout_ = r.a.setTimeout(this.monitorBufferTick_.bind(this), 500) } }, { key: "fillBuffer_", value: function () { if (!this.sourceUpdater_.updating()) { this.syncPoint_ || (this.syncPoint_ = this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_())); var e = this.checkBuffer_(this.buffered_(), this.playlist_, this.mediaIndex, this.hasPlayed_(), this.currentTime_(), this.syncPoint_); e && (this.isEndOfStream_(e.mediaIndex) ? this.endOfStream() : (e.mediaIndex !== this.playlist_.segments.length - 1 || "ended" !== this.mediaSource_.readyState || this.seeking_()) && (e.timeline !== this.currentTimeline_ && (this.syncController_.reset(), e.timestampOffset = e.startOfSegment, this.captionParser_ && this.captionParser_.clearAllCaptions()), this.loadSegment_(e))) } } }, { key: "isEndOfStream_", value: function (e) { return function (e, t, n) { if (!e || !t) return !1; var i = n === e.segments.length; return e.endList && "open" === t.readyState && i }(arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : this.playlist_, this.mediaSource_, e) && !this.sourceUpdater_.updating() } }, { key: "checkBuffer_", value: function (e, t, n, i, r, s) { var a = 0, o = void 0; e.length && (a = e.end(e.length - 1)); var l = Math.max(0, a - r); if (!t.segments.length) return null; if (l >= this.goalBufferLength_()) return null; if (!i && l >= 1) return null; if (null === s) return n = this.getSyncSegmentCandidate_(t), this.generateSegmentInfo_(t, n, null, !0); if (null !== n) { t.segments[n]; return o = a, this.generateSegmentInfo_(t, n + 1, o, !1) } if (this.fetchAtBuffer_) { var u = Ns.getMediaInfoForTime(t, a, s.segmentIndex, s.time); n = u.mediaIndex, o = u.startTime } else { var c = Ns.getMediaInfoForTime(t, r, s.segmentIndex, s.time); n = c.mediaIndex, o = c.startTime } return this.generateSegmentInfo_(t, n, o, !1) } }, { key: "getSyncSegmentCandidate_", value: function (e) { var t = this; if (-1 === this.currentTimeline_) return 0; var n = e.segments.map(function (e, t) { return { timeline: e.timeline, segmentIndex: t } }).filter(function (e) { return e.timeline === t.currentTimeline_ }); return n.length ? n[Math.min(n.length - 1, 1)].segmentIndex : Math.max(e.segments.length - 1, 0) } }, { key: "generateSegmentInfo_", value: function (e, t, n, i) { if (t < 0 || t >= e.segments.length) return null; var r = e.segments[t]; return { requestId: "segment-loader-" + Math.random(), uri: r.resolvedUri, mediaIndex: t, isSyncRequest: i, startOfSegment: n, playlist: e, bytes: null, encryptedBytes: null, timestampOffset: null, timeline: r.timeline, duration: r.duration, segment: r } } }, { key: "abortRequestEarly_", value: function (e) { if (this.hls_.tech_.paused() || !this.xhrOptions_.timeout || !this.playlist_.attributes.BANDWIDTH) return !1; if (Date.now() - (e.firstBytesReceivedAt || Date.now()) < 1e3) return !1; var t = this.currentTime_(), n = e.bandwidth, i = this.pendingSegment_.duration, r = Ns.estimateSegmentRequestTime(i, n, this.playlist_, e.bytesReceived), s = function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 1; return ((e.length ? e.end(e.length - 1) : 0) - t) / n }(this.buffered_(), t, this.hls_.tech_.playbackRate()) - 1; if (r <= s) return !1; var a = function (e) { var t = e.master, n = e.currentTime, i = e.bandwidth, r = e.duration, s = e.segmentDuration, a = e.timeUntilRebuffer, o = e.currentTimeline, l = e.syncController, u = t.playlists.filter(function (e) { return !Ns.isIncompatible(e) }), c = u.filter(Ns.isEnabled); c.length || (c = u.filter(function (e) { return !Ns.isDisabled(e) })); var h = c.filter(Ns.hasAttribute.bind(null, "BANDWIDTH")).map(function (e) { var t = l.getSyncPoint(e, r, o, n) ? 1 : 2; return { playlist: e, rebufferingImpact: Ns.estimateSegmentRequestTime(s, i, e) * t - a } }), d = h.filter(function (e) { return e.rebufferingImpact <= 0 }); return Qa(d, function (e, t) { return Ja(t.playlist, e.playlist) }), d.length ? d[0] : (Qa(h, function (e, t) { return e.rebufferingImpact - t.rebufferingImpact }), h[0] || null) }({ master: this.hls_.playlists.master, currentTime: t, bandwidth: n, duration: this.duration_(), segmentDuration: i, timeUntilRebuffer: s, currentTimeline: this.currentTimeline_, syncController: this.syncController_ }); if (a) { var o = r - s - a.rebufferingImpact, l = .5; return s <= 1 / 30 && (l = 1), !a.playlist || a.playlist.uri === this.playlist_.uri || o < l ? !1 : (this.bandwidth = a.playlist.attributes.BANDWIDTH * Ha.BANDWIDTH_VARIANCE + 1, this.abort(), this.trigger("earlyabort"), !0) } } }, { key: "handleProgress_", value: function (e, t) { this.pendingSegment_ && t.requestId === this.pendingSegment_.requestId && !this.abortRequestEarly_(t.stats) && this.trigger("progress") } }, { key: "loadSegment_", value: function (e) { this.state = "WAITING", this.pendingSegment_ = e, this.trimBackBuffer_(e), e.abortRequests = Ya(this.hls_.xhr, this.xhrOptions_, this.decrypter_, this.captionParser_, this.createSimplifiedSegmentObj_(e), this.handleProgress_.bind(this), this.segmentRequestFinished_.bind(this)) } }, { key: "trimBackBuffer_", value: function (e) { var t = function (e, t, n) { var i = void 0; return i = e.length && e.start(0) > 0 && e.start(0) < t ? e.start(0) : t - 30, Math.min(i, t - n) }(this.seekable_(), this.currentTime_(), this.playlist_.targetDuration || 10); t > 0 && this.remove(0, t) } }, { key: "createSimplifiedSegmentObj_", value: function (e) { var t = e.segment, n = { resolvedUri: t.resolvedUri, byterange: t.byterange, requestId: e.requestId }; if (t.key) { var i = t.key.iv || new Uint32Array([0, 0, 0, e.mediaIndex + e.playlist.mediaSequence]); n.key = this.segmentKey(t.key), n.key.iv = i } return t.map && (n.map = this.initSegment(t.map)), n } }, { key: "segmentRequestFinished_", value: function (e, t) { if (this.mediaRequests += 1, t.stats && (this.mediaBytesTransferred += t.stats.bytesReceived, this.mediaTransferDuration += t.stats.roundTripTime), this.pendingSegment_) { if (t.requestId === this.pendingSegment_.requestId) { if (e) return this.pendingSegment_ = null, this.state = "READY", e.code === Wa ? void (this.mediaRequestsAborted += 1) : (this.pause(), e.code === Va ? (this.mediaRequestsTimedout += 1, this.bandwidth = 1, this.roundTrip = NaN, void this.trigger("bandwidthupdate")) : (this.mediaRequestsErrored += 1, this.error(e), void this.trigger("error"))); this.bandwidth = t.stats.bandwidth, this.roundTrip = t.stats.roundTripTime, t.map && (t.map = this.initSegment(t.map, !0)), t.key && this.segmentKey(t.key, !0), this.processSegmentResponse_(t) } } else this.mediaRequestsAborted += 1 } }, { key: "processSegmentResponse_", value: function (e) { var t = this.pendingSegment_; t.bytes = e.bytes, e.map && (t.segment.map.bytes = e.map.bytes), t.endOfAllRequests = e.endOfAllRequests, e.fmp4Captions && (!function (e, t, n) { for (var i in n) if (!e[i]) { t.trigger({ type: "usage", name: "hls-608" }); var r = t.textTracks().getTrackById(i); e[i] = r || t.addRemoteTextTrack({ kind: "captions", id: i, label: i }, !1).track } }(this.inbandTextTracks_, this.hls_.tech_, e.captionStreams), function (e) { var t = e.inbandTextTracks, n = e.captionArray, i = e.timestampOffset; if (n) { var r = window.WebKitDataCue || window.VTTCue; n.forEach(function (e) { var n = e.stream, s = e.startTime, a = e.endTime; t[n] && (s += i, a += i, t[n].addCue(new r(s, a, e.text))) }) } }({ inbandTextTracks: this.inbandTextTracks_, captionArray: e.fmp4Captions, timestampOffset: 0 }), this.captionParser_ && this.captionParser_.clearParsedCaptions()), this.handleSegment_() } }, { key: "handleSegment_", value: function () { var e = this; if (this.pendingSegment_) { var t = this.pendingSegment_, n = t.segment, i = this.syncController_.probeSegmentInfo(t); void 0 === this.startingMedia_ && i && (i.containsAudio || i.containsVideo) && (this.startingMedia_ = { containsAudio: i.containsAudio, containsVideo: i.containsVideo }); var r, s, a, o = (r = this.loaderType_, s = this.startingMedia_, a = i, "main" === r && s && a ? a.containsAudio || a.containsVideo ? s.containsVideo && !a.containsVideo ? "Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest." : !s.containsVideo && a.containsVideo ? "Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest." : null : "Neither audio nor video found in segment." : null); if (o) return this.error({ message: o, blacklistDuration: 1 / 0 }), void this.trigger("error"); if (t.isSyncRequest) return this.trigger("syncinfoupdate"), this.pendingSegment_ = null, void (this.state = "READY"); if (null !== t.timestampOffset && t.timestampOffset !== this.sourceUpdater_.timestampOffset()) { if (i && i.segmentTimestampInfo) { var l = i.segmentTimestampInfo[0].ptsTime, u = i.segmentTimestampInfo[0].dtsTime; t.timestampOffset -= l - u } this.sourceUpdater_.timestampOffset(t.timestampOffset), this.trigger("timestampoffset") } var c = this.syncController_.mappingForTimeline(t.timeline); if (null !== c && this.trigger({ type: "segmenttimemapping", mapping: c }), this.state = "APPENDING", n.map) { var h = Vs(n.map); if (!this.activeInitSegmentId_ || this.activeInitSegmentId_ !== h) { var d = this.initSegment(n.map); this.sourceUpdater_.appendBuffer({ bytes: d.bytes }, function () { e.activeInitSegmentId_ = h }) } } t.byteLength = t.bytes.byteLength, "number" == typeof n.start && "number" == typeof n.end ? this.mediaSecondsLoaded += n.end - n.start : this.mediaSecondsLoaded += n.duration, this.logger_(function (e) { var t = e.segment, n = t.start, i = t.end, r = e.playlist, s = r.mediaSequence, a = r.id, o = r.segments, l = void 0 === o ? [] : o, u = e.mediaIndex, c = e.timeline; return ["appending [" + u + "] of [" + s + ", " + (s + l.length) + "] from playlist [" + a + "]", "[" + n + " => " + i + "] in timeline [" + c + "]"].join(" ") }(t)), this.sourceUpdater_.appendBuffer({ bytes: t.bytes, videoSegmentTimingInfoCallback: this.handleVideoSegmentTimingInfo_.bind(this, t.requestId) }, this.handleUpdateEnd_.bind(this)) } else this.state = "READY" } }, { key: "handleVideoSegmentTimingInfo_", value: function (e, t) { if (this.pendingSegment_ && e === this.pendingSegment_.requestId) { var n = this.pendingSegment_.segment; n.videoTimingInfo || (n.videoTimingInfo = {}), n.videoTimingInfo.transmuxerPrependedSeconds = t.videoSegmentTimingInfo.prependedContentDuration || 0, n.videoTimingInfo.transmuxedPresentationStart = t.videoSegmentTimingInfo.start.presentation, n.videoTimingInfo.transmuxedPresentationEnd = t.videoSegmentTimingInfo.end.presentation, n.videoTimingInfo.baseMediaDecodeTime = t.videoSegmentTimingInfo.baseMediaDecodeTime } } }, { key: "handleUpdateEnd_", value: function () { if (!this.pendingSegment_) return this.state = "READY", void (this.paused() || this.monitorBuffer_()); var e = this.pendingSegment_, t = e.segment, n = null !== this.mediaIndex; this.pendingSegment_ = null, this.recordThroughput_(e), this.addSegmentMetadataCue_(e), this.state = "READY", this.mediaIndex = e.mediaIndex, this.fetchAtBuffer_ = !0, this.currentTimeline_ = e.timeline, this.trigger("syncinfoupdate"), t.end && this.currentTime_() - t.end > 3 * e.playlist.targetDuration ? this.resetEverything() : (n && this.trigger("bandwidthupdate"), this.trigger("progress"), this.isEndOfStream_(e.mediaIndex + 1, e.playlist) && this.endOfStream(), this.paused() || this.monitorBuffer_()) } }, { key: "recordThroughput_", value: function (e) { var t = this.throughput.rate, n = Date.now() - e.endOfAllRequests + 1, i = Math.floor(e.byteLength / n * 8 * 1e3); this.throughput.rate += (i - t) / ++this.throughput.count } }, { key: "addSegmentMetadataCue_", value: function (e) { if (this.segmentMetadataTrack_) { var t = e.segment, n = t.start, i = t.end; if (Za(n) && Za(i)) { ea(n, i, this.segmentMetadataTrack_); var s = r.a.WebKitDataCue || r.a.VTTCue, a = { custom: t.custom, dateTimeObject: t.dateTimeObject, dateTimeString: t.dateTimeString, bandwidth: e.playlist.attributes.BANDWIDTH, resolution: e.playlist.attributes.RESOLUTION, codecs: e.playlist.attributes.CODECS, byteLength: e.byteLength, uri: e.uri, timeline: e.timeline, playlist: e.playlist.uri, start: n, end: i }, o = new s(n, i, JSON.stringify(a)); o.value = a, this.segmentMetadataTrack_.addCue(o) } } } }]), t }(es.EventTarget), to = function (e) { return decodeURIComponent(escape(String.fromCharCode.apply(null, e))) }, no = new Uint8Array("\n\n".split("").map(function (e) { return e.charCodeAt(0) })), io = function (e) { function t(e) { var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}; ss(this, t); var i = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)); return i.mediaSource_ = null, i.subtitlesTrack_ = null, i } return os(t, eo), as(t, [{ key: "buffered_", value: function () { if (!this.subtitlesTrack_ || !this.subtitlesTrack_.cues.length) return es.createTimeRanges(); var e = this.subtitlesTrack_.cues, t = e[0].startTime, n = e[e.length - 1].startTime; return es.createTimeRanges([[t, n]]) } }, { key: "initSegment", value: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1]; if (!e) return null; var n = Vs(e), i = this.initSegments_[n]; if (t && !i && e.bytes) { var r = no.byteLength + e.bytes.byteLength, s = new Uint8Array(r); s.set(e.bytes), s.set(no, e.bytes.byteLength), this.initSegments_[n] = i = { resolvedUri: e.resolvedUri, byterange: e.byterange, bytes: s } } return i || e } }, { key: "couldBeginLoading_", value: function () { return this.playlist_ && this.subtitlesTrack_ && !this.paused() } }, { key: "init_", value: function () { return this.state = "READY", this.resetEverything(), this.monitorBuffer_() } }, { key: "track", value: function (e) { return void 0 === e ? this.subtitlesTrack_ : (this.subtitlesTrack_ = e, "INIT" === this.state && this.couldBeginLoading_() && this.init_(), this.subtitlesTrack_) } }, { key: "remove", value: function (e, t) { ea(e, t, this.subtitlesTrack_) } }, { key: "fillBuffer_", value: function () { var e = this; this.syncPoint_ || (this.syncPoint_ = this.syncController_.getSyncPoint(this.playlist_, this.duration_(), this.currentTimeline_, this.currentTime_())); var t = this.checkBuffer_(this.buffered_(), this.playlist_, this.mediaIndex, this.hasPlayed_(), this.currentTime_(), this.syncPoint_); if (t = this.skipEmptySegments_(t)) { if (null === this.syncController_.timestampOffsetForTimeline(t.timeline)) { return this.syncController_.one("timestampoffset", function () { e.state = "READY", e.paused() || e.monitorBuffer_() }), void (this.state = "WAITING_ON_TIMELINE") } this.loadSegment_(t) } } }, { key: "skipEmptySegments_", value: function (e) { for (; e && e.segment.empty;)e = this.generateSegmentInfo_(e.playlist, e.mediaIndex + 1, e.startOfSegment + e.duration, e.isSyncRequest); return e } }, { key: "handleSegment_", value: function () { var e = this; if (this.pendingSegment_ && this.subtitlesTrack_) { this.state = "APPENDING"; var t = this.pendingSegment_, n = t.segment; if ("function" != typeof r.a.WebVTT && this.subtitlesTrack_ && this.subtitlesTrack_.tech_) { var i = void 0, s = function () { e.subtitlesTrack_.tech_.off("vttjsloaded", i), e.error({ message: "Error loading vtt.js" }), e.state = "READY", e.pause(), e.trigger("error") }; return i = function () { e.subtitlesTrack_.tech_.off("vttjserror", s), e.handleSegment_() }, this.state = "WAITING_ON_VTTJS", this.subtitlesTrack_.tech_.one("vttjsloaded", i), void this.subtitlesTrack_.tech_.one("vttjserror", s) } n.requested = !0; try { this.parseVTTCues_(t) } catch (e) { return this.error({ message: e.message }), this.state = "READY", this.pause(), this.trigger("error") } if (this.updateTimeMapping_(t, this.syncController_.timelines[t.timeline], this.playlist_), t.isSyncRequest) return this.trigger("syncinfoupdate"), this.pendingSegment_ = null, void (this.state = "READY"); t.byteLength = t.bytes.byteLength, this.mediaSecondsLoaded += n.duration, t.cues.length && this.remove(t.cues[0].endTime, t.cues[t.cues.length - 1].endTime), t.cues.forEach(function (t) { e.subtitlesTrack_.addCue(t) }), this.handleUpdateEnd_() } else this.state = "READY" } }, { key: "parseVTTCues_", value: function (e) { var t = void 0, n = !1; "function" == typeof r.a.TextDecoder ? t = new r.a.TextDecoder("utf8") : (t = r.a.WebVTT.StringDecoder(), n = !0); var i = new r.a.WebVTT.Parser(r.a, r.a.vttjs, t); if (e.cues = [], e.timestampmap = { MPEGTS: 0, LOCAL: 0 }, i.oncue = e.cues.push.bind(e.cues), i.ontimestampmap = function (t) { return e.timestampmap = t }, i.onparsingerror = function (e) { es.log.warn("Error encountered when parsing cues: " + e.message) }, e.segment.map) { var s = e.segment.map.bytes; n && (s = to(s)), i.parse(s) } var a = e.bytes; n && (a = to(a)), i.parse(a), i.flush() } }, { key: "updateTimeMapping_", value: function (e, t, n) { var i = e.segment; if (t) if (e.cues.length) { var r = e.timestampmap, s = r.MPEGTS / 9e4 - r.LOCAL + t.mapping; if (e.cues.forEach(function (e) { e.startTime += s, e.endTime += s }), !n.syncInfo) { var a = e.cues[0].startTime, o = e.cues[e.cues.length - 1].startTime; n.syncInfo = { mediaSequence: n.mediaSequence + e.mediaIndex, time: Math.min(a, o - i.duration) } } } else i.empty = !0 } }]), t }(), ro = function (e, t) { for (var n = e.cues, i = 0; i < n.length; i++) { var r = n[i]; if (t >= r.adStartTime && t <= r.adEndTime) return r } return null }, so = P.a.inspect, ao = [{ name: "VOD", run: function (e, t, n, i, r) { if (n !== 1 / 0) { return { time: 0, segmentIndex: 0 } } return null } }, { name: "ProgramDateTime", run: function (e, t, n, i, r) { if (!e.datetimeToDisplayTime) return null; var s = t.segments || [], a = null, o = null; r = r || 0; for (var l = 0; l < s.length; l++) { var u = s[l]; if (u.dateTimeObject) { var c = u.dateTimeObject.getTime() / 1e3 + e.datetimeToDisplayTime, h = Math.abs(r - c); if (null !== o && (0 === h || o < h)) break; o = h, a = { time: c, segmentIndex: l } } } return a } }, { name: "Segment", run: function (e, t, n, i, r) { var s = t.segments || [], a = null, o = null; r = r || 0; for (var l = 0; l < s.length; l++) { var u = s[l]; if (u.timeline === i && void 0 !== u.start) { var c = Math.abs(r - u.start); if (null !== o && o < c) break; (!a || null === o || o >= c) && (o = c, a = { time: u.start, segmentIndex: l }) } } return a } }, { name: "Discontinuity", run: function (e, t, n, i, r) { var s = null; if (r = r || 0, t.discontinuityStarts && t.discontinuityStarts.length) for (var a = null, o = 0; o < t.discontinuityStarts.length; o++) { var l = t.discontinuityStarts[o], u = t.discontinuitySequence + o + 1, c = e.discontinuities[u]; if (c) { var h = Math.abs(r - c.time); if (null !== a && a < h) break; (!s || null === a || a >= h) && (a = h, s = { time: c.time, segmentIndex: l }) } } return s } }, { name: "Playlist", run: function (e, t, n, i, r) { return t.syncInfo ? { time: t.syncInfo.time, segmentIndex: t.syncInfo.mediaSequence - t.mediaSequence } : null } }], oo = function (e) { function t() { ss(this, t); var e = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)); return e.inspectCache_ = void 0, e.timelines = [], e.discontinuities = [], e.datetimeToDisplayTime = null, e.logger_ = ja("SyncController"), e } return os(t, e), as(t, [{ key: "getSyncPoint", value: function (e, t, n, i) { var r = this.runStrategies_(e, t, n, i); return r.length ? this.selectSyncPoint_(r, { key: "time", value: i }) : null } }, { key: "getExpiredTime", value: function (e, t) { if (!e || !e.segments) return null; var n = this.runStrategies_(e, t, e.discontinuitySequence, 0); if (!n.length) return null; var i = this.selectSyncPoint_(n, { key: "segmentIndex", value: 0 }); return i.segmentIndex > 0 && (i.time *= -1), Math.abs(i.time + Ss(e, i.segmentIndex, 0)) } }, { key: "runStrategies_", value: function (e, t, n, i) { for (var r = [], s = 0; s < ao.length; s++) { var a = ao[s], o = a.run(this, e, t, n, i); o && (o.strategy = a.name, r.push({ strategy: a.name, syncPoint: o })) } return r } }, { key: "selectSyncPoint_", value: function (e, t) { for (var n = e[0].syncPoint, i = Math.abs(e[0].syncPoint[t.key] - t.value), r = e[0].strategy, s = 1; s < e.length; s++) { var a = Math.abs(e[s].syncPoint[t.key] - t.value); a < i && (i = a, n = e[s].syncPoint, r = e[s].strategy) } return this.logger_("syncPoint for [" + t.key + ": " + t.value + "] chosen with strategy [" + r + "]: [time:" + n.time + ", segmentIndex:" + n.segmentIndex + "]"), n } }, { key: "saveExpiredSegmentInfo", value: function (e, t) { for (var n = t.mediaSequence - e.mediaSequence - 1; n >= 0; n--) { var i = e.segments[n]; if (i && void 0 !== i.start) { t.syncInfo = { mediaSequence: e.mediaSequence + n, time: i.start }, this.logger_("playlist refresh sync: [time:" + t.syncInfo.time + ", mediaSequence: " + t.syncInfo.mediaSequence + "]"), this.trigger("syncinfoupdate"); break } } } }, { key: "setDateTimeMapping", value: function (e) { if (!this.datetimeToDisplayTime && e.segments && e.segments.length && e.segments[0].dateTimeObject) { var t = e.segments[0].dateTimeObject.getTime() / 1e3; this.datetimeToDisplayTime = -t } } }, { key: "reset", value: function () { this.inspectCache_ = void 0 } }, { key: "probeSegmentInfo", value: function (e) { var t = e.segment, n = e.playlist, i = void 0; return (i = t.map ? this.probeMp4Segment_(e) : this.probeTsSegment_(e)) && this.calculateSegmentTimeMapping_(e, i) && (this.saveDiscontinuitySyncInfo_(e), n.syncInfo || (n.syncInfo = { mediaSequence: n.mediaSequence + e.mediaIndex, time: t.start })), i } }, { key: "probeMp4Segment_", value: function (e) { var t = e.segment, n = I.a.timescale(t.map.bytes), i = I.a.startTime(n, e.bytes); return null !== e.timestampOffset && (e.timestampOffset -= i), { start: i, end: i + t.duration } } }, { key: "probeTsSegment_", value: function (e) { var t = so(e.bytes, this.inspectCache_), n = void 0, i = void 0, r = void 0; return t ? (t.video && 2 === t.video.length ? (this.inspectCache_ = t.video[1].dts, n = t.video[0].dtsTime, i = t.video[1].dtsTime, r = t.video) : t.audio && 2 === t.audio.length && (this.inspectCache_ = t.audio[1].dts, n = t.audio[0].dtsTime, i = t.audio[1].dtsTime, r = t.audio), { segmentTimestampInfo: r, start: n, end: i, containsVideo: t.video && 2 === t.video.length, containsAudio: t.audio && 2 === t.audio.length }) : null } }, { key: "timestampOffsetForTimeline", value: function (e) { return void 0 === this.timelines[e] ? null : this.timelines[e].time } }, { key: "mappingForTimeline", value: function (e) { return void 0 === this.timelines[e] ? null : this.timelines[e].mapping } }, { key: "calculateSegmentTimeMapping_", value: function (e, t) { var n = e.segment, i = this.timelines[e.timeline]; if (null !== e.timestampOffset) i = { time: e.startOfSegment, mapping: e.startOfSegment - t.start }, this.timelines[e.timeline] = i, this.trigger("timestampoffset"), this.logger_("time mapping for timeline " + e.timeline + ": [time: " + i.time + "] [mapping: " + i.mapping + "]"), n.start = e.startOfSegment, n.end = t.end + i.mapping; else { if (!i) return !1; n.start = t.start + i.mapping, n.end = t.end + i.mapping } return !0 } }, { key: "saveDiscontinuitySyncInfo_", value: function (e) { var t = e.playlist, n = e.segment; if (n.discontinuity) this.discontinuities[n.timeline] = { time: n.start, accuracy: 0 }; else if (t.discontinuityStarts && t.discontinuityStarts.length) for (var i = 0; i < t.discontinuityStarts.length; i++) { var r = t.discontinuityStarts[i], s = t.discontinuitySequence + i + 1, a = r - e.mediaIndex, o = Math.abs(a); if (!this.discontinuities[s] || this.discontinuities[s].accuracy > o) { var l = void 0; l = a < 0 ? n.start - Ss(t, e.mediaIndex, r) : n.end + Ss(t, e.mediaIndex + 1, r), this.discontinuities[s] = { time: l, accuracy: o } } } } }]), t }(es.EventTarget), lo = new ua("./decrypter-worker.worker.js", function (e, t) { var n = this; !function () { var e = function (e, t) { if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function") }, t = function () { function e(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } return function (t, n, i) { return n && e(t.prototype, n), i && e(t, i), t } }(), i = function (e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" != typeof t && "function" != typeof t ? e : t }, r = function () { var e = [[[], [], [], [], []], [[], [], [], [], []]], t = e[0], n = e[1], i = t[4], r = n[4], s = void 0, a = void 0, o = void 0, l = [], u = [], c = void 0, h = void 0, d = void 0, f = void 0, p = void 0; for (s = 0; s < 256; s++)u[(l[s] = s << 1 ^ 283 * (s >> 7)) ^ s] = s; for (a = o = 0; !i[a]; a ^= c || 1, o = u[o] || 1)for (d = (d = o ^ o << 1 ^ o << 2 ^ o << 3 ^ o << 4) >> 8 ^ 255 & d ^ 99, i[a] = d, r[d] = a, p = 16843009 * l[h = l[c = l[a]]] ^ 65537 * h ^ 257 * c ^ 16843008 * a, f = 257 * l[d] ^ 16843008 * d, s = 0; s < 4; s++)t[s][a] = f = f << 24 ^ f >>> 8, n[s][d] = p = p << 24 ^ p >>> 8; for (s = 0; s < 5; s++)t[s] = t[s].slice(0), n[s] = n[s].slice(0); return e }, s = null, a = function () { function t(n) { e(this, t), s || (s = r()), this._tables = [[s[0][0].slice(), s[0][1].slice(), s[0][2].slice(), s[0][3].slice(), s[0][4].slice()], [s[1][0].slice(), s[1][1].slice(), s[1][2].slice(), s[1][3].slice(), s[1][4].slice()]]; var i = void 0, a = void 0, o = void 0, l = void 0, u = void 0, c = this._tables[0][4], h = this._tables[1], d = n.length, f = 1; if (4 !== d && 6 !== d && 8 !== d) throw new Error("Invalid aes key size"); for (l = n.slice(0), u = [], this._key = [l, u], i = d; i < 4 * d + 28; i++)o = l[i - 1], (i % d == 0 || 8 === d && i % d == 4) && (o = c[o >>> 24] << 24 ^ c[o >> 16 & 255] << 16 ^ c[o >> 8 & 255] << 8 ^ c[255 & o], i % d == 0 && (o = o << 8 ^ o >>> 24 ^ f << 24, f = f << 1 ^ 283 * (f >> 7))), l[i] = l[i - d] ^ o; for (a = 0; i; a++, i--)o = l[3 & a ? i : i - 4], u[a] = i <= 4 || a < 4 ? o : h[0][c[o >>> 24]] ^ h[1][c[o >> 16 & 255]] ^ h[2][c[o >> 8 & 255]] ^ h[3][c[255 & o]] } return t.prototype.decrypt = function (e, t, n, i, r, s) { var a = this._key[1], o = e ^ a[0], l = i ^ a[1], u = n ^ a[2], c = t ^ a[3], h = void 0, d = void 0, f = void 0, p = a.length / 4 - 2, m = void 0, g = 4, v = this._tables[1], y = v[0], _ = v[1], b = v[2], T = v[3], S = v[4]; for (m = 0; m < p; m++)h = y[o >>> 24] ^ _[l >> 16 & 255] ^ b[u >> 8 & 255] ^ T[255 & c] ^ a[g], d = y[l >>> 24] ^ _[u >> 16 & 255] ^ b[c >> 8 & 255] ^ T[255 & o] ^ a[g + 1], f = y[u >>> 24] ^ _[c >> 16 & 255] ^ b[o >> 8 & 255] ^ T[255 & l] ^ a[g + 2], c = y[c >>> 24] ^ _[o >> 16 & 255] ^ b[l >> 8 & 255] ^ T[255 & u] ^ a[g + 3], g += 4, o = h, l = d, u = f; for (m = 0; m < 4; m++)r[(3 & -m) + s] = S[o >>> 24] << 24 ^ S[l >> 16 & 255] << 16 ^ S[u >> 8 & 255] << 8 ^ S[255 & c] ^ a[g++], h = o, o = l, l = u, u = c, c = h }, t }(), o = function () { function t() { e(this, t), this.listeners = {} } return t.prototype.on = function (e, t) { this.listeners[e] || (this.listeners[e] = []), this.listeners[e].push(t) }, t.prototype.off = function (e, t) { if (!this.listeners[e]) return !1; var n = this.listeners[e].indexOf(t); return this.listeners[e].splice(n, 1), n > -1 }, t.prototype.trigger = function (e) { var t = this.listeners[e]; if (t) if (2 === arguments.length) for (var n = t.length, i = 0; i < n; ++i)t[i].call(this, arguments[1]); else for (var r = Array.prototype.slice.call(arguments, 1), s = t.length, a = 0; a < s; ++a)t[a].apply(this, r) }, t.prototype.dispose = function () { this.listeners = {} }, t.prototype.pipe = function (e) { this.on("data", function (t) { e.push(t) }) }, t }(), l = function (t) { function n() { e(this, n); var r = i(this, t.call(this, o)); return r.jobs = [], r.delay = 1, r.timeout_ = null, r } return function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t); e.prototype = Object.create(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t) }(n, t), n.prototype.processJob_ = function () { this.jobs.shift()(), this.jobs.length ? this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay) : this.timeout_ = null }, n.prototype.push = function (e) { this.jobs.push(e), this.timeout_ || (this.timeout_ = setTimeout(this.processJob_.bind(this), this.delay)) }, n }(o), u = function (e) { return e << 24 | (65280 & e) << 8 | (16711680 & e) >> 8 | e >>> 24 }, c = function () { function n(t, i, r, s) { e(this, n); var a = n.STEP, o = new Int32Array(t.buffer), c = new Uint8Array(t.byteLength), h = 0; for (this.asyncStream_ = new l, this.asyncStream_.push(this.decryptChunk_(o.subarray(h, h + a), i, r, c)), h = a; h < o.length; h += a)r = new Uint32Array([u(o[h - 4]), u(o[h - 3]), u(o[h - 2]), u(o[h - 1])]), this.asyncStream_.push(this.decryptChunk_(o.subarray(h, h + a), i, r, c)); this.asyncStream_.push(function () { var e; s(null, (e = c).subarray(0, e.byteLength - e[e.byteLength - 1])) }) } return n.prototype.decryptChunk_ = function (e, t, n, i) { return function () { var r = function (e, t, n) { var i = new Int32Array(e.buffer, e.byteOffset, e.byteLength >> 2), r = new a(Array.prototype.slice.call(t)), s = new Uint8Array(e.byteLength), o = new Int32Array(s.buffer), l = void 0, c = void 0, h = void 0, d = void 0, f = void 0, p = void 0, m = void 0, g = void 0, v = void 0; for (l = n[0], c = n[1], h = n[2], d = n[3], v = 0; v < i.length; v += 4)f = u(i[v]), p = u(i[v + 1]), m = u(i[v + 2]), g = u(i[v + 3]), r.decrypt(f, p, m, g, o, v), o[v] = u(o[v] ^ l), o[v + 1] = u(o[v + 1] ^ c), o[v + 2] = u(o[v + 2] ^ h), o[v + 3] = u(o[v + 3] ^ d), l = f, c = p, h = m, d = g; return s }(e, t, n); i.set(r, e.byteOffset) } }, t(n, null, [{ key: "STEP", get: function () { return 32e3 } }]), n }(); new function (e) { e.onmessage = function (t) { var n = t.data, i = new Uint8Array(n.encrypted.bytes, n.encrypted.byteOffset, n.encrypted.byteLength), r = new Uint32Array(n.key.bytes, n.key.byteOffset, n.key.byteLength / 4), s = new Uint32Array(n.iv.bytes, n.iv.byteOffset, n.iv.byteLength / 4); new c(i, r, s, function (t, i) { var r, s; e.postMessage((r = { source: n.source, decrypted: i }, s = {}, Object.keys(r).forEach(function (e) { var t = r[e]; ArrayBuffer.isView(t) ? s[e] = { bytes: t.buffer, byteOffset: t.byteOffset, byteLength: t.byteLength } : s[e] = t }), s), [i.buffer]) }) } }(n) }() }), uo = function (e) { var t = e.default ? "main" : "alternative"; return e.characteristics && e.characteristics.indexOf("public.accessibility.describes-video") >= 0 && (t = "main-desc"), t }, co = function (e, t) { e.abort(), e.pause(), t && t.activePlaylistLoader && (t.activePlaylistLoader.pause(), t.activePlaylistLoader = null) }, ho = function (e, t) { t.activePlaylistLoader = e, e.load() }, fo = { AUDIO: function (e, t) { return function () { var n = t.segmentLoaders[e], i = t.mediaTypes[e], r = t.blacklistCurrentPlaylist; co(n, i); var s = i.activeTrack(), a = i.activeGroup(), o = (a.filter(function (e) { return e.default })[0] || a[0]).id, l = i.tracks[o]; if (s !== l) { for (var u in es.log.warn("Problem encountered loading the alternate audio track.Switching back to default."), i.tracks) i.tracks[u].enabled = i.tracks[u] === l; i.onTrackChanged() } else r({ message: "Problem encountered loading the default audio track." }) } }, SUBTITLES: function (e, t) { return function () { var n = t.segmentLoaders[e], i = t.mediaTypes[e]; es.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."), co(n, i); var r = i.activeTrack(); r && (r.mode = "disabled"), i.onTrackChanged() } } }, po = { AUDIO: function (e, t, n) { if (t) { var i = n.tech, r = n.requestOptions, s = n.segmentLoaders[e]; t.on("loadedmetadata", function () { var e = t.media(); s.playlist(e, r), (!i.paused() || e.endList && "none" !== i.preload()) && s.load() }), t.on("loadedplaylist", function () { s.playlist(t.media(), r), i.paused() || s.load() }), t.on("error", fo[e](e, n)) } }, SUBTITLES: function (e, t, n) { var i = n.tech, r = n.requestOptions, s = n.segmentLoaders[e], a = n.mediaTypes[e]; t.on("loadedmetadata", function () { var e = t.media(); s.playlist(e, r), s.track(a.activeTrack()), (!i.paused() || e.endList && "none" !== i.preload()) && s.load() }), t.on("loadedplaylist", function () { s.playlist(t.media(), r), i.paused() || s.load() }), t.on("error", fo[e](e, n)) } }, mo = { AUDIO: function (e, t) { var n = t.hls, i = t.sourceType, r = t.segmentLoaders[e], s = t.requestOptions, a = t.master.mediaGroups, o = t.mediaTypes[e], l = o.groups, u = o.tracks, c = t.masterPlaylistLoader; for (var h in a[e] && 0 !== Object.keys(a[e]).length || (a[e] = { main: { default: { default: !0 } } }), a[e]) for (var d in l[h] || (l[h] = []), a[e][h]) { var f = a[e][h][d], p = void 0; if (p = f.resolvedUri ? new ys(f.resolvedUri, n, s) : f.playlists && "dash" === i ? new Ua(f.playlists[0], n, s, c) : null, f = es.mergeOptions({ id: d, playlistLoader: p }, f), po[e](e, f.playlistLoader, t), l[h].push(f), void 0 === u[d]) { var m = new es.AudioTrack({ id: d, kind: uo(f), enabled: !1, language: f.language, default: f.default, label: d }); u[d] = m } } r.on("error", fo[e](e, t)) }, SUBTITLES: function (e, t) { var n = t.tech, i = t.hls, r = t.sourceType, s = t.segmentLoaders[e], a = t.requestOptions, o = t.master.mediaGroups, l = t.mediaTypes[e], u = l.groups, c = l.tracks, h = t.masterPlaylistLoader; for (var d in o[e]) for (var f in u[d] || (u[d] = []), o[e][d]) if (!o[e][d][f].forced) { var p = o[e][d][f], m = void 0; if ("hls" === r ? m = new ys(p.resolvedUri, i, a) : "dash" === r && (m = new Ua(p.playlists[0], i, a, h)), p = es.mergeOptions({ id: f, playlistLoader: m }, p), po[e](e, p.playlistLoader, t), u[d].push(p), void 0 === c[f]) { var g = n.addRemoteTextTrack({ id: f, kind: "subtitles", default: p.default && p.autoselect, language: p.language, label: f }, !1).track; c[f] = g } } s.on("error", fo[e](e, t)) }, "CLOSED-CAPTIONS": function (e, t) { var n = t.tech, i = t.master.mediaGroups, r = t.mediaTypes[e], s = r.groups, a = r.tracks; for (var o in i[e]) for (var l in s[o] || (s[o] = []), i[e][o]) { var u = i[e][o][l]; if (u.instreamId.match(/CC\d/) && (s[o].push(es.mergeOptions({ id: l }, u)), void 0 === a[l])) { var c = n.addRemoteTextTrack({ id: u.instreamId, kind: "captions", default: u.default && u.autoselect, language: u.language, label: l }, !1).track; a[l] = c } } } }, go = { AUDIO: function (e, t) { return function () { var n = t.mediaTypes[e].tracks; for (var i in n) if (n[i].enabled) return n[i]; return null } }, SUBTITLES: function (e, t) { return function () { var n = t.mediaTypes[e].tracks; for (var i in n) if ("showing" === n[i].mode) return n[i]; return null } } }, vo = function (e) { ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach(function (t) { mo[t](t, e) }); var t = e.mediaTypes, n = e.masterPlaylistLoader, i = e.tech, r = e.hls;["AUDIO", "SUBTITLES"].forEach(function (n) { t[n].activeGroup = function (e, t) { return function (n) { var i = t.masterPlaylistLoader, r = t.mediaTypes[e].groups, s = i.media(); if (!s) return null; var a = null; return s.attributes[e] && (a = r[s.attributes[e]]), a = a || r.main, void 0 === n ? a : null === n ? null : a.filter(function (e) { return e.id === n.id })[0] || null } }(n, e), t[n].activeTrack = go[n](n, e), t[n].onGroupChanged = function (e, t) { return function () { var n = t.segmentLoaders, i = n[e], r = n.main, s = t.mediaTypes[e], a = s.activeTrack(), o = s.activeGroup(a), l = s.activePlaylistLoader; co(i, s), o && (o.playlistLoader ? (i.resyncLoader(), ho(o.playlistLoader, s)) : l && r.resetEverything()) } }(n, e), t[n].onTrackChanged = function (e, t) { return function () { var n = t.segmentLoaders, i = n[e], r = n.main, s = t.mediaTypes[e], a = s.activeTrack(), o = s.activeGroup(a), l = s.activePlaylistLoader; co(i, s), o && (o.playlistLoader ? l !== o.playlistLoader ? (i.track && i.track(a), i.resetEverything(), ho(o.playlistLoader, s)) : ho(o.playlistLoader, s) : r.resetEverything()) } }(n, e) }); var s = t.AUDIO.activeGroup(), a = (s.filter(function (e) { return e.default })[0] || s[0]).id; t.AUDIO.tracks[a].enabled = !0, t.AUDIO.onTrackChanged(), n.on("mediachange", function () { ["AUDIO", "SUBTITLES"].forEach(function (e) { return t[e].onGroupChanged() }) }); var o = function () { t.AUDIO.onTrackChanged(), i.trigger({ type: "usage", name: "hls-audio-change" }) }; for (var l in i.audioTracks().addEventListener("change", o), i.remoteTextTracks().addEventListener("change", t.SUBTITLES.onTrackChanged), r.on("dispose", function () { i.audioTracks().removeEventListener("change", o), i.remoteTextTracks().removeEventListener("change", t.SUBTITLES.onTrackChanged) }), i.clearTracks("audio"), t.AUDIO.tracks) i.audioTracks().addTrack(t.AUDIO.tracks[l]) }, yo = function () { var e = {}; return ["AUDIO", "SUBTITLES", "CLOSED-CAPTIONS"].forEach(function (t) { e[t] = { groups: {}, tracks: {}, activePlaylistLoader: null, activeGroup: Ba, activeTrack: Ba, onGroupChanged: Ba, onTrackChanged: Ba } }), e }, _o = void 0, bo = ["mediaRequests", "mediaRequestsAborted", "mediaRequestsTimedout", "mediaRequestsErrored", "mediaTransferDuration", "mediaBytesTransferred"], To = function (e) { return this.audioSegmentLoader_[e] + this.mainSegmentLoader_[e] }, So = function (e) { function t(e) { ss(this, t); var n = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this)), i = e.url, r = e.handleManifestRedirects, s = e.withCredentials, a = e.tech, o = e.bandwidth, l = e.externHls, u = e.useCueTags, c = e.blacklistDuration, h = e.enableLowInitialPlaylist, d = e.sourceType, f = e.seekTo, p = e.cacheEncryptionKeys; if (!i) throw new Error("A non-empty playlist URL is required"); _o = l, n.withCredentials = s, n.tech_ = a, n.hls_ = a.hls, n.seekTo_ = f, n.sourceType_ = d, n.useCueTags_ = u, n.blacklistDuration = c, n.enableLowInitialPlaylist = h, n.useCueTags_ && (n.cueTagsTrack_ = n.tech_.addTextTrack("metadata", "ad-cues"), n.cueTagsTrack_.inBandMetadataTrackDispatchType = ""), n.requestOptions_ = { withCredentials: s, handleManifestRedirects: r, timeout: null }, n.mediaTypes_ = yo(), n.mediaSource = new es.MediaSource, n.mediaSource.addEventListener("sourceopen", n.handleSourceOpen_.bind(n)), n.seekable_ = es.createTimeRanges(), n.hasPlayed_ = function () { return !1 }, n.syncController_ = new oo(e), n.segmentMetadataTrack_ = a.addRemoteTextTrack({ kind: "metadata", label: "segment-metadata" }, !1).track, n.decrypter_ = new lo, n.inbandTextTracks_ = {}; var m = { hls: n.hls_, mediaSource: n.mediaSource, currentTime: n.tech_.currentTime.bind(n.tech_), seekable: function () { return n.seekable() }, seeking: function () { return n.tech_.seeking() }, duration: function () { return n.mediaSource.duration }, hasPlayed: function () { return n.hasPlayed_() }, goalBufferLength: function () { return n.goalBufferLength() }, bandwidth: o, syncController: n.syncController_, decrypter: n.decrypter_, sourceType: n.sourceType_, inbandTextTracks: n.inbandTextTracks_, cacheEncryptionKeys: p }; return n.masterPlaylistLoader_ = "dash" === n.sourceType_ ? new Ua(i, n.hls_, n.requestOptions_) : new ys(i, n.hls_, n.requestOptions_), n.setupMasterPlaylistLoaderListeners_(), n.mainSegmentLoader_ = new eo(es.mergeOptions(m, { segmentMetadataTrack: n.segmentMetadataTrack_, loaderType: "main" }), e), n.audioSegmentLoader_ = new eo(es.mergeOptions(m, { loaderType: "audio" }), e), n.subtitleSegmentLoader_ = new io(es.mergeOptions(m, { loaderType: "vtt" }), e), n.setupSegmentLoaderListeners_(), bo.forEach(function (e) { n[e + "_"] = To.bind(n, e) }), n.logger_ = ja("MPC"), n.masterPlaylistLoader_.load(), n } return os(t, e), as(t, [{ key: "setupMasterPlaylistLoaderListeners_", value: function () { var e = this; this.masterPlaylistLoader_.on("loadedmetadata", function () { var t = e.masterPlaylistLoader_.media(), n = 1.5 * t.targetDuration * 1e3; Ps(e.masterPlaylistLoader_.master, e.masterPlaylistLoader_.media()) ? e.requestOptions_.timeout = 0 : e.requestOptions_.timeout = n, t.endList && "none" !== e.tech_.preload() && (e.mainSegmentLoader_.playlist(t, e.requestOptions_), e.mainSegmentLoader_.load()), vo({ sourceType: e.sourceType_, segmentLoaders: { AUDIO: e.audioSegmentLoader_, SUBTITLES: e.subtitleSegmentLoader_, main: e.mainSegmentLoader_ }, tech: e.tech_, requestOptions: e.requestOptions_, masterPlaylistLoader: e.masterPlaylistLoader_, hls: e.hls_, master: e.master(), mediaTypes: e.mediaTypes_, blacklistCurrentPlaylist: e.blacklistCurrentPlaylist.bind(e) }), e.triggerPresenceUsage_(e.master(), t); try { e.setupSourceBuffers_() } catch (t) { return es.log.warn("Failed to create SourceBuffers", t), e.mediaSource.endOfStream("decode") } e.setupFirstPlay(), !e.mediaTypes_.AUDIO.activePlaylistLoader || e.mediaTypes_.AUDIO.activePlaylistLoader.media() ? e.trigger("selectedinitialmedia") : e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata", function () { e.trigger("selectedinitialmedia") }) }), this.masterPlaylistLoader_.on("loadedplaylist", function () { var t = e.masterPlaylistLoader_.media(); if (!t) { e.excludeUnsupportedVariants_(); var n = void 0; return e.enableLowInitialPlaylist && (n = e.selectInitialPlaylist()), n || (n = e.selectPlaylist()), e.initialMedia_ = n, void e.masterPlaylistLoader_.media(e.initialMedia_) } if (e.useCueTags_ && e.updateAdCues_(t), e.mainSegmentLoader_.playlist(t, e.requestOptions_), e.updateDuration(), e.tech_.paused() || (e.mainSegmentLoader_.load(), e.audioSegmentLoader_ && e.audioSegmentLoader_.load()), !t.endList) { var i = function () { var t = e.seekable(); 0 !== t.length && e.mediaSource.addSeekableRange_(t.start(0), t.end(0)) }; if (e.duration() !== 1 / 0) { e.tech_.one("durationchange", function t() { e.duration() === 1 / 0 ? i() : e.tech_.one("durationchange", t) }) } else i() } }), this.masterPlaylistLoader_.on("error", function () { e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error) }), this.masterPlaylistLoader_.on("mediachanging", function () { e.mainSegmentLoader_.abort(), e.mainSegmentLoader_.pause() }), this.masterPlaylistLoader_.on("mediachange", function () { var t = e.masterPlaylistLoader_.media(), n = 1.5 * t.targetDuration * 1e3; Ps(e.masterPlaylistLoader_.master, e.masterPlaylistLoader_.media()) ? e.requestOptions_.timeout = 0 : e.requestOptions_.timeout = n, e.mainSegmentLoader_.playlist(t, e.requestOptions_), e.mainSegmentLoader_.load(), e.tech_.trigger({ type: "mediachange", bubbles: !0 }) }), this.masterPlaylistLoader_.on("playlistunchanged", function () { var t = e.masterPlaylistLoader_.media(); e.stuckAtPlaylistEnd_(t) && (e.blacklistCurrentPlaylist({ message: "Playlist no longer updating." }), e.tech_.trigger("playliststuck")) }), this.masterPlaylistLoader_.on("renditiondisabled", function () { e.tech_.trigger({ type: "usage", name: "hls-rendition-disabled" }) }), this.masterPlaylistLoader_.on("renditionenabled", function () { e.tech_.trigger({ type: "usage", name: "hls-rendition-enabled" }) }) } }, { key: "triggerPresenceUsage_", value: function (e, t) { var n = e.mediaGroups || {}, i = !0, r = Object.keys(n.AUDIO); for (var s in n.AUDIO) for (var a in n.AUDIO[s]) { n.AUDIO[s][a].uri || (i = !1) } i && this.tech_.trigger({ type: "usage", name: "hls-demuxed" }), Object.keys(n.SUBTITLES).length && this.tech_.trigger({ type: "usage", name: "hls-webvtt" }), _o.Playlist.isAes(t) && this.tech_.trigger({ type: "usage", name: "hls-aes" }), _o.Playlist.isFmp4(t) && this.tech_.trigger({ type: "usage", name: "hls-fmp4" }), r.length && Object.keys(n.AUDIO[r[0]]).length > 1 && this.tech_.trigger({ type: "usage", name: "hls-alternate-audio" }), this.useCueTags_ && this.tech_.trigger({ type: "usage", name: "hls-playlist-cue-tags" }) } }, { key: "setupSegmentLoaderListeners_", value: function () { var e = this; this.mainSegmentLoader_.on("bandwidthupdate", function () { var t = e.selectPlaylist(), n = e.masterPlaylistLoader_.media(), i = e.tech_.buffered(), r = i.length ? i.end(i.length - 1) - e.tech_.currentTime() : 0, s = e.bufferLowWaterLine(); (!n.endList || e.duration() < Ha.MAX_BUFFER_LOW_WATER_LINE || t.attributes.BANDWIDTH < n.attributes.BANDWIDTH || r >= s) && e.masterPlaylistLoader_.media(t), e.tech_.trigger("bandwidthupdate") }), this.mainSegmentLoader_.on("progress", function () { e.trigger("progress") }), this.mainSegmentLoader_.on("error", function () { e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error()) }), this.mainSegmentLoader_.on("syncinfoupdate", function () { e.onSyncInfoUpdate_() }), this.mainSegmentLoader_.on("timestampoffset", function () { e.tech_.trigger({ type: "usage", name: "hls-timestamp-offset" }) }), this.audioSegmentLoader_.on("syncinfoupdate", function () { e.onSyncInfoUpdate_() }), this.mainSegmentLoader_.on("ended", function () { e.onEndOfStream() }), this.mainSegmentLoader_.on("earlyabort", function () { e.blacklistCurrentPlaylist({ message: "Aborted early because there isn't enough bandwidth to complete the request without rebuffering." }, 120) }), this.mainSegmentLoader_.on("reseteverything", function () { e.tech_.trigger("hls-reset") }), this.mainSegmentLoader_.on("segmenttimemapping", function (t) { e.tech_.trigger({ type: "hls-segment-time-mapping", mapping: t.mapping }) }), this.audioSegmentLoader_.on("ended", function () { e.onEndOfStream() }) } }, { key: "mediaSecondsLoaded_", value: function () { return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded + this.mainSegmentLoader_.mediaSecondsLoaded) } }, { key: "load", value: function () { this.mainSegmentLoader_.load(), this.mediaTypes_.AUDIO.activePlaylistLoader && this.audioSegmentLoader_.load(), this.mediaTypes_.SUBTITLES.activePlaylistLoader && this.subtitleSegmentLoader_.load() } }, { key: "smoothQualityChange_", value: function () { var e = this.selectPlaylist(); e !== this.masterPlaylistLoader_.media() && (this.masterPlaylistLoader_.media(e), this.mainSegmentLoader_.resetLoader()) } }, { key: "fastQualityChange_", value: function () { var e = this, t = this.selectPlaylist(); t !== this.masterPlaylistLoader_.media() && (this.masterPlaylistLoader_.media(t), this.mainSegmentLoader_.resetEverything(function () { es.browser.IE_VERSION || es.browser.IS_EDGE ? e.tech_.setCurrentTime(e.tech_.currentTime() + .04) : e.tech_.setCurrentTime(e.tech_.currentTime()) })) } }, { key: "play", value: function () { if (!this.setupFirstPlay()) { this.tech_.ended() && this.seekTo_(0), this.hasPlayed_() && this.load(); var e = this.tech_.seekable(); return this.tech_.duration() === 1 / 0 && this.tech_.currentTime() < e.start(0) ? this.seekTo_(e.end(e.length - 1)) : void 0 } } }, { key: "setupFirstPlay", value: function () { var e = this, t = this.masterPlaylistLoader_.media(); if (!t || this.tech_.paused() || this.hasPlayed_()) return !1; if (!t.endList) { var n = this.seekable(); if (!n.length) return !1; if (es.browser.IE_VERSION && 0 === this.tech_.readyState()) return this.tech_.one("loadedmetadata", function () { e.trigger("firstplay"), e.seekTo_(n.end(0)), e.hasPlayed_ = function () { return !0 } }), !1; this.trigger("firstplay"), this.seekTo_(n.end(0)) } return this.hasPlayed_ = function () { return !0 }, this.load(), !0 } }, { key: "handleSourceOpen_", value: function () { try { this.setupSourceBuffers_() } catch (e) { return es.log.warn("Failed to create Source Buffers", e), this.mediaSource.endOfStream("decode") } if (this.tech_.autoplay()) { var e = this.tech_.play(); void 0 !== e && "function" == typeof e.then && e.then(null, function (e) { }) } this.trigger("sourceopen") } }, { key: "onEndOfStream", value: function () { var e = this.mainSegmentLoader_.ended_; if (this.mediaTypes_.AUDIO.activePlaylistLoader && (e = !this.mainSegmentLoader_.startingMedia_ || this.mainSegmentLoader_.startingMedia_.containsVideo ? e && this.audioSegmentLoader_.ended_ : this.audioSegmentLoader_.ended_), e) { this.logger_("calling mediaSource.endOfStream()"); try { this.mediaSource.endOfStream() } catch (e) { es.log.warn("Failed to call media source endOfStream", e) } } } }, { key: "stuckAtPlaylistEnd_", value: function (e) { if (!this.seekable().length) return !1; var t = this.syncController_.getExpiredTime(e, this.mediaSource.duration); if (null === t) return !1; var n = _o.Playlist.playlistEnd(e, t), i = this.tech_.currentTime(), r = this.tech_.buffered(); if (!r.length) return n - i <= .1; var s = r.end(r.length - 1); return s - i <= .1 && n - s <= .1 } }, { key: "blacklistCurrentPlaylist", value: function () { var e, t = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {}, n = arguments[1], i = void 0; if (i = t.playlist || this.masterPlaylistLoader_.media(), n = n || t.blacklistDuration || this.blacklistDuration, !i) { this.error = t; try { return this.mediaSource.endOfStream("network") } catch (e) { return this.trigger("error") } } var r = 1 === this.masterPlaylistLoader_.master.playlists.filter(Ds).length, s = this.masterPlaylistLoader_.master.playlists; return 1 === s.length ? (es.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the only playlist."), this.tech_.trigger("retryplaylist"), this.masterPlaylistLoader_.load(r)) : (r && (es.log.warn("Removing all playlists from the blacklist because the last rendition is about to be blacklisted."), s.forEach(function (e) { e.excludeUntil !== 1 / 0 && delete e.excludeUntil }), this.tech_.trigger("retryplaylist")), i.excludeUntil = Date.now() + 1e3 * n, this.tech_.trigger("blacklistplaylist"), this.tech_.trigger({ type: "usage", name: "hls-rendition-blacklisted" }), e = this.selectPlaylist(), es.log.warn("Problem encountered with the current HLS playlist." + (t.message ? " " + t.message : "") + " Switching to another playlist."), this.masterPlaylistLoader_.media(e, r)) } }, { key: "pauseLoading", value: function () { this.mainSegmentLoader_.pause(), this.mediaTypes_.AUDIO.activePlaylistLoader && this.audioSegmentLoader_.pause(), this.mediaTypes_.SUBTITLES.activePlaylistLoader && this.subtitleSegmentLoader_.pause() } }, { key: "setCurrentTime", value: function (e) { var t = $s(this.tech_.buffered(), e); return this.masterPlaylistLoader_ && this.masterPlaylistLoader_.media() && this.masterPlaylistLoader_.media().segments ? t && t.length ? e : (this.mainSegmentLoader_.resetEverything(), this.mainSegmentLoader_.abort(), this.mediaTypes_.AUDIO.activePlaylistLoader && (this.audioSegmentLoader_.resetEverything(), this.audioSegmentLoader_.abort()), this.mediaTypes_.SUBTITLES.activePlaylistLoader && (this.subtitleSegmentLoader_.resetEverything(), this.subtitleSegmentLoader_.abort()), void this.load()) : 0 } }, { key: "duration", value: function () { return this.masterPlaylistLoader_ ? this.mediaSource ? this.mediaSource.duration : _o.Playlist.duration(this.masterPlaylistLoader_.media()) : 0 } }, { key: "seekable", value: function () { return this.seekable_ } }, { key: "onSyncInfoUpdate_", value: function () { var e = void 0, t = void 0; if (this.masterPlaylistLoader_) { var n = this.masterPlaylistLoader_.media(); if (n) { var i = this.syncController_.getExpiredTime(n, this.mediaSource.duration); if (null !== i && 0 !== (e = _o.Playlist.seekable(n, i)).length) { if (this.mediaTypes_.AUDIO.activePlaylistLoader) { if (n = this.mediaTypes_.AUDIO.activePlaylistLoader.media(), null === (i = this.syncController_.getExpiredTime(n, this.mediaSource.duration))) return; if (0 === (t = _o.Playlist.seekable(n, i)).length) return } var r = void 0, s = void 0; this.seekable_ && this.seekable_.length && (r = this.seekable_.end(0), s = this.seekable_.start(0)), t ? t.start(0) > e.end(0) || e.start(0) > t.end(0) ? this.seekable_ = e : this.seekable_ = es.createTimeRanges([[t.start(0) > e.start(0) ? t.start(0) : e.start(0), t.end(0) < e.end(0) ? t.end(0) : e.end(0)]]) : this.seekable_ = e, this.seekable_ && this.seekable_.length && this.seekable_.end(0) === r && this.seekable_.start(0) === s || (this.logger_("seekable updated [" + Js(this.seekable_) + "]"), this.tech_.trigger("seekablechanged")) } } } } }, { key: "updateDuration", value: function () { var e = this, t = this.mediaSource.duration, n = _o.Playlist.duration(this.masterPlaylistLoader_.media()), i = this.tech_.buffered(), r = function t() { e.logger_("Setting duration from " + e.mediaSource.duration + " => " + n); try { e.mediaSource.duration = n } catch (e) { es.log.warn("Failed to set media source duration", e) } e.tech_.trigger("durationchange"), e.mediaSource.removeEventListener("sourceopen", t) }; i.length > 0 && (n = Math.max(n, i.end(i.length - 1))), t !== n && ("open" !== this.mediaSource.readyState ? this.mediaSource.addEventListener("sourceopen", r) : r()) } }, { key: "dispose", value: function () { var e = this; this.decrypter_.terminate(), this.masterPlaylistLoader_.dispose(), this.mainSegmentLoader_.dispose(), ["AUDIO", "SUBTITLES"].forEach(function (t) { var n = e.mediaTypes_[t].groups; for (var i in n) n[i].forEach(function (e) { e.playlistLoader && e.playlistLoader.dispose() }) }), this.audioSegmentLoader_.dispose(), this.subtitleSegmentLoader_.dispose() } }, { key: "master", value: function () { return this.masterPlaylistLoader_.master } }, { key: "media", value: function () { return this.masterPlaylistLoader_.media() || this.initialMedia_ } }, { key: "setupSourceBuffers_", value: function () { var e, t = this.masterPlaylistLoader_.media(); if (t && "open" === this.mediaSource.readyState) { if ((e = _a(this.masterPlaylistLoader_.master, t)).length < 1) return this.error = "No compatible SourceBuffer configuration for the variant stream:" + t.resolvedUri, this.mediaSource.endOfStream("decode"); this.configureLoaderMimeTypes_(e), this.excludeIncompatibleVariants_(t) } } }, { key: "configureLoaderMimeTypes_", value: function (e) { var t = e.length > 1 && -1 === e[0].indexOf(",") && e[0] !== e[1] ? new es.EventTarget : null; this.mainSegmentLoader_.mimeType(e[0], t), e[1] && this.audioSegmentLoader_.mimeType(e[1], t) } }, { key: "excludeUnsupportedVariants_", value: function () { this.master().playlists.forEach(function (e) { var t; e.attributes.CODECS && r.a.MediaSource && r.a.MediaSource.isTypeSupported && !r.a.MediaSource.isTypeSupported('video/mp4; codecs="' + (t = e.attributes.CODECS, t.replace(/avc1\.(\d+)\.(\d+)/i, function (e) { return ga([e])[0] })) + '"') && (e.excludeUntil = 1 / 0) }) } }, { key: "excludeIncompatibleVariants_", value: function (e) { var t = 2, n = null, i = void 0; e.attributes.CODECS && (i = va(e.attributes.CODECS), n = i.videoCodec, t = i.codecCount), this.master().playlists.forEach(function (e) { var i = { codecCount: 2, videoCodec: null }; e.attributes.CODECS && (i = va(e.attributes.CODECS)), i.codecCount !== t && (e.excludeUntil = 1 / 0), i.videoCodec !== n && (e.excludeUntil = 1 / 0) }) } }, { key: "updateAdCues_", value: function (e) { var t = 0, n = this.seekable(); n.length && (t = n.start(0)), function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : 0; if (e.segments) for (var i = n, s = void 0, a = 0; a < e.segments.length; a++) { var o = e.segments[a]; if (s || (s = ro(t, i + o.duration / 2)), s) { if ("cueIn" in o) { s.endTime = i, s.adEndTime = i, i += o.duration, s = null; continue } if (i < s.endTime) { i += o.duration; continue } s.endTime += o.duration } else if ("cueOut" in o && ((s = new r.a.VTTCue(i, i + o.duration, o.cueOut)).adStartTime = i, s.adEndTime = i + parseFloat(o.cueOut), t.addCue(s)), "cueOutCont" in o) { var l, u, c = o.cueOutCont.split("/").map(parseFloat), h = us(c, 2); l = h[0], u = h[1], (s = new r.a.VTTCue(i, i + o.duration, "")).adStartTime = i - l, s.adEndTime = s.adStartTime + u, t.addCue(s) } i += o.duration } }(e, this.cueTagsTrack_, t) } }, { key: "goalBufferLength", value: function () { var e = this.tech_.currentTime(), t = Ha.GOAL_BUFFER_LENGTH, n = Ha.GOAL_BUFFER_LENGTH_RATE, i = Math.max(t, Ha.MAX_GOAL_BUFFER_LENGTH); return Math.min(t + e * n, i) } }, { key: "bufferLowWaterLine", value: function () { var e = this.tech_.currentTime(), t = Ha.BUFFER_LOW_WATER_LINE, n = Ha.BUFFER_LOW_WATER_LINE_RATE, i = Math.max(t, Ha.MAX_BUFFER_LOW_WATER_LINE); return Math.min(t + e * n, i) } }]), t }(es.EventTarget), Eo = function e(t, n, i) { ss(this, e); var r, s, a, o = t.masterPlaylistController_, l = o[(t.options_.smoothQualityChange ? "smooth" : "fast") + "QualityChange_"].bind(o); if (n.attributes.RESOLUTION) { var u = n.attributes.RESOLUTION; this.width = u.width, this.height = u.height } this.bandwidth = n.attributes.BANDWIDTH, this.id = i, this.enabled = (r = t.playlists, s = n.uri, a = l, function (e) { var t = r.master.playlists[s], n = Os(t), i = Ds(t); return void 0 === e ? i : (e ? delete t.disabled : t.disabled = !0, e === i || n || (a(), e ? r.trigger("renditionenabled") : r.trigger("renditiondisabled")), e) }) }, Co = ["seeking", "seeked", "pause", "playing", "error"], wo = function () { function e(t) { var n = this; ss(this, e), this.tech_ = t.tech, this.seekable = t.seekable, this.seekTo = t.seekTo, this.allowSeeksWithinUnsafeLiveWindow = t.allowSeeksWithinUnsafeLiveWindow, this.media = t.media, this.consecutiveUpdates = 0, this.lastRecordedTime = null, this.timer_ = null, this.checkCurrentTimeTimeout_ = null, this.logger_ = ja("PlaybackWatcher"), this.logger_("initialize"); var i = function () { return n.monitorCurrentTime_() }, s = function () { return n.techWaiting_() }, a = function () { return n.cancelTimer_() }, o = function () { return n.fixesBadSeeks_() }; this.tech_.on("seekablechanged", o), this.tech_.on("waiting", s), this.tech_.on(Co, a), this.tech_.on("canplay", i), this.dispose = function () { n.logger_("dispose"), n.tech_.off("seekablechanged", o), n.tech_.off("waiting", s), n.tech_.off(Co, a), n.tech_.off("canplay", i), n.checkCurrentTimeTimeout_ && r.a.clearTimeout(n.checkCurrentTimeTimeout_), n.cancelTimer_() } } return as(e, [{ key: "monitorCurrentTime_", value: function () { this.checkCurrentTime_(), this.checkCurrentTimeTimeout_ && r.a.clearTimeout(this.checkCurrentTimeTimeout_), this.checkCurrentTimeTimeout_ = r.a.setTimeout(this.monitorCurrentTime_.bind(this), 250) } }, { key: "checkCurrentTime_", value: function () { if (this.tech_.seeking() && this.fixesBadSeeks_()) return this.consecutiveUpdates = 0, void (this.lastRecordedTime = this.tech_.currentTime()); if (!this.tech_.paused() && !this.tech_.seeking()) { var e = this.tech_.currentTime(), t = this.tech_.buffered(); if (this.lastRecordedTime === e && (!t.length || e + .1 >= t.end(t.length - 1))) return this.techWaiting_(); this.consecutiveUpdates >= 5 && e === this.lastRecordedTime ? (this.consecutiveUpdates++, this.waiting_()) : e === this.lastRecordedTime ? this.consecutiveUpdates++ : (this.consecutiveUpdates = 0, this.lastRecordedTime = e) } } }, { key: "cancelTimer_", value: function () { this.consecutiveUpdates = 0, this.timer_ && (this.logger_("cancelTimer_"), clearTimeout(this.timer_)), this.timer_ = null } }, { key: "fixesBadSeeks_", value: function () { if (!this.tech_.seeking()) return !1; var e = this.seekable(), t = this.tech_.currentTime(), n = void 0; this.afterSeekableWindow_(e, t, this.media(), this.allowSeeksWithinUnsafeLiveWindow) && (n = e.end(e.length - 1)); this.beforeSeekableWindow_(e, t) && (n = e.start(0) + .1); return void 0 !== n && (this.logger_("Trying to seek outside of seekable at time " + t + " with seekable range " + Js(e) + ". Seeking to " + n + "."), this.seekTo(n), !0) } }, { key: "waiting_", value: function () { if (!this.techWaiting_()) { var e = this.tech_.currentTime(), t = this.tech_.buffered(), n = $s(t, e); return n.length && e + 3 <= n.end(0) ? (this.cancelTimer_(), this.seekTo(e), this.logger_("Stopped at " + e + " while inside a buffered region [" + n.start(0) + " -> " + n.end(0) + "]. Attempting to resume playback by seeking to the current time."), void this.tech_.trigger({ type: "usage", name: "hls-unknown-waiting" })) : void 0 } } }, { key: "techWaiting_", value: function () { var e = this.seekable(), t = this.tech_.currentTime(); if (this.tech_.seeking() && this.fixesBadSeeks_()) return !0; if (this.tech_.seeking() || null !== this.timer_) return !0; if (this.beforeSeekableWindow_(e, t)) { var n = e.end(e.length - 1); return this.logger_("Fell out of live window at time " + t + ". Seeking to live point (seekable end) " + n), this.cancelTimer_(), this.seekTo(n), this.tech_.trigger({ type: "usage", name: "hls-live-resync" }), !0 } var i = this.tech_.buffered(), r = Qs(i, t); if (this.videoUnderflow_(r, i, t)) return this.cancelTimer_(), this.seekTo(t), this.tech_.trigger({ type: "usage", name: "hls-video-underflow" }), !0; if (r.length > 0) { var s = r.start(0) - t; return this.logger_("Stopped at " + t + ", setting timer for " + s + ", seeking to " + r.start(0)), this.timer_ = setTimeout(this.skipTheGap_.bind(this), 1e3 * s, t), !0 } return !1 } }, { key: "afterSeekableWindow_", value: function (e, t, n) { var i = arguments.length > 3 && void 0 !== arguments[3] && arguments[3]; if (!e.length) return !1; var r = e.end(e.length - 1) + .1; return !n.endList && i && (r = e.end(e.length - 1) + 3 * n.targetDuration), t > r } }, { key: "beforeSeekableWindow_", value: function (e, t) { return !!(e.length && e.start(0) > 0 && t < e.start(0) - .1) } }, { key: "videoUnderflow_", value: function (e, t, n) { if (0 === e.length) { var i = this.gapFromVideoUnderflow_(t, n); if (i) return this.logger_("Encountered a gap in video from " + i.start + " to " + i.end + ". Seeking to current time " + n), !0 } return !1 } }, { key: "skipTheGap_", value: function (e) { var t = this.tech_.buffered(), n = this.tech_.currentTime(), i = Qs(t, n); this.cancelTimer_(), 0 !== i.length && n === e && (this.logger_("skipTheGap_:", "currentTime:", n, "scheduled currentTime:", e, "nextRange start:", i.start(0)), this.seekTo(i.start(0) + 1 / 30), this.tech_.trigger({ type: "usage", name: "hls-gap-skip" })) } }, { key: "gapFromVideoUnderflow_", value: function (e, t) { for (var n = function (e) { if (e.length < 2) return es.createTimeRanges(); for (var t = [], n = 1; n < e.length; n++) { var i = e.end(n - 1), r = e.start(n); t.push([i, r]) } return es.createTimeRanges(t) }(e), i = 0; i < n.length; i++) { var r = n.start(i), s = n.end(i); if (t - r < 4 && t - r > 2) return { start: r, end: s } } return null } }]), e }(), ko = { errorInterval: 30, getSource: function (e) { return e(this.tech({ IWillNotUseThisInPlugins: !0 }).currentSource_) } }, Ao = function (e) { !function e(t, n) { var i = 0, r = 0, s = es.mergeOptions(ko, n); t.ready(function () { t.trigger({ type: "usage", name: "hls-error-reload-initialized" }) }); var a = function () { r && t.currentTime(r) }, o = function (e) { null != e && (r = t.duration() !== 1 / 0 && t.currentTime() || 0, t.one("loadedmetadata", a), t.src(e), t.trigger({ type: "usage", name: "hls-error-reload" }), t.play()) }, l = function () { if (Date.now() - i < 1e3 * s.errorInterval) t.trigger({ type: "usage", name: "hls-error-reload-canceled" }); else { if (s.getSource && "function" == typeof s.getSource) return i = Date.now(), s.getSource.call(t, o); es.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!") } }, u = function e() { t.off("loadedmetadata", a), t.off("error", l), t.off("dispose", e) }; t.on("error", l), t.on("dispose", u), t.reloadSourceOnError = function (n) { u(), e(t, n) } }(this, e) }; es.use("*", function (e) { return { setSource: function (e, t) { t(null, e) }, setCurrentTime: function (t) { return e.vhs && e.currentSource().src === e.vhs.source_.src && e.vhs.setCurrentTime(t), t }, play: function () { e.vhs && e.currentSource().src === e.vhs.source_.src && e.vhs.setCurrentTime(e.tech_.currentTime()) } } }); var xo = { PlaylistLoader: ys, Playlist: Ns, Decrypter: W, AsyncStream: H, decrypt: V, utils: zs, STANDARD_PLAYLIST_SELECTOR: function () { return function (e, t, n, i, s) { var a = e.playlists.map(function (e) { var t, n; return t = e.attributes.RESOLUTION && e.attributes.RESOLUTION.width, n = e.attributes.RESOLUTION && e.attributes.RESOLUTION.height, { bandwidth: e.attributes.BANDWIDTH || r.a.Number.MAX_VALUE, width: t, height: n, playlist: e } }); Qa(a, function (e, t) { return e.bandwidth - t.bandwidth }); var o = (a = a.filter(function (e) { return !Ns.isIncompatible(e.playlist) })).filter(function (e) { return Ns.isEnabled(e.playlist) }); o.length || (o = a.filter(function (e) { return !Ns.isDisabled(e.playlist) })); var l = o.filter(function (e) { return e.bandwidth * Ha.BANDWIDTH_VARIANCE < t }), u = l[l.length - 1], c = l.filter(function (e) { return e.bandwidth === u.bandwidth })[0]; if (!1 === s) { var h = c || o[0] || a[0]; return h ? h.playlist : null } var d = l.filter(function (e) { return e.width && e.height }); Qa(d, function (e, t) { return e.width - t.width }); var f = d.filter(function (e) { return e.width === n && e.height === i }); u = f[f.length - 1]; var p = f.filter(function (e) { return e.bandwidth === u.bandwidth })[0], m = void 0, g = void 0, v = void 0; p || (g = (m = d.filter(function (e) { return e.width > n || e.height > i })).filter(function (e) { return e.width === m[0].width && e.height === m[0].height }), u = g[g.length - 1], v = g.filter(function (e) { return e.bandwidth === u.bandwidth })[0]); var y = v || p || c || o[0] || a[0]; return y ? y.playlist : null }(this.playlists.master, this.systemBandwidth, parseInt($a(this.tech_.el(), "width"), 10), parseInt($a(this.tech_.el(), "height"), 10), this.limitRenditionByPlayerDimensions) }, INITIAL_PLAYLIST_SELECTOR: function () { var e = this.playlists.master.playlists.filter(Ns.isEnabled); return Qa(e, function (e, t) { return Ja(e, t) }), e.filter(function (e) { return va(e.attributes.CODECS).videoCodec })[0] || null }, comparePlaylistBandwidth: Ja, comparePlaylistResolution: function (e, t) { var n = void 0, i = void 0; return e.attributes.RESOLUTION && e.attributes.RESOLUTION.width && (n = e.attributes.RESOLUTION.width), n = n || r.a.Number.MAX_VALUE, t.attributes.RESOLUTION && t.attributes.RESOLUTION.width && (i = t.attributes.RESOLUTION.width), n === (i = i || r.a.Number.MAX_VALUE) && e.attributes.BANDWIDTH && t.attributes.BANDWIDTH ? e.attributes.BANDWIDTH - t.attributes.BANDWIDTH : n - i }, xhr: Us() };["GOAL_BUFFER_LENGTH", "MAX_GOAL_BUFFER_LENGTH", "GOAL_BUFFER_LENGTH_RATE", "BUFFER_LOW_WATER_LINE", "MAX_BUFFER_LOW_WATER_LINE", "BUFFER_LOW_WATER_LINE_RATE", "BANDWIDTH_VARIANCE"].forEach(function (e) { Object.defineProperty(xo, e, { get: function () { return es.log.warn("using Hls." + e + " is UNSAFE be sure you know what you are doing"), Ha[e] }, set: function (t) { es.log.warn("using Hls." + e + " is UNSAFE be sure you know what you are doing"), "number" != typeof t || t < 0 ? es.log.warn("value of Hls." + e + " must be greater than or equal to 0") : Ha[e] = t } }) }); var Io = function (e) { if (/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(e)) return "hls"; return /^application\/dash\+xml/i.test(e) ? "dash" : null }, Oo = function (e, t) { for (var n = t.media(), i = -1, r = 0; r < e.length; r++)if (e[r].id === n.uri) { i = r; break } e.selectedIndex_ = i, e.trigger({ selectedIndex: i, type: "change" }) }; xo.canPlaySource = function () { return es.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.") }; var Do = function (e) { if ("dash" === e.options_.sourceType) { var t = es.players[e.tech_.options_.playerId]; if (t.eme) { var n = function (e, t, n) { if (!e) return e; var i = {}; for (var r in e) i[r] = { audioContentType: 'audio/mp4; codecs="' + n.attributes.CODECS + '"', videoContentType: 'video/mp4; codecs="' + t.attributes.CODECS + '"' }, t.contentProtection && t.contentProtection[r] && t.contentProtection[r].pssh && (i[r].pssh = t.contentProtection[r].pssh), "string" == typeof e[r] && (i[r].url = e[r]); return es.mergeOptions(e, i) }(e.source_.keySystems, e.playlists.media(), e.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media()); n && (t.currentSource().keySystems = n, t.eme.initializeMediaKeys && t.eme.initializeMediaKeys()) } } }, Lo = function () { if (!window.localStorage) return null; var e = window.localStorage.getItem("videojs-vhs"); if (!e) return null; try { return JSON.parse(e) } catch (e) { return null } }; xo.supportsNativeHls = function () { var e = a.a.createElement("video"); if (!es.getTech("Html5").isSupported()) return !1; return ["application/vnd.apple.mpegurl", "audio/mpegurl", "audio/x-mpegurl", "application/x-mpegurl", "video/x-mpegurl", "video/mpegurl", "application/mpegurl"].some(function (t) { return /maybe|probably/i.test(e.canPlayType(t)) }) }(), xo.supportsNativeDash = !!es.getTech("Html5").isSupported() && /maybe|probably/i.test(a.a.createElement("video").canPlayType("application/dash+xml")), xo.supportsTypeNatively = function (e) { return "hls" === e ? xo.supportsNativeHls : "dash" === e && xo.supportsNativeDash }, xo.isSupported = function () { return es.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.") }; var Po = es.getComponent("Component"), No = function (e) { function t(e, n, i) { ss(this, t); var r = ls(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, n, i.hls)); if (n.options_ && n.options_.playerId) { var s = es(n.options_.playerId); s.hasOwnProperty("hls") || Object.defineProperty(s, "hls", { get: function () { return es.log.warn("player.hls is deprecated. Use player.tech().hls instead."), n.trigger({ type: "usage", name: "hls-player-access" }), r }, configurable: !0 }), s.vhs = r, s.dash = r, r.player_ = s } if (r.tech_ = n, r.source_ = e, r.stats = {}, r.setOptions_(), r.options_.overrideNative && n.overrideNativeAudioTracks && n.overrideNativeVideoTracks) n.overrideNativeAudioTracks(!0), n.overrideNativeVideoTracks(!0); else if (r.options_.overrideNative && (n.featuresNativeVideoTracks || n.featuresNativeAudioTracks)) throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB"); return r.on(a.a, ["fullscreenchange", "webkitfullscreenchange", "mozfullscreenchange", "MSFullscreenChange"], function (e) { var t = a.a.fullscreenElement || a.a.webkitFullscreenElement || a.a.mozFullScreenElement || a.a.msFullscreenElement; t && t.contains(r.tech_.el()) && r.masterPlaylistController_.smoothQualityChange_() }), r.on(r.tech_, "seeking", function () { 0 === this.tech_.currentTime() && this.tech_.player_.loop() && this.setCurrentTime(0) }), r.on(r.tech_, "error", function () { this.masterPlaylistController_ && this.masterPlaylistController_.pauseLoading() }), r.on(r.tech_, "play", r.play), r } return os(t, Po), as(t, [{ key: "setOptions_", value: function () { var e = this; if (this.options_.withCredentials = this.options_.withCredentials || !1, this.options_.handleManifestRedirects = this.options_.handleManifestRedirects || !1, this.options_.limitRenditionByPlayerDimensions = !1 !== this.options_.limitRenditionByPlayerDimensions, this.options_.smoothQualityChange = this.options_.smoothQualityChange || !1, this.options_.useBandwidthFromLocalStorage = void 0 !== this.source_.useBandwidthFromLocalStorage ? this.source_.useBandwidthFromLocalStorage : this.options_.useBandwidthFromLocalStorage || !1, this.options_.customTagParsers = this.options_.customTagParsers || [], this.options_.customTagMappers = this.options_.customTagMappers || [], this.options_.cacheEncryptionKeys = this.options_.cacheEncryptionKeys || !1, "number" != typeof this.options_.blacklistDuration && (this.options_.blacklistDuration = 300), "number" != typeof this.options_.bandwidth && this.options_.useBandwidthFromLocalStorage) { var t = Lo(); t && t.bandwidth && (this.options_.bandwidth = t.bandwidth, this.tech_.trigger({ type: "usage", name: "hls-bandwidth-from-local-storage" })), t && t.throughput && (this.options_.throughput = t.throughput, this.tech_.trigger({ type: "usage", name: "hls-throughput-from-local-storage" })) } "number" != typeof this.options_.bandwidth && (this.options_.bandwidth = Ha.INITIAL_BANDWIDTH), this.options_.enableLowInitialPlaylist = this.options_.enableLowInitialPlaylist && this.options_.bandwidth === Ha.INITIAL_BANDWIDTH, ["withCredentials", "limitRenditionByPlayerDimensions", "bandwidth", "smoothQualityChange", "customTagParsers", "customTagMappers", "handleManifestRedirects", "cacheEncryptionKeys"].forEach(function (t) { void 0 !== e.source_[t] && (e.options_[t] = e.source_[t]) }), this.limitRenditionByPlayerDimensions = this.options_.limitRenditionByPlayerDimensions } }, { key: "src", value: function (e, t) { var n = this; e && (this.setOptions_(), this.options_.url = this.source_.src, this.options_.tech = this.tech_, this.options_.externHls = xo, this.options_.sourceType = Io(t), this.options_.seekTo = function (e) { n.tech_.setCurrentTime(e), n.setCurrentTime(e) }, this.masterPlaylistController_ = new So(this.options_), this.playbackWatcher_ = new wo(es.mergeOptions(this.options_, { seekable: function () { return n.seekable() }, media: function () { return n.masterPlaylistController_.media() } })), this.masterPlaylistController_.on("error", function () { es.players[n.tech_.options_.playerId].error(n.masterPlaylistController_.error) }), this.masterPlaylistController_.selectPlaylist = this.selectPlaylist ? this.selectPlaylist.bind(this) : xo.STANDARD_PLAYLIST_SELECTOR.bind(this), this.masterPlaylistController_.selectInitialPlaylist = xo.INITIAL_PLAYLIST_SELECTOR.bind(this), this.playlists = this.masterPlaylistController_.masterPlaylistLoader_, this.mediaSource = this.masterPlaylistController_.mediaSource, Object.defineProperties(this, { selectPlaylist: { get: function () { return this.masterPlaylistController_.selectPlaylist }, set: function (e) { this.masterPlaylistController_.selectPlaylist = e.bind(this) } }, throughput: { get: function () { return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate }, set: function (e) { this.masterPlaylistController_.mainSegmentLoader_.throughput.rate = e, this.masterPlaylistController_.mainSegmentLoader_.throughput.count = 1 } }, bandwidth: { get: function () { return this.masterPlaylistController_.mainSegmentLoader_.bandwidth }, set: function (e) { this.masterPlaylistController_.mainSegmentLoader_.bandwidth = e, this.masterPlaylistController_.mainSegmentLoader_.throughput = { rate: 0, count: 0 } } }, systemBandwidth: { get: function () { var e = 1 / (this.bandwidth || 1), t = void 0; return t = this.throughput > 0 ? 1 / this.throughput : 0, Math.floor(1 / (e + t)) }, set: function () { es.log.error('The "systemBandwidth" property is read-only') } } }), this.options_.bandwidth && (this.bandwidth = this.options_.bandwidth), this.options_.throughput && (this.throughput = this.options_.throughput), Object.defineProperties(this.stats, { bandwidth: { get: function () { return n.bandwidth || 0 }, enumerable: !0 }, mediaRequests: { get: function () { return n.masterPlaylistController_.mediaRequests_() || 0 }, enumerable: !0 }, mediaRequestsAborted: { get: function () { return n.masterPlaylistController_.mediaRequestsAborted_() || 0 }, enumerable: !0 }, mediaRequestsTimedout: { get: function () { return n.masterPlaylistController_.mediaRequestsTimedout_() || 0 }, enumerable: !0 }, mediaRequestsErrored: { get: function () { return n.masterPlaylistController_.mediaRequestsErrored_() || 0 }, enumerable: !0 }, mediaTransferDuration: { get: function () { return n.masterPlaylistController_.mediaTransferDuration_() || 0 }, enumerable: !0 }, mediaBytesTransferred: { get: function () { return n.masterPlaylistController_.mediaBytesTransferred_() || 0 }, enumerable: !0 }, mediaSecondsLoaded: { get: function () { return n.masterPlaylistController_.mediaSecondsLoaded_() || 0 }, enumerable: !0 }, buffered: { get: function () { return Zs(n.tech_.buffered()) }, enumerable: !0 }, currentTime: { get: function () { return n.tech_.currentTime() }, enumerable: !0 }, currentSource: { get: function () { return n.tech_.currentSource_ }, enumerable: !0 }, currentTech: { get: function () { return n.tech_.name_ }, enumerable: !0 }, duration: { get: function () { return n.tech_.duration() }, enumerable: !0 }, master: { get: function () { return n.playlists.master }, enumerable: !0 }, playerDimensions: { get: function () { return n.tech_.currentDimensions() }, enumerable: !0 }, seekable: { get: function () { return Zs(n.tech_.seekable()) }, enumerable: !0 }, timestamp: { get: function () { return Date.now() }, enumerable: !0 }, videoPlaybackQuality: { get: function () { return n.tech_.getVideoPlaybackQuality() }, enumerable: !0 } }), this.tech_.one("canplay", this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)), this.tech_.on("bandwidthupdate", function () { n.options_.useBandwidthFromLocalStorage && function (e) { if (!window.localStorage) return !1; var t = Lo(); t = t ? es.mergeOptions(t, e) : e; try { window.localStorage.setItem("videojs-vhs", JSON.stringify(t)) } catch (e) { return !1 } }({ bandwidth: n.bandwidth, throughput: Math.round(n.throughput) }) }), this.masterPlaylistController_.on("selectedinitialmedia", function () { var e, t; t = (e = n).playlists, e.representations = function () { return t.master.playlists.filter(function (e) { return !Os(e) }).map(function (t, n) { return new Eo(e, t, t.uri) }) }, Do(n) }), this.on(this.masterPlaylistController_, "progress", function () { this.tech_.trigger("progress") }), this.tech_.ready(function () { return n.setupQualityLevels_() }), this.tech_.el() && this.tech_.src(es.URL.createObjectURL(this.masterPlaylistController_.mediaSource))) } }, { key: "setupQualityLevels_", value: function () { var e = this, t = es.players[this.tech_.options_.playerId]; t && t.qualityLevels && (this.qualityLevels_ = t.qualityLevels(), this.masterPlaylistController_.on("selectedinitialmedia", function () { var t, n; t = e.qualityLevels_, (n = e).representations().forEach(function (e) { t.addQualityLevel(e) }), Oo(t, n.playlists) }), this.playlists.on("mediachange", function () { Oo(e.qualityLevels_, e.playlists) })) } }, { key: "play", value: function () { this.masterPlaylistController_.play() } }, { key: "setCurrentTime", value: function (e) { this.masterPlaylistController_.setCurrentTime(e) } }, { key: "duration", value: function () { return this.masterPlaylistController_.duration() } }, { key: "seekable", value: function () { return this.masterPlaylistController_.seekable() } }, { key: "dispose", value: function () { this.playbackWatcher_ && this.playbackWatcher_.dispose(), this.masterPlaylistController_ && this.masterPlaylistController_.dispose(), this.qualityLevels_ && this.qualityLevels_.dispose(), this.player_ && (delete this.player_.vhs, delete this.player_.dash, delete this.player_.hls), this.tech_ && this.tech_.hls && delete this.tech_.hls, function e(t, n, i) { null === t && (t = Function.prototype); var r = Object.getOwnPropertyDescriptor(t, n); if (void 0 === r) { var s = Object.getPrototypeOf(t); return null === s ? void 0 : e(s, n, i) } if ("value" in r) return r.value; var a = r.get; return void 0 !== a ? a.call(i) : void 0 }(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "dispose", this).call(this) } }, { key: "convertToProgramTime", value: function (e, t) { return Ks({ playlist: this.masterPlaylistController_.media(), time: e, callback: t }) } }, { key: "seekToProgramTime", value: function (e, t) { var n = !(arguments.length > 2 && void 0 !== arguments[2]) || arguments[2], i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : 2; return Xs({ programTime: e, playlist: this.masterPlaylistController_.media(), retryCount: i, pauseAfterSeek: n, seekTo: this.options_.seekTo, tech: this.options_.tech, callback: t }) } }]), t }(), Ro = { name: "videojs-http-streaming", VERSION: "1.10.6", canHandleSource: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = es.mergeOptions(es.options, t); return Ro.canPlayType(e.type, n) }, handleSource: function (e, t) { var n = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {}, i = es.mergeOptions(es.options, n); return t.hls = new No(e, t, i), t.hls.xhr = Us(), t.hls.src(e.src, e.type), t.hls }, canPlayType: function (e) { var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {}, n = es.mergeOptions(es.options, t).hls.overrideNative, i = Io(e); return i && (!xo.supportsTypeNatively(i) || n) ? "maybe" : "" } }; void 0 !== es.MediaSource && void 0 !== es.URL || (es.MediaSource = Ia, es.URL = Oa), Ia.supportsNativeMediaSources() && es.getTech("Html5").registerSourceHandler(Ro, 0), es.HlsHandler = No, es.HlsSourceHandler = Ro, es.Hls = xo, es.use || es.registerComponent("Hls", xo), es.options.hls = es.options.hls || {}, es.registerPlugin ? es.registerPlugin("reloadSourceOnError", Ao) : es.plugin("reloadSourceOnError", Ao); t.a = es
  }, EVdn: function (e, t, n) {
    var i;
    /*!
     * jQuery JavaScript Library v3.4.1
     * https://jquery.com/
     *
     * Includes Sizzle.js
     * https://sizzlejs.com/
     *
     * Copyright JS Foundation and other contributors
     * Released under the MIT license
     * https://jquery.org/license
     *
     * Date: 2019-05-01T21:04Z
     */
    /*!
     * jQuery JavaScript Library v3.4.1
     * https://jquery.com/
     *
     * Includes Sizzle.js
     * https://sizzlejs.com/
     *
     * Copyright JS Foundation and other contributors
     * Released under the MIT license
     * https://jquery.org/license
     *
     * Date: 2019-05-01T21:04Z
     */
    !function (t, n) { "use strict"; "object" == typeof e.exports ? e.exports = t.document ? n(t, !0) : function (e) { if (!e.document) throw new Error("jQuery requires a window with a document"); return n(e) } : n(t) }("undefined" != typeof window ? window : this, function (n, r) {
      "use strict"; var s = [], a = n.document, o = Object.getPrototypeOf, l = s.slice, u = s.concat, c = s.push, h = s.indexOf, d = {}, f = d.toString, p = d.hasOwnProperty, m = p.toString, g = m.call(Object), v = {}, y = function (e) { return "function" == typeof e && "number" != typeof e.nodeType }, _ = function (e) { return null != e && e === e.window }, b = { type: !0, src: !0, nonce: !0, noModule: !0 }; function T(e, t, n) { var i, r, s = (n = n || a).createElement("script"); if (s.text = e, t) for (i in b) (r = t[i] || t.getAttribute && t.getAttribute(i)) && s.setAttribute(i, r); n.head.appendChild(s).parentNode.removeChild(s) } function S(e) { return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? d[f.call(e)] || "object" : typeof e } var E = function (e, t) { return new E.fn.init(e, t) }, C = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g; function w(e) { var t = !!e && "length" in e && e.length, n = S(e); return !y(e) && !_(e) && ("array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e) } E.fn = E.prototype = { jquery: "3.4.1", constructor: E, length: 0, toArray: function () { return l.call(this) }, get: function (e) { return null == e ? l.call(this) : e < 0 ? this[e + this.length] : this[e] }, pushStack: function (e) { var t = E.merge(this.constructor(), e); return t.prevObject = this, t }, each: function (e) { return E.each(this, e) }, map: function (e) { return this.pushStack(E.map(this, function (t, n) { return e.call(t, n, t) })) }, slice: function () { return this.pushStack(l.apply(this, arguments)) }, first: function () { return this.eq(0) }, last: function () { return this.eq(-1) }, eq: function (e) { var t = this.length, n = +e + (e < 0 ? t : 0); return this.pushStack(n >= 0 && n < t ? [this[n]] : []) }, end: function () { return this.prevObject || this.constructor() }, push: c, sort: s.sort, splice: s.splice }, E.extend = E.fn.extend = function () { var e, t, n, i, r, s, a = arguments[0] || {}, o = 1, l = arguments.length, u = !1; for ("boolean" == typeof a && (u = a, a = arguments[o] || {}, o++), "object" == typeof a || y(a) || (a = {}), o === l && (a = this, o--); o < l; o++)if (null != (e = arguments[o])) for (t in e) i = e[t], "__proto__" !== t && a !== i && (u && i && (E.isPlainObject(i) || (r = Array.isArray(i))) ? (n = a[t], s = r && !Array.isArray(n) ? [] : r || E.isPlainObject(n) ? n : {}, r = !1, a[t] = E.extend(u, s, i)) : void 0 !== i && (a[t] = i)); return a }, E.extend({ expando: "jQuery" + ("3.4.1" + Math.random()).replace(/\D/g, ""), isReady: !0, error: function (e) { throw new Error(e) }, noop: function () { }, isPlainObject: function (e) { var t, n; return !(!e || "[object Object]" !== f.call(e)) && (!(t = o(e)) || "function" == typeof (n = p.call(t, "constructor") && t.constructor) && m.call(n) === g) }, isEmptyObject: function (e) { var t; for (t in e) return !1; return !0 }, globalEval: function (e, t) { T(e, { nonce: t && t.nonce }) }, each: function (e, t) { var n, i = 0; if (w(e)) for (n = e.length; i < n && !1 !== t.call(e[i], i, e[i]); i++); else for (i in e) if (!1 === t.call(e[i], i, e[i])) break; return e }, trim: function (e) { return null == e ? "" : (e + "").replace(C, "") }, makeArray: function (e, t) { var n = t || []; return null != e && (w(Object(e)) ? E.merge(n, "string" == typeof e ? [e] : e) : c.call(n, e)), n }, inArray: function (e, t, n) { return null == t ? -1 : h.call(t, e, n) }, merge: function (e, t) { for (var n = +t.length, i = 0, r = e.length; i < n; i++)e[r++] = t[i]; return e.length = r, e }, grep: function (e, t, n) { for (var i = [], r = 0, s = e.length, a = !n; r < s; r++)!t(e[r], r) !== a && i.push(e[r]); return i }, map: function (e, t, n) { var i, r, s = 0, a = []; if (w(e)) for (i = e.length; s < i; s++)null != (r = t(e[s], s, n)) && a.push(r); else for (s in e) null != (r = t(e[s], s, n)) && a.push(r); return u.apply([], a) }, guid: 1, support: v }), "function" == typeof Symbol && (E.fn[Symbol.iterator] = s[Symbol.iterator]), E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), function (e, t) { d["[object " + t + "]"] = t.toLowerCase() }); var k =
        /*!
         * Sizzle CSS Selector Engine v2.3.4
         * https://sizzlejs.com/
         *
         * Copyright JS Foundation and other contributors
         * Released under the MIT license
         * https://js.foundation/
         *
         * Date: 2019-04-08
         */
        function (e) { var t, n, i, r, s, a, o, l, u, c, h, d, f, p, m, g, v, y, _, b = "sizzle" + 1 * new Date, T = e.document, S = 0, E = 0, C = le(), w = le(), k = le(), A = le(), x = function (e, t) { return e === t && (h = !0), 0 }, I = {}.hasOwnProperty, O = [], D = O.pop, L = O.push, P = O.push, N = O.slice, R = function (e, t) { for (var n = 0, i = e.length; n < i; n++)if (e[n] === t) return n; return -1 }, M = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", U = "[\\x20\\t\\r\\n\\f]", j = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+", B = "\\[" + U + "*(" + j + ")(?:" + U + "*([*^$|!~]?=)" + U + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + j + "))|)" + U + "*\\]", F = ":(" + j + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + B + ")*)|.*)\\)|)", H = new RegExp(U + "+", "g"), q = new RegExp("^" + U + "+|((?:^|[^\\\\])(?:\\\\.)*)" + U + "+$", "g"), V = new RegExp("^" + U + "*," + U + "*"), W = new RegExp("^" + U + "*([>+~]|" + U + ")" + U + "*"), G = new RegExp(U + "|>"), z = new RegExp(F), K = new RegExp("^" + j + "$"), X = { ID: new RegExp("^#(" + j + ")"), CLASS: new RegExp("^\\.(" + j + ")"), TAG: new RegExp("^(" + j + "|[*])"), ATTR: new RegExp("^" + B), PSEUDO: new RegExp("^" + F), CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + U + "*(even|odd|(([+-]|)(\\d*)n|)" + U + "*(?:([+-]|)" + U + "*(\\d+)|))" + U + "*\\)|)", "i"), bool: new RegExp("^(?:" + M + ")$", "i"), needsContext: new RegExp("^" + U + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + U + "*((?:-\\d)?\\d*)" + U + "*\\)|)(?=[^-]|$)", "i") }, Y = /HTML$/i, $ = /^(?:input|select|textarea|button)$/i, Q = /^h\d$/i, J = /^[^{]+\{\s*\[native \w/, Z = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, ee = /[+~]/, te = new RegExp("\\\\([\\da-f]{1,6}" + U + "?|(" + U + ")|.)", "ig"), ne = function (e, t, n) { var i = "0x" + t - 65536; return i != i || n ? t : i < 0 ? String.fromCharCode(i + 65536) : String.fromCharCode(i >> 10 | 55296, 1023 & i | 56320) }, ie = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g, re = function (e, t) { return t ? "\0" === e ? "�" : e.slice(0, -1) + "\\" + e.charCodeAt(e.length - 1).toString(16) + " " : "\\" + e }, se = function () { d() }, ae = be(function (e) { return !0 === e.disabled && "fieldset" === e.nodeName.toLowerCase() }, { dir: "parentNode", next: "legend" }); try { P.apply(O = N.call(T.childNodes), T.childNodes), O[T.childNodes.length].nodeType } catch (e) { P = { apply: O.length ? function (e, t) { L.apply(e, N.call(t)) } : function (e, t) { for (var n = e.length, i = 0; e[n++] = t[i++];); e.length = n - 1 } } } function oe(e, t, i, r) { var s, o, u, c, h, p, v, y = t && t.ownerDocument, S = t ? t.nodeType : 9; if (i = i || [], "string" != typeof e || !e || 1 !== S && 9 !== S && 11 !== S) return i; if (!r && ((t ? t.ownerDocument || t : T) !== f && d(t), t = t || f, m)) { if (11 !== S && (h = Z.exec(e))) if (s = h[1]) { if (9 === S) { if (!(u = t.getElementById(s))) return i; if (u.id === s) return i.push(u), i } else if (y && (u = y.getElementById(s)) && _(t, u) && u.id === s) return i.push(u), i } else { if (h[2]) return P.apply(i, t.getElementsByTagName(e)), i; if ((s = h[3]) && n.getElementsByClassName && t.getElementsByClassName) return P.apply(i, t.getElementsByClassName(s)), i } if (n.qsa && !A[e + " "] && (!g || !g.test(e)) && (1 !== S || "object" !== t.nodeName.toLowerCase())) { if (v = e, y = t, 1 === S && G.test(e)) { for ((c = t.getAttribute("id")) ? c = c.replace(ie, re) : t.setAttribute("id", c = b), o = (p = a(e)).length; o--;)p[o] = "#" + c + " " + _e(p[o]); v = p.join(","), y = ee.test(e) && ve(t.parentNode) || t } try { return P.apply(i, y.querySelectorAll(v)), i } catch (t) { A(e, !0) } finally { c === b && t.removeAttribute("id") } } } return l(e.replace(q, "$1"), t, i, r) } function le() { var e = []; return function t(n, r) { return e.push(n + " ") > i.cacheLength && delete t[e.shift()], t[n + " "] = r } } function ue(e) { return e[b] = !0, e } function ce(e) { var t = f.createElement("fieldset"); try { return !!e(t) } catch (e) { return !1 } finally { t.parentNode && t.parentNode.removeChild(t), t = null } } function he(e, t) { for (var n = e.split("|"), r = n.length; r--;)i.attrHandle[n[r]] = t } function de(e, t) { var n = t && e, i = n && 1 === e.nodeType && 1 === t.nodeType && e.sourceIndex - t.sourceIndex; if (i) return i; if (n) for (; n = n.nextSibling;)if (n === t) return -1; return e ? 1 : -1 } function fe(e) { return function (t) { return "input" === t.nodeName.toLowerCase() && t.type === e } } function pe(e) { return function (t) { var n = t.nodeName.toLowerCase(); return ("input" === n || "button" === n) && t.type === e } } function me(e) { return function (t) { return "form" in t ? t.parentNode && !1 === t.disabled ? "label" in t ? "label" in t.parentNode ? t.parentNode.disabled === e : t.disabled === e : t.isDisabled === e || t.isDisabled !== !e && ae(t) === e : t.disabled === e : "label" in t && t.disabled === e } } function ge(e) { return ue(function (t) { return t = +t, ue(function (n, i) { for (var r, s = e([], n.length, t), a = s.length; a--;)n[r = s[a]] && (n[r] = !(i[r] = n[r])) }) }) } function ve(e) { return e && void 0 !== e.getElementsByTagName && e } for (t in n = oe.support = {}, s = oe.isXML = function (e) { var t = e.namespaceURI, n = (e.ownerDocument || e).documentElement; return !Y.test(t || n && n.nodeName || "HTML") }, d = oe.setDocument = function (e) { var t, r, a = e ? e.ownerDocument || e : T; return a !== f && 9 === a.nodeType && a.documentElement ? (p = (f = a).documentElement, m = !s(f), T !== f && (r = f.defaultView) && r.top !== r && (r.addEventListener ? r.addEventListener("unload", se, !1) : r.attachEvent && r.attachEvent("onunload", se)), n.attributes = ce(function (e) { return e.className = "i", !e.getAttribute("className") }), n.getElementsByTagName = ce(function (e) { return e.appendChild(f.createComment("")), !e.getElementsByTagName("*").length }), n.getElementsByClassName = J.test(f.getElementsByClassName), n.getById = ce(function (e) { return p.appendChild(e).id = b, !f.getElementsByName || !f.getElementsByName(b).length }), n.getById ? (i.filter.ID = function (e) { var t = e.replace(te, ne); return function (e) { return e.getAttribute("id") === t } }, i.find.ID = function (e, t) { if (void 0 !== t.getElementById && m) { var n = t.getElementById(e); return n ? [n] : [] } }) : (i.filter.ID = function (e) { var t = e.replace(te, ne); return function (e) { var n = void 0 !== e.getAttributeNode && e.getAttributeNode("id"); return n && n.value === t } }, i.find.ID = function (e, t) { if (void 0 !== t.getElementById && m) { var n, i, r, s = t.getElementById(e); if (s) { if ((n = s.getAttributeNode("id")) && n.value === e) return [s]; for (r = t.getElementsByName(e), i = 0; s = r[i++];)if ((n = s.getAttributeNode("id")) && n.value === e) return [s] } return [] } }), i.find.TAG = n.getElementsByTagName ? function (e, t) { return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : n.qsa ? t.querySelectorAll(e) : void 0 } : function (e, t) { var n, i = [], r = 0, s = t.getElementsByTagName(e); if ("*" === e) { for (; n = s[r++];)1 === n.nodeType && i.push(n); return i } return s }, i.find.CLASS = n.getElementsByClassName && function (e, t) { if (void 0 !== t.getElementsByClassName && m) return t.getElementsByClassName(e) }, v = [], g = [], (n.qsa = J.test(f.querySelectorAll)) && (ce(function (e) { p.appendChild(e).innerHTML = "<a id='" + b + "'></a><select id='" + b + "-\r\\' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && g.push("[*^$]=" + U + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || g.push("\\[" + U + "*(?:value|" + M + ")"), e.querySelectorAll("[id~=" + b + "-]").length || g.push("~="), e.querySelectorAll(":checked").length || g.push(":checked"), e.querySelectorAll("a#" + b + "+*").length || g.push(".#.+[+~]") }), ce(function (e) { e.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>"; var t = f.createElement("input"); t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && g.push("name" + U + "*[*^$|!~]?="), 2 !== e.querySelectorAll(":enabled").length && g.push(":enabled", ":disabled"), p.appendChild(e).disabled = !0, 2 !== e.querySelectorAll(":disabled").length && g.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), g.push(",.*:") })), (n.matchesSelector = J.test(y = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.oMatchesSelector || p.msMatchesSelector)) && ce(function (e) { n.disconnectedMatch = y.call(e, "*"), y.call(e, "[s!='']:x"), v.push("!=", F) }), g = g.length && new RegExp(g.join("|")), v = v.length && new RegExp(v.join("|")), t = J.test(p.compareDocumentPosition), _ = t || J.test(p.contains) ? function (e, t) { var n = 9 === e.nodeType ? e.documentElement : e, i = t && t.parentNode; return e === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(i))) } : function (e, t) { if (t) for (; t = t.parentNode;)if (t === e) return !0; return !1 }, x = t ? function (e, t) { if (e === t) return h = !0, 0; var i = !e.compareDocumentPosition - !t.compareDocumentPosition; return i || (1 & (i = (e.ownerDocument || e) === (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !n.sortDetached && t.compareDocumentPosition(e) === i ? e === f || e.ownerDocument === T && _(T, e) ? -1 : t === f || t.ownerDocument === T && _(T, t) ? 1 : c ? R(c, e) - R(c, t) : 0 : 4 & i ? -1 : 1) } : function (e, t) { if (e === t) return h = !0, 0; var n, i = 0, r = e.parentNode, s = t.parentNode, a = [e], o = [t]; if (!r || !s) return e === f ? -1 : t === f ? 1 : r ? -1 : s ? 1 : c ? R(c, e) - R(c, t) : 0; if (r === s) return de(e, t); for (n = e; n = n.parentNode;)a.unshift(n); for (n = t; n = n.parentNode;)o.unshift(n); for (; a[i] === o[i];)i++; return i ? de(a[i], o[i]) : a[i] === T ? -1 : o[i] === T ? 1 : 0 }, f) : f }, oe.matches = function (e, t) { return oe(e, null, null, t) }, oe.matchesSelector = function (e, t) { if ((e.ownerDocument || e) !== f && d(e), n.matchesSelector && m && !A[t + " "] && (!v || !v.test(t)) && (!g || !g.test(t))) try { var i = y.call(e, t); if (i || n.disconnectedMatch || e.document && 11 !== e.document.nodeType) return i } catch (e) { A(t, !0) } return oe(t, f, null, [e]).length > 0 }, oe.contains = function (e, t) { return (e.ownerDocument || e) !== f && d(e), _(e, t) }, oe.attr = function (e, t) { (e.ownerDocument || e) !== f && d(e); var r = i.attrHandle[t.toLowerCase()], s = r && I.call(i.attrHandle, t.toLowerCase()) ? r(e, t, !m) : void 0; return void 0 !== s ? s : n.attributes || !m ? e.getAttribute(t) : (s = e.getAttributeNode(t)) && s.specified ? s.value : null }, oe.escape = function (e) { return (e + "").replace(ie, re) }, oe.error = function (e) { throw new Error("Syntax error, unrecognized expression: " + e) }, oe.uniqueSort = function (e) { var t, i = [], r = 0, s = 0; if (h = !n.detectDuplicates, c = !n.sortStable && e.slice(0), e.sort(x), h) { for (; t = e[s++];)t === e[s] && (r = i.push(s)); for (; r--;)e.splice(i[r], 1) } return c = null, e }, r = oe.getText = function (e) { var t, n = "", i = 0, s = e.nodeType; if (s) { if (1 === s || 9 === s || 11 === s) { if ("string" == typeof e.textContent) return e.textContent; for (e = e.firstChild; e; e = e.nextSibling)n += r(e) } else if (3 === s || 4 === s) return e.nodeValue } else for (; t = e[i++];)n += r(t); return n }, (i = oe.selectors = { cacheLength: 50, createPseudo: ue, match: X, attrHandle: {}, find: {}, relative: { ">": { dir: "parentNode", first: !0 }, " ": { dir: "parentNode" }, "+": { dir: "previousSibling", first: !0 }, "~": { dir: "previousSibling" } }, preFilter: { ATTR: function (e) { return e[1] = e[1].replace(te, ne), e[3] = (e[3] || e[4] || e[5] || "").replace(te, ne), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4) }, CHILD: function (e) { return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || oe.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && oe.error(e[0]), e }, PSEUDO: function (e) { var t, n = !e[6] && e[2]; return X.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && z.test(n) && (t = a(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3)) } }, filter: { TAG: function (e) { var t = e.replace(te, ne).toLowerCase(); return "*" === e ? function () { return !0 } : function (e) { return e.nodeName && e.nodeName.toLowerCase() === t } }, CLASS: function (e) { var t = C[e + " "]; return t || (t = new RegExp("(^|" + U + ")" + e + "(" + U + "|$)")) && C(e, function (e) { return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "") }) }, ATTR: function (e, t, n) { return function (i) { var r = oe.attr(i, e); return null == r ? "!=" === t : !t || (r += "", "=" === t ? r === n : "!=" === t ? r !== n : "^=" === t ? n && 0 === r.indexOf(n) : "*=" === t ? n && r.indexOf(n) > -1 : "$=" === t ? n && r.slice(-n.length) === n : "~=" === t ? (" " + r.replace(H, " ") + " ").indexOf(n) > -1 : "|=" === t && (r === n || r.slice(0, n.length + 1) === n + "-")) } }, CHILD: function (e, t, n, i, r) { var s = "nth" !== e.slice(0, 3), a = "last" !== e.slice(-4), o = "of-type" === t; return 1 === i && 0 === r ? function (e) { return !!e.parentNode } : function (t, n, l) { var u, c, h, d, f, p, m = s !== a ? "nextSibling" : "previousSibling", g = t.parentNode, v = o && t.nodeName.toLowerCase(), y = !l && !o, _ = !1; if (g) { if (s) { for (; m;) { for (d = t; d = d[m];)if (o ? d.nodeName.toLowerCase() === v : 1 === d.nodeType) return !1; p = m = "only" === e && !p && "nextSibling" } return !0 } if (p = [a ? g.firstChild : g.lastChild], a && y) { for (_ = (f = (u = (c = (h = (d = g)[b] || (d[b] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[e] || [])[0] === S && u[1]) && u[2], d = f && g.childNodes[f]; d = ++f && d && d[m] || (_ = f = 0) || p.pop();)if (1 === d.nodeType && ++_ && d === t) { c[e] = [S, f, _]; break } } else if (y && (_ = f = (u = (c = (h = (d = t)[b] || (d[b] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[e] || [])[0] === S && u[1]), !1 === _) for (; (d = ++f && d && d[m] || (_ = f = 0) || p.pop()) && ((o ? d.nodeName.toLowerCase() !== v : 1 !== d.nodeType) || !++_ || (y && ((c = (h = d[b] || (d[b] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[e] = [S, _]), d !== t));); return (_ -= r) === i || _ % i == 0 && _ / i >= 0 } } }, PSEUDO: function (e, t) { var n, r = i.pseudos[e] || i.setFilters[e.toLowerCase()] || oe.error("unsupported pseudo: " + e); return r[b] ? r(t) : r.length > 1 ? (n = [e, e, "", t], i.setFilters.hasOwnProperty(e.toLowerCase()) ? ue(function (e, n) { for (var i, s = r(e, t), a = s.length; a--;)e[i = R(e, s[a])] = !(n[i] = s[a]) }) : function (e) { return r(e, 0, n) }) : r } }, pseudos: { not: ue(function (e) { var t = [], n = [], i = o(e.replace(q, "$1")); return i[b] ? ue(function (e, t, n, r) { for (var s, a = i(e, null, r, []), o = e.length; o--;)(s = a[o]) && (e[o] = !(t[o] = s)) }) : function (e, r, s) { return t[0] = e, i(t, null, s, n), t[0] = null, !n.pop() } }), has: ue(function (e) { return function (t) { return oe(e, t).length > 0 } }), contains: ue(function (e) { return e = e.replace(te, ne), function (t) { return (t.textContent || r(t)).indexOf(e) > -1 } }), lang: ue(function (e) { return K.test(e || "") || oe.error("unsupported lang: " + e), e = e.replace(te, ne).toLowerCase(), function (t) { var n; do { if (n = m ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (n = n.toLowerCase()) === e || 0 === n.indexOf(e + "-") } while ((t = t.parentNode) && 1 === t.nodeType); return !1 } }), target: function (t) { var n = e.location && e.location.hash; return n && n.slice(1) === t.id }, root: function (e) { return e === p }, focus: function (e) { return e === f.activeElement && (!f.hasFocus || f.hasFocus()) && !!(e.type || e.href || ~e.tabIndex) }, enabled: me(!1), disabled: me(!0), checked: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && !!e.checked || "option" === t && !!e.selected }, selected: function (e) { return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected }, empty: function (e) { for (e = e.firstChild; e; e = e.nextSibling)if (e.nodeType < 6) return !1; return !0 }, parent: function (e) { return !i.pseudos.empty(e) }, header: function (e) { return Q.test(e.nodeName) }, input: function (e) { return $.test(e.nodeName) }, button: function (e) { var t = e.nodeName.toLowerCase(); return "input" === t && "button" === e.type || "button" === t }, text: function (e) { var t; return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase()) }, first: ge(function () { return [0] }), last: ge(function (e, t) { return [t - 1] }), eq: ge(function (e, t, n) { return [n < 0 ? n + t : n] }), even: ge(function (e, t) { for (var n = 0; n < t; n += 2)e.push(n); return e }), odd: ge(function (e, t) { for (var n = 1; n < t; n += 2)e.push(n); return e }), lt: ge(function (e, t, n) { for (var i = n < 0 ? n + t : n > t ? t : n; --i >= 0;)e.push(i); return e }), gt: ge(function (e, t, n) { for (var i = n < 0 ? n + t : n; ++i < t;)e.push(i); return e }) } }).pseudos.nth = i.pseudos.eq, { radio: !0, checkbox: !0, file: !0, password: !0, image: !0 }) i.pseudos[t] = fe(t); for (t in { submit: !0, reset: !0 }) i.pseudos[t] = pe(t); function ye() { } function _e(e) { for (var t = 0, n = e.length, i = ""; t < n; t++)i += e[t].value; return i } function be(e, t, n) { var i = t.dir, r = t.next, s = r || i, a = n && "parentNode" === s, o = E++; return t.first ? function (t, n, r) { for (; t = t[i];)if (1 === t.nodeType || a) return e(t, n, r); return !1 } : function (t, n, l) { var u, c, h, d = [S, o]; if (l) { for (; t = t[i];)if ((1 === t.nodeType || a) && e(t, n, l)) return !0 } else for (; t = t[i];)if (1 === t.nodeType || a) if (c = (h = t[b] || (t[b] = {}))[t.uniqueID] || (h[t.uniqueID] = {}), r && r === t.nodeName.toLowerCase()) t = t[i] || t; else { if ((u = c[s]) && u[0] === S && u[1] === o) return d[2] = u[2]; if (c[s] = d, d[2] = e(t, n, l)) return !0 } return !1 } } function Te(e) { return e.length > 1 ? function (t, n, i) { for (var r = e.length; r--;)if (!e[r](t, n, i)) return !1; return !0 } : e[0] } function Se(e, t, n, i, r) { for (var s, a = [], o = 0, l = e.length, u = null != t; o < l; o++)(s = e[o]) && (n && !n(s, i, r) || (a.push(s), u && t.push(o))); return a } function Ee(e, t, n, i, r, s) { return i && !i[b] && (i = Ee(i)), r && !r[b] && (r = Ee(r, s)), ue(function (s, a, o, l) { var u, c, h, d = [], f = [], p = a.length, m = s || function (e, t, n) { for (var i = 0, r = t.length; i < r; i++)oe(e, t[i], n); return n }(t || "*", o.nodeType ? [o] : o, []), g = !e || !s && t ? m : Se(m, d, e, o, l), v = n ? r || (s ? e : p || i) ? [] : a : g; if (n && n(g, v, o, l), i) for (u = Se(v, f), i(u, [], o, l), c = u.length; c--;)(h = u[c]) && (v[f[c]] = !(g[f[c]] = h)); if (s) { if (r || e) { if (r) { for (u = [], c = v.length; c--;)(h = v[c]) && u.push(g[c] = h); r(null, v = [], u, l) } for (c = v.length; c--;)(h = v[c]) && (u = r ? R(s, h) : d[c]) > -1 && (s[u] = !(a[u] = h)) } } else v = Se(v === a ? v.splice(p, v.length) : v), r ? r(null, a, v, l) : P.apply(a, v) }) } function Ce(e) { for (var t, n, r, s = e.length, a = i.relative[e[0].type], o = a || i.relative[" "], l = a ? 1 : 0, c = be(function (e) { return e === t }, o, !0), h = be(function (e) { return R(t, e) > -1 }, o, !0), d = [function (e, n, i) { var r = !a && (i || n !== u) || ((t = n).nodeType ? c(e, n, i) : h(e, n, i)); return t = null, r }]; l < s; l++)if (n = i.relative[e[l].type]) d = [be(Te(d), n)]; else { if ((n = i.filter[e[l].type].apply(null, e[l].matches))[b]) { for (r = ++l; r < s && !i.relative[e[r].type]; r++); return Ee(l > 1 && Te(d), l > 1 && _e(e.slice(0, l - 1).concat({ value: " " === e[l - 2].type ? "*" : "" })).replace(q, "$1"), n, l < r && Ce(e.slice(l, r)), r < s && Ce(e = e.slice(r)), r < s && _e(e)) } d.push(n) } return Te(d) } return ye.prototype = i.filters = i.pseudos, i.setFilters = new ye, a = oe.tokenize = function (e, t) { var n, r, s, a, o, l, u, c = w[e + " "]; if (c) return t ? 0 : c.slice(0); for (o = e, l = [], u = i.preFilter; o;) { for (a in n && !(r = V.exec(o)) || (r && (o = o.slice(r[0].length) || o), l.push(s = [])), n = !1, (r = W.exec(o)) && (n = r.shift(), s.push({ value: n, type: r[0].replace(q, " ") }), o = o.slice(n.length)), i.filter) !(r = X[a].exec(o)) || u[a] && !(r = u[a](r)) || (n = r.shift(), s.push({ value: n, type: a, matches: r }), o = o.slice(n.length)); if (!n) break } return t ? o.length : o ? oe.error(e) : w(e, l).slice(0) }, o = oe.compile = function (e, t) { var n, r = [], s = [], o = k[e + " "]; if (!o) { for (t || (t = a(e)), n = t.length; n--;)(o = Ce(t[n]))[b] ? r.push(o) : s.push(o); (o = k(e, function (e, t) { var n = t.length > 0, r = e.length > 0, s = function (s, a, o, l, c) { var h, p, g, v = 0, y = "0", _ = s && [], b = [], T = u, E = s || r && i.find.TAG("*", c), C = S += null == T ? 1 : Math.random() || .1, w = E.length; for (c && (u = a === f || a || c); y !== w && null != (h = E[y]); y++) { if (r && h) { for (p = 0, a || h.ownerDocument === f || (d(h), o = !m); g = e[p++];)if (g(h, a || f, o)) { l.push(h); break } c && (S = C) } n && ((h = !g && h) && v--, s && _.push(h)) } if (v += y, n && y !== v) { for (p = 0; g = t[p++];)g(_, b, a, o); if (s) { if (v > 0) for (; y--;)_[y] || b[y] || (b[y] = D.call(l)); b = Se(b) } P.apply(l, b), c && !s && b.length > 0 && v + t.length > 1 && oe.uniqueSort(l) } return c && (S = C, u = T), _ }; return n ? ue(s) : s }(s, r))).selector = e } return o }, l = oe.select = function (e, t, n, r) { var s, l, u, c, h, d = "function" == typeof e && e, f = !r && a(e = d.selector || e); if (n = n || [], 1 === f.length) { if ((l = f[0] = f[0].slice(0)).length > 2 && "ID" === (u = l[0]).type && 9 === t.nodeType && m && i.relative[l[1].type]) { if (!(t = (i.find.ID(u.matches[0].replace(te, ne), t) || [])[0])) return n; d && (t = t.parentNode), e = e.slice(l.shift().value.length) } for (s = X.needsContext.test(e) ? 0 : l.length; s-- && (u = l[s], !i.relative[c = u.type]);)if ((h = i.find[c]) && (r = h(u.matches[0].replace(te, ne), ee.test(l[0].type) && ve(t.parentNode) || t))) { if (l.splice(s, 1), !(e = r.length && _e(l))) return P.apply(n, r), n; break } } return (d || o(e, f))(r, t, !m, n, !t || ee.test(e) && ve(t.parentNode) || t), n }, n.sortStable = b.split("").sort(x).join("") === b, n.detectDuplicates = !!h, d(), n.sortDetached = ce(function (e) { return 1 & e.compareDocumentPosition(f.createElement("fieldset")) }), ce(function (e) { return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href") }) || he("type|href|height|width", function (e, t, n) { if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2) }), n.attributes && ce(function (e) { return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value") }) || he("value", function (e, t, n) { if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue }), ce(function (e) { return null == e.getAttribute("disabled") }) || he(M, function (e, t, n) { var i; if (!n) return !0 === e[t] ? t.toLowerCase() : (i = e.getAttributeNode(t)) && i.specified ? i.value : null }), oe }(n); E.find = k, E.expr = k.selectors, E.expr[":"] = E.expr.pseudos, E.uniqueSort = E.unique = k.uniqueSort, E.text = k.getText, E.isXMLDoc = k.isXML, E.contains = k.contains, E.escapeSelector = k.escape; var A = function (e, t, n) { for (var i = [], r = void 0 !== n; (e = e[t]) && 9 !== e.nodeType;)if (1 === e.nodeType) { if (r && E(e).is(n)) break; i.push(e) } return i }, x = function (e, t) { for (var n = []; e; e = e.nextSibling)1 === e.nodeType && e !== t && n.push(e); return n }, I = E.expr.match.needsContext; function O(e, t) { return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase() } var D = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i; function L(e, t, n) { return y(t) ? E.grep(e, function (e, i) { return !!t.call(e, i, e) !== n }) : t.nodeType ? E.grep(e, function (e) { return e === t !== n }) : "string" != typeof t ? E.grep(e, function (e) { return h.call(t, e) > -1 !== n }) : E.filter(t, e, n) } E.filter = function (e, t, n) { var i = t[0]; return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === i.nodeType ? E.find.matchesSelector(i, e) ? [i] : [] : E.find.matches(e, E.grep(t, function (e) { return 1 === e.nodeType })) }, E.fn.extend({ find: function (e) { var t, n, i = this.length, r = this; if ("string" != typeof e) return this.pushStack(E(e).filter(function () { for (t = 0; t < i; t++)if (E.contains(r[t], this)) return !0 })); for (n = this.pushStack([]), t = 0; t < i; t++)E.find(e, r[t], n); return i > 1 ? E.uniqueSort(n) : n }, filter: function (e) { return this.pushStack(L(this, e || [], !1)) }, not: function (e) { return this.pushStack(L(this, e || [], !0)) }, is: function (e) { return !!L(this, "string" == typeof e && I.test(e) ? E(e) : e || [], !1).length } }); var P, N = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/; (E.fn.init = function (e, t, n) { var i, r; if (!e) return this; if (n = n || P, "string" == typeof e) { if (!(i = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : N.exec(e)) || !i[1] && t) return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e); if (i[1]) { if (t = t instanceof E ? t[0] : t, E.merge(this, E.parseHTML(i[1], t && t.nodeType ? t.ownerDocument || t : a, !0)), D.test(i[1]) && E.isPlainObject(t)) for (i in t) y(this[i]) ? this[i](t[i]) : this.attr(i, t[i]); return this } return (r = a.getElementById(i[2])) && (this[0] = r, this.length = 1), this } return e.nodeType ? (this[0] = e, this.length = 1, this) : y(e) ? void 0 !== n.ready ? n.ready(e) : e(E) : E.makeArray(e, this) }).prototype = E.fn, P = E(a); var R = /^(?:parents|prev(?:Until|All))/, M = { children: !0, contents: !0, next: !0, prev: !0 }; function U(e, t) { for (; (e = e[t]) && 1 !== e.nodeType;); return e } E.fn.extend({ has: function (e) { var t = E(e, this), n = t.length; return this.filter(function () { for (var e = 0; e < n; e++)if (E.contains(this, t[e])) return !0 }) }, closest: function (e, t) { var n, i = 0, r = this.length, s = [], a = "string" != typeof e && E(e); if (!I.test(e)) for (; i < r; i++)for (n = this[i]; n && n !== t; n = n.parentNode)if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && E.find.matchesSelector(n, e))) { s.push(n); break } return this.pushStack(s.length > 1 ? E.uniqueSort(s) : s) }, index: function (e) { return e ? "string" == typeof e ? h.call(E(e), this[0]) : h.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1 }, add: function (e, t) { return this.pushStack(E.uniqueSort(E.merge(this.get(), E(e, t)))) }, addBack: function (e) { return this.add(null == e ? this.prevObject : this.prevObject.filter(e)) } }), E.each({ parent: function (e) { var t = e.parentNode; return t && 11 !== t.nodeType ? t : null }, parents: function (e) { return A(e, "parentNode") }, parentsUntil: function (e, t, n) { return A(e, "parentNode", n) }, next: function (e) { return U(e, "nextSibling") }, prev: function (e) { return U(e, "previousSibling") }, nextAll: function (e) { return A(e, "nextSibling") }, prevAll: function (e) { return A(e, "previousSibling") }, nextUntil: function (e, t, n) { return A(e, "nextSibling", n) }, prevUntil: function (e, t, n) { return A(e, "previousSibling", n) }, siblings: function (e) { return x((e.parentNode || {}).firstChild, e) }, children: function (e) { return x(e.firstChild) }, contents: function (e) { return void 0 !== e.contentDocument ? e.contentDocument : (O(e, "template") && (e = e.content || e), E.merge([], e.childNodes)) } }, function (e, t) { E.fn[e] = function (n, i) { var r = E.map(this, t, n); return "Until" !== e.slice(-5) && (i = n), i && "string" == typeof i && (r = E.filter(i, r)), this.length > 1 && (M[e] || E.uniqueSort(r), R.test(e) && r.reverse()), this.pushStack(r) } }); var j = /[^\x20\t\r\n\f]+/g; function B(e) { return e } function F(e) { throw e } function H(e, t, n, i) { var r; try { e && y(r = e.promise) ? r.call(e).done(t).fail(n) : e && y(r = e.then) ? r.call(e, t, n) : t.apply(void 0, [e].slice(i)) } catch (e) { n.apply(void 0, [e]) } } E.Callbacks = function (e) { e = "string" == typeof e ? function (e) { var t = {}; return E.each(e.match(j) || [], function (e, n) { t[n] = !0 }), t }(e) : E.extend({}, e); var t, n, i, r, s = [], a = [], o = -1, l = function () { for (r = r || e.once, i = t = !0; a.length; o = -1)for (n = a.shift(); ++o < s.length;)!1 === s[o].apply(n[0], n[1]) && e.stopOnFalse && (o = s.length, n = !1); e.memory || (n = !1), t = !1, r && (s = n ? [] : "") }, u = { add: function () { return s && (n && !t && (o = s.length - 1, a.push(n)), function t(n) { E.each(n, function (n, i) { y(i) ? e.unique && u.has(i) || s.push(i) : i && i.length && "string" !== S(i) && t(i) }) }(arguments), n && !t && l()), this }, remove: function () { return E.each(arguments, function (e, t) { for (var n; (n = E.inArray(t, s, n)) > -1;)s.splice(n, 1), n <= o && o-- }), this }, has: function (e) { return e ? E.inArray(e, s) > -1 : s.length > 0 }, empty: function () { return s && (s = []), this }, disable: function () { return r = a = [], s = n = "", this }, disabled: function () { return !s }, lock: function () { return r = a = [], n || t || (s = n = ""), this }, locked: function () { return !!r }, fireWith: function (e, n) { return r || (n = [e, (n = n || []).slice ? n.slice() : n], a.push(n), t || l()), this }, fire: function () { return u.fireWith(this, arguments), this }, fired: function () { return !!i } }; return u }, E.extend({ Deferred: function (e) { var t = [["notify", "progress", E.Callbacks("memory"), E.Callbacks("memory"), 2], ["resolve", "done", E.Callbacks("once memory"), E.Callbacks("once memory"), 0, "resolved"], ["reject", "fail", E.Callbacks("once memory"), E.Callbacks("once memory"), 1, "rejected"]], i = "pending", r = { state: function () { return i }, always: function () { return s.done(arguments).fail(arguments), this }, catch: function (e) { return r.then(null, e) }, pipe: function () { var e = arguments; return E.Deferred(function (n) { E.each(t, function (t, i) { var r = y(e[i[4]]) && e[i[4]]; s[i[1]](function () { var e = r && r.apply(this, arguments); e && y(e.promise) ? e.promise().progress(n.notify).done(n.resolve).fail(n.reject) : n[i[0] + "With"](this, r ? [e] : arguments) }) }), e = null }).promise() }, then: function (e, i, r) { var s = 0; function a(e, t, i, r) { return function () { var o = this, l = arguments, u = function () { var n, u; if (!(e < s)) { if ((n = i.apply(o, l)) === t.promise()) throw new TypeError("Thenable self-resolution"); u = n && ("object" == typeof n || "function" == typeof n) && n.then, y(u) ? r ? u.call(n, a(s, t, B, r), a(s, t, F, r)) : (s++, u.call(n, a(s, t, B, r), a(s, t, F, r), a(s, t, B, t.notifyWith))) : (i !== B && (o = void 0, l = [n]), (r || t.resolveWith)(o, l)) } }, c = r ? u : function () { try { u() } catch (n) { E.Deferred.exceptionHook && E.Deferred.exceptionHook(n, c.stackTrace), e + 1 >= s && (i !== F && (o = void 0, l = [n]), t.rejectWith(o, l)) } }; e ? c() : (E.Deferred.getStackHook && (c.stackTrace = E.Deferred.getStackHook()), n.setTimeout(c)) } } return E.Deferred(function (n) { t[0][3].add(a(0, n, y(r) ? r : B, n.notifyWith)), t[1][3].add(a(0, n, y(e) ? e : B)), t[2][3].add(a(0, n, y(i) ? i : F)) }).promise() }, promise: function (e) { return null != e ? E.extend(e, r) : r } }, s = {}; return E.each(t, function (e, n) { var a = n[2], o = n[5]; r[n[1]] = a.add, o && a.add(function () { i = o }, t[3 - e][2].disable, t[3 - e][3].disable, t[0][2].lock, t[0][3].lock), a.add(n[3].fire), s[n[0]] = function () { return s[n[0] + "With"](this === s ? void 0 : this, arguments), this }, s[n[0] + "With"] = a.fireWith }), r.promise(s), e && e.call(s, s), s }, when: function (e) { var t = arguments.length, n = t, i = Array(n), r = l.call(arguments), s = E.Deferred(), a = function (e) { return function (n) { i[e] = this, r[e] = arguments.length > 1 ? l.call(arguments) : n, --t || s.resolveWith(i, r) } }; if (t <= 1 && (H(e, s.done(a(n)).resolve, s.reject, !t), "pending" === s.state() || y(r[n] && r[n].then))) return s.then(); for (; n--;)H(r[n], a(n), s.reject); return s.promise() } }); var q = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/; E.Deferred.exceptionHook = function (e, t) { n.console && n.console.warn && e && q.test(e.name) && n.console.warn("jQuery.Deferred exception: " + e.message, e.stack, t) }, E.readyException = function (e) { n.setTimeout(function () { throw e }) }; var V = E.Deferred(); function W() { a.removeEventListener("DOMContentLoaded", W), n.removeEventListener("load", W), E.ready() } E.fn.ready = function (e) { return V.then(e).catch(function (e) { E.readyException(e) }), this }, E.extend({ isReady: !1, readyWait: 1, ready: function (e) { (!0 === e ? --E.readyWait : E.isReady) || (E.isReady = !0, !0 !== e && --E.readyWait > 0 || V.resolveWith(a, [E])) } }), E.ready.then = V.then, "complete" === a.readyState || "loading" !== a.readyState && !a.documentElement.doScroll ? n.setTimeout(E.ready) : (a.addEventListener("DOMContentLoaded", W), n.addEventListener("load", W)); var G = function (e, t, n, i, r, s, a) { var o = 0, l = e.length, u = null == n; if ("object" === S(n)) for (o in r = !0, n) G(e, t, o, n[o], !0, s, a); else if (void 0 !== i && (r = !0, y(i) || (a = !0), u && (a ? (t.call(e, i), t = null) : (u = t, t = function (e, t, n) { return u.call(E(e), n) })), t)) for (; o < l; o++)t(e[o], n, a ? i : i.call(e[o], o, t(e[o], n))); return r ? e : u ? t.call(e) : l ? t(e[0], n) : s }, z = /^-ms-/, K = /-([a-z])/g; function X(e, t) { return t.toUpperCase() } function Y(e) { return e.replace(z, "ms-").replace(K, X) } var $ = function (e) { return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType }; function Q() { this.expando = E.expando + Q.uid++ } Q.uid = 1, Q.prototype = { cache: function (e) { var t = e[this.expando]; return t || (t = {}, $(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, { value: t, configurable: !0 }))), t }, set: function (e, t, n) { var i, r = this.cache(e); if ("string" == typeof t) r[Y(t)] = n; else for (i in t) r[Y(i)] = t[i]; return r }, get: function (e, t) { return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][Y(t)] }, access: function (e, t, n) { return void 0 === t || t && "string" == typeof t && void 0 === n ? this.get(e, t) : (this.set(e, t, n), void 0 !== n ? n : t) }, remove: function (e, t) { var n, i = e[this.expando]; if (void 0 !== i) { if (void 0 !== t) { n = (t = Array.isArray(t) ? t.map(Y) : (t = Y(t)) in i ? [t] : t.match(j) || []).length; for (; n--;)delete i[t[n]] } (void 0 === t || E.isEmptyObject(i)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando]) } }, hasData: function (e) { var t = e[this.expando]; return void 0 !== t && !E.isEmptyObject(t) } }; var J = new Q, Z = new Q, ee = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, te = /[A-Z]/g; function ne(e, t, n) { var i; if (void 0 === n && 1 === e.nodeType) if (i = "data-" + t.replace(te, "-$&").toLowerCase(), "string" == typeof (n = e.getAttribute(i))) { try { n = function (e) { return "true" === e || "false" !== e && ("null" === e ? null : e === +e + "" ? +e : ee.test(e) ? JSON.parse(e) : e) }(n) } catch (e) { } Z.set(e, t, n) } else n = void 0; return n } E.extend({ hasData: function (e) { return Z.hasData(e) || J.hasData(e) }, data: function (e, t, n) { return Z.access(e, t, n) }, removeData: function (e, t) { Z.remove(e, t) }, _data: function (e, t, n) { return J.access(e, t, n) }, _removeData: function (e, t) { J.remove(e, t) } }), E.fn.extend({ data: function (e, t) { var n, i, r, s = this[0], a = s && s.attributes; if (void 0 === e) { if (this.length && (r = Z.get(s), 1 === s.nodeType && !J.get(s, "hasDataAttrs"))) { for (n = a.length; n--;)a[n] && 0 === (i = a[n].name).indexOf("data-") && (i = Y(i.slice(5)), ne(s, i, r[i])); J.set(s, "hasDataAttrs", !0) } return r } return "object" == typeof e ? this.each(function () { Z.set(this, e) }) : G(this, function (t) { var n; if (s && void 0 === t) return void 0 !== (n = Z.get(s, e)) ? n : void 0 !== (n = ne(s, e)) ? n : void 0; this.each(function () { Z.set(this, e, t) }) }, null, t, arguments.length > 1, null, !0) }, removeData: function (e) { return this.each(function () { Z.remove(this, e) }) } }), E.extend({ queue: function (e, t, n) { var i; if (e) return t = (t || "fx") + "queue", i = J.get(e, t), n && (!i || Array.isArray(n) ? i = J.access(e, t, E.makeArray(n)) : i.push(n)), i || [] }, dequeue: function (e, t) { t = t || "fx"; var n = E.queue(e, t), i = n.length, r = n.shift(), s = E._queueHooks(e, t); "inprogress" === r && (r = n.shift(), i--), r && ("fx" === t && n.unshift("inprogress"), delete s.stop, r.call(e, function () { E.dequeue(e, t) }, s)), !i && s && s.empty.fire() }, _queueHooks: function (e, t) { var n = t + "queueHooks"; return J.get(e, n) || J.access(e, n, { empty: E.Callbacks("once memory").add(function () { J.remove(e, [t + "queue", n]) }) }) } }), E.fn.extend({ queue: function (e, t) { var n = 2; return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? E.queue(this[0], e) : void 0 === t ? this : this.each(function () { var n = E.queue(this, e, t); E._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && E.dequeue(this, e) }) }, dequeue: function (e) { return this.each(function () { E.dequeue(this, e) }) }, clearQueue: function (e) { return this.queue(e || "fx", []) }, promise: function (e, t) { var n, i = 1, r = E.Deferred(), s = this, a = this.length, o = function () { --i || r.resolveWith(s, [s]) }; for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; a--;)(n = J.get(s[a], e + "queueHooks")) && n.empty && (i++, n.empty.add(o)); return o(), r.promise(t) } }); var ie = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source, re = new RegExp("^(?:([+-])=|)(" + ie + ")([a-z%]*)$", "i"), se = ["Top", "Right", "Bottom", "Left"], ae = a.documentElement, oe = function (e) { return E.contains(e.ownerDocument, e) }, le = { composed: !0 }; ae.getRootNode && (oe = function (e) { return E.contains(e.ownerDocument, e) || e.getRootNode(le) === e.ownerDocument }); var ue = function (e, t) { return "none" === (e = t || e).style.display || "" === e.style.display && oe(e) && "none" === E.css(e, "display") }, ce = function (e, t, n, i) { var r, s, a = {}; for (s in t) a[s] = e.style[s], e.style[s] = t[s]; for (s in r = n.apply(e, i || []), t) e.style[s] = a[s]; return r }; function he(e, t, n, i) { var r, s, a = 20, o = i ? function () { return i.cur() } : function () { return E.css(e, t, "") }, l = o(), u = n && n[3] || (E.cssNumber[t] ? "" : "px"), c = e.nodeType && (E.cssNumber[t] || "px" !== u && +l) && re.exec(E.css(e, t)); if (c && c[3] !== u) { for (l /= 2, u = u || c[3], c = +l || 1; a--;)E.style(e, t, c + u), (1 - s) * (1 - (s = o() / l || .5)) <= 0 && (a = 0), c /= s; c *= 2, E.style(e, t, c + u), n = n || [] } return n && (c = +c || +l || 0, r = n[1] ? c + (n[1] + 1) * n[2] : +n[2], i && (i.unit = u, i.start = c, i.end = r)), r } var de = {}; function fe(e) { var t, n = e.ownerDocument, i = e.nodeName, r = de[i]; return r || (t = n.body.appendChild(n.createElement(i)), r = E.css(t, "display"), t.parentNode.removeChild(t), "none" === r && (r = "block"), de[i] = r, r) } function pe(e, t) { for (var n, i, r = [], s = 0, a = e.length; s < a; s++)(i = e[s]).style && (n = i.style.display, t ? ("none" === n && (r[s] = J.get(i, "display") || null, r[s] || (i.style.display = "")), "" === i.style.display && ue(i) && (r[s] = fe(i))) : "none" !== n && (r[s] = "none", J.set(i, "display", n))); for (s = 0; s < a; s++)null != r[s] && (e[s].style.display = r[s]); return e } E.fn.extend({ show: function () { return pe(this, !0) }, hide: function () { return pe(this) }, toggle: function (e) { return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each(function () { ue(this) ? E(this).show() : E(this).hide() }) } }); var me = /^(?:checkbox|radio)$/i, ge = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i, ve = /^$|^module$|\/(?:java|ecma)script/i, ye = { option: [1, "<select multiple='multiple'>", "</select>"], thead: [1, "<table>", "</table>"], col: [2, "<table><colgroup>", "</colgroup></table>"], tr: [2, "<table><tbody>", "</tbody></table>"], td: [3, "<table><tbody><tr>", "</tr></tbody></table>"], _default: [0, "", ""] }; function _e(e, t) { var n; return n = void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t || "*") : void 0 !== e.querySelectorAll ? e.querySelectorAll(t || "*") : [], void 0 === t || t && O(e, t) ? E.merge([e], n) : n } function be(e, t) { for (var n = 0, i = e.length; n < i; n++)J.set(e[n], "globalEval", !t || J.get(t[n], "globalEval")) } ye.optgroup = ye.option, ye.tbody = ye.tfoot = ye.colgroup = ye.caption = ye.thead, ye.th = ye.td; var Te, Se, Ee = /<|&#?\w+;/; function Ce(e, t, n, i, r) { for (var s, a, o, l, u, c, h = t.createDocumentFragment(), d = [], f = 0, p = e.length; f < p; f++)if ((s = e[f]) || 0 === s) if ("object" === S(s)) E.merge(d, s.nodeType ? [s] : s); else if (Ee.test(s)) { for (a = a || h.appendChild(t.createElement("div")), o = (ge.exec(s) || ["", ""])[1].toLowerCase(), l = ye[o] || ye._default, a.innerHTML = l[1] + E.htmlPrefilter(s) + l[2], c = l[0]; c--;)a = a.lastChild; E.merge(d, a.childNodes), (a = h.firstChild).textContent = "" } else d.push(t.createTextNode(s)); for (h.textContent = "", f = 0; s = d[f++];)if (i && E.inArray(s, i) > -1) r && r.push(s); else if (u = oe(s), a = _e(h.appendChild(s), "script"), u && be(a), n) for (c = 0; s = a[c++];)ve.test(s.type || "") && n.push(s); return h } Te = a.createDocumentFragment().appendChild(a.createElement("div")), (Se = a.createElement("input")).setAttribute("type", "radio"), Se.setAttribute("checked", "checked"), Se.setAttribute("name", "t"), Te.appendChild(Se), v.checkClone = Te.cloneNode(!0).cloneNode(!0).lastChild.checked, Te.innerHTML = "<textarea>x</textarea>", v.noCloneChecked = !!Te.cloneNode(!0).lastChild.defaultValue; var we = /^key/, ke = /^(?:mouse|pointer|contextmenu|drag|drop)|click/, Ae = /^([^.]*)(?:\.(.+)|)/; function xe() { return !0 } function Ie() { return !1 } function Oe(e, t) { return e === function () { try { return a.activeElement } catch (e) { } }() == ("focus" === t) } function De(e, t, n, i, r, s) { var a, o; if ("object" == typeof t) { for (o in "string" != typeof n && (i = i || n, n = void 0), t) De(e, o, n, i, t[o], s); return e } if (null == i && null == r ? (r = n, i = n = void 0) : null == r && ("string" == typeof n ? (r = i, i = void 0) : (r = i, i = n, n = void 0)), !1 === r) r = Ie; else if (!r) return e; return 1 === s && (a = r, (r = function (e) { return E().off(e), a.apply(this, arguments) }).guid = a.guid || (a.guid = E.guid++)), e.each(function () { E.event.add(this, t, r, i, n) }) } function Le(e, t, n) { n ? (J.set(e, t, !1), E.event.add(e, t, { namespace: !1, handler: function (e) { var i, r, s = J.get(this, t); if (1 & e.isTrigger && this[t]) { if (s.length) (E.event.special[t] || {}).delegateType && e.stopPropagation(); else if (s = l.call(arguments), J.set(this, t, s), i = n(this, t), this[t](), s !== (r = J.get(this, t)) || i ? J.set(this, t, !1) : r = {}, s !== r) return e.stopImmediatePropagation(), e.preventDefault(), r.value } else s.length && (J.set(this, t, { value: E.event.trigger(E.extend(s[0], E.Event.prototype), s.slice(1), this) }), e.stopImmediatePropagation()) } })) : void 0 === J.get(e, t) && E.event.add(e, t, xe) } E.event = { global: {}, add: function (e, t, n, i, r) { var s, a, o, l, u, c, h, d, f, p, m, g = J.get(e); if (g) for (n.handler && (n = (s = n).handler, r = s.selector), r && E.find.matchesSelector(ae, r), n.guid || (n.guid = E.guid++), (l = g.events) || (l = g.events = {}), (a = g.handle) || (a = g.handle = function (t) { return void 0 !== E && E.event.triggered !== t.type ? E.event.dispatch.apply(e, arguments) : void 0 }), u = (t = (t || "").match(j) || [""]).length; u--;)f = m = (o = Ae.exec(t[u]) || [])[1], p = (o[2] || "").split(".").sort(), f && (h = E.event.special[f] || {}, f = (r ? h.delegateType : h.bindType) || f, h = E.event.special[f] || {}, c = E.extend({ type: f, origType: m, data: i, handler: n, guid: n.guid, selector: r, needsContext: r && E.expr.match.needsContext.test(r), namespace: p.join(".") }, s), (d = l[f]) || ((d = l[f] = []).delegateCount = 0, h.setup && !1 !== h.setup.call(e, i, p, a) || e.addEventListener && e.addEventListener(f, a)), h.add && (h.add.call(e, c), c.handler.guid || (c.handler.guid = n.guid)), r ? d.splice(d.delegateCount++, 0, c) : d.push(c), E.event.global[f] = !0) }, remove: function (e, t, n, i, r) { var s, a, o, l, u, c, h, d, f, p, m, g = J.hasData(e) && J.get(e); if (g && (l = g.events)) { for (u = (t = (t || "").match(j) || [""]).length; u--;)if (f = m = (o = Ae.exec(t[u]) || [])[1], p = (o[2] || "").split(".").sort(), f) { for (h = E.event.special[f] || {}, d = l[f = (i ? h.delegateType : h.bindType) || f] || [], o = o[2] && new RegExp("(^|\\.)" + p.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = s = d.length; s--;)c = d[s], !r && m !== c.origType || n && n.guid !== c.guid || o && !o.test(c.namespace) || i && i !== c.selector && ("**" !== i || !c.selector) || (d.splice(s, 1), c.selector && d.delegateCount--, h.remove && h.remove.call(e, c)); a && !d.length && (h.teardown && !1 !== h.teardown.call(e, p, g.handle) || E.removeEvent(e, f, g.handle), delete l[f]) } else for (f in l) E.event.remove(e, f + t[u], n, i, !0); E.isEmptyObject(l) && J.remove(e, "handle events") } }, dispatch: function (e) { var t, n, i, r, s, a, o = E.event.fix(e), l = new Array(arguments.length), u = (J.get(this, "events") || {})[o.type] || [], c = E.event.special[o.type] || {}; for (l[0] = o, t = 1; t < arguments.length; t++)l[t] = arguments[t]; if (o.delegateTarget = this, !c.preDispatch || !1 !== c.preDispatch.call(this, o)) { for (a = E.event.handlers.call(this, o, u), t = 0; (r = a[t++]) && !o.isPropagationStopped();)for (o.currentTarget = r.elem, n = 0; (s = r.handlers[n++]) && !o.isImmediatePropagationStopped();)o.rnamespace && !1 !== s.namespace && !o.rnamespace.test(s.namespace) || (o.handleObj = s, o.data = s.data, void 0 !== (i = ((E.event.special[s.origType] || {}).handle || s.handler).apply(r.elem, l)) && !1 === (o.result = i) && (o.preventDefault(), o.stopPropagation())); return c.postDispatch && c.postDispatch.call(this, o), o.result } }, handlers: function (e, t) { var n, i, r, s, a, o = [], l = t.delegateCount, u = e.target; if (l && u.nodeType && !("click" === e.type && e.button >= 1)) for (; u !== this; u = u.parentNode || this)if (1 === u.nodeType && ("click" !== e.type || !0 !== u.disabled)) { for (s = [], a = {}, n = 0; n < l; n++)void 0 === a[r = (i = t[n]).selector + " "] && (a[r] = i.needsContext ? E(r, this).index(u) > -1 : E.find(r, this, null, [u]).length), a[r] && s.push(i); s.length && o.push({ elem: u, handlers: s }) } return u = this, l < t.length && o.push({ elem: u, handlers: t.slice(l) }), o }, addProp: function (e, t) { Object.defineProperty(E.Event.prototype, e, { enumerable: !0, configurable: !0, get: y(t) ? function () { if (this.originalEvent) return t(this.originalEvent) } : function () { if (this.originalEvent) return this.originalEvent[e] }, set: function (t) { Object.defineProperty(this, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) } }) }, fix: function (e) { return e[E.expando] ? e : new E.Event(e) }, special: { load: { noBubble: !0 }, click: { setup: function (e) { var t = this || e; return me.test(t.type) && t.click && O(t, "input") && Le(t, "click", xe), !1 }, trigger: function (e) { var t = this || e; return me.test(t.type) && t.click && O(t, "input") && Le(t, "click"), !0 }, _default: function (e) { var t = e.target; return me.test(t.type) && t.click && O(t, "input") && J.get(t, "click") || O(t, "a") } }, beforeunload: { postDispatch: function (e) { void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result) } } } }, E.removeEvent = function (e, t, n) { e.removeEventListener && e.removeEventListener(t, n) }, E.Event = function (e, t) { if (!(this instanceof E.Event)) return new E.Event(e, t); e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? xe : Ie, this.target = e.target && 3 === e.target.nodeType ? e.target.parentNode : e.target, this.currentTarget = e.currentTarget, this.relatedTarget = e.relatedTarget) : this.type = e, t && E.extend(this, t), this.timeStamp = e && e.timeStamp || Date.now(), this[E.expando] = !0 }, E.Event.prototype = { constructor: E.Event, isDefaultPrevented: Ie, isPropagationStopped: Ie, isImmediatePropagationStopped: Ie, isSimulated: !1, preventDefault: function () { var e = this.originalEvent; this.isDefaultPrevented = xe, e && !this.isSimulated && e.preventDefault() }, stopPropagation: function () { var e = this.originalEvent; this.isPropagationStopped = xe, e && !this.isSimulated && e.stopPropagation() }, stopImmediatePropagation: function () { var e = this.originalEvent; this.isImmediatePropagationStopped = xe, e && !this.isSimulated && e.stopImmediatePropagation(), this.stopPropagation() } }, E.each({ altKey: !0, bubbles: !0, cancelable: !0, changedTouches: !0, ctrlKey: !0, detail: !0, eventPhase: !0, metaKey: !0, pageX: !0, pageY: !0, shiftKey: !0, view: !0, char: !0, code: !0, charCode: !0, key: !0, keyCode: !0, button: !0, buttons: !0, clientX: !0, clientY: !0, offsetX: !0, offsetY: !0, pointerId: !0, pointerType: !0, screenX: !0, screenY: !0, targetTouches: !0, toElement: !0, touches: !0, which: function (e) { var t = e.button; return null == e.which && we.test(e.type) ? null != e.charCode ? e.charCode : e.keyCode : !e.which && void 0 !== t && ke.test(e.type) ? 1 & t ? 1 : 2 & t ? 3 : 4 & t ? 2 : 0 : e.which } }, E.event.addProp), E.each({ focus: "focusin", blur: "focusout" }, function (e, t) { E.event.special[e] = { setup: function () { return Le(this, e, Oe), !1 }, trigger: function () { return Le(this, e), !0 }, delegateType: t } }), E.each({ mouseenter: "mouseover", mouseleave: "mouseout", pointerenter: "pointerover", pointerleave: "pointerout" }, function (e, t) { E.event.special[e] = { delegateType: t, bindType: t, handle: function (e) { var n, i = e.relatedTarget, r = e.handleObj; return i && (i === this || E.contains(this, i)) || (e.type = r.origType, n = r.handler.apply(this, arguments), e.type = t), n } } }), E.fn.extend({ on: function (e, t, n, i) { return De(this, e, t, n, i) }, one: function (e, t, n, i) { return De(this, e, t, n, i, 1) }, off: function (e, t, n) { var i, r; if (e && e.preventDefault && e.handleObj) return i = e.handleObj, E(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this; if ("object" == typeof e) { for (r in e) this.off(r, t, e[r]); return this } return !1 !== t && "function" != typeof t || (n = t, t = void 0), !1 === n && (n = Ie), this.each(function () { E.event.remove(this, e, n, t) }) } }); var Pe = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi, Ne = /<script|<style|<link/i, Re = /checked\s*(?:[^=]|=\s*.checked.)/i, Me = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g; function Ue(e, t) { return O(e, "table") && O(11 !== t.nodeType ? t : t.firstChild, "tr") && E(e).children("tbody")[0] || e } function je(e) { return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e } function Be(e) { return "true/" === (e.type || "").slice(0, 5) ? e.type = e.type.slice(5) : e.removeAttribute("type"), e } function Fe(e, t) { var n, i, r, s, a, o, l, u; if (1 === t.nodeType) { if (J.hasData(e) && (s = J.access(e), a = J.set(t, s), u = s.events)) for (r in delete a.handle, a.events = {}, u) for (n = 0, i = u[r].length; n < i; n++)E.event.add(t, r, u[r][n]); Z.hasData(e) && (o = Z.access(e), l = E.extend({}, o), Z.set(t, l)) } } function He(e, t, n, i) { t = u.apply([], t); var r, s, a, o, l, c, h = 0, d = e.length, f = d - 1, p = t[0], m = y(p); if (m || d > 1 && "string" == typeof p && !v.checkClone && Re.test(p)) return e.each(function (r) { var s = e.eq(r); m && (t[0] = p.call(this, r, s.html())), He(s, t, n, i) }); if (d && (s = (r = Ce(t, e[0].ownerDocument, !1, e, i)).firstChild, 1 === r.childNodes.length && (r = s), s || i)) { for (o = (a = E.map(_e(r, "script"), je)).length; h < d; h++)l = r, h !== f && (l = E.clone(l, !0, !0), o && E.merge(a, _e(l, "script"))), n.call(e[h], l, h); if (o) for (c = a[a.length - 1].ownerDocument, E.map(a, Be), h = 0; h < o; h++)l = a[h], ve.test(l.type || "") && !J.access(l, "globalEval") && E.contains(c, l) && (l.src && "module" !== (l.type || "").toLowerCase() ? E._evalUrl && !l.noModule && E._evalUrl(l.src, { nonce: l.nonce || l.getAttribute("nonce") }) : T(l.textContent.replace(Me, ""), l, c)) } return e } function qe(e, t, n) { for (var i, r = t ? E.filter(t, e) : e, s = 0; null != (i = r[s]); s++)n || 1 !== i.nodeType || E.cleanData(_e(i)), i.parentNode && (n && oe(i) && be(_e(i, "script")), i.parentNode.removeChild(i)); return e } E.extend({ htmlPrefilter: function (e) { return e.replace(Pe, "<$1></$2>") }, clone: function (e, t, n) { var i, r, s, a, o, l, u, c = e.cloneNode(!0), h = oe(e); if (!(v.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || E.isXMLDoc(e))) for (a = _e(c), i = 0, r = (s = _e(e)).length; i < r; i++)o = s[i], l = a[i], u = void 0, "input" === (u = l.nodeName.toLowerCase()) && me.test(o.type) ? l.checked = o.checked : "input" !== u && "textarea" !== u || (l.defaultValue = o.defaultValue); if (t) if (n) for (s = s || _e(e), a = a || _e(c), i = 0, r = s.length; i < r; i++)Fe(s[i], a[i]); else Fe(e, c); return (a = _e(c, "script")).length > 0 && be(a, !h && _e(e, "script")), c }, cleanData: function (e) { for (var t, n, i, r = E.event.special, s = 0; void 0 !== (n = e[s]); s++)if ($(n)) { if (t = n[J.expando]) { if (t.events) for (i in t.events) r[i] ? E.event.remove(n, i) : E.removeEvent(n, i, t.handle); n[J.expando] = void 0 } n[Z.expando] && (n[Z.expando] = void 0) } } }), E.fn.extend({ detach: function (e) { return qe(this, e, !0) }, remove: function (e) { return qe(this, e) }, text: function (e) { return G(this, function (e) { return void 0 === e ? E.text(this) : this.empty().each(function () { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e) }) }, null, e, arguments.length) }, append: function () { return He(this, arguments, function (e) { 1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || Ue(this, e).appendChild(e) }) }, prepend: function () { return He(this, arguments, function (e) { if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) { var t = Ue(this, e); t.insertBefore(e, t.firstChild) } }) }, before: function () { return He(this, arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this) }) }, after: function () { return He(this, arguments, function (e) { this.parentNode && this.parentNode.insertBefore(e, this.nextSibling) }) }, empty: function () { for (var e, t = 0; null != (e = this[t]); t++)1 === e.nodeType && (E.cleanData(_e(e, !1)), e.textContent = ""); return this }, clone: function (e, t) { return e = null != e && e, t = null == t ? e : t, this.map(function () { return E.clone(this, e, t) }) }, html: function (e) { return G(this, function (e) { var t = this[0] || {}, n = 0, i = this.length; if (void 0 === e && 1 === t.nodeType) return t.innerHTML; if ("string" == typeof e && !Ne.test(e) && !ye[(ge.exec(e) || ["", ""])[1].toLowerCase()]) { e = E.htmlPrefilter(e); try { for (; n < i; n++)1 === (t = this[n] || {}).nodeType && (E.cleanData(_e(t, !1)), t.innerHTML = e); t = 0 } catch (e) { } } t && this.empty().append(e) }, null, e, arguments.length) }, replaceWith: function () { var e = []; return He(this, arguments, function (t) { var n = this.parentNode; E.inArray(this, e) < 0 && (E.cleanData(_e(this)), n && n.replaceChild(t, this)) }, e) } }), E.each({ appendTo: "append", prependTo: "prepend", insertBefore: "before", insertAfter: "after", replaceAll: "replaceWith" }, function (e, t) { E.fn[e] = function (e) { for (var n, i = [], r = E(e), s = r.length - 1, a = 0; a <= s; a++)n = a === s ? this : this.clone(!0), E(r[a])[t](n), c.apply(i, n.get()); return this.pushStack(i) } }); var Ve = new RegExp("^(" + ie + ")(?!px)[a-z%]+$", "i"), We = function (e) { var t = e.ownerDocument.defaultView; return t && t.opener || (t = n), t.getComputedStyle(e) }, Ge = new RegExp(se.join("|"), "i"); function ze(e, t, n) { var i, r, s, a, o = e.style; return (n = n || We(e)) && ("" !== (a = n.getPropertyValue(t) || n[t]) || oe(e) || (a = E.style(e, t)), !v.pixelBoxStyles() && Ve.test(a) && Ge.test(t) && (i = o.width, r = o.minWidth, s = o.maxWidth, o.minWidth = o.maxWidth = o.width = a, a = n.width, o.width = i, o.minWidth = r, o.maxWidth = s)), void 0 !== a ? a + "" : a } function Ke(e, t) { return { get: function () { if (!e()) return (this.get = t).apply(this, arguments); delete this.get } } } !function () { function e() { if (c) { u.style.cssText = "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0", c.style.cssText = "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%", ae.appendChild(u).appendChild(c); var e = n.getComputedStyle(c); i = "1%" !== e.top, l = 12 === t(e.marginLeft), c.style.right = "60%", o = 36 === t(e.right), r = 36 === t(e.width), c.style.position = "absolute", s = 12 === t(c.offsetWidth / 3), ae.removeChild(u), c = null } } function t(e) { return Math.round(parseFloat(e)) } var i, r, s, o, l, u = a.createElement("div"), c = a.createElement("div"); c.style && (c.style.backgroundClip = "content-box", c.cloneNode(!0).style.backgroundClip = "", v.clearCloneStyle = "content-box" === c.style.backgroundClip, E.extend(v, { boxSizingReliable: function () { return e(), r }, pixelBoxStyles: function () { return e(), o }, pixelPosition: function () { return e(), i }, reliableMarginLeft: function () { return e(), l }, scrollboxSize: function () { return e(), s } })) }(); var Xe = ["Webkit", "Moz", "ms"], Ye = a.createElement("div").style, $e = {}; function Qe(e) { var t = E.cssProps[e] || $e[e]; return t || (e in Ye ? e : $e[e] = function (e) { for (var t = e[0].toUpperCase() + e.slice(1), n = Xe.length; n--;)if ((e = Xe[n] + t) in Ye) return e }(e) || e) } var Je = /^(none|table(?!-c[ea]).+)/, Ze = /^--/, et = { position: "absolute", visibility: "hidden", display: "block" }, tt = { letterSpacing: "0", fontWeight: "400" }; function nt(e, t, n) { var i = re.exec(t); return i ? Math.max(0, i[2] - (n || 0)) + (i[3] || "px") : t } function it(e, t, n, i, r, s) { var a = "width" === t ? 1 : 0, o = 0, l = 0; if (n === (i ? "border" : "content")) return 0; for (; a < 4; a += 2)"margin" === n && (l += E.css(e, n + se[a], !0, r)), i ? ("content" === n && (l -= E.css(e, "padding" + se[a], !0, r)), "margin" !== n && (l -= E.css(e, "border" + se[a] + "Width", !0, r))) : (l += E.css(e, "padding" + se[a], !0, r), "padding" !== n ? l += E.css(e, "border" + se[a] + "Width", !0, r) : o += E.css(e, "border" + se[a] + "Width", !0, r)); return !i && s >= 0 && (l += Math.max(0, Math.ceil(e["offset" + t[0].toUpperCase() + t.slice(1)] - s - l - o - .5)) || 0), l } function rt(e, t, n) { var i = We(e), r = (!v.boxSizingReliable() || n) && "border-box" === E.css(e, "boxSizing", !1, i), s = r, a = ze(e, t, i), o = "offset" + t[0].toUpperCase() + t.slice(1); if (Ve.test(a)) { if (!n) return a; a = "auto" } return (!v.boxSizingReliable() && r || "auto" === a || !parseFloat(a) && "inline" === E.css(e, "display", !1, i)) && e.getClientRects().length && (r = "border-box" === E.css(e, "boxSizing", !1, i), (s = o in e) && (a = e[o])), (a = parseFloat(a) || 0) + it(e, t, n || (r ? "border" : "content"), s, i, a) + "px" } function st(e, t, n, i, r) { return new st.prototype.init(e, t, n, i, r) } E.extend({ cssHooks: { opacity: { get: function (e, t) { if (t) { var n = ze(e, "opacity"); return "" === n ? "1" : n } } } }, cssNumber: { animationIterationCount: !0, columnCount: !0, fillOpacity: !0, flexGrow: !0, flexShrink: !0, fontWeight: !0, gridArea: !0, gridColumn: !0, gridColumnEnd: !0, gridColumnStart: !0, gridRow: !0, gridRowEnd: !0, gridRowStart: !0, lineHeight: !0, opacity: !0, order: !0, orphans: !0, widows: !0, zIndex: !0, zoom: !0 }, cssProps: {}, style: function (e, t, n, i) { if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) { var r, s, a, o = Y(t), l = Ze.test(t), u = e.style; if (l || (t = Qe(o)), a = E.cssHooks[t] || E.cssHooks[o], void 0 === n) return a && "get" in a && void 0 !== (r = a.get(e, !1, i)) ? r : u[t]; "string" === (s = typeof n) && (r = re.exec(n)) && r[1] && (n = he(e, t, r), s = "number"), null != n && n == n && ("number" !== s || l || (n += r && r[3] || (E.cssNumber[o] ? "" : "px")), v.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (u[t] = "inherit"), a && "set" in a && void 0 === (n = a.set(e, n, i)) || (l ? u.setProperty(t, n) : u[t] = n)) } }, css: function (e, t, n, i) { var r, s, a, o = Y(t); return Ze.test(t) || (t = Qe(o)), (a = E.cssHooks[t] || E.cssHooks[o]) && "get" in a && (r = a.get(e, !0, n)), void 0 === r && (r = ze(e, t, i)), "normal" === r && t in tt && (r = tt[t]), "" === n || n ? (s = parseFloat(r), !0 === n || isFinite(s) ? s || 0 : r) : r } }), E.each(["height", "width"], function (e, t) { E.cssHooks[t] = { get: function (e, n, i) { if (n) return !Je.test(E.css(e, "display")) || e.getClientRects().length && e.getBoundingClientRect().width ? rt(e, t, i) : ce(e, et, function () { return rt(e, t, i) }) }, set: function (e, n, i) { var r, s = We(e), a = !v.scrollboxSize() && "absolute" === s.position, o = (a || i) && "border-box" === E.css(e, "boxSizing", !1, s), l = i ? it(e, t, i, o, s) : 0; return o && a && (l -= Math.ceil(e["offset" + t[0].toUpperCase() + t.slice(1)] - parseFloat(s[t]) - it(e, t, "border", !1, s) - .5)), l && (r = re.exec(n)) && "px" !== (r[3] || "px") && (e.style[t] = n, n = E.css(e, t)), nt(0, n, l) } } }), E.cssHooks.marginLeft = Ke(v.reliableMarginLeft, function (e, t) { if (t) return (parseFloat(ze(e, "marginLeft")) || e.getBoundingClientRect().left - ce(e, { marginLeft: 0 }, function () { return e.getBoundingClientRect().left })) + "px" }), E.each({ margin: "", padding: "", border: "Width" }, function (e, t) { E.cssHooks[e + t] = { expand: function (n) { for (var i = 0, r = {}, s = "string" == typeof n ? n.split(" ") : [n]; i < 4; i++)r[e + se[i] + t] = s[i] || s[i - 2] || s[0]; return r } }, "margin" !== e && (E.cssHooks[e + t].set = nt) }), E.fn.extend({ css: function (e, t) { return G(this, function (e, t, n) { var i, r, s = {}, a = 0; if (Array.isArray(t)) { for (i = We(e), r = t.length; a < r; a++)s[t[a]] = E.css(e, t[a], !1, i); return s } return void 0 !== n ? E.style(e, t, n) : E.css(e, t) }, e, t, arguments.length > 1) } }), E.Tween = st, st.prototype = { constructor: st, init: function (e, t, n, i, r, s) { this.elem = e, this.prop = n, this.easing = r || E.easing._default, this.options = t, this.start = this.now = this.cur(), this.end = i, this.unit = s || (E.cssNumber[n] ? "" : "px") }, cur: function () { var e = st.propHooks[this.prop]; return e && e.get ? e.get(this) : st.propHooks._default.get(this) }, run: function (e) { var t, n = st.propHooks[this.prop]; return this.options.duration ? this.pos = t = E.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : st.propHooks._default.set(this), this } }, st.prototype.init.prototype = st.prototype, st.propHooks = { _default: { get: function (e) { var t; return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = E.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0 }, set: function (e) { E.fx.step[e.prop] ? E.fx.step[e.prop](e) : 1 !== e.elem.nodeType || !E.cssHooks[e.prop] && null == e.elem.style[Qe(e.prop)] ? e.elem[e.prop] = e.now : E.style(e.elem, e.prop, e.now + e.unit) } } }, st.propHooks.scrollTop = st.propHooks.scrollLeft = { set: function (e) { e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now) } }, E.easing = { linear: function (e) { return e }, swing: function (e) { return .5 - Math.cos(e * Math.PI) / 2 }, _default: "swing" }, E.fx = st.prototype.init, E.fx.step = {}; var at, ot, lt = /^(?:toggle|show|hide)$/, ut = /queueHooks$/; function ct() { ot && (!1 === a.hidden && n.requestAnimationFrame ? n.requestAnimationFrame(ct) : n.setTimeout(ct, E.fx.interval), E.fx.tick()) } function ht() { return n.setTimeout(function () { at = void 0 }), at = Date.now() } function dt(e, t) { var n, i = 0, r = { height: e }; for (t = t ? 1 : 0; i < 4; i += 2 - t)r["margin" + (n = se[i])] = r["padding" + n] = e; return t && (r.opacity = r.width = e), r } function ft(e, t, n) { for (var i, r = (pt.tweeners[t] || []).concat(pt.tweeners["*"]), s = 0, a = r.length; s < a; s++)if (i = r[s].call(n, t, e)) return i } function pt(e, t, n) { var i, r, s = 0, a = pt.prefilters.length, o = E.Deferred().always(function () { delete l.elem }), l = function () { if (r) return !1; for (var t = at || ht(), n = Math.max(0, u.startTime + u.duration - t), i = 1 - (n / u.duration || 0), s = 0, a = u.tweens.length; s < a; s++)u.tweens[s].run(i); return o.notifyWith(e, [u, i, n]), i < 1 && a ? n : (a || o.notifyWith(e, [u, 1, 0]), o.resolveWith(e, [u]), !1) }, u = o.promise({ elem: e, props: E.extend({}, t), opts: E.extend(!0, { specialEasing: {}, easing: E.easing._default }, n), originalProperties: t, originalOptions: n, startTime: at || ht(), duration: n.duration, tweens: [], createTween: function (t, n) { var i = E.Tween(e, u.opts, t, n, u.opts.specialEasing[t] || u.opts.easing); return u.tweens.push(i), i }, stop: function (t) { var n = 0, i = t ? u.tweens.length : 0; if (r) return this; for (r = !0; n < i; n++)u.tweens[n].run(1); return t ? (o.notifyWith(e, [u, 1, 0]), o.resolveWith(e, [u, t])) : o.rejectWith(e, [u, t]), this } }), c = u.props; for (!function (e, t) { var n, i, r, s, a; for (n in e) if (r = t[i = Y(n)], s = e[n], Array.isArray(s) && (r = s[1], s = e[n] = s[0]), n !== i && (e[i] = s, delete e[n]), (a = E.cssHooks[i]) && "expand" in a) for (n in s = a.expand(s), delete e[i], s) n in e || (e[n] = s[n], t[n] = r); else t[i] = r }(c, u.opts.specialEasing); s < a; s++)if (i = pt.prefilters[s].call(u, e, c, u.opts)) return y(i.stop) && (E._queueHooks(u.elem, u.opts.queue).stop = i.stop.bind(i)), i; return E.map(c, ft, u), y(u.opts.start) && u.opts.start.call(e, u), u.progress(u.opts.progress).done(u.opts.done, u.opts.complete).fail(u.opts.fail).always(u.opts.always), E.fx.timer(E.extend(l, { elem: e, anim: u, queue: u.opts.queue })), u } E.Animation = E.extend(pt, { tweeners: { "*": [function (e, t) { var n = this.createTween(e, t); return he(n.elem, e, re.exec(t), n), n }] }, tweener: function (e, t) { y(e) ? (t = e, e = ["*"]) : e = e.match(j); for (var n, i = 0, r = e.length; i < r; i++)n = e[i], pt.tweeners[n] = pt.tweeners[n] || [], pt.tweeners[n].unshift(t) }, prefilters: [function (e, t, n) { var i, r, s, a, o, l, u, c, h = "width" in t || "height" in t, d = this, f = {}, p = e.style, m = e.nodeType && ue(e), g = J.get(e, "fxshow"); for (i in n.queue || (null == (a = E._queueHooks(e, "fx")).unqueued && (a.unqueued = 0, o = a.empty.fire, a.empty.fire = function () { a.unqueued || o() }), a.unqueued++, d.always(function () { d.always(function () { a.unqueued--, E.queue(e, "fx").length || a.empty.fire() }) })), t) if (r = t[i], lt.test(r)) { if (delete t[i], s = s || "toggle" === r, r === (m ? "hide" : "show")) { if ("show" !== r || !g || void 0 === g[i]) continue; m = !0 } f[i] = g && g[i] || E.style(e, i) } if ((l = !E.isEmptyObject(t)) || !E.isEmptyObject(f)) for (i in h && 1 === e.nodeType && (n.overflow = [p.overflow, p.overflowX, p.overflowY], null == (u = g && g.display) && (u = J.get(e, "display")), "none" === (c = E.css(e, "display")) && (u ? c = u : (pe([e], !0), u = e.style.display || u, c = E.css(e, "display"), pe([e]))), ("inline" === c || "inline-block" === c && null != u) && "none" === E.css(e, "float") && (l || (d.done(function () { p.display = u }), null == u && (c = p.display, u = "none" === c ? "" : c)), p.display = "inline-block")), n.overflow && (p.overflow = "hidden", d.always(function () { p.overflow = n.overflow[0], p.overflowX = n.overflow[1], p.overflowY = n.overflow[2] })), l = !1, f) l || (g ? "hidden" in g && (m = g.hidden) : g = J.access(e, "fxshow", { display: u }), s && (g.hidden = !m), m && pe([e], !0), d.done(function () { for (i in m || pe([e]), J.remove(e, "fxshow"), f) E.style(e, i, f[i]) })), l = ft(m ? g[i] : 0, i, d), i in g || (g[i] = l.start, m && (l.end = l.start, l.start = 0)) }], prefilter: function (e, t) { t ? pt.prefilters.unshift(e) : pt.prefilters.push(e) } }), E.speed = function (e, t, n) { var i = e && "object" == typeof e ? E.extend({}, e) : { complete: n || !n && t || y(e) && e, duration: e, easing: n && t || t && !y(t) && t }; return E.fx.off ? i.duration = 0 : "number" != typeof i.duration && (i.duration in E.fx.speeds ? i.duration = E.fx.speeds[i.duration] : i.duration = E.fx.speeds._default), null != i.queue && !0 !== i.queue || (i.queue = "fx"), i.old = i.complete, i.complete = function () { y(i.old) && i.old.call(this), i.queue && E.dequeue(this, i.queue) }, i }, E.fn.extend({ fadeTo: function (e, t, n, i) { return this.filter(ue).css("opacity", 0).show().end().animate({ opacity: t }, e, n, i) }, animate: function (e, t, n, i) { var r = E.isEmptyObject(e), s = E.speed(t, n, i), a = function () { var t = pt(this, E.extend({}, e), s); (r || J.get(this, "finish")) && t.stop(!0) }; return a.finish = a, r || !1 === s.queue ? this.each(a) : this.queue(s.queue, a) }, stop: function (e, t, n) { var i = function (e) { var t = e.stop; delete e.stop, t(n) }; return "string" != typeof e && (n = t, t = e, e = void 0), t && !1 !== e && this.queue(e || "fx", []), this.each(function () { var t = !0, r = null != e && e + "queueHooks", s = E.timers, a = J.get(this); if (r) a[r] && a[r].stop && i(a[r]); else for (r in a) a[r] && a[r].stop && ut.test(r) && i(a[r]); for (r = s.length; r--;)s[r].elem !== this || null != e && s[r].queue !== e || (s[r].anim.stop(n), t = !1, s.splice(r, 1)); !t && n || E.dequeue(this, e) }) }, finish: function (e) { return !1 !== e && (e = e || "fx"), this.each(function () { var t, n = J.get(this), i = n[e + "queue"], r = n[e + "queueHooks"], s = E.timers, a = i ? i.length : 0; for (n.finish = !0, E.queue(this, e, []), r && r.stop && r.stop.call(this, !0), t = s.length; t--;)s[t].elem === this && s[t].queue === e && (s[t].anim.stop(!0), s.splice(t, 1)); for (t = 0; t < a; t++)i[t] && i[t].finish && i[t].finish.call(this); delete n.finish }) } }), E.each(["toggle", "show", "hide"], function (e, t) { var n = E.fn[t]; E.fn[t] = function (e, i, r) { return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(dt(t, !0), e, i, r) } }), E.each({ slideDown: dt("show"), slideUp: dt("hide"), slideToggle: dt("toggle"), fadeIn: { opacity: "show" }, fadeOut: { opacity: "hide" }, fadeToggle: { opacity: "toggle" } }, function (e, t) { E.fn[e] = function (e, n, i) { return this.animate(t, e, n, i) } }), E.timers = [], E.fx.tick = function () { var e, t = 0, n = E.timers; for (at = Date.now(); t < n.length; t++)(e = n[t])() || n[t] !== e || n.splice(t--, 1); n.length || E.fx.stop(), at = void 0 }, E.fx.timer = function (e) { E.timers.push(e), E.fx.start() }, E.fx.interval = 13, E.fx.start = function () { ot || (ot = !0, ct()) }, E.fx.stop = function () { ot = null }, E.fx.speeds = { slow: 600, fast: 200, _default: 400 }, E.fn.delay = function (e, t) { return e = E.fx && E.fx.speeds[e] || e, t = t || "fx", this.queue(t, function (t, i) { var r = n.setTimeout(t, e); i.stop = function () { n.clearTimeout(r) } }) }, function () { var e = a.createElement("input"), t = a.createElement("select").appendChild(a.createElement("option")); e.type = "checkbox", v.checkOn = "" !== e.value, v.optSelected = t.selected, (e = a.createElement("input")).value = "t", e.type = "radio", v.radioValue = "t" === e.value }(); var mt, gt = E.expr.attrHandle; E.fn.extend({ attr: function (e, t) { return G(this, E.attr, e, t, arguments.length > 1) }, removeAttr: function (e) { return this.each(function () { E.removeAttr(this, e) }) } }), E.extend({ attr: function (e, t, n) { var i, r, s = e.nodeType; if (3 !== s && 8 !== s && 2 !== s) return void 0 === e.getAttribute ? E.prop(e, t, n) : (1 === s && E.isXMLDoc(e) || (r = E.attrHooks[t.toLowerCase()] || (E.expr.match.bool.test(t) ? mt : void 0)), void 0 !== n ? null === n ? void E.removeAttr(e, t) : r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : (e.setAttribute(t, n + ""), n) : r && "get" in r && null !== (i = r.get(e, t)) ? i : null == (i = E.find.attr(e, t)) ? void 0 : i) }, attrHooks: { type: { set: function (e, t) { if (!v.radioValue && "radio" === t && O(e, "input")) { var n = e.value; return e.setAttribute("type", t), n && (e.value = n), t } } } }, removeAttr: function (e, t) { var n, i = 0, r = t && t.match(j); if (r && 1 === e.nodeType) for (; n = r[i++];)e.removeAttribute(n) } }), mt = { set: function (e, t, n) { return !1 === t ? E.removeAttr(e, n) : e.setAttribute(n, n), n } }, E.each(E.expr.match.bool.source.match(/\w+/g), function (e, t) { var n = gt[t] || E.find.attr; gt[t] = function (e, t, i) { var r, s, a = t.toLowerCase(); return i || (s = gt[a], gt[a] = r, r = null != n(e, t, i) ? a : null, gt[a] = s), r } }); var vt = /^(?:input|select|textarea|button)$/i, yt = /^(?:a|area)$/i; function _t(e) { return (e.match(j) || []).join(" ") } function bt(e) { return e.getAttribute && e.getAttribute("class") || "" } function Tt(e) { return Array.isArray(e) ? e : "string" == typeof e && e.match(j) || [] } E.fn.extend({ prop: function (e, t) { return G(this, E.prop, e, t, arguments.length > 1) }, removeProp: function (e) { return this.each(function () { delete this[E.propFix[e] || e] }) } }), E.extend({ prop: function (e, t, n) { var i, r, s = e.nodeType; if (3 !== s && 8 !== s && 2 !== s) return 1 === s && E.isXMLDoc(e) || (t = E.propFix[t] || t, r = E.propHooks[t]), void 0 !== n ? r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : e[t] = n : r && "get" in r && null !== (i = r.get(e, t)) ? i : e[t] }, propHooks: { tabIndex: { get: function (e) { var t = E.find.attr(e, "tabindex"); return t ? parseInt(t, 10) : vt.test(e.nodeName) || yt.test(e.nodeName) && e.href ? 0 : -1 } } }, propFix: { for: "htmlFor", class: "className" } }), v.optSelected || (E.propHooks.selected = { get: function (e) { var t = e.parentNode; return t && t.parentNode && t.parentNode.selectedIndex, null }, set: function (e) { var t = e.parentNode; t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex) } }), E.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function () { E.propFix[this.toLowerCase()] = this }), E.fn.extend({ addClass: function (e) { var t, n, i, r, s, a, o, l = 0; if (y(e)) return this.each(function (t) { E(this).addClass(e.call(this, t, bt(this))) }); if ((t = Tt(e)).length) for (; n = this[l++];)if (r = bt(n), i = 1 === n.nodeType && " " + _t(r) + " ") { for (a = 0; s = t[a++];)i.indexOf(" " + s + " ") < 0 && (i += s + " "); r !== (o = _t(i)) && n.setAttribute("class", o) } return this }, removeClass: function (e) { var t, n, i, r, s, a, o, l = 0; if (y(e)) return this.each(function (t) { E(this).removeClass(e.call(this, t, bt(this))) }); if (!arguments.length) return this.attr("class", ""); if ((t = Tt(e)).length) for (; n = this[l++];)if (r = bt(n), i = 1 === n.nodeType && " " + _t(r) + " ") { for (a = 0; s = t[a++];)for (; i.indexOf(" " + s + " ") > -1;)i = i.replace(" " + s + " ", " "); r !== (o = _t(i)) && n.setAttribute("class", o) } return this }, toggleClass: function (e, t) { var n = typeof e, i = "string" === n || Array.isArray(e); return "boolean" == typeof t && i ? t ? this.addClass(e) : this.removeClass(e) : y(e) ? this.each(function (n) { E(this).toggleClass(e.call(this, n, bt(this), t), t) }) : this.each(function () { var t, r, s, a; if (i) for (r = 0, s = E(this), a = Tt(e); t = a[r++];)s.hasClass(t) ? s.removeClass(t) : s.addClass(t); else void 0 !== e && "boolean" !== n || ((t = bt(this)) && J.set(this, "__className__", t), this.setAttribute && this.setAttribute("class", t || !1 === e ? "" : J.get(this, "__className__") || "")) }) }, hasClass: function (e) { var t, n, i = 0; for (t = " " + e + " "; n = this[i++];)if (1 === n.nodeType && (" " + _t(bt(n)) + " ").indexOf(t) > -1) return !0; return !1 } }); var St = /\r/g; E.fn.extend({ val: function (e) { var t, n, i, r = this[0]; return arguments.length ? (i = y(e), this.each(function (n) { var r; 1 === this.nodeType && (null == (r = i ? e.call(this, n, E(this).val()) : e) ? r = "" : "number" == typeof r ? r += "" : Array.isArray(r) && (r = E.map(r, function (e) { return null == e ? "" : e + "" })), (t = E.valHooks[this.type] || E.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, r, "value") || (this.value = r)) })) : r ? (t = E.valHooks[r.type] || E.valHooks[r.nodeName.toLowerCase()]) && "get" in t && void 0 !== (n = t.get(r, "value")) ? n : "string" == typeof (n = r.value) ? n.replace(St, "") : null == n ? "" : n : void 0 } }), E.extend({ valHooks: { option: { get: function (e) { var t = E.find.attr(e, "value"); return null != t ? t : _t(E.text(e)) } }, select: { get: function (e) { var t, n, i, r = e.options, s = e.selectedIndex, a = "select-one" === e.type, o = a ? null : [], l = a ? s + 1 : r.length; for (i = s < 0 ? l : a ? s : 0; i < l; i++)if (((n = r[i]).selected || i === s) && !n.disabled && (!n.parentNode.disabled || !O(n.parentNode, "optgroup"))) { if (t = E(n).val(), a) return t; o.push(t) } return o }, set: function (e, t) { for (var n, i, r = e.options, s = E.makeArray(t), a = r.length; a--;)((i = r[a]).selected = E.inArray(E.valHooks.option.get(i), s) > -1) && (n = !0); return n || (e.selectedIndex = -1), s } } } }), E.each(["radio", "checkbox"], function () { E.valHooks[this] = { set: function (e, t) { if (Array.isArray(t)) return e.checked = E.inArray(E(e).val(), t) > -1 } }, v.checkOn || (E.valHooks[this].get = function (e) { return null === e.getAttribute("value") ? "on" : e.value }) }), v.focusin = "onfocusin" in n; var Et = /^(?:focusinfocus|focusoutblur)$/, Ct = function (e) { e.stopPropagation() }; E.extend(E.event, { trigger: function (e, t, i, r) { var s, o, l, u, c, h, d, f, m = [i || a], g = p.call(e, "type") ? e.type : e, v = p.call(e, "namespace") ? e.namespace.split(".") : []; if (o = f = l = i = i || a, 3 !== i.nodeType && 8 !== i.nodeType && !Et.test(g + E.event.triggered) && (g.indexOf(".") > -1 && (v = g.split("."), g = v.shift(), v.sort()), c = g.indexOf(":") < 0 && "on" + g, (e = e[E.expando] ? e : new E.Event(g, "object" == typeof e && e)).isTrigger = r ? 2 : 3, e.namespace = v.join("."), e.rnamespace = e.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = void 0, e.target || (e.target = i), t = null == t ? [e] : E.makeArray(t, [e]), d = E.event.special[g] || {}, r || !d.trigger || !1 !== d.trigger.apply(i, t))) { if (!r && !d.noBubble && !_(i)) { for (u = d.delegateType || g, Et.test(u + g) || (o = o.parentNode); o; o = o.parentNode)m.push(o), l = o; l === (i.ownerDocument || a) && m.push(l.defaultView || l.parentWindow || n) } for (s = 0; (o = m[s++]) && !e.isPropagationStopped();)f = o, e.type = s > 1 ? u : d.bindType || g, (h = (J.get(o, "events") || {})[e.type] && J.get(o, "handle")) && h.apply(o, t), (h = c && o[c]) && h.apply && $(o) && (e.result = h.apply(o, t), !1 === e.result && e.preventDefault()); return e.type = g, r || e.isDefaultPrevented() || d._default && !1 !== d._default.apply(m.pop(), t) || !$(i) || c && y(i[g]) && !_(i) && ((l = i[c]) && (i[c] = null), E.event.triggered = g, e.isPropagationStopped() && f.addEventListener(g, Ct), i[g](), e.isPropagationStopped() && f.removeEventListener(g, Ct), E.event.triggered = void 0, l && (i[c] = l)), e.result } }, simulate: function (e, t, n) { var i = E.extend(new E.Event, n, { type: e, isSimulated: !0 }); E.event.trigger(i, null, t) } }), E.fn.extend({ trigger: function (e, t) { return this.each(function () { E.event.trigger(e, t, this) }) }, triggerHandler: function (e, t) { var n = this[0]; if (n) return E.event.trigger(e, t, n, !0) } }), v.focusin || E.each({ focus: "focusin", blur: "focusout" }, function (e, t) { var n = function (e) { E.event.simulate(t, e.target, E.event.fix(e)) }; E.event.special[t] = { setup: function () { var i = this.ownerDocument || this, r = J.access(i, t); r || i.addEventListener(e, n, !0), J.access(i, t, (r || 0) + 1) }, teardown: function () { var i = this.ownerDocument || this, r = J.access(i, t) - 1; r ? J.access(i, t, r) : (i.removeEventListener(e, n, !0), J.remove(i, t)) } } }); var wt = n.location, kt = Date.now(), At = /\?/; E.parseXML = function (e) { var t; if (!e || "string" != typeof e) return null; try { t = (new n.DOMParser).parseFromString(e, "text/xml") } catch (e) { t = void 0 } return t && !t.getElementsByTagName("parsererror").length || E.error("Invalid XML: " + e), t }; var xt = /\[\]$/, It = /\r?\n/g, Ot = /^(?:submit|button|image|reset|file)$/i, Dt = /^(?:input|select|textarea|keygen)/i; function Lt(e, t, n, i) { var r; if (Array.isArray(t)) E.each(t, function (t, r) { n || xt.test(e) ? i(e, r) : Lt(e + "[" + ("object" == typeof r && null != r ? t : "") + "]", r, n, i) }); else if (n || "object" !== S(t)) i(e, t); else for (r in t) Lt(e + "[" + r + "]", t[r], n, i) } E.param = function (e, t) { var n, i = [], r = function (e, t) { var n = y(t) ? t() : t; i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(null == n ? "" : n) }; if (null == e) return ""; if (Array.isArray(e) || e.jquery && !E.isPlainObject(e)) E.each(e, function () { r(this.name, this.value) }); else for (n in e) Lt(n, e[n], t, r); return i.join("&") }, E.fn.extend({ serialize: function () { return E.param(this.serializeArray()) }, serializeArray: function () { return this.map(function () { var e = E.prop(this, "elements"); return e ? E.makeArray(e) : this }).filter(function () { var e = this.type; return this.name && !E(this).is(":disabled") && Dt.test(this.nodeName) && !Ot.test(e) && (this.checked || !me.test(e)) }).map(function (e, t) { var n = E(this).val(); return null == n ? null : Array.isArray(n) ? E.map(n, function (e) { return { name: t.name, value: e.replace(It, "\r\n") } }) : { name: t.name, value: n.replace(It, "\r\n") } }).get() } }); var Pt = /%20/g, Nt = /#.*$/, Rt = /([?&])_=[^&]*/, Mt = /^(.*?):[ \t]*([^\r\n]*)$/gm, Ut = /^(?:GET|HEAD)$/, jt = /^\/\//, Bt = {}, Ft = {}, Ht = "*/".concat("*"), qt = a.createElement("a"); function Vt(e) { return function (t, n) { "string" != typeof t && (n = t, t = "*"); var i, r = 0, s = t.toLowerCase().match(j) || []; if (y(n)) for (; i = s[r++];)"+" === i[0] ? (i = i.slice(1) || "*", (e[i] = e[i] || []).unshift(n)) : (e[i] = e[i] || []).push(n) } } function Wt(e, t, n, i) { var r = {}, s = e === Ft; function a(o) { var l; return r[o] = !0, E.each(e[o] || [], function (e, o) { var u = o(t, n, i); return "string" != typeof u || s || r[u] ? s ? !(l = u) : void 0 : (t.dataTypes.unshift(u), a(u), !1) }), l } return a(t.dataTypes[0]) || !r["*"] && a("*") } function Gt(e, t) { var n, i, r = E.ajaxSettings.flatOptions || {}; for (n in t) void 0 !== t[n] && ((r[n] ? e : i || (i = {}))[n] = t[n]); return i && E.extend(!0, e, i), e } qt.href = wt.href, E.extend({ active: 0, lastModified: {}, etag: {}, ajaxSettings: { url: wt.href, type: "GET", isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(wt.protocol), global: !0, processData: !0, async: !0, contentType: "application/x-www-form-urlencoded; charset=UTF-8", accepts: { "*": Ht, text: "text/plain", html: "text/html", xml: "application/xml, text/xml", json: "application/json, text/javascript" }, contents: { xml: /\bxml\b/, html: /\bhtml/, json: /\bjson\b/ }, responseFields: { xml: "responseXML", text: "responseText", json: "responseJSON" }, converters: { "* text": String, "text html": !0, "text json": JSON.parse, "text xml": E.parseXML }, flatOptions: { url: !0, context: !0 } }, ajaxSetup: function (e, t) { return t ? Gt(Gt(e, E.ajaxSettings), t) : Gt(E.ajaxSettings, e) }, ajaxPrefilter: Vt(Bt), ajaxTransport: Vt(Ft), ajax: function (e, t) { "object" == typeof e && (t = e, e = void 0), t = t || {}; var i, r, s, o, l, u, c, h, d, f, p = E.ajaxSetup({}, t), m = p.context || p, g = p.context && (m.nodeType || m.jquery) ? E(m) : E.event, v = E.Deferred(), y = E.Callbacks("once memory"), _ = p.statusCode || {}, b = {}, T = {}, S = "canceled", C = { readyState: 0, getResponseHeader: function (e) { var t; if (c) { if (!o) for (o = {}; t = Mt.exec(s);)o[t[1].toLowerCase() + " "] = (o[t[1].toLowerCase() + " "] || []).concat(t[2]); t = o[e.toLowerCase() + " "] } return null == t ? null : t.join(", ") }, getAllResponseHeaders: function () { return c ? s : null }, setRequestHeader: function (e, t) { return null == c && (e = T[e.toLowerCase()] = T[e.toLowerCase()] || e, b[e] = t), this }, overrideMimeType: function (e) { return null == c && (p.mimeType = e), this }, statusCode: function (e) { var t; if (e) if (c) C.always(e[C.status]); else for (t in e) _[t] = [_[t], e[t]]; return this }, abort: function (e) { var t = e || S; return i && i.abort(t), w(0, t), this } }; if (v.promise(C), p.url = ((e || p.url || wt.href) + "").replace(jt, wt.protocol + "//"), p.type = t.method || t.type || p.method || p.type, p.dataTypes = (p.dataType || "*").toLowerCase().match(j) || [""], null == p.crossDomain) { u = a.createElement("a"); try { u.href = p.url, u.href = u.href, p.crossDomain = qt.protocol + "//" + qt.host != u.protocol + "//" + u.host } catch (e) { p.crossDomain = !0 } } if (p.data && p.processData && "string" != typeof p.data && (p.data = E.param(p.data, p.traditional)), Wt(Bt, p, t, C), c) return C; for (d in (h = E.event && p.global) && 0 == E.active++ && E.event.trigger("ajaxStart"), p.type = p.type.toUpperCase(), p.hasContent = !Ut.test(p.type), r = p.url.replace(Nt, ""), p.hasContent ? p.data && p.processData && 0 === (p.contentType || "").indexOf("application/x-www-form-urlencoded") && (p.data = p.data.replace(Pt, "+")) : (f = p.url.slice(r.length), p.data && (p.processData || "string" == typeof p.data) && (r += (At.test(r) ? "&" : "?") + p.data, delete p.data), !1 === p.cache && (r = r.replace(Rt, "$1"), f = (At.test(r) ? "&" : "?") + "_=" + kt++ + f), p.url = r + f), p.ifModified && (E.lastModified[r] && C.setRequestHeader("If-Modified-Since", E.lastModified[r]), E.etag[r] && C.setRequestHeader("If-None-Match", E.etag[r])), (p.data && p.hasContent && !1 !== p.contentType || t.contentType) && C.setRequestHeader("Content-Type", p.contentType), C.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + Ht + "; q=0.01" : "") : p.accepts["*"]), p.headers) C.setRequestHeader(d, p.headers[d]); if (p.beforeSend && (!1 === p.beforeSend.call(m, C, p) || c)) return C.abort(); if (S = "abort", y.add(p.complete), C.done(p.success), C.fail(p.error), i = Wt(Ft, p, t, C)) { if (C.readyState = 1, h && g.trigger("ajaxSend", [C, p]), c) return C; p.async && p.timeout > 0 && (l = n.setTimeout(function () { C.abort("timeout") }, p.timeout)); try { c = !1, i.send(b, w) } catch (e) { if (c) throw e; w(-1, e) } } else w(-1, "No Transport"); function w(e, t, a, o) { var u, d, f, b, T, S = t; c || (c = !0, l && n.clearTimeout(l), i = void 0, s = o || "", C.readyState = e > 0 ? 4 : 0, u = e >= 200 && e < 300 || 304 === e, a && (b = function (e, t, n) { for (var i, r, s, a, o = e.contents, l = e.dataTypes; "*" === l[0];)l.shift(), void 0 === i && (i = e.mimeType || t.getResponseHeader("Content-Type")); if (i) for (r in o) if (o[r] && o[r].test(i)) { l.unshift(r); break } if (l[0] in n) s = l[0]; else { for (r in n) { if (!l[0] || e.converters[r + " " + l[0]]) { s = r; break } a || (a = r) } s = s || a } if (s) return s !== l[0] && l.unshift(s), n[s] }(p, C, a)), b = function (e, t, n, i) { var r, s, a, o, l, u = {}, c = e.dataTypes.slice(); if (c[1]) for (a in e.converters) u[a.toLowerCase()] = e.converters[a]; for (s = c.shift(); s;)if (e.responseFields[s] && (n[e.responseFields[s]] = t), !l && i && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = s, s = c.shift()) if ("*" === s) s = l; else if ("*" !== l && l !== s) { if (!(a = u[l + " " + s] || u["* " + s])) for (r in u) if ((o = r.split(" "))[1] === s && (a = u[l + " " + o[0]] || u["* " + o[0]])) { !0 === a ? a = u[r] : !0 !== u[r] && (s = o[0], c.unshift(o[1])); break } if (!0 !== a) if (a && e.throws) t = a(t); else try { t = a(t) } catch (e) { return { state: "parsererror", error: a ? e : "No conversion from " + l + " to " + s } } } return { state: "success", data: t } }(p, b, C, u), u ? (p.ifModified && ((T = C.getResponseHeader("Last-Modified")) && (E.lastModified[r] = T), (T = C.getResponseHeader("etag")) && (E.etag[r] = T)), 204 === e || "HEAD" === p.type ? S = "nocontent" : 304 === e ? S = "notmodified" : (S = b.state, d = b.data, u = !(f = b.error))) : (f = S, !e && S || (S = "error", e < 0 && (e = 0))), C.status = e, C.statusText = (t || S) + "", u ? v.resolveWith(m, [d, S, C]) : v.rejectWith(m, [C, S, f]), C.statusCode(_), _ = void 0, h && g.trigger(u ? "ajaxSuccess" : "ajaxError", [C, p, u ? d : f]), y.fireWith(m, [C, S]), h && (g.trigger("ajaxComplete", [C, p]), --E.active || E.event.trigger("ajaxStop"))) } return C }, getJSON: function (e, t, n) { return E.get(e, t, n, "json") }, getScript: function (e, t) { return E.get(e, void 0, t, "script") } }), E.each(["get", "post"], function (e, t) { E[t] = function (e, n, i, r) { return y(n) && (r = r || i, i = n, n = void 0), E.ajax(E.extend({ url: e, type: t, dataType: r, data: n, success: i }, E.isPlainObject(e) && e)) } }), E._evalUrl = function (e, t) { return E.ajax({ url: e, type: "GET", dataType: "script", cache: !0, async: !1, global: !1, converters: { "text script": function () { } }, dataFilter: function (e) { E.globalEval(e, t) } }) }, E.fn.extend({ wrapAll: function (e) { var t; return this[0] && (y(e) && (e = e.call(this[0])), t = E(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map(function () { for (var e = this; e.firstElementChild;)e = e.firstElementChild; return e }).append(this)), this }, wrapInner: function (e) { return y(e) ? this.each(function (t) { E(this).wrapInner(e.call(this, t)) }) : this.each(function () { var t = E(this), n = t.contents(); n.length ? n.wrapAll(e) : t.append(e) }) }, wrap: function (e) { var t = y(e); return this.each(function (n) { E(this).wrapAll(t ? e.call(this, n) : e) }) }, unwrap: function (e) { return this.parent(e).not("body").each(function () { E(this).replaceWith(this.childNodes) }), this } }), E.expr.pseudos.hidden = function (e) { return !E.expr.pseudos.visible(e) }, E.expr.pseudos.visible = function (e) { return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length) }, E.ajaxSettings.xhr = function () { try { return new n.XMLHttpRequest } catch (e) { } }; var zt = { 0: 200, 1223: 204 }, Kt = E.ajaxSettings.xhr(); v.cors = !!Kt && "withCredentials" in Kt, v.ajax = Kt = !!Kt, E.ajaxTransport(function (e) { var t, i; if (v.cors || Kt && !e.crossDomain) return { send: function (r, s) { var a, o = e.xhr(); if (o.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields) for (a in e.xhrFields) o[a] = e.xhrFields[a]; for (a in e.mimeType && o.overrideMimeType && o.overrideMimeType(e.mimeType), e.crossDomain || r["X-Requested-With"] || (r["X-Requested-With"] = "XMLHttpRequest"), r) o.setRequestHeader(a, r[a]); t = function (e) { return function () { t && (t = i = o.onload = o.onerror = o.onabort = o.ontimeout = o.onreadystatechange = null, "abort" === e ? o.abort() : "error" === e ? "number" != typeof o.status ? s(0, "error") : s(o.status, o.statusText) : s(zt[o.status] || o.status, o.statusText, "text" !== (o.responseType || "text") || "string" != typeof o.responseText ? { binary: o.response } : { text: o.responseText }, o.getAllResponseHeaders())) } }, o.onload = t(), i = o.onerror = o.ontimeout = t("error"), void 0 !== o.onabort ? o.onabort = i : o.onreadystatechange = function () { 4 === o.readyState && n.setTimeout(function () { t && i() }) }, t = t("abort"); try { o.send(e.hasContent && e.data || null) } catch (e) { if (t) throw e } }, abort: function () { t && t() } } }), E.ajaxPrefilter(function (e) { e.crossDomain && (e.contents.script = !1) }), E.ajaxSetup({ accepts: { script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript" }, contents: { script: /\b(?:java|ecma)script\b/ }, converters: { "text script": function (e) { return E.globalEval(e), e } } }), E.ajaxPrefilter("script", function (e) { void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET") }), E.ajaxTransport("script", function (e) { var t, n; if (e.crossDomain || e.scriptAttrs) return { send: function (i, r) { t = E("<script>").attr(e.scriptAttrs || {}).prop({ charset: e.scriptCharset, src: e.url }).on("load error", n = function (e) { t.remove(), n = null, e && r("error" === e.type ? 404 : 200, e.type) }), a.head.appendChild(t[0]) }, abort: function () { n && n() } } }); var Xt, Yt = [], $t = /(=)\?(?=&|$)|\?\?/; E.ajaxSetup({ jsonp: "callback", jsonpCallback: function () { var e = Yt.pop() || E.expando + "_" + kt++; return this[e] = !0, e } }), E.ajaxPrefilter("json jsonp", function (e, t, i) { var r, s, a, o = !1 !== e.jsonp && ($t.test(e.url) ? "url" : "string" == typeof e.data && 0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") && $t.test(e.data) && "data"); if (o || "jsonp" === e.dataTypes[0]) return r = e.jsonpCallback = y(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, o ? e[o] = e[o].replace($t, "$1" + r) : !1 !== e.jsonp && (e.url += (At.test(e.url) ? "&" : "?") + e.jsonp + "=" + r), e.converters["script json"] = function () { return a || E.error(r + " was not called"), a[0] }, e.dataTypes[0] = "json", s = n[r], n[r] = function () { a = arguments }, i.always(function () { void 0 === s ? E(n).removeProp(r) : n[r] = s, e[r] && (e.jsonpCallback = t.jsonpCallback, Yt.push(r)), a && y(s) && s(a[0]), a = s = void 0 }), "script" }), v.createHTMLDocument = ((Xt = a.implementation.createHTMLDocument("").body).innerHTML = "<form></form><form></form>", 2 === Xt.childNodes.length), E.parseHTML = function (e, t, n) { return "string" != typeof e ? [] : ("boolean" == typeof t && (n = t, t = !1), t || (v.createHTMLDocument ? ((i = (t = a.implementation.createHTMLDocument("")).createElement("base")).href = a.location.href, t.head.appendChild(i)) : t = a), s = !n && [], (r = D.exec(e)) ? [t.createElement(r[1])] : (r = Ce([e], t, s), s && s.length && E(s).remove(), E.merge([], r.childNodes))); var i, r, s }, E.fn.load = function (e, t, n) { var i, r, s, a = this, o = e.indexOf(" "); return o > -1 && (i = _t(e.slice(o)), e = e.slice(0, o)), y(t) ? (n = t, t = void 0) : t && "object" == typeof t && (r = "POST"), a.length > 0 && E.ajax({ url: e, type: r || "GET", dataType: "html", data: t }).done(function (e) { s = arguments, a.html(i ? E("<div>").append(E.parseHTML(e)).find(i) : e) }).always(n && function (e, t) { a.each(function () { n.apply(this, s || [e.responseText, t, e]) }) }), this }, E.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function (e, t) { E.fn[t] = function (e) { return this.on(t, e) } }), E.expr.pseudos.animated = function (e) { return E.grep(E.timers, function (t) { return e === t.elem }).length }, E.offset = { setOffset: function (e, t, n) { var i, r, s, a, o, l, u = E.css(e, "position"), c = E(e), h = {}; "static" === u && (e.style.position = "relative"), o = c.offset(), s = E.css(e, "top"), l = E.css(e, "left"), ("absolute" === u || "fixed" === u) && (s + l).indexOf("auto") > -1 ? (a = (i = c.position()).top, r = i.left) : (a = parseFloat(s) || 0, r = parseFloat(l) || 0), y(t) && (t = t.call(e, n, E.extend({}, o))), null != t.top && (h.top = t.top - o.top + a), null != t.left && (h.left = t.left - o.left + r), "using" in t ? t.using.call(e, h) : c.css(h) } }, E.fn.extend({ offset: function (e) { if (arguments.length) return void 0 === e ? this : this.each(function (t) { E.offset.setOffset(this, e, t) }); var t, n, i = this[0]; return i ? i.getClientRects().length ? (t = i.getBoundingClientRect(), n = i.ownerDocument.defaultView, { top: t.top + n.pageYOffset, left: t.left + n.pageXOffset }) : { top: 0, left: 0 } : void 0 }, position: function () { if (this[0]) { var e, t, n, i = this[0], r = { top: 0, left: 0 }; if ("fixed" === E.css(i, "position")) t = i.getBoundingClientRect(); else { for (t = this.offset(), n = i.ownerDocument, e = i.offsetParent || n.documentElement; e && (e === n.body || e === n.documentElement) && "static" === E.css(e, "position");)e = e.parentNode; e && e !== i && 1 === e.nodeType && ((r = E(e).offset()).top += E.css(e, "borderTopWidth", !0), r.left += E.css(e, "borderLeftWidth", !0)) } return { top: t.top - r.top - E.css(i, "marginTop", !0), left: t.left - r.left - E.css(i, "marginLeft", !0) } } }, offsetParent: function () { return this.map(function () { for (var e = this.offsetParent; e && "static" === E.css(e, "position");)e = e.offsetParent; return e || ae }) } }), E.each({ scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function (e, t) { var n = "pageYOffset" === t; E.fn[e] = function (i) { return G(this, function (e, i, r) { var s; if (_(e) ? s = e : 9 === e.nodeType && (s = e.defaultView), void 0 === r) return s ? s[t] : e[i]; s ? s.scrollTo(n ? s.pageXOffset : r, n ? r : s.pageYOffset) : e[i] = r }, e, i, arguments.length) } }), E.each(["top", "left"], function (e, t) { E.cssHooks[t] = Ke(v.pixelPosition, function (e, n) { if (n) return n = ze(e, t), Ve.test(n) ? E(e).position()[t] + "px" : n }) }), E.each({ Height: "height", Width: "width" }, function (e, t) { E.each({ padding: "inner" + e, content: t, "": "outer" + e }, function (n, i) { E.fn[i] = function (r, s) { var a = arguments.length && (n || "boolean" != typeof r), o = n || (!0 === r || !0 === s ? "margin" : "border"); return G(this, function (t, n, r) { var s; return _(t) ? 0 === i.indexOf("outer") ? t["inner" + e] : t.document.documentElement["client" + e] : 9 === t.nodeType ? (s = t.documentElement, Math.max(t.body["scroll" + e], s["scroll" + e], t.body["offset" + e], s["offset" + e], s["client" + e])) : void 0 === r ? E.css(t, n, o) : E.style(t, n, r, o) }, t, a ? r : void 0, a) } }) }), E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), function (e, t) { E.fn[t] = function (e, n) { return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t) } }), E.fn.extend({ hover: function (e, t) { return this.mouseenter(e).mouseleave(t || e) } }), E.fn.extend({ bind: function (e, t, n) { return this.on(e, null, t, n) }, unbind: function (e, t) { return this.off(e, null, t) }, delegate: function (e, t, n, i) { return this.on(t, e, n, i) }, undelegate: function (e, t, n) { return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n) } }), E.proxy = function (e, t) { var n, i, r; if ("string" == typeof t && (n = e[t], t = e, e = n), y(e)) return i = l.call(arguments, 2), (r = function () { return e.apply(t || this, i.concat(l.call(arguments))) }).guid = e.guid = e.guid || E.guid++, r }, E.holdReady = function (e) { e ? E.readyWait++ : E.ready(!0) }, E.isArray = Array.isArray, E.parseJSON = JSON.parse, E.nodeName = O, E.isFunction = y, E.isWindow = _, E.camelCase = Y, E.type = S, E.now = Date.now, E.isNumeric = function (e) { var t = E.type(e); return ("number" === t || "string" === t) && !isNaN(e - parseFloat(e)) }, void 0 === (i = function () { return E }.apply(t, [])) || (e.exports = i); var Qt = n.jQuery, Jt = n.$; return E.noConflict = function (e) { return n.$ === E && (n.$ = Jt), e && n.jQuery === E && (n.jQuery = Qt), E }, r || (n.jQuery = n.$ = E), E
    })
  }, "F/us": function (e, t, n) { (function (e, n) { var i; !function () { var r = "object" == typeof self && self.self === self && self || "object" == typeof e && e.global === e && e || this || {}, s = r._, a = Array.prototype, o = Object.prototype, l = "undefined" != typeof Symbol ? Symbol.prototype : null, u = a.push, c = a.slice, h = o.toString, d = o.hasOwnProperty, f = Array.isArray, p = Object.keys, m = Object.create, g = function () { }, v = function (e) { return e instanceof v ? e : this instanceof v ? void (this._wrapped = e) : new v(e) }; t.nodeType ? r._ = v : (!n.nodeType && n.exports && (t = n.exports = v), t._ = v), v.VERSION = "1.9.1"; var y, _ = function (e, t, n) { if (void 0 === t) return e; switch (null == n ? 3 : n) { case 1: return function (n) { return e.call(t, n) }; case 3: return function (n, i, r) { return e.call(t, n, i, r) }; case 4: return function (n, i, r, s) { return e.call(t, n, i, r, s) } }return function () { return e.apply(t, arguments) } }, b = function (e, t, n) { return v.iteratee !== y ? v.iteratee(e, t) : null == e ? v.identity : v.isFunction(e) ? _(e, t, n) : v.isObject(e) && !v.isArray(e) ? v.matcher(e) : v.property(e) }; v.iteratee = y = function (e, t) { return b(e, t, 1 / 0) }; var T = function (e, t) { return t = null == t ? e.length - 1 : +t, function () { for (var n = Math.max(arguments.length - t, 0), i = Array(n), r = 0; r < n; r++)i[r] = arguments[r + t]; switch (t) { case 0: return e.call(this, i); case 1: return e.call(this, arguments[0], i); case 2: return e.call(this, arguments[0], arguments[1], i) }var s = Array(t + 1); for (r = 0; r < t; r++)s[r] = arguments[r]; return s[t] = i, e.apply(this, s) } }, S = function (e) { if (!v.isObject(e)) return {}; if (m) return m(e); g.prototype = e; var t = new g; return g.prototype = null, t }, E = function (e) { return function (t) { return null == t ? void 0 : t[e] } }, C = function (e, t) { return null != e && d.call(e, t) }, w = function (e, t) { for (var n = t.length, i = 0; i < n; i++) { if (null == e) return; e = e[t[i]] } return n ? e : void 0 }, k = Math.pow(2, 53) - 1, A = E("length"), x = function (e) { var t = A(e); return "number" == typeof t && t >= 0 && t <= k }; v.each = v.forEach = function (e, t, n) { var i, r; if (t = _(t, n), x(e)) for (i = 0, r = e.length; i < r; i++)t(e[i], i, e); else { var s = v.keys(e); for (i = 0, r = s.length; i < r; i++)t(e[s[i]], s[i], e) } return e }, v.map = v.collect = function (e, t, n) { t = b(t, n); for (var i = !x(e) && v.keys(e), r = (i || e).length, s = Array(r), a = 0; a < r; a++) { var o = i ? i[a] : a; s[a] = t(e[o], o, e) } return s }; var I = function (e) { return function (t, n, i, r) { var s = arguments.length >= 3; return function (t, n, i, r) { var s = !x(t) && v.keys(t), a = (s || t).length, o = e > 0 ? 0 : a - 1; for (r || (i = t[s ? s[o] : o], o += e); o >= 0 && o < a; o += e) { var l = s ? s[o] : o; i = n(i, t[l], l, t) } return i }(t, _(n, r, 4), i, s) } }; v.reduce = v.foldl = v.inject = I(1), v.reduceRight = v.foldr = I(-1), v.find = v.detect = function (e, t, n) { var i = (x(e) ? v.findIndex : v.findKey)(e, t, n); if (void 0 !== i && -1 !== i) return e[i] }, v.filter = v.select = function (e, t, n) { var i = []; return t = b(t, n), v.each(e, function (e, n, r) { t(e, n, r) && i.push(e) }), i }, v.reject = function (e, t, n) { return v.filter(e, v.negate(b(t)), n) }, v.every = v.all = function (e, t, n) { t = b(t, n); for (var i = !x(e) && v.keys(e), r = (i || e).length, s = 0; s < r; s++) { var a = i ? i[s] : s; if (!t(e[a], a, e)) return !1 } return !0 }, v.some = v.any = function (e, t, n) { t = b(t, n); for (var i = !x(e) && v.keys(e), r = (i || e).length, s = 0; s < r; s++) { var a = i ? i[s] : s; if (t(e[a], a, e)) return !0 } return !1 }, v.contains = v.includes = v.include = function (e, t, n, i) { return x(e) || (e = v.values(e)), ("number" != typeof n || i) && (n = 0), v.indexOf(e, t, n) >= 0 }, v.invoke = T(function (e, t, n) { var i, r; return v.isFunction(t) ? r = t : v.isArray(t) && (i = t.slice(0, -1), t = t[t.length - 1]), v.map(e, function (e) { var s = r; if (!s) { if (i && i.length && (e = w(e, i)), null == e) return; s = e[t] } return null == s ? s : s.apply(e, n) }) }), v.pluck = function (e, t) { return v.map(e, v.property(t)) }, v.where = function (e, t) { return v.filter(e, v.matcher(t)) }, v.findWhere = function (e, t) { return v.find(e, v.matcher(t)) }, v.max = function (e, t, n) { var i, r, s = -1 / 0, a = -1 / 0; if (null == t || "number" == typeof t && "object" != typeof e[0] && null != e) for (var o = 0, l = (e = x(e) ? e : v.values(e)).length; o < l; o++)null != (i = e[o]) && i > s && (s = i); else t = b(t, n), v.each(e, function (e, n, i) { ((r = t(e, n, i)) > a || r === -1 / 0 && s === -1 / 0) && (s = e, a = r) }); return s }, v.min = function (e, t, n) { var i, r, s = 1 / 0, a = 1 / 0; if (null == t || "number" == typeof t && "object" != typeof e[0] && null != e) for (var o = 0, l = (e = x(e) ? e : v.values(e)).length; o < l; o++)null != (i = e[o]) && i < s && (s = i); else t = b(t, n), v.each(e, function (e, n, i) { ((r = t(e, n, i)) < a || r === 1 / 0 && s === 1 / 0) && (s = e, a = r) }); return s }, v.shuffle = function (e) { return v.sample(e, 1 / 0) }, v.sample = function (e, t, n) { if (null == t || n) return x(e) || (e = v.values(e)), e[v.random(e.length - 1)]; var i = x(e) ? v.clone(e) : v.values(e), r = A(i); t = Math.max(Math.min(t, r), 0); for (var s = r - 1, a = 0; a < t; a++) { var o = v.random(a, s), l = i[a]; i[a] = i[o], i[o] = l } return i.slice(0, t) }, v.sortBy = function (e, t, n) { var i = 0; return t = b(t, n), v.pluck(v.map(e, function (e, n, r) { return { value: e, index: i++, criteria: t(e, n, r) } }).sort(function (e, t) { var n = e.criteria, i = t.criteria; if (n !== i) { if (n > i || void 0 === n) return 1; if (n < i || void 0 === i) return -1 } return e.index - t.index }), "value") }; var O = function (e, t) { return function (n, i, r) { var s = t ? [[], []] : {}; return i = b(i, r), v.each(n, function (t, r) { var a = i(t, r, n); e(s, t, a) }), s } }; v.groupBy = O(function (e, t, n) { C(e, n) ? e[n].push(t) : e[n] = [t] }), v.indexBy = O(function (e, t, n) { e[n] = t }), v.countBy = O(function (e, t, n) { C(e, n) ? e[n]++ : e[n] = 1 }); var D = /[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g; v.toArray = function (e) { return e ? v.isArray(e) ? c.call(e) : v.isString(e) ? e.match(D) : x(e) ? v.map(e, v.identity) : v.values(e) : [] }, v.size = function (e) { return null == e ? 0 : x(e) ? e.length : v.keys(e).length }, v.partition = O(function (e, t, n) { e[n ? 0 : 1].push(t) }, !0), v.first = v.head = v.take = function (e, t, n) { return null == e || e.length < 1 ? null == t ? void 0 : [] : null == t || n ? e[0] : v.initial(e, e.length - t) }, v.initial = function (e, t, n) { return c.call(e, 0, Math.max(0, e.length - (null == t || n ? 1 : t))) }, v.last = function (e, t, n) { return null == e || e.length < 1 ? null == t ? void 0 : [] : null == t || n ? e[e.length - 1] : v.rest(e, Math.max(0, e.length - t)) }, v.rest = v.tail = v.drop = function (e, t, n) { return c.call(e, null == t || n ? 1 : t) }, v.compact = function (e) { return v.filter(e, Boolean) }; var L = function (e, t, n, i) { for (var r = (i = i || []).length, s = 0, a = A(e); s < a; s++) { var o = e[s]; if (x(o) && (v.isArray(o) || v.isArguments(o))) if (t) for (var l = 0, u = o.length; l < u;)i[r++] = o[l++]; else L(o, t, n, i), r = i.length; else n || (i[r++] = o) } return i }; v.flatten = function (e, t) { return L(e, t, !1) }, v.without = T(function (e, t) { return v.difference(e, t) }), v.uniq = v.unique = function (e, t, n, i) { v.isBoolean(t) || (i = n, n = t, t = !1), null != n && (n = b(n, i)); for (var r = [], s = [], a = 0, o = A(e); a < o; a++) { var l = e[a], u = n ? n(l, a, e) : l; t && !n ? (a && s === u || r.push(l), s = u) : n ? v.contains(s, u) || (s.push(u), r.push(l)) : v.contains(r, l) || r.push(l) } return r }, v.union = T(function (e) { return v.uniq(L(e, !0, !0)) }), v.intersection = function (e) { for (var t = [], n = arguments.length, i = 0, r = A(e); i < r; i++) { var s = e[i]; if (!v.contains(t, s)) { var a; for (a = 1; a < n && v.contains(arguments[a], s); a++); a === n && t.push(s) } } return t }, v.difference = T(function (e, t) { return t = L(t, !0, !0), v.filter(e, function (e) { return !v.contains(t, e) }) }), v.unzip = function (e) { for (var t = e && v.max(e, A).length || 0, n = Array(t), i = 0; i < t; i++)n[i] = v.pluck(e, i); return n }, v.zip = T(v.unzip), v.object = function (e, t) { for (var n = {}, i = 0, r = A(e); i < r; i++)t ? n[e[i]] = t[i] : n[e[i][0]] = e[i][1]; return n }; var P = function (e) { return function (t, n, i) { n = b(n, i); for (var r = A(t), s = e > 0 ? 0 : r - 1; s >= 0 && s < r; s += e)if (n(t[s], s, t)) return s; return -1 } }; v.findIndex = P(1), v.findLastIndex = P(-1), v.sortedIndex = function (e, t, n, i) { for (var r = (n = b(n, i, 1))(t), s = 0, a = A(e); s < a;) { var o = Math.floor((s + a) / 2); n(e[o]) < r ? s = o + 1 : a = o } return s }; var N = function (e, t, n) { return function (i, r, s) { var a = 0, o = A(i); if ("number" == typeof s) e > 0 ? a = s >= 0 ? s : Math.max(s + o, a) : o = s >= 0 ? Math.min(s + 1, o) : s + o + 1; else if (n && s && o) return i[s = n(i, r)] === r ? s : -1; if (r != r) return (s = t(c.call(i, a, o), v.isNaN)) >= 0 ? s + a : -1; for (s = e > 0 ? a : o - 1; s >= 0 && s < o; s += e)if (i[s] === r) return s; return -1 } }; v.indexOf = N(1, v.findIndex, v.sortedIndex), v.lastIndexOf = N(-1, v.findLastIndex), v.range = function (e, t, n) { null == t && (t = e || 0, e = 0), n || (n = t < e ? -1 : 1); for (var i = Math.max(Math.ceil((t - e) / n), 0), r = Array(i), s = 0; s < i; s++, e += n)r[s] = e; return r }, v.chunk = function (e, t) { if (null == t || t < 1) return []; for (var n = [], i = 0, r = e.length; i < r;)n.push(c.call(e, i, i += t)); return n }; var R = function (e, t, n, i, r) { if (!(i instanceof t)) return e.apply(n, r); var s = S(e.prototype), a = e.apply(s, r); return v.isObject(a) ? a : s }; v.bind = T(function (e, t, n) { if (!v.isFunction(e)) throw new TypeError("Bind must be called on a function"); var i = T(function (r) { return R(e, i, t, this, n.concat(r)) }); return i }), v.partial = T(function (e, t) { var n = v.partial.placeholder, i = function () { for (var r = 0, s = t.length, a = Array(s), o = 0; o < s; o++)a[o] = t[o] === n ? arguments[r++] : t[o]; for (; r < arguments.length;)a.push(arguments[r++]); return R(e, i, this, this, a) }; return i }), v.partial.placeholder = v, v.bindAll = T(function (e, t) { var n = (t = L(t, !1, !1)).length; if (n < 1) throw new Error("bindAll must be passed function names"); for (; n--;) { var i = t[n]; e[i] = v.bind(e[i], e) } }), v.memoize = function (e, t) { var n = function (i) { var r = n.cache, s = "" + (t ? t.apply(this, arguments) : i); return C(r, s) || (r[s] = e.apply(this, arguments)), r[s] }; return n.cache = {}, n }, v.delay = T(function (e, t, n) { return setTimeout(function () { return e.apply(null, n) }, t) }), v.defer = v.partial(v.delay, v, 1), v.throttle = function (e, t, n) { var i, r, s, a, o = 0; n || (n = {}); var l = function () { o = !1 === n.leading ? 0 : v.now(), i = null, a = e.apply(r, s), i || (r = s = null) }, u = function () { var u = v.now(); o || !1 !== n.leading || (o = u); var c = t - (u - o); return r = this, s = arguments, c <= 0 || c > t ? (i && (clearTimeout(i), i = null), o = u, a = e.apply(r, s), i || (r = s = null)) : i || !1 === n.trailing || (i = setTimeout(l, c)), a }; return u.cancel = function () { clearTimeout(i), o = 0, i = r = s = null }, u }, v.debounce = function (e, t, n) { var i, r, s = function (t, n) { i = null, n && (r = e.apply(t, n)) }, a = T(function (a) { if (i && clearTimeout(i), n) { var o = !i; i = setTimeout(s, t), o && (r = e.apply(this, a)) } else i = v.delay(s, t, this, a); return r }); return a.cancel = function () { clearTimeout(i), i = null }, a }, v.wrap = function (e, t) { return v.partial(t, e) }, v.negate = function (e) { return function () { return !e.apply(this, arguments) } }, v.compose = function () { var e = arguments, t = e.length - 1; return function () { for (var n = t, i = e[t].apply(this, arguments); n--;)i = e[n].call(this, i); return i } }, v.after = function (e, t) { return function () { if (--e < 1) return t.apply(this, arguments) } }, v.before = function (e, t) { var n; return function () { return --e > 0 && (n = t.apply(this, arguments)), e <= 1 && (t = null), n } }, v.once = v.partial(v.before, 2), v.restArguments = T; var M = !{ toString: null }.propertyIsEnumerable("toString"), U = ["valueOf", "isPrototypeOf", "toString", "propertyIsEnumerable", "hasOwnProperty", "toLocaleString"], j = function (e, t) { var n = U.length, i = e.constructor, r = v.isFunction(i) && i.prototype || o, s = "constructor"; for (C(e, s) && !v.contains(t, s) && t.push(s); n--;)(s = U[n]) in e && e[s] !== r[s] && !v.contains(t, s) && t.push(s) }; v.keys = function (e) { if (!v.isObject(e)) return []; if (p) return p(e); var t = []; for (var n in e) C(e, n) && t.push(n); return M && j(e, t), t }, v.allKeys = function (e) { if (!v.isObject(e)) return []; var t = []; for (var n in e) t.push(n); return M && j(e, t), t }, v.values = function (e) { for (var t = v.keys(e), n = t.length, i = Array(n), r = 0; r < n; r++)i[r] = e[t[r]]; return i }, v.mapObject = function (e, t, n) { t = b(t, n); for (var i = v.keys(e), r = i.length, s = {}, a = 0; a < r; a++) { var o = i[a]; s[o] = t(e[o], o, e) } return s }, v.pairs = function (e) { for (var t = v.keys(e), n = t.length, i = Array(n), r = 0; r < n; r++)i[r] = [t[r], e[t[r]]]; return i }, v.invert = function (e) { for (var t = {}, n = v.keys(e), i = 0, r = n.length; i < r; i++)t[e[n[i]]] = n[i]; return t }, v.functions = v.methods = function (e) { var t = []; for (var n in e) v.isFunction(e[n]) && t.push(n); return t.sort() }; var B = function (e, t) { return function (n) { var i = arguments.length; if (t && (n = Object(n)), i < 2 || null == n) return n; for (var r = 1; r < i; r++)for (var s = arguments[r], a = e(s), o = a.length, l = 0; l < o; l++) { var u = a[l]; t && void 0 !== n[u] || (n[u] = s[u]) } return n } }; v.extend = B(v.allKeys), v.extendOwn = v.assign = B(v.keys), v.findKey = function (e, t, n) { t = b(t, n); for (var i, r = v.keys(e), s = 0, a = r.length; s < a; s++)if (t(e[i = r[s]], i, e)) return i }; var F, H, q = function (e, t, n) { return t in n }; v.pick = T(function (e, t) { var n = {}, i = t[0]; if (null == e) return n; v.isFunction(i) ? (t.length > 1 && (i = _(i, t[1])), t = v.allKeys(e)) : (i = q, t = L(t, !1, !1), e = Object(e)); for (var r = 0, s = t.length; r < s; r++) { var a = t[r], o = e[a]; i(o, a, e) && (n[a] = o) } return n }), v.omit = T(function (e, t) { var n, i = t[0]; return v.isFunction(i) ? (i = v.negate(i), t.length > 1 && (n = t[1])) : (t = v.map(L(t, !1, !1), String), i = function (e, n) { return !v.contains(t, n) }), v.pick(e, i, n) }), v.defaults = B(v.allKeys, !0), v.create = function (e, t) { var n = S(e); return t && v.extendOwn(n, t), n }, v.clone = function (e) { return v.isObject(e) ? v.isArray(e) ? e.slice() : v.extend({}, e) : e }, v.tap = function (e, t) { return t(e), e }, v.isMatch = function (e, t) { var n = v.keys(t), i = n.length; if (null == e) return !i; for (var r = Object(e), s = 0; s < i; s++) { var a = n[s]; if (t[a] !== r[a] || !(a in r)) return !1 } return !0 }, F = function (e, t, n, i) { if (e === t) return 0 !== e || 1 / e == 1 / t; if (null == e || null == t) return !1; if (e != e) return t != t; var r = typeof e; return ("function" === r || "object" === r || "object" == typeof t) && H(e, t, n, i) }, H = function (e, t, n, i) { e instanceof v && (e = e._wrapped), t instanceof v && (t = t._wrapped); var r = h.call(e); if (r !== h.call(t)) return !1; switch (r) { case "[object RegExp]": case "[object String]": return "" + e == "" + t; case "[object Number]": return +e != +e ? +t != +t : 0 == +e ? 1 / +e == 1 / t : +e == +t; case "[object Date]": case "[object Boolean]": return +e == +t; case "[object Symbol]": return l.valueOf.call(e) === l.valueOf.call(t) }var s = "[object Array]" === r; if (!s) { if ("object" != typeof e || "object" != typeof t) return !1; var a = e.constructor, o = t.constructor; if (a !== o && !(v.isFunction(a) && a instanceof a && v.isFunction(o) && o instanceof o) && "constructor" in e && "constructor" in t) return !1 } i = i || []; for (var u = (n = n || []).length; u--;)if (n[u] === e) return i[u] === t; if (n.push(e), i.push(t), s) { if ((u = e.length) !== t.length) return !1; for (; u--;)if (!F(e[u], t[u], n, i)) return !1 } else { var c, d = v.keys(e); if (u = d.length, v.keys(t).length !== u) return !1; for (; u--;)if (c = d[u], !C(t, c) || !F(e[c], t[c], n, i)) return !1 } return n.pop(), i.pop(), !0 }, v.isEqual = function (e, t) { return F(e, t) }, v.isEmpty = function (e) { return null == e || (x(e) && (v.isArray(e) || v.isString(e) || v.isArguments(e)) ? 0 === e.length : 0 === v.keys(e).length) }, v.isElement = function (e) { return !(!e || 1 !== e.nodeType) }, v.isArray = f || function (e) { return "[object Array]" === h.call(e) }, v.isObject = function (e) { var t = typeof e; return "function" === t || "object" === t && !!e }, v.each(["Arguments", "Function", "String", "Number", "Date", "RegExp", "Error", "Symbol", "Map", "WeakMap", "Set", "WeakSet"], function (e) { v["is" + e] = function (t) { return h.call(t) === "[object " + e + "]" } }), v.isArguments(arguments) || (v.isArguments = function (e) { return C(e, "callee") }); var V = r.document && r.document.childNodes; "object" != typeof Int8Array && "function" != typeof V && (v.isFunction = function (e) { return "function" == typeof e || !1 }), v.isFinite = function (e) { return !v.isSymbol(e) && isFinite(e) && !isNaN(parseFloat(e)) }, v.isNaN = function (e) { return v.isNumber(e) && isNaN(e) }, v.isBoolean = function (e) { return !0 === e || !1 === e || "[object Boolean]" === h.call(e) }, v.isNull = function (e) { return null === e }, v.isUndefined = function (e) { return void 0 === e }, v.has = function (e, t) { if (!v.isArray(t)) return C(e, t); for (var n = t.length, i = 0; i < n; i++) { var r = t[i]; if (null == e || !d.call(e, r)) return !1; e = e[r] } return !!n }, v.noConflict = function () { return r._ = s, this }, v.identity = function (e) { return e }, v.constant = function (e) { return function () { return e } }, v.noop = function () { }, v.property = function (e) { return v.isArray(e) ? function (t) { return w(t, e) } : E(e) }, v.propertyOf = function (e) { return null == e ? function () { } : function (t) { return v.isArray(t) ? w(e, t) : e[t] } }, v.matcher = v.matches = function (e) { return e = v.extendOwn({}, e), function (t) { return v.isMatch(t, e) } }, v.times = function (e, t, n) { var i = Array(Math.max(0, e)); t = _(t, n, 1); for (var r = 0; r < e; r++)i[r] = t(r); return i }, v.random = function (e, t) { return null == t && (t = e, e = 0), e + Math.floor(Math.random() * (t - e + 1)) }, v.now = Date.now || function () { return (new Date).getTime() }; var W = { "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#x27;", "`": "&#x60;" }, G = v.invert(W), z = function (e) { var t = function (t) { return e[t] }, n = "(?:" + v.keys(e).join("|") + ")", i = RegExp(n), r = RegExp(n, "g"); return function (e) { return e = null == e ? "" : "" + e, i.test(e) ? e.replace(r, t) : e } }; v.escape = z(W), v.unescape = z(G), v.result = function (e, t, n) { v.isArray(t) || (t = [t]); var i = t.length; if (!i) return v.isFunction(n) ? n.call(e) : n; for (var r = 0; r < i; r++) { var s = null == e ? void 0 : e[t[r]]; void 0 === s && (s = n, r = i), e = v.isFunction(s) ? s.call(e) : s } return e }; var K = 0; v.uniqueId = function (e) { var t = ++K + ""; return e ? e + t : t }, v.templateSettings = { evaluate: /<%([\s\S]+?)%>/g, interpolate: /<%=([\s\S]+?)%>/g, escape: /<%-([\s\S]+?)%>/g }; var X = /(.)^/, Y = { "'": "'", "\\": "\\", "\r": "r", "\n": "n", "\u2028": "u2028", "\u2029": "u2029" }, $ = /\\|'|\r|\n|\u2028|\u2029/g, Q = function (e) { return "\\" + Y[e] }; v.template = function (e, t, n) { !t && n && (t = n), t = v.defaults({}, t, v.templateSettings); var i, r = RegExp([(t.escape || X).source, (t.interpolate || X).source, (t.evaluate || X).source].join("|") + "|$", "g"), s = 0, a = "__p+='"; e.replace(r, function (t, n, i, r, o) { return a += e.slice(s, o).replace($, Q), s = o + t.length, n ? a += "'+\n((__t=(" + n + "))==null?'':_.escape(__t))+\n'" : i ? a += "'+\n((__t=(" + i + "))==null?'':__t)+\n'" : r && (a += "';\n" + r + "\n__p+='"), t }), a += "';\n", t.variable || (a = "with(obj||{}){\n" + a + "}\n"), a = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + a + "return __p;\n"; try { i = new Function(t.variable || "obj", "_", a) } catch (e) { throw e.source = a, e } var o = function (e) { return i.call(this, e, v) }, l = t.variable || "obj"; return o.source = "function(" + l + "){\n" + a + "}", o }, v.chain = function (e) { var t = v(e); return t._chain = !0, t }; var J = function (e, t) { return e._chain ? v(t).chain() : t }; v.mixin = function (e) { return v.each(v.functions(e), function (t) { var n = v[t] = e[t]; v.prototype[t] = function () { var e = [this._wrapped]; return u.apply(e, arguments), J(this, n.apply(v, e)) } }), v }, v.mixin(v), v.each(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (e) { var t = a[e]; v.prototype[e] = function () { var n = this._wrapped; return t.apply(n, arguments), "shift" !== e && "splice" !== e || 0 !== n.length || delete n[0], J(this, n) } }), v.each(["concat", "join", "slice"], function (e) { var t = a[e]; v.prototype[e] = function () { return J(this, t.apply(this._wrapped, arguments)) } }), v.prototype.value = function () { return this._wrapped }, v.prototype.valueOf = v.prototype.toJSON = v.prototype.value, v.prototype.toString = function () { return String(this._wrapped) }, void 0 === (i = function () { return v }.apply(t, [])) || (n.exports = i) }() }).call(this, n("yLpj"), n("YuTi")(e)) }, "JW/Y": function (e, t, n) { "use strict"; var i = n("QykG"), r = function (e, t) { var n = 1; for (e > t && (n = -1); Math.abs(t - e) > 4294967296;)e += 8589934592 * n; return e }, s = function (e) { var t, n; s.prototype.init.call(this), this.type_ = e || "shared", this.push = function (e) { "shared" !== this.type_ && e.type !== this.type_ || (void 0 === n && (n = e.dts), e.dts = r(e.dts, n), e.pts = r(e.pts, n), t = e.dts, this.trigger("data", e)) }, this.flush = function () { n = t, this.trigger("done") }, this.endTimeline = function () { this.flush(), this.trigger("endedtimeline") }, this.discontinuity = function () { n = void 0, t = void 0 }, this.reset = function () { this.discontinuity(), this.trigger("reset") } }; s.prototype = new i, e.exports = { TimestampRolloverStream: s, handleRollover: r } }, K4wu: function (e, t, n) { var i = n("vgmO"), r = e.exports = { WebVTT: n("0CxO"), VTTCue: n("sDzi"), VTTRegion: n("+X0y") }; i.vttjs = r, i.WebVTT = r.WebVTT; var s = r.VTTCue, a = r.VTTRegion, o = i.VTTCue, l = i.VTTRegion; r.shim = function () { i.VTTCue = s, i.VTTRegion = a }, r.restore = function () { i.VTTCue = o, i.VTTRegion = l }, i.VTTCue || r.shim() }, KAYj: function (e, t, n) { "use strict"; var i, r, s, a, o, l, u = n("f+Ey").toUnsigned, c = n("f+Ey").toHexString; i = function (e, t) { var n, s, a, o, l, c = []; if (!t.length) return null; for (n = 0; n < e.byteLength;)s = u(e[n] << 24 | e[n + 1] << 16 | e[n + 2] << 8 | e[n + 3]), a = r(e.subarray(n + 4, n + 8)), o = s > 1 ? n + s : e.byteLength, a === t[0] && (1 === t.length ? c.push(e.subarray(n + 8, o)) : (l = i(e.subarray(n + 8, o), t.slice(1))).length && (c = c.concat(l))), n = o; return c }, r = function (e) { var t = ""; return t += String.fromCharCode(e[0]), t += String.fromCharCode(e[1]), t += String.fromCharCode(e[2]), t += String.fromCharCode(e[3]) }, s = function (e) { return i(e, ["moov", "trak"]).reduce(function (e, t) { var n, r, s, a, o; return (n = i(t, ["tkhd"])[0]) ? (r = n[0], a = u(n[s = 0 === r ? 12 : 20] << 24 | n[s + 1] << 16 | n[s + 2] << 8 | n[s + 3]), (o = i(t, ["mdia", "mdhd"])[0]) ? (s = 0 === (r = o[0]) ? 12 : 20, e[a] = u(o[s] << 24 | o[s + 1] << 16 | o[s + 2] << 8 | o[s + 3]), e) : null) : null }, {}) }, a = function (e, t) { var n, r, s; return n = i(t, ["moof", "traf"]), r = [].concat.apply([], n.map(function (t) { return i(t, ["tfhd"]).map(function (n) { var r, s; return r = u(n[4] << 24 | n[5] << 16 | n[6] << 8 | n[7]), s = e[r] || 9e4, (i(t, ["tfdt"]).map(function (e) { var t, n; return t = e[0], n = u(e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7]), 1 === t && (n *= Math.pow(2, 32), n += u(e[8] << 24 | e[9] << 16 | e[10] << 8 | e[11])), n })[0] || 1 / 0) / s }) })), s = Math.min.apply(null, r), isFinite(s) ? s : 0 }, o = function (e) { var t = i(e, ["moov", "trak"]), n = []; return t.forEach(function (e) { var t = i(e, ["mdia", "hdlr"]), s = i(e, ["tkhd"]); t.forEach(function (e, t) { var i, a, o = r(e.subarray(8, 12)), l = s[t]; "vide" === o && (a = 0 === (i = new DataView(l.buffer, l.byteOffset, l.byteLength)).getUint8(0) ? i.getUint32(12) : i.getUint32(20), n.push(a)) }) }), n }, l = function (e) { var t = i(e, ["moov", "trak"]), n = []; return t.forEach(function (e) { var t, s, a = {}, o = i(e, ["tkhd"])[0]; o && (s = (t = new DataView(o.buffer, o.byteOffset, o.byteLength)).getUint8(0), a.id = 0 === s ? t.getUint32(12) : t.getUint32(20)); var l = i(e, ["mdia", "hdlr"])[0]; if (l) { var h = r(l.subarray(8, 12)); a.type = "vide" === h ? "video" : "soun" === h ? "audio" : h } var d = i(e, ["mdia", "minf", "stbl", "stsd"])[0]; if (d) { var f = d.subarray(8); a.codec = r(f.subarray(4, 8)); var p, m = i(f, [a.codec])[0]; m && (/^[a-z]vc[1-9]$/i.test(a.codec) ? (p = m.subarray(78), "avcC" === r(p.subarray(4, 8)) && p.length > 11 ? (a.codec += ".", a.codec += c(p[9]), a.codec += c(p[10]), a.codec += c(p[11])) : a.codec = "avc1.4d400d") : /^mp4[a,v]$/i.test(a.codec) && (p = m.subarray(28), "esds" === r(p.subarray(4, 8)) && p.length > 20 && 0 !== p[19] ? (a.codec += "." + c(p[19]), a.codec += "." + c(p[20] >>> 2 & 63).replace(/^0/, "")) : a.codec = "mp4a.40.2")) } var g = i(e, ["mdia", "mdhd"])[0]; if (g && o) { var v = 0 === s ? 12 : 20; a.timescale = u(g[v] << 24 | g[v + 1] << 16 | g[v + 2] << 8 | g[v + 3]) } n.push(a) }), n }, e.exports = { findBox: i, parseType: r, timescale: s, startTime: a, videoTrackIds: o, tracks: l } }, NsZL: function (e, t) { var n, i, r, s, a, o, l; n = function (e) { return 9e4 * e }, i = function (e, t) { return e * t }, r = function (e) { return e / 9e4 }, s = function (e, t) { return e / t }, a = function (e, t) { return n(s(e, t)) }, o = function (e, t) { return i(r(e), t) }, l = function (e, t, n) { return r(n ? e : e - t) }, e.exports = { ONE_SECOND_IN_TS: 9e4, secondsToVideoTs: n, secondsToAudioTs: i, videoTsToSeconds: r, audioTsToSeconds: s, audioTsToVideoTs: a, videoTsToAudioTs: o, metadataTsToSeconds: l } }, Qj6V: function (e, t, n) { "use strict"; var i = n("rnXk"), r = function (e) { var t = 31 & e[1]; return t <<= 8, t |= e[2] }, s = function (e) { return !!(64 & e[1]) }, a = function (e) { var t = 0; return (48 & e[3]) >>> 4 > 1 && (t += e[4] + 1), t }, o = function (e) { switch (e) { case 5: return "slice_layer_without_partitioning_rbsp_idr"; case 6: return "sei_rbsp"; case 7: return "seq_parameter_set_rbsp"; case 8: return "pic_parameter_set_rbsp"; case 9: return "access_unit_delimiter_rbsp"; default: return null } }; e.exports = { parseType: function (e, t) { var n = r(e); return 0 === n ? "pat" : n === t ? "pmt" : t ? "pes" : null }, parsePat: function (e) { var t = s(e), n = 4 + a(e); return t && (n += e[n] + 1), (31 & e[n + 10]) << 8 | e[n + 11] }, parsePmt: function (e) { var t = {}, n = s(e), i = 4 + a(e); if (n && (i += e[i] + 1), 1 & e[i + 5]) { var r; r = 3 + ((15 & e[i + 1]) << 8 | e[i + 2]) - 4; for (var o = 12 + ((15 & e[i + 10]) << 8 | e[i + 11]); o < r;) { var l = i + o; t[(31 & e[l + 1]) << 8 | e[l + 2]] = e[l], o += 5 + ((15 & e[l + 3]) << 8 | e[l + 4]) } return t } }, parsePayloadUnitStartIndicator: s, parsePesType: function (e, t) { switch (t[r(e)]) { case i.H264_STREAM_TYPE: return "video"; case i.ADTS_STREAM_TYPE: return "audio"; case i.METADATA_STREAM_TYPE: return "timed-metadata"; default: return null } }, parsePesTime: function (e) { if (!s(e)) return null; var t = 4 + a(e); if (t >= e.byteLength) return null; var n, i = null; return 192 & (n = e[t + 7]) && ((i = {}).pts = (14 & e[t + 9]) << 27 | (255 & e[t + 10]) << 20 | (254 & e[t + 11]) << 12 | (255 & e[t + 12]) << 5 | (254 & e[t + 13]) >>> 3, i.pts *= 4, i.pts += (6 & e[t + 13]) >>> 1, i.dts = i.pts, 64 & n && (i.dts = (14 & e[t + 14]) << 27 | (255 & e[t + 15]) << 20 | (254 & e[t + 16]) << 12 | (255 & e[t + 17]) << 5 | (254 & e[t + 18]) >>> 3, i.dts *= 4, i.dts += (6 & e[t + 18]) >>> 1)), i }, videoPacketContainsKeyFrame: function (e) { for (var t = 4 + a(e), n = e.subarray(t), i = 0, r = 0, s = !1; r < n.byteLength - 3; r++)if (1 === n[r + 2]) { i = r + 5; break } for (; i < n.byteLength;)switch (n[i]) { case 0: if (0 !== n[i - 1]) { i += 2; break } if (0 !== n[i - 2]) { i++; break } r + 3 !== i - 2 && "slice_layer_without_partitioning_rbsp_idr" === o(31 & n[r + 3]) && (s = !0); do { i++ } while (1 !== n[i] && i < n.length); r = i - 2, i += 3; break; case 1: if (0 !== n[i - 1] || 0 !== n[i - 2]) { i += 3; break } "slice_layer_without_partitioning_rbsp_idr" === o(31 & n[r + 3]) && (s = !0), r = i - 2, i += 3; break; default: i += 3 }return n = n.subarray(r), i -= r, r = 0, n && n.byteLength > 3 && "slice_layer_without_partitioning_rbsp_idr" === o(31 & n[r + 3]) && (s = !0), s } } }, QykG: function (e, t, n) { "use strict"; var i = function () { this.init = function () { var e = {}; this.on = function (t, n) { e[t] || (e[t] = []), e[t] = e[t].concat(n) }, this.off = function (t, n) { var i; return !!e[t] && (i = e[t].indexOf(n), e[t] = e[t].slice(), e[t].splice(i, 1), i > -1) }, this.trigger = function (t) { var n, i, r, s; if (n = e[t]) if (2 === arguments.length) for (r = n.length, i = 0; i < r; ++i)n[i].call(this, arguments[1]); else { for (s = [], i = arguments.length, i = 1; i < arguments.length; ++i)s.push(arguments[i]); for (r = n.length, i = 0; i < r; ++i)n[i].apply(this, s) } }, this.dispose = function () { e = {} } } }; i.prototype.pipe = function (e) { return this.on("data", function (t) { e.push(t) }), this.on("done", function (t) { e.flush(t) }), this.on("partialdone", function (t) { e.partialFlush(t) }), this.on("endedtimeline", function (t) { e.endTimeline(t) }), this.on("reset", function (t) { e.reset(t) }), e }, i.prototype.push = function (e) { this.trigger("data", e) }, i.prototype.flush = function (e) { this.trigger("done", e) }, i.prototype.partialFlush = function (e) { this.trigger("partialdone", e) }, i.prototype.endTimeline = function (e) { this.trigger("endedtimeline", e) }, i.prototype.reset = function (e) { this.trigger("reset", e) }, e.exports = i }, SYky: function (e, t, n) {
    /*!
      * Bootstrap v4.4.1 (https://getbootstrap.com/)
      * Copyright 2011-2019 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
      * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
      */
    !function (e, t, n) { "use strict"; function i(e, t) { for (var n = 0; n < t.length; n++) { var i = t[n]; i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i) } } function r(e, t, n) { return t && i(e.prototype, t), n && i(e, n), e } function s(e, t, n) { return t in e ? Object.defineProperty(e, t, { value: n, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = n, e } function a(e, t) { var n = Object.keys(e); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(e); t && (i = i.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), n.push.apply(n, i) } return n } function o(e) { for (var t = 1; t < arguments.length; t++) { var n = null != arguments[t] ? arguments[t] : {}; t % 2 ? a(Object(n), !0).forEach(function (t) { s(e, t, n[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(n)) : a(Object(n)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(n, t)) }) } return e } t = t && t.hasOwnProperty("default") ? t.default : t, n = n && n.hasOwnProperty("default") ? n.default : n; var l = "transitionend"; function u(e) { var n = this, i = !1; return t(this).one(c.TRANSITION_END, function () { i = !0 }), setTimeout(function () { i || c.triggerTransitionEnd(n) }, e), this } var c = { TRANSITION_END: "bsTransitionEnd", getUID: function (e) { do { e += ~~(1e6 * Math.random()) } while (document.getElementById(e)); return e }, getSelectorFromElement: function (e) { var t = e.getAttribute("data-target"); if (!t || "#" === t) { var n = e.getAttribute("href"); t = n && "#" !== n ? n.trim() : "" } try { return document.querySelector(t) ? t : null } catch (e) { return null } }, getTransitionDurationFromElement: function (e) { if (!e) return 0; var n = t(e).css("transition-duration"), i = t(e).css("transition-delay"), r = parseFloat(n), s = parseFloat(i); return r || s ? (n = n.split(",")[0], i = i.split(",")[0], 1e3 * (parseFloat(n) + parseFloat(i))) : 0 }, reflow: function (e) { return e.offsetHeight }, triggerTransitionEnd: function (e) { t(e).trigger(l) }, supportsTransitionEnd: function () { return Boolean(l) }, isElement: function (e) { return (e[0] || e).nodeType }, typeCheckConfig: function (e, t, n) { for (var i in n) if (Object.prototype.hasOwnProperty.call(n, i)) { var r = n[i], s = t[i], a = s && c.isElement(s) ? "element" : (o = s, {}.toString.call(o).match(/\s([a-z]+)/i)[1].toLowerCase()); if (!new RegExp(r).test(a)) throw new Error(e.toUpperCase() + ': Option "' + i + '" provided type "' + a + '" but expected type "' + r + '".') } var o }, findShadowRoot: function (e) { if (!document.documentElement.attachShadow) return null; if ("function" == typeof e.getRootNode) { var t = e.getRootNode(); return t instanceof ShadowRoot ? t : null } return e instanceof ShadowRoot ? e : e.parentNode ? c.findShadowRoot(e.parentNode) : null }, jQueryDetection: function () { if (void 0 === t) throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript."); var e = t.fn.jquery.split(" ")[0].split("."); if (e[0] < 2 && e[1] < 9 || 1 === e[0] && 9 === e[1] && e[2] < 1 || e[0] >= 4) throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0") } }; c.jQueryDetection(), t.fn.emulateTransitionEnd = u, t.event.special[c.TRANSITION_END] = { bindType: l, delegateType: l, handle: function (e) { if (t(e.target).is(this)) return e.handleObj.handler.apply(this, arguments) } }; var h = t.fn.alert, d = { CLOSE: "close.bs.alert", CLOSED: "closed.bs.alert", CLICK_DATA_API: "click.bs.alert.data-api" }, f = { ALERT: "alert", FADE: "fade", SHOW: "show" }, p = function () { function e(e) { this._element = e } var n = e.prototype; return n.close = function (e) { var t = this._element; e && (t = this._getRootElement(e)); var n = this._triggerCloseEvent(t); n.isDefaultPrevented() || this._removeElement(t) }, n.dispose = function () { t.removeData(this._element, "bs.alert"), this._element = null }, n._getRootElement = function (e) { var n = c.getSelectorFromElement(e), i = !1; return n && (i = document.querySelector(n)), i || (i = t(e).closest("." + f.ALERT)[0]), i }, n._triggerCloseEvent = function (e) { var n = t.Event(d.CLOSE); return t(e).trigger(n), n }, n._removeElement = function (e) { var n = this; if (t(e).removeClass(f.SHOW), t(e).hasClass(f.FADE)) { var i = c.getTransitionDurationFromElement(e); t(e).one(c.TRANSITION_END, function (t) { return n._destroyElement(e, t) }).emulateTransitionEnd(i) } else this._destroyElement(e) }, n._destroyElement = function (e) { t(e).detach().trigger(d.CLOSED).remove() }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this), r = i.data("bs.alert"); r || (r = new e(this), i.data("bs.alert", r)), "close" === n && r[n](this) }) }, e._handleDismiss = function (e) { return function (t) { t && t.preventDefault(), e.close(this) } }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }]), e }(); t(document).on(d.CLICK_DATA_API, '[data-dismiss="alert"]', p._handleDismiss(new p)), t.fn.alert = p._jQueryInterface, t.fn.alert.Constructor = p, t.fn.alert.noConflict = function () { return t.fn.alert = h, p._jQueryInterface }; var m = t.fn.button, g = { ACTIVE: "active", BUTTON: "btn", FOCUS: "focus" }, v = { DATA_TOGGLE_CARROT: '[data-toggle^="button"]', DATA_TOGGLES: '[data-toggle="buttons"]', DATA_TOGGLE: '[data-toggle="button"]', DATA_TOGGLES_BUTTONS: '[data-toggle="buttons"] .btn', INPUT: 'input:not([type="hidden"])', ACTIVE: ".active", BUTTON: ".btn" }, y = { CLICK_DATA_API: "click.bs.button.data-api", FOCUS_BLUR_DATA_API: "focus.bs.button.data-api blur.bs.button.data-api", LOAD_DATA_API: "load.bs.button.data-api" }, _ = function () { function e(e) { this._element = e } var n = e.prototype; return n.toggle = function () { var e = !0, n = !0, i = t(this._element).closest(v.DATA_TOGGLES)[0]; if (i) { var r = this._element.querySelector(v.INPUT); if (r) { if ("radio" === r.type) if (r.checked && this._element.classList.contains(g.ACTIVE)) e = !1; else { var s = i.querySelector(v.ACTIVE); s && t(s).removeClass(g.ACTIVE) } else "checkbox" === r.type ? "LABEL" === this._element.tagName && r.checked === this._element.classList.contains(g.ACTIVE) && (e = !1) : e = !1; e && (r.checked = !this._element.classList.contains(g.ACTIVE), t(r).trigger("change")), r.focus(), n = !1 } } this._element.hasAttribute("disabled") || this._element.classList.contains("disabled") || (n && this._element.setAttribute("aria-pressed", !this._element.classList.contains(g.ACTIVE)), e && t(this._element).toggleClass(g.ACTIVE)) }, n.dispose = function () { t.removeData(this._element, "bs.button"), this._element = null }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this).data("bs.button"); i || (i = new e(this), t(this).data("bs.button", i)), "toggle" === n && i[n]() }) }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }]), e }(); t(document).on(y.CLICK_DATA_API, v.DATA_TOGGLE_CARROT, function (e) { var n = e.target; if (t(n).hasClass(g.BUTTON) || (n = t(n).closest(v.BUTTON)[0]), !n || n.hasAttribute("disabled") || n.classList.contains("disabled")) e.preventDefault(); else { var i = n.querySelector(v.INPUT); if (i && (i.hasAttribute("disabled") || i.classList.contains("disabled"))) return void e.preventDefault(); _._jQueryInterface.call(t(n), "toggle") } }).on(y.FOCUS_BLUR_DATA_API, v.DATA_TOGGLE_CARROT, function (e) { var n = t(e.target).closest(v.BUTTON)[0]; t(n).toggleClass(g.FOCUS, /^focus(in)?$/.test(e.type)) }), t(window).on(y.LOAD_DATA_API, function () { for (var e = [].slice.call(document.querySelectorAll(v.DATA_TOGGLES_BUTTONS)), t = 0, n = e.length; t < n; t++) { var i = e[t], r = i.querySelector(v.INPUT); r.checked || r.hasAttribute("checked") ? i.classList.add(g.ACTIVE) : i.classList.remove(g.ACTIVE) } e = [].slice.call(document.querySelectorAll(v.DATA_TOGGLE)); for (var s = 0, a = e.length; s < a; s++) { var o = e[s]; "true" === o.getAttribute("aria-pressed") ? o.classList.add(g.ACTIVE) : o.classList.remove(g.ACTIVE) } }), t.fn.button = _._jQueryInterface, t.fn.button.Constructor = _, t.fn.button.noConflict = function () { return t.fn.button = m, _._jQueryInterface }; var b = "carousel", T = ".bs.carousel", S = t.fn[b], E = { interval: 5e3, keyboard: !0, slide: !1, pause: "hover", wrap: !0, touch: !0 }, C = { interval: "(number|boolean)", keyboard: "boolean", slide: "(boolean|string)", pause: "(string|boolean)", wrap: "boolean", touch: "boolean" }, w = { NEXT: "next", PREV: "prev", LEFT: "left", RIGHT: "right" }, k = { SLIDE: "slide.bs.carousel", SLID: "slid.bs.carousel", KEYDOWN: "keydown.bs.carousel", MOUSEENTER: "mouseenter.bs.carousel", MOUSELEAVE: "mouseleave.bs.carousel", TOUCHSTART: "touchstart.bs.carousel", TOUCHMOVE: "touchmove.bs.carousel", TOUCHEND: "touchend.bs.carousel", POINTERDOWN: "pointerdown.bs.carousel", POINTERUP: "pointerup.bs.carousel", DRAG_START: "dragstart.bs.carousel", LOAD_DATA_API: "load.bs.carousel.data-api", CLICK_DATA_API: "click.bs.carousel.data-api" }, A = { CAROUSEL: "carousel", ACTIVE: "active", SLIDE: "slide", RIGHT: "carousel-item-right", LEFT: "carousel-item-left", NEXT: "carousel-item-next", PREV: "carousel-item-prev", ITEM: "carousel-item", POINTER_EVENT: "pointer-event" }, x = { ACTIVE: ".active", ACTIVE_ITEM: ".active.carousel-item", ITEM: ".carousel-item", ITEM_IMG: ".carousel-item img", NEXT_PREV: ".carousel-item-next, .carousel-item-prev", INDICATORS: ".carousel-indicators", DATA_SLIDE: "[data-slide], [data-slide-to]", DATA_RIDE: '[data-ride="carousel"]' }, I = { TOUCH: "touch", PEN: "pen" }, O = function () { function e(e, t) { this._items = null, this._interval = null, this._activeElement = null, this._isPaused = !1, this._isSliding = !1, this.touchTimeout = null, this.touchStartX = 0, this.touchDeltaX = 0, this._config = this._getConfig(t), this._element = e, this._indicatorsElement = this._element.querySelector(x.INDICATORS), this._touchSupported = "ontouchstart" in document.documentElement || navigator.maxTouchPoints > 0, this._pointerEvent = Boolean(window.PointerEvent || window.MSPointerEvent), this._addEventListeners() } var n = e.prototype; return n.next = function () { this._isSliding || this._slide(w.NEXT) }, n.nextWhenVisible = function () { !document.hidden && t(this._element).is(":visible") && "hidden" !== t(this._element).css("visibility") && this.next() }, n.prev = function () { this._isSliding || this._slide(w.PREV) }, n.pause = function (e) { e || (this._isPaused = !0), this._element.querySelector(x.NEXT_PREV) && (c.triggerTransitionEnd(this._element), this.cycle(!0)), clearInterval(this._interval), this._interval = null }, n.cycle = function (e) { e || (this._isPaused = !1), this._interval && (clearInterval(this._interval), this._interval = null), this._config.interval && !this._isPaused && (this._interval = setInterval((document.visibilityState ? this.nextWhenVisible : this.next).bind(this), this._config.interval)) }, n.to = function (e) { var n = this; this._activeElement = this._element.querySelector(x.ACTIVE_ITEM); var i = this._getItemIndex(this._activeElement); if (!(e > this._items.length - 1 || e < 0)) if (this._isSliding) t(this._element).one(k.SLID, function () { return n.to(e) }); else { if (i === e) return this.pause(), void this.cycle(); var r = e > i ? w.NEXT : w.PREV; this._slide(r, this._items[e]) } }, n.dispose = function () { t(this._element).off(T), t.removeData(this._element, "bs.carousel"), this._items = null, this._config = null, this._element = null, this._interval = null, this._isPaused = null, this._isSliding = null, this._activeElement = null, this._indicatorsElement = null }, n._getConfig = function (e) { return e = o({}, E, {}, e), c.typeCheckConfig(b, e, C), e }, n._handleSwipe = function () { var e = Math.abs(this.touchDeltaX); if (!(e <= 40)) { var t = e / this.touchDeltaX; this.touchDeltaX = 0, t > 0 && this.prev(), t < 0 && this.next() } }, n._addEventListeners = function () { var e = this; this._config.keyboard && t(this._element).on(k.KEYDOWN, function (t) { return e._keydown(t) }), "hover" === this._config.pause && t(this._element).on(k.MOUSEENTER, function (t) { return e.pause(t) }).on(k.MOUSELEAVE, function (t) { return e.cycle(t) }), this._config.touch && this._addTouchEventListeners() }, n._addTouchEventListeners = function () { var e = this; if (this._touchSupported) { var n = function (t) { e._pointerEvent && I[t.originalEvent.pointerType.toUpperCase()] ? e.touchStartX = t.originalEvent.clientX : e._pointerEvent || (e.touchStartX = t.originalEvent.touches[0].clientX) }, i = function (t) { e._pointerEvent && I[t.originalEvent.pointerType.toUpperCase()] && (e.touchDeltaX = t.originalEvent.clientX - e.touchStartX), e._handleSwipe(), "hover" === e._config.pause && (e.pause(), e.touchTimeout && clearTimeout(e.touchTimeout), e.touchTimeout = setTimeout(function (t) { return e.cycle(t) }, 500 + e._config.interval)) }; t(this._element.querySelectorAll(x.ITEM_IMG)).on(k.DRAG_START, function (e) { return e.preventDefault() }), this._pointerEvent ? (t(this._element).on(k.POINTERDOWN, function (e) { return n(e) }), t(this._element).on(k.POINTERUP, function (e) { return i(e) }), this._element.classList.add(A.POINTER_EVENT)) : (t(this._element).on(k.TOUCHSTART, function (e) { return n(e) }), t(this._element).on(k.TOUCHMOVE, function (t) { return function (t) { t.originalEvent.touches && t.originalEvent.touches.length > 1 ? e.touchDeltaX = 0 : e.touchDeltaX = t.originalEvent.touches[0].clientX - e.touchStartX }(t) }), t(this._element).on(k.TOUCHEND, function (e) { return i(e) })) } }, n._keydown = function (e) { if (!/input|textarea/i.test(e.target.tagName)) switch (e.which) { case 37: e.preventDefault(), this.prev(); break; case 39: e.preventDefault(), this.next() } }, n._getItemIndex = function (e) { return this._items = e && e.parentNode ? [].slice.call(e.parentNode.querySelectorAll(x.ITEM)) : [], this._items.indexOf(e) }, n._getItemByDirection = function (e, t) { var n = e === w.NEXT, i = e === w.PREV, r = this._getItemIndex(t), s = this._items.length - 1, a = i && 0 === r || n && r === s; if (a && !this._config.wrap) return t; var o = e === w.PREV ? -1 : 1, l = (r + o) % this._items.length; return -1 === l ? this._items[this._items.length - 1] : this._items[l] }, n._triggerSlideEvent = function (e, n) { var i = this._getItemIndex(e), r = this._getItemIndex(this._element.querySelector(x.ACTIVE_ITEM)), s = t.Event(k.SLIDE, { relatedTarget: e, direction: n, from: r, to: i }); return t(this._element).trigger(s), s }, n._setActiveIndicatorElement = function (e) { if (this._indicatorsElement) { var n = [].slice.call(this._indicatorsElement.querySelectorAll(x.ACTIVE)); t(n).removeClass(A.ACTIVE); var i = this._indicatorsElement.children[this._getItemIndex(e)]; i && t(i).addClass(A.ACTIVE) } }, n._slide = function (e, n) { var i, r, s, a = this, o = this._element.querySelector(x.ACTIVE_ITEM), l = this._getItemIndex(o), u = n || o && this._getItemByDirection(e, o), h = this._getItemIndex(u), d = Boolean(this._interval); if (e === w.NEXT ? (i = A.LEFT, r = A.NEXT, s = w.LEFT) : (i = A.RIGHT, r = A.PREV, s = w.RIGHT), u && t(u).hasClass(A.ACTIVE)) this._isSliding = !1; else { var f = this._triggerSlideEvent(u, s); if (!f.isDefaultPrevented() && o && u) { this._isSliding = !0, d && this.pause(), this._setActiveIndicatorElement(u); var p = t.Event(k.SLID, { relatedTarget: u, direction: s, from: l, to: h }); if (t(this._element).hasClass(A.SLIDE)) { t(u).addClass(r), c.reflow(u), t(o).addClass(i), t(u).addClass(i); var m = parseInt(u.getAttribute("data-interval"), 10); m ? (this._config.defaultInterval = this._config.defaultInterval || this._config.interval, this._config.interval = m) : this._config.interval = this._config.defaultInterval || this._config.interval; var g = c.getTransitionDurationFromElement(o); t(o).one(c.TRANSITION_END, function () { t(u).removeClass(i + " " + r).addClass(A.ACTIVE), t(o).removeClass(A.ACTIVE + " " + r + " " + i), a._isSliding = !1, setTimeout(function () { return t(a._element).trigger(p) }, 0) }).emulateTransitionEnd(g) } else t(o).removeClass(A.ACTIVE), t(u).addClass(A.ACTIVE), this._isSliding = !1, t(this._element).trigger(p); d && this.cycle() } } }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this).data("bs.carousel"), r = o({}, E, {}, t(this).data()); "object" == typeof n && (r = o({}, r, {}, n)); var s = "string" == typeof n ? n : r.slide; if (i || (i = new e(this, r), t(this).data("bs.carousel", i)), "number" == typeof n) i.to(n); else if ("string" == typeof s) { if (void 0 === i[s]) throw new TypeError('No method named "' + s + '"'); i[s]() } else r.interval && r.ride && (i.pause(), i.cycle()) }) }, e._dataApiClickHandler = function (n) { var i = c.getSelectorFromElement(this); if (i) { var r = t(i)[0]; if (r && t(r).hasClass(A.CAROUSEL)) { var s = o({}, t(r).data(), {}, t(this).data()), a = this.getAttribute("data-slide-to"); a && (s.interval = !1), e._jQueryInterface.call(t(r), s), a && t(r).data("bs.carousel").to(a), n.preventDefault() } } }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }, { key: "Default", get: function () { return E } }]), e }(); t(document).on(k.CLICK_DATA_API, x.DATA_SLIDE, O._dataApiClickHandler), t(window).on(k.LOAD_DATA_API, function () { for (var e = [].slice.call(document.querySelectorAll(x.DATA_RIDE)), n = 0, i = e.length; n < i; n++) { var r = t(e[n]); O._jQueryInterface.call(r, r.data()) } }), t.fn[b] = O._jQueryInterface, t.fn[b].Constructor = O, t.fn[b].noConflict = function () { return t.fn[b] = S, O._jQueryInterface }; var D = "collapse", L = t.fn[D], P = { toggle: !0, parent: "" }, N = { toggle: "boolean", parent: "(string|element)" }, R = { SHOW: "show.bs.collapse", SHOWN: "shown.bs.collapse", HIDE: "hide.bs.collapse", HIDDEN: "hidden.bs.collapse", CLICK_DATA_API: "click.bs.collapse.data-api" }, M = { SHOW: "show", COLLAPSE: "collapse", COLLAPSING: "collapsing", COLLAPSED: "collapsed" }, U = { WIDTH: "width", HEIGHT: "height" }, j = { ACTIVES: ".show, .collapsing", DATA_TOGGLE: '[data-toggle="collapse"]' }, B = function () { function e(e, t) { this._isTransitioning = !1, this._element = e, this._config = this._getConfig(t), this._triggerArray = [].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#' + e.id + '"],[data-toggle="collapse"][data-target="#' + e.id + '"]')); for (var n = [].slice.call(document.querySelectorAll(j.DATA_TOGGLE)), i = 0, r = n.length; i < r; i++) { var s = n[i], a = c.getSelectorFromElement(s), o = [].slice.call(document.querySelectorAll(a)).filter(function (t) { return t === e }); null !== a && o.length > 0 && (this._selector = a, this._triggerArray.push(s)) } this._parent = this._config.parent ? this._getParent() : null, this._config.parent || this._addAriaAndCollapsedClass(this._element, this._triggerArray), this._config.toggle && this.toggle() } var n = e.prototype; return n.toggle = function () { t(this._element).hasClass(M.SHOW) ? this.hide() : this.show() }, n.show = function () { var n, i, r = this; if (!(this._isTransitioning || t(this._element).hasClass(M.SHOW) || (this._parent && 0 === (n = [].slice.call(this._parent.querySelectorAll(j.ACTIVES)).filter(function (e) { return "string" == typeof r._config.parent ? e.getAttribute("data-parent") === r._config.parent : e.classList.contains(M.COLLAPSE) })).length && (n = null), n && (i = t(n).not(this._selector).data("bs.collapse")) && i._isTransitioning))) { var s = t.Event(R.SHOW); if (t(this._element).trigger(s), !s.isDefaultPrevented()) { n && (e._jQueryInterface.call(t(n).not(this._selector), "hide"), i || t(n).data("bs.collapse", null)); var a = this._getDimension(); t(this._element).removeClass(M.COLLAPSE).addClass(M.COLLAPSING), this._element.style[a] = 0, this._triggerArray.length && t(this._triggerArray).removeClass(M.COLLAPSED).attr("aria-expanded", !0), this.setTransitioning(!0); var o = a[0].toUpperCase() + a.slice(1), l = "scroll" + o, u = c.getTransitionDurationFromElement(this._element); t(this._element).one(c.TRANSITION_END, function () { t(r._element).removeClass(M.COLLAPSING).addClass(M.COLLAPSE).addClass(M.SHOW), r._element.style[a] = "", r.setTransitioning(!1), t(r._element).trigger(R.SHOWN) }).emulateTransitionEnd(u), this._element.style[a] = this._element[l] + "px" } } }, n.hide = function () { var e = this; if (!this._isTransitioning && t(this._element).hasClass(M.SHOW)) { var n = t.Event(R.HIDE); if (t(this._element).trigger(n), !n.isDefaultPrevented()) { var i = this._getDimension(); this._element.style[i] = this._element.getBoundingClientRect()[i] + "px", c.reflow(this._element), t(this._element).addClass(M.COLLAPSING).removeClass(M.COLLAPSE).removeClass(M.SHOW); var r = this._triggerArray.length; if (r > 0) for (var s = 0; s < r; s++) { var a = this._triggerArray[s], o = c.getSelectorFromElement(a); if (null !== o) { var l = t([].slice.call(document.querySelectorAll(o))); l.hasClass(M.SHOW) || t(a).addClass(M.COLLAPSED).attr("aria-expanded", !1) } } this.setTransitioning(!0), this._element.style[i] = ""; var u = c.getTransitionDurationFromElement(this._element); t(this._element).one(c.TRANSITION_END, function () { e.setTransitioning(!1), t(e._element).removeClass(M.COLLAPSING).addClass(M.COLLAPSE).trigger(R.HIDDEN) }).emulateTransitionEnd(u) } } }, n.setTransitioning = function (e) { this._isTransitioning = e }, n.dispose = function () { t.removeData(this._element, "bs.collapse"), this._config = null, this._parent = null, this._element = null, this._triggerArray = null, this._isTransitioning = null }, n._getConfig = function (e) { return (e = o({}, P, {}, e)).toggle = Boolean(e.toggle), c.typeCheckConfig(D, e, N), e }, n._getDimension = function () { var e = t(this._element).hasClass(U.WIDTH); return e ? U.WIDTH : U.HEIGHT }, n._getParent = function () { var n, i = this; c.isElement(this._config.parent) ? (n = this._config.parent, void 0 !== this._config.parent.jquery && (n = this._config.parent[0])) : n = document.querySelector(this._config.parent); var r = '[data-toggle="collapse"][data-parent="' + this._config.parent + '"]', s = [].slice.call(n.querySelectorAll(r)); return t(s).each(function (t, n) { i._addAriaAndCollapsedClass(e._getTargetFromElement(n), [n]) }), n }, n._addAriaAndCollapsedClass = function (e, n) { var i = t(e).hasClass(M.SHOW); n.length && t(n).toggleClass(M.COLLAPSED, !i).attr("aria-expanded", i) }, e._getTargetFromElement = function (e) { var t = c.getSelectorFromElement(e); return t ? document.querySelector(t) : null }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this), r = i.data("bs.collapse"), s = o({}, P, {}, i.data(), {}, "object" == typeof n && n ? n : {}); if (!r && s.toggle && /show|hide/.test(n) && (s.toggle = !1), r || (r = new e(this, s), i.data("bs.collapse", r)), "string" == typeof n) { if (void 0 === r[n]) throw new TypeError('No method named "' + n + '"'); r[n]() } }) }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }, { key: "Default", get: function () { return P } }]), e }(); t(document).on(R.CLICK_DATA_API, j.DATA_TOGGLE, function (e) { "A" === e.currentTarget.tagName && e.preventDefault(); var n = t(this), i = c.getSelectorFromElement(this), r = [].slice.call(document.querySelectorAll(i)); t(r).each(function () { var e = t(this), i = e.data("bs.collapse"), r = i ? "toggle" : n.data(); B._jQueryInterface.call(e, r) }) }), t.fn[D] = B._jQueryInterface, t.fn[D].Constructor = B, t.fn[D].noConflict = function () { return t.fn[D] = L, B._jQueryInterface }; var F = "dropdown", H = t.fn[F], q = new RegExp("38|40|27"), V = { HIDE: "hide.bs.dropdown", HIDDEN: "hidden.bs.dropdown", SHOW: "show.bs.dropdown", SHOWN: "shown.bs.dropdown", CLICK: "click.bs.dropdown", CLICK_DATA_API: "click.bs.dropdown.data-api", KEYDOWN_DATA_API: "keydown.bs.dropdown.data-api", KEYUP_DATA_API: "keyup.bs.dropdown.data-api" }, W = { DISABLED: "disabled", SHOW: "show", DROPUP: "dropup", DROPRIGHT: "dropright", DROPLEFT: "dropleft", MENURIGHT: "dropdown-menu-right", MENULEFT: "dropdown-menu-left", POSITION_STATIC: "position-static" }, G = { DATA_TOGGLE: '[data-toggle="dropdown"]', FORM_CHILD: ".dropdown form", MENU: ".dropdown-menu", NAVBAR_NAV: ".navbar-nav", VISIBLE_ITEMS: ".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)" }, z = { TOP: "top-start", TOPEND: "top-end", BOTTOM: "bottom-start", BOTTOMEND: "bottom-end", RIGHT: "right-start", RIGHTEND: "right-end", LEFT: "left-start", LEFTEND: "left-end" }, K = { offset: 0, flip: !0, boundary: "scrollParent", reference: "toggle", display: "dynamic", popperConfig: null }, X = { offset: "(number|string|function)", flip: "boolean", boundary: "(string|element)", reference: "(string|element)", display: "string", popperConfig: "(null|object)" }, Y = function () { function e(e, t) { this._element = e, this._popper = null, this._config = this._getConfig(t), this._menu = this._getMenuElement(), this._inNavbar = this._detectNavbar(), this._addEventListeners() } var i = e.prototype; return i.toggle = function () { if (!this._element.disabled && !t(this._element).hasClass(W.DISABLED)) { var n = t(this._menu).hasClass(W.SHOW); e._clearMenus(), n || this.show(!0) } }, i.show = function (i) { if (void 0 === i && (i = !1), !(this._element.disabled || t(this._element).hasClass(W.DISABLED) || t(this._menu).hasClass(W.SHOW))) { var r = { relatedTarget: this._element }, s = t.Event(V.SHOW, r), a = e._getParentFromElement(this._element); if (t(a).trigger(s), !s.isDefaultPrevented()) { if (!this._inNavbar && i) { if (void 0 === n) throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)"); var o = this._element; "parent" === this._config.reference ? o = a : c.isElement(this._config.reference) && (o = this._config.reference, void 0 !== this._config.reference.jquery && (o = this._config.reference[0])), "scrollParent" !== this._config.boundary && t(a).addClass(W.POSITION_STATIC), this._popper = new n(o, this._menu, this._getPopperConfig()) } "ontouchstart" in document.documentElement && 0 === t(a).closest(G.NAVBAR_NAV).length && t(document.body).children().on("mouseover", null, t.noop), this._element.focus(), this._element.setAttribute("aria-expanded", !0), t(this._menu).toggleClass(W.SHOW), t(a).toggleClass(W.SHOW).trigger(t.Event(V.SHOWN, r)) } } }, i.hide = function () { if (!this._element.disabled && !t(this._element).hasClass(W.DISABLED) && t(this._menu).hasClass(W.SHOW)) { var n = { relatedTarget: this._element }, i = t.Event(V.HIDE, n), r = e._getParentFromElement(this._element); t(r).trigger(i), i.isDefaultPrevented() || (this._popper && this._popper.destroy(), t(this._menu).toggleClass(W.SHOW), t(r).toggleClass(W.SHOW).trigger(t.Event(V.HIDDEN, n))) } }, i.dispose = function () { t.removeData(this._element, "bs.dropdown"), t(this._element).off(".bs.dropdown"), this._element = null, this._menu = null, null !== this._popper && (this._popper.destroy(), this._popper = null) }, i.update = function () { this._inNavbar = this._detectNavbar(), null !== this._popper && this._popper.scheduleUpdate() }, i._addEventListeners = function () { var e = this; t(this._element).on(V.CLICK, function (t) { t.preventDefault(), t.stopPropagation(), e.toggle() }) }, i._getConfig = function (e) { return e = o({}, this.constructor.Default, {}, t(this._element).data(), {}, e), c.typeCheckConfig(F, e, this.constructor.DefaultType), e }, i._getMenuElement = function () { if (!this._menu) { var t = e._getParentFromElement(this._element); t && (this._menu = t.querySelector(G.MENU)) } return this._menu }, i._getPlacement = function () { var e = t(this._element.parentNode), n = z.BOTTOM; return e.hasClass(W.DROPUP) ? (n = z.TOP, t(this._menu).hasClass(W.MENURIGHT) && (n = z.TOPEND)) : e.hasClass(W.DROPRIGHT) ? n = z.RIGHT : e.hasClass(W.DROPLEFT) ? n = z.LEFT : t(this._menu).hasClass(W.MENURIGHT) && (n = z.BOTTOMEND), n }, i._detectNavbar = function () { return t(this._element).closest(".navbar").length > 0 }, i._getOffset = function () { var e = this, t = {}; return "function" == typeof this._config.offset ? t.fn = function (t) { return t.offsets = o({}, t.offsets, {}, e._config.offset(t.offsets, e._element) || {}), t } : t.offset = this._config.offset, t }, i._getPopperConfig = function () { var e = { placement: this._getPlacement(), modifiers: { offset: this._getOffset(), flip: { enabled: this._config.flip }, preventOverflow: { boundariesElement: this._config.boundary } } }; return "static" === this._config.display && (e.modifiers.applyStyle = { enabled: !1 }), o({}, e, {}, this._config.popperConfig) }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this).data("bs.dropdown"), r = "object" == typeof n ? n : null; if (i || (i = new e(this, r), t(this).data("bs.dropdown", i)), "string" == typeof n) { if (void 0 === i[n]) throw new TypeError('No method named "' + n + '"'); i[n]() } }) }, e._clearMenus = function (n) { if (!n || 3 !== n.which && ("keyup" !== n.type || 9 === n.which)) for (var i = [].slice.call(document.querySelectorAll(G.DATA_TOGGLE)), r = 0, s = i.length; r < s; r++) { var a = e._getParentFromElement(i[r]), o = t(i[r]).data("bs.dropdown"), l = { relatedTarget: i[r] }; if (n && "click" === n.type && (l.clickEvent = n), o) { var u = o._menu; if (t(a).hasClass(W.SHOW) && !(n && ("click" === n.type && /input|textarea/i.test(n.target.tagName) || "keyup" === n.type && 9 === n.which) && t.contains(a, n.target))) { var c = t.Event(V.HIDE, l); t(a).trigger(c), c.isDefaultPrevented() || ("ontouchstart" in document.documentElement && t(document.body).children().off("mouseover", null, t.noop), i[r].setAttribute("aria-expanded", "false"), o._popper && o._popper.destroy(), t(u).removeClass(W.SHOW), t(a).removeClass(W.SHOW).trigger(t.Event(V.HIDDEN, l))) } } } }, e._getParentFromElement = function (e) { var t, n = c.getSelectorFromElement(e); return n && (t = document.querySelector(n)), t || e.parentNode }, e._dataApiKeydownHandler = function (n) { if ((/input|textarea/i.test(n.target.tagName) ? !(32 === n.which || 27 !== n.which && (40 !== n.which && 38 !== n.which || t(n.target).closest(G.MENU).length)) : q.test(n.which)) && (n.preventDefault(), n.stopPropagation(), !this.disabled && !t(this).hasClass(W.DISABLED))) { var i = e._getParentFromElement(this), r = t(i).hasClass(W.SHOW); if (r || 27 !== n.which) if (r && (!r || 27 !== n.which && 32 !== n.which)) { var s = [].slice.call(i.querySelectorAll(G.VISIBLE_ITEMS)).filter(function (e) { return t(e).is(":visible") }); if (0 !== s.length) { var a = s.indexOf(n.target); 38 === n.which && a > 0 && a--, 40 === n.which && a < s.length - 1 && a++, a < 0 && (a = 0), s[a].focus() } } else { if (27 === n.which) { var o = i.querySelector(G.DATA_TOGGLE); t(o).trigger("focus") } t(this).trigger("click") } } }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }, { key: "Default", get: function () { return K } }, { key: "DefaultType", get: function () { return X } }]), e }(); t(document).on(V.KEYDOWN_DATA_API, G.DATA_TOGGLE, Y._dataApiKeydownHandler).on(V.KEYDOWN_DATA_API, G.MENU, Y._dataApiKeydownHandler).on(V.CLICK_DATA_API + " " + V.KEYUP_DATA_API, Y._clearMenus).on(V.CLICK_DATA_API, G.DATA_TOGGLE, function (e) { e.preventDefault(), e.stopPropagation(), Y._jQueryInterface.call(t(this), "toggle") }).on(V.CLICK_DATA_API, G.FORM_CHILD, function (e) { e.stopPropagation() }), t.fn[F] = Y._jQueryInterface, t.fn[F].Constructor = Y, t.fn[F].noConflict = function () { return t.fn[F] = H, Y._jQueryInterface }; var $ = t.fn.modal, Q = { backdrop: !0, keyboard: !0, focus: !0, show: !0 }, J = { backdrop: "(boolean|string)", keyboard: "boolean", focus: "boolean", show: "boolean" }, Z = { HIDE: "hide.bs.modal", HIDE_PREVENTED: "hidePrevented.bs.modal", HIDDEN: "hidden.bs.modal", SHOW: "show.bs.modal", SHOWN: "shown.bs.modal", FOCUSIN: "focusin.bs.modal", RESIZE: "resize.bs.modal", CLICK_DISMISS: "click.dismiss.bs.modal", KEYDOWN_DISMISS: "keydown.dismiss.bs.modal", MOUSEUP_DISMISS: "mouseup.dismiss.bs.modal", MOUSEDOWN_DISMISS: "mousedown.dismiss.bs.modal", CLICK_DATA_API: "click.bs.modal.data-api" }, ee = { SCROLLABLE: "modal-dialog-scrollable", SCROLLBAR_MEASURER: "modal-scrollbar-measure", BACKDROP: "modal-backdrop", OPEN: "modal-open", FADE: "fade", SHOW: "show", STATIC: "modal-static" }, te = { DIALOG: ".modal-dialog", MODAL_BODY: ".modal-body", DATA_TOGGLE: '[data-toggle="modal"]', DATA_DISMISS: '[data-dismiss="modal"]', FIXED_CONTENT: ".fixed-top, .fixed-bottom, .is-fixed, .sticky-top", STICKY_CONTENT: ".sticky-top" }, ne = function () { function e(e, t) { this._config = this._getConfig(t), this._element = e, this._dialog = e.querySelector(te.DIALOG), this._backdrop = null, this._isShown = !1, this._isBodyOverflowing = !1, this._ignoreBackdropClick = !1, this._isTransitioning = !1, this._scrollbarWidth = 0 } var n = e.prototype; return n.toggle = function (e) { return this._isShown ? this.hide() : this.show(e) }, n.show = function (e) { var n = this; if (!this._isShown && !this._isTransitioning) { t(this._element).hasClass(ee.FADE) && (this._isTransitioning = !0); var i = t.Event(Z.SHOW, { relatedTarget: e }); t(this._element).trigger(i), this._isShown || i.isDefaultPrevented() || (this._isShown = !0, this._checkScrollbar(), this._setScrollbar(), this._adjustDialog(), this._setEscapeEvent(), this._setResizeEvent(), t(this._element).on(Z.CLICK_DISMISS, te.DATA_DISMISS, function (e) { return n.hide(e) }), t(this._dialog).on(Z.MOUSEDOWN_DISMISS, function () { t(n._element).one(Z.MOUSEUP_DISMISS, function (e) { t(e.target).is(n._element) && (n._ignoreBackdropClick = !0) }) }), this._showBackdrop(function () { return n._showElement(e) })) } }, n.hide = function (e) { var n = this; if (e && e.preventDefault(), this._isShown && !this._isTransitioning) { var i = t.Event(Z.HIDE); if (t(this._element).trigger(i), this._isShown && !i.isDefaultPrevented()) { this._isShown = !1; var r = t(this._element).hasClass(ee.FADE); if (r && (this._isTransitioning = !0), this._setEscapeEvent(), this._setResizeEvent(), t(document).off(Z.FOCUSIN), t(this._element).removeClass(ee.SHOW), t(this._element).off(Z.CLICK_DISMISS), t(this._dialog).off(Z.MOUSEDOWN_DISMISS), r) { var s = c.getTransitionDurationFromElement(this._element); t(this._element).one(c.TRANSITION_END, function (e) { return n._hideModal(e) }).emulateTransitionEnd(s) } else this._hideModal() } } }, n.dispose = function () { [window, this._element, this._dialog].forEach(function (e) { return t(e).off(".bs.modal") }), t(document).off(Z.FOCUSIN), t.removeData(this._element, "bs.modal"), this._config = null, this._element = null, this._dialog = null, this._backdrop = null, this._isShown = null, this._isBodyOverflowing = null, this._ignoreBackdropClick = null, this._isTransitioning = null, this._scrollbarWidth = null }, n.handleUpdate = function () { this._adjustDialog() }, n._getConfig = function (e) { return e = o({}, Q, {}, e), c.typeCheckConfig("modal", e, J), e }, n._triggerBackdropTransition = function () { var e = this; if ("static" === this._config.backdrop) { var n = t.Event(Z.HIDE_PREVENTED); if (t(this._element).trigger(n), n.defaultPrevented) return; this._element.classList.add(ee.STATIC); var i = c.getTransitionDurationFromElement(this._element); t(this._element).one(c.TRANSITION_END, function () { e._element.classList.remove(ee.STATIC) }).emulateTransitionEnd(i), this._element.focus() } else this.hide() }, n._showElement = function (e) { var n = this, i = t(this._element).hasClass(ee.FADE), r = this._dialog ? this._dialog.querySelector(te.MODAL_BODY) : null; this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE || document.body.appendChild(this._element), this._element.style.display = "block", this._element.removeAttribute("aria-hidden"), this._element.setAttribute("aria-modal", !0), t(this._dialog).hasClass(ee.SCROLLABLE) && r ? r.scrollTop = 0 : this._element.scrollTop = 0, i && c.reflow(this._element), t(this._element).addClass(ee.SHOW), this._config.focus && this._enforceFocus(); var s = t.Event(Z.SHOWN, { relatedTarget: e }), a = function () { n._config.focus && n._element.focus(), n._isTransitioning = !1, t(n._element).trigger(s) }; if (i) { var o = c.getTransitionDurationFromElement(this._dialog); t(this._dialog).one(c.TRANSITION_END, a).emulateTransitionEnd(o) } else a() }, n._enforceFocus = function () { var e = this; t(document).off(Z.FOCUSIN).on(Z.FOCUSIN, function (n) { document !== n.target && e._element !== n.target && 0 === t(e._element).has(n.target).length && e._element.focus() }) }, n._setEscapeEvent = function () { var e = this; this._isShown && this._config.keyboard ? t(this._element).on(Z.KEYDOWN_DISMISS, function (t) { 27 === t.which && e._triggerBackdropTransition() }) : this._isShown || t(this._element).off(Z.KEYDOWN_DISMISS) }, n._setResizeEvent = function () { var e = this; this._isShown ? t(window).on(Z.RESIZE, function (t) { return e.handleUpdate(t) }) : t(window).off(Z.RESIZE) }, n._hideModal = function () { var e = this; this._element.style.display = "none", this._element.setAttribute("aria-hidden", !0), this._element.removeAttribute("aria-modal"), this._isTransitioning = !1, this._showBackdrop(function () { t(document.body).removeClass(ee.OPEN), e._resetAdjustments(), e._resetScrollbar(), t(e._element).trigger(Z.HIDDEN) }) }, n._removeBackdrop = function () { this._backdrop && (t(this._backdrop).remove(), this._backdrop = null) }, n._showBackdrop = function (e) { var n = this, i = t(this._element).hasClass(ee.FADE) ? ee.FADE : ""; if (this._isShown && this._config.backdrop) { if (this._backdrop = document.createElement("div"), this._backdrop.className = ee.BACKDROP, i && this._backdrop.classList.add(i), t(this._backdrop).appendTo(document.body), t(this._element).on(Z.CLICK_DISMISS, function (e) { n._ignoreBackdropClick ? n._ignoreBackdropClick = !1 : e.target === e.currentTarget && n._triggerBackdropTransition() }), i && c.reflow(this._backdrop), t(this._backdrop).addClass(ee.SHOW), !e) return; if (!i) return void e(); var r = c.getTransitionDurationFromElement(this._backdrop); t(this._backdrop).one(c.TRANSITION_END, e).emulateTransitionEnd(r) } else if (!this._isShown && this._backdrop) { t(this._backdrop).removeClass(ee.SHOW); var s = function () { n._removeBackdrop(), e && e() }; if (t(this._element).hasClass(ee.FADE)) { var a = c.getTransitionDurationFromElement(this._backdrop); t(this._backdrop).one(c.TRANSITION_END, s).emulateTransitionEnd(a) } else s() } else e && e() }, n._adjustDialog = function () { var e = this._element.scrollHeight > document.documentElement.clientHeight; !this._isBodyOverflowing && e && (this._element.style.paddingLeft = this._scrollbarWidth + "px"), this._isBodyOverflowing && !e && (this._element.style.paddingRight = this._scrollbarWidth + "px") }, n._resetAdjustments = function () { this._element.style.paddingLeft = "", this._element.style.paddingRight = "" }, n._checkScrollbar = function () { var e = document.body.getBoundingClientRect(); this._isBodyOverflowing = e.left + e.right < window.innerWidth, this._scrollbarWidth = this._getScrollbarWidth() }, n._setScrollbar = function () { var e = this; if (this._isBodyOverflowing) { var n = [].slice.call(document.querySelectorAll(te.FIXED_CONTENT)), i = [].slice.call(document.querySelectorAll(te.STICKY_CONTENT)); t(n).each(function (n, i) { var r = i.style.paddingRight, s = t(i).css("padding-right"); t(i).data("padding-right", r).css("padding-right", parseFloat(s) + e._scrollbarWidth + "px") }), t(i).each(function (n, i) { var r = i.style.marginRight, s = t(i).css("margin-right"); t(i).data("margin-right", r).css("margin-right", parseFloat(s) - e._scrollbarWidth + "px") }); var r = document.body.style.paddingRight, s = t(document.body).css("padding-right"); t(document.body).data("padding-right", r).css("padding-right", parseFloat(s) + this._scrollbarWidth + "px") } t(document.body).addClass(ee.OPEN) }, n._resetScrollbar = function () { var e = [].slice.call(document.querySelectorAll(te.FIXED_CONTENT)); t(e).each(function (e, n) { var i = t(n).data("padding-right"); t(n).removeData("padding-right"), n.style.paddingRight = i || "" }); var n = [].slice.call(document.querySelectorAll("" + te.STICKY_CONTENT)); t(n).each(function (e, n) { var i = t(n).data("margin-right"); void 0 !== i && t(n).css("margin-right", i).removeData("margin-right") }); var i = t(document.body).data("padding-right"); t(document.body).removeData("padding-right"), document.body.style.paddingRight = i || "" }, n._getScrollbarWidth = function () { var e = document.createElement("div"); e.className = ee.SCROLLBAR_MEASURER, document.body.appendChild(e); var t = e.getBoundingClientRect().width - e.clientWidth; return document.body.removeChild(e), t }, e._jQueryInterface = function (n, i) { return this.each(function () { var r = t(this).data("bs.modal"), s = o({}, Q, {}, t(this).data(), {}, "object" == typeof n && n ? n : {}); if (r || (r = new e(this, s), t(this).data("bs.modal", r)), "string" == typeof n) { if (void 0 === r[n]) throw new TypeError('No method named "' + n + '"'); r[n](i) } else s.show && r.show(i) }) }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }, { key: "Default", get: function () { return Q } }]), e }(); t(document).on(Z.CLICK_DATA_API, te.DATA_TOGGLE, function (e) { var n, i = this, r = c.getSelectorFromElement(this); r && (n = document.querySelector(r)); var s = t(n).data("bs.modal") ? "toggle" : o({}, t(n).data(), {}, t(this).data()); "A" !== this.tagName && "AREA" !== this.tagName || e.preventDefault(); var a = t(n).one(Z.SHOW, function (e) { e.isDefaultPrevented() || a.one(Z.HIDDEN, function () { t(i).is(":visible") && i.focus() }) }); ne._jQueryInterface.call(t(n), s, this) }), t.fn.modal = ne._jQueryInterface, t.fn.modal.Constructor = ne, t.fn.modal.noConflict = function () { return t.fn.modal = $, ne._jQueryInterface }; var ie = ["background", "cite", "href", "itemtype", "longdesc", "poster", "src", "xlink:href"], re = { "*": ["class", "dir", "id", "lang", "role", /^aria-[\w-]*$/i], a: ["target", "href", "title", "rel"], area: [], b: [], br: [], col: [], code: [], div: [], em: [], hr: [], h1: [], h2: [], h3: [], h4: [], h5: [], h6: [], i: [], img: ["src", "alt", "title", "width", "height"], li: [], ol: [], p: [], pre: [], s: [], small: [], span: [], sub: [], sup: [], strong: [], u: [], ul: [] }, se = /^(?:(?:https?|mailto|ftp|tel|file):|[^&:\/?#]*(?:[\/?#]|$))/gi, ae = /^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i; function oe(e, t, n) { if (0 === e.length) return e; if (n && "function" == typeof n) return n(e); for (var i = new window.DOMParser, r = i.parseFromString(e, "text/html"), s = Object.keys(t), a = [].slice.call(r.body.querySelectorAll("*")), o = function (e, n) { var i = a[e], r = i.nodeName.toLowerCase(); if (-1 === s.indexOf(i.nodeName.toLowerCase())) return i.parentNode.removeChild(i), "continue"; var o = [].slice.call(i.attributes), l = [].concat(t["*"] || [], t[r] || []); o.forEach(function (e) { (function (e, t) { var n = e.nodeName.toLowerCase(); if (-1 !== t.indexOf(n)) return -1 === ie.indexOf(n) || Boolean(e.nodeValue.match(se) || e.nodeValue.match(ae)); for (var i = t.filter(function (e) { return e instanceof RegExp }), r = 0, s = i.length; r < s; r++)if (n.match(i[r])) return !0; return !1 })(e, l) || i.removeAttribute(e.nodeName) }) }, l = 0, u = a.length; l < u; l++)o(l); return r.body.innerHTML } var le = "tooltip", ue = t.fn.tooltip, ce = new RegExp("(^|\\s)bs-tooltip\\S+", "g"), he = ["sanitize", "whiteList", "sanitizeFn"], de = { animation: "boolean", template: "string", title: "(string|element|function)", trigger: "string", delay: "(number|object)", html: "boolean", selector: "(string|boolean)", placement: "(string|function)", offset: "(number|string|function)", container: "(string|element|boolean)", fallbackPlacement: "(string|array)", boundary: "(string|element)", sanitize: "boolean", sanitizeFn: "(null|function)", whiteList: "object", popperConfig: "(null|object)" }, fe = { AUTO: "auto", TOP: "top", RIGHT: "right", BOTTOM: "bottom", LEFT: "left" }, pe = { animation: !0, template: '<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>', trigger: "hover focus", title: "", delay: 0, html: !1, selector: !1, placement: "top", offset: 0, container: !1, fallbackPlacement: "flip", boundary: "scrollParent", sanitize: !0, sanitizeFn: null, whiteList: re, popperConfig: null }, me = { SHOW: "show", OUT: "out" }, ge = { HIDE: "hide.bs.tooltip", HIDDEN: "hidden.bs.tooltip", SHOW: "show.bs.tooltip", SHOWN: "shown.bs.tooltip", INSERTED: "inserted.bs.tooltip", CLICK: "click.bs.tooltip", FOCUSIN: "focusin.bs.tooltip", FOCUSOUT: "focusout.bs.tooltip", MOUSEENTER: "mouseenter.bs.tooltip", MOUSELEAVE: "mouseleave.bs.tooltip" }, ve = { FADE: "fade", SHOW: "show" }, ye = { TOOLTIP: ".tooltip", TOOLTIP_INNER: ".tooltip-inner", ARROW: ".arrow" }, _e = { HOVER: "hover", FOCUS: "focus", CLICK: "click", MANUAL: "manual" }, be = function () { function e(e, t) { if (void 0 === n) throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)"); this._isEnabled = !0, this._timeout = 0, this._hoverState = "", this._activeTrigger = {}, this._popper = null, this.element = e, this.config = this._getConfig(t), this.tip = null, this._setListeners() } var i = e.prototype; return i.enable = function () { this._isEnabled = !0 }, i.disable = function () { this._isEnabled = !1 }, i.toggleEnabled = function () { this._isEnabled = !this._isEnabled }, i.toggle = function (e) { if (this._isEnabled) if (e) { var n = this.constructor.DATA_KEY, i = t(e.currentTarget).data(n); i || (i = new this.constructor(e.currentTarget, this._getDelegateConfig()), t(e.currentTarget).data(n, i)), i._activeTrigger.click = !i._activeTrigger.click, i._isWithActiveTrigger() ? i._enter(null, i) : i._leave(null, i) } else { if (t(this.getTipElement()).hasClass(ve.SHOW)) return void this._leave(null, this); this._enter(null, this) } }, i.dispose = function () { clearTimeout(this._timeout), t.removeData(this.element, this.constructor.DATA_KEY), t(this.element).off(this.constructor.EVENT_KEY), t(this.element).closest(".modal").off("hide.bs.modal", this._hideModalHandler), this.tip && t(this.tip).remove(), this._isEnabled = null, this._timeout = null, this._hoverState = null, this._activeTrigger = null, this._popper && this._popper.destroy(), this._popper = null, this.element = null, this.config = null, this.tip = null }, i.show = function () { var e = this; if ("none" === t(this.element).css("display")) throw new Error("Please use show on visible elements"); var i = t.Event(this.constructor.Event.SHOW); if (this.isWithContent() && this._isEnabled) { t(this.element).trigger(i); var r = c.findShadowRoot(this.element), s = t.contains(null !== r ? r : this.element.ownerDocument.documentElement, this.element); if (i.isDefaultPrevented() || !s) return; var a = this.getTipElement(), o = c.getUID(this.constructor.NAME); a.setAttribute("id", o), this.element.setAttribute("aria-describedby", o), this.setContent(), this.config.animation && t(a).addClass(ve.FADE); var l = "function" == typeof this.config.placement ? this.config.placement.call(this, a, this.element) : this.config.placement, u = this._getAttachment(l); this.addAttachmentClass(u); var h = this._getContainer(); t(a).data(this.constructor.DATA_KEY, this), t.contains(this.element.ownerDocument.documentElement, this.tip) || t(a).appendTo(h), t(this.element).trigger(this.constructor.Event.INSERTED), this._popper = new n(this.element, a, this._getPopperConfig(u)), t(a).addClass(ve.SHOW), "ontouchstart" in document.documentElement && t(document.body).children().on("mouseover", null, t.noop); var d = function () { e.config.animation && e._fixTransition(); var n = e._hoverState; e._hoverState = null, t(e.element).trigger(e.constructor.Event.SHOWN), n === me.OUT && e._leave(null, e) }; if (t(this.tip).hasClass(ve.FADE)) { var f = c.getTransitionDurationFromElement(this.tip); t(this.tip).one(c.TRANSITION_END, d).emulateTransitionEnd(f) } else d() } }, i.hide = function (e) { var n = this, i = this.getTipElement(), r = t.Event(this.constructor.Event.HIDE), s = function () { n._hoverState !== me.SHOW && i.parentNode && i.parentNode.removeChild(i), n._cleanTipClass(), n.element.removeAttribute("aria-describedby"), t(n.element).trigger(n.constructor.Event.HIDDEN), null !== n._popper && n._popper.destroy(), e && e() }; if (t(this.element).trigger(r), !r.isDefaultPrevented()) { if (t(i).removeClass(ve.SHOW), "ontouchstart" in document.documentElement && t(document.body).children().off("mouseover", null, t.noop), this._activeTrigger[_e.CLICK] = !1, this._activeTrigger[_e.FOCUS] = !1, this._activeTrigger[_e.HOVER] = !1, t(this.tip).hasClass(ve.FADE)) { var a = c.getTransitionDurationFromElement(i); t(i).one(c.TRANSITION_END, s).emulateTransitionEnd(a) } else s(); this._hoverState = "" } }, i.update = function () { null !== this._popper && this._popper.scheduleUpdate() }, i.isWithContent = function () { return Boolean(this.getTitle()) }, i.addAttachmentClass = function (e) { t(this.getTipElement()).addClass("bs-tooltip-" + e) }, i.getTipElement = function () { return this.tip = this.tip || t(this.config.template)[0], this.tip }, i.setContent = function () { var e = this.getTipElement(); this.setElementContent(t(e.querySelectorAll(ye.TOOLTIP_INNER)), this.getTitle()), t(e).removeClass(ve.FADE + " " + ve.SHOW) }, i.setElementContent = function (e, n) { "object" != typeof n || !n.nodeType && !n.jquery ? this.config.html ? (this.config.sanitize && (n = oe(n, this.config.whiteList, this.config.sanitizeFn)), e.html(n)) : e.text(n) : this.config.html ? t(n).parent().is(e) || e.empty().append(n) : e.text(t(n).text()) }, i.getTitle = function () { var e = this.element.getAttribute("data-original-title"); return e || (e = "function" == typeof this.config.title ? this.config.title.call(this.element) : this.config.title), e }, i._getPopperConfig = function (e) { var t = this, n = { placement: e, modifiers: { offset: this._getOffset(), flip: { behavior: this.config.fallbackPlacement }, arrow: { element: ye.ARROW }, preventOverflow: { boundariesElement: this.config.boundary } }, onCreate: function (e) { e.originalPlacement !== e.placement && t._handlePopperPlacementChange(e) }, onUpdate: function (e) { return t._handlePopperPlacementChange(e) } }; return o({}, n, {}, this.config.popperConfig) }, i._getOffset = function () { var e = this, t = {}; return "function" == typeof this.config.offset ? t.fn = function (t) { return t.offsets = o({}, t.offsets, {}, e.config.offset(t.offsets, e.element) || {}), t } : t.offset = this.config.offset, t }, i._getContainer = function () { return !1 === this.config.container ? document.body : c.isElement(this.config.container) ? t(this.config.container) : t(document).find(this.config.container) }, i._getAttachment = function (e) { return fe[e.toUpperCase()] }, i._setListeners = function () { var e = this, n = this.config.trigger.split(" "); n.forEach(function (n) { if ("click" === n) t(e.element).on(e.constructor.Event.CLICK, e.config.selector, function (t) { return e.toggle(t) }); else if (n !== _e.MANUAL) { var i = n === _e.HOVER ? e.constructor.Event.MOUSEENTER : e.constructor.Event.FOCUSIN, r = n === _e.HOVER ? e.constructor.Event.MOUSELEAVE : e.constructor.Event.FOCUSOUT; t(e.element).on(i, e.config.selector, function (t) { return e._enter(t) }).on(r, e.config.selector, function (t) { return e._leave(t) }) } }), this._hideModalHandler = function () { e.element && e.hide() }, t(this.element).closest(".modal").on("hide.bs.modal", this._hideModalHandler), this.config.selector ? this.config = o({}, this.config, { trigger: "manual", selector: "" }) : this._fixTitle() }, i._fixTitle = function () { var e = typeof this.element.getAttribute("data-original-title"); (this.element.getAttribute("title") || "string" !== e) && (this.element.setAttribute("data-original-title", this.element.getAttribute("title") || ""), this.element.setAttribute("title", "")) }, i._enter = function (e, n) { var i = this.constructor.DATA_KEY; (n = n || t(e.currentTarget).data(i)) || (n = new this.constructor(e.currentTarget, this._getDelegateConfig()), t(e.currentTarget).data(i, n)), e && (n._activeTrigger["focusin" === e.type ? _e.FOCUS : _e.HOVER] = !0), t(n.getTipElement()).hasClass(ve.SHOW) || n._hoverState === me.SHOW ? n._hoverState = me.SHOW : (clearTimeout(n._timeout), n._hoverState = me.SHOW, n.config.delay && n.config.delay.show ? n._timeout = setTimeout(function () { n._hoverState === me.SHOW && n.show() }, n.config.delay.show) : n.show()) }, i._leave = function (e, n) { var i = this.constructor.DATA_KEY; (n = n || t(e.currentTarget).data(i)) || (n = new this.constructor(e.currentTarget, this._getDelegateConfig()), t(e.currentTarget).data(i, n)), e && (n._activeTrigger["focusout" === e.type ? _e.FOCUS : _e.HOVER] = !1), n._isWithActiveTrigger() || (clearTimeout(n._timeout), n._hoverState = me.OUT, n.config.delay && n.config.delay.hide ? n._timeout = setTimeout(function () { n._hoverState === me.OUT && n.hide() }, n.config.delay.hide) : n.hide()) }, i._isWithActiveTrigger = function () { for (var e in this._activeTrigger) if (this._activeTrigger[e]) return !0; return !1 }, i._getConfig = function (e) { var n = t(this.element).data(); return Object.keys(n).forEach(function (e) { -1 !== he.indexOf(e) && delete n[e] }), "number" == typeof (e = o({}, this.constructor.Default, {}, n, {}, "object" == typeof e && e ? e : {})).delay && (e.delay = { show: e.delay, hide: e.delay }), "number" == typeof e.title && (e.title = e.title.toString()), "number" == typeof e.content && (e.content = e.content.toString()), c.typeCheckConfig(le, e, this.constructor.DefaultType), e.sanitize && (e.template = oe(e.template, e.whiteList, e.sanitizeFn)), e }, i._getDelegateConfig = function () { var e = {}; if (this.config) for (var t in this.config) this.constructor.Default[t] !== this.config[t] && (e[t] = this.config[t]); return e }, i._cleanTipClass = function () { var e = t(this.getTipElement()), n = e.attr("class").match(ce); null !== n && n.length && e.removeClass(n.join("")) }, i._handlePopperPlacementChange = function (e) { var t = e.instance; this.tip = t.popper, this._cleanTipClass(), this.addAttachmentClass(this._getAttachment(e.placement)) }, i._fixTransition = function () { var e = this.getTipElement(), n = this.config.animation; null === e.getAttribute("x-placement") && (t(e).removeClass(ve.FADE), this.config.animation = !1, this.hide(), this.show(), this.config.animation = n) }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this).data("bs.tooltip"), r = "object" == typeof n && n; if ((i || !/dispose|hide/.test(n)) && (i || (i = new e(this, r), t(this).data("bs.tooltip", i)), "string" == typeof n)) { if (void 0 === i[n]) throw new TypeError('No method named "' + n + '"'); i[n]() } }) }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }, { key: "Default", get: function () { return pe } }, { key: "NAME", get: function () { return le } }, { key: "DATA_KEY", get: function () { return "bs.tooltip" } }, { key: "Event", get: function () { return ge } }, { key: "EVENT_KEY", get: function () { return ".bs.tooltip" } }, { key: "DefaultType", get: function () { return de } }]), e }(); t.fn.tooltip = be._jQueryInterface, t.fn.tooltip.Constructor = be, t.fn.tooltip.noConflict = function () { return t.fn.tooltip = ue, be._jQueryInterface }; var Te = "popover", Se = t.fn.popover, Ee = new RegExp("(^|\\s)bs-popover\\S+", "g"), Ce = o({}, be.Default, { placement: "right", trigger: "click", content: "", template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>' }), we = o({}, be.DefaultType, { content: "(string|element|function)" }), ke = { FADE: "fade", SHOW: "show" }, Ae = { TITLE: ".popover-header", CONTENT: ".popover-body" }, xe = { HIDE: "hide.bs.popover", HIDDEN: "hidden.bs.popover", SHOW: "show.bs.popover", SHOWN: "shown.bs.popover", INSERTED: "inserted.bs.popover", CLICK: "click.bs.popover", FOCUSIN: "focusin.bs.popover", FOCUSOUT: "focusout.bs.popover", MOUSEENTER: "mouseenter.bs.popover", MOUSELEAVE: "mouseleave.bs.popover" }, Ie = function (e) { var n, i; function s() { return e.apply(this, arguments) || this } i = e, (n = s).prototype = Object.create(i.prototype), n.prototype.constructor = n, n.__proto__ = i; var a = s.prototype; return a.isWithContent = function () { return this.getTitle() || this._getContent() }, a.addAttachmentClass = function (e) { t(this.getTipElement()).addClass("bs-popover-" + e) }, a.getTipElement = function () { return this.tip = this.tip || t(this.config.template)[0], this.tip }, a.setContent = function () { var e = t(this.getTipElement()); this.setElementContent(e.find(Ae.TITLE), this.getTitle()); var n = this._getContent(); "function" == typeof n && (n = n.call(this.element)), this.setElementContent(e.find(Ae.CONTENT), n), e.removeClass(ke.FADE + " " + ke.SHOW) }, a._getContent = function () { return this.element.getAttribute("data-content") || this.config.content }, a._cleanTipClass = function () { var e = t(this.getTipElement()), n = e.attr("class").match(Ee); null !== n && n.length > 0 && e.removeClass(n.join("")) }, s._jQueryInterface = function (e) { return this.each(function () { var n = t(this).data("bs.popover"), i = "object" == typeof e ? e : null; if ((n || !/dispose|hide/.test(e)) && (n || (n = new s(this, i), t(this).data("bs.popover", n)), "string" == typeof e)) { if (void 0 === n[e]) throw new TypeError('No method named "' + e + '"'); n[e]() } }) }, r(s, null, [{ key: "VERSION", get: function () { return "4.4.1" } }, { key: "Default", get: function () { return Ce } }, { key: "NAME", get: function () { return Te } }, { key: "DATA_KEY", get: function () { return "bs.popover" } }, { key: "Event", get: function () { return xe } }, { key: "EVENT_KEY", get: function () { return ".bs.popover" } }, { key: "DefaultType", get: function () { return we } }]), s }(be); t.fn.popover = Ie._jQueryInterface, t.fn.popover.Constructor = Ie, t.fn.popover.noConflict = function () { return t.fn.popover = Se, Ie._jQueryInterface }; var Oe = "scrollspy", De = t.fn[Oe], Le = { offset: 10, method: "auto", target: "" }, Pe = { offset: "number", method: "string", target: "(string|element)" }, Ne = { ACTIVATE: "activate.bs.scrollspy", SCROLL: "scroll.bs.scrollspy", LOAD_DATA_API: "load.bs.scrollspy.data-api" }, Re = { DROPDOWN_ITEM: "dropdown-item", DROPDOWN_MENU: "dropdown-menu", ACTIVE: "active" }, Me = { DATA_SPY: '[data-spy="scroll"]', ACTIVE: ".active", NAV_LIST_GROUP: ".nav, .list-group", NAV_LINKS: ".nav-link", NAV_ITEMS: ".nav-item", LIST_ITEMS: ".list-group-item", DROPDOWN: ".dropdown", DROPDOWN_ITEMS: ".dropdown-item", DROPDOWN_TOGGLE: ".dropdown-toggle" }, Ue = { OFFSET: "offset", POSITION: "position" }, je = function () { function e(e, n) { var i = this; this._element = e, this._scrollElement = "BODY" === e.tagName ? window : e, this._config = this._getConfig(n), this._selector = this._config.target + " " + Me.NAV_LINKS + "," + this._config.target + " " + Me.LIST_ITEMS + "," + this._config.target + " " + Me.DROPDOWN_ITEMS, this._offsets = [], this._targets = [], this._activeTarget = null, this._scrollHeight = 0, t(this._scrollElement).on(Ne.SCROLL, function (e) { return i._process(e) }), this.refresh(), this._process() } var n = e.prototype; return n.refresh = function () { var e = this, n = this._scrollElement === this._scrollElement.window ? Ue.OFFSET : Ue.POSITION, i = "auto" === this._config.method ? n : this._config.method, r = i === Ue.POSITION ? this._getScrollTop() : 0; this._offsets = [], this._targets = [], this._scrollHeight = this._getScrollHeight(); var s = [].slice.call(document.querySelectorAll(this._selector)); s.map(function (e) { var n, s = c.getSelectorFromElement(e); if (s && (n = document.querySelector(s)), n) { var a = n.getBoundingClientRect(); if (a.width || a.height) return [t(n)[i]().top + r, s] } return null }).filter(function (e) { return e }).sort(function (e, t) { return e[0] - t[0] }).forEach(function (t) { e._offsets.push(t[0]), e._targets.push(t[1]) }) }, n.dispose = function () { t.removeData(this._element, "bs.scrollspy"), t(this._scrollElement).off(".bs.scrollspy"), this._element = null, this._scrollElement = null, this._config = null, this._selector = null, this._offsets = null, this._targets = null, this._activeTarget = null, this._scrollHeight = null }, n._getConfig = function (e) { if ("string" != typeof (e = o({}, Le, {}, "object" == typeof e && e ? e : {})).target) { var n = t(e.target).attr("id"); n || (n = c.getUID(Oe), t(e.target).attr("id", n)), e.target = "#" + n } return c.typeCheckConfig(Oe, e, Pe), e }, n._getScrollTop = function () { return this._scrollElement === window ? this._scrollElement.pageYOffset : this._scrollElement.scrollTop }, n._getScrollHeight = function () { return this._scrollElement.scrollHeight || Math.max(document.body.scrollHeight, document.documentElement.scrollHeight) }, n._getOffsetHeight = function () { return this._scrollElement === window ? window.innerHeight : this._scrollElement.getBoundingClientRect().height }, n._process = function () { var e = this._getScrollTop() + this._config.offset, t = this._getScrollHeight(), n = this._config.offset + t - this._getOffsetHeight(); if (this._scrollHeight !== t && this.refresh(), e >= n) { var i = this._targets[this._targets.length - 1]; this._activeTarget !== i && this._activate(i) } else { if (this._activeTarget && e < this._offsets[0] && this._offsets[0] > 0) return this._activeTarget = null, void this._clear(); for (var r = this._offsets.length, s = r; s--;) { var a = this._activeTarget !== this._targets[s] && e >= this._offsets[s] && (void 0 === this._offsets[s + 1] || e < this._offsets[s + 1]); a && this._activate(this._targets[s]) } } }, n._activate = function (e) { this._activeTarget = e, this._clear(); var n = this._selector.split(",").map(function (t) { return t + '[data-target="' + e + '"],' + t + '[href="' + e + '"]' }), i = t([].slice.call(document.querySelectorAll(n.join(",")))); i.hasClass(Re.DROPDOWN_ITEM) ? (i.closest(Me.DROPDOWN).find(Me.DROPDOWN_TOGGLE).addClass(Re.ACTIVE), i.addClass(Re.ACTIVE)) : (i.addClass(Re.ACTIVE), i.parents(Me.NAV_LIST_GROUP).prev(Me.NAV_LINKS + ", " + Me.LIST_ITEMS).addClass(Re.ACTIVE), i.parents(Me.NAV_LIST_GROUP).prev(Me.NAV_ITEMS).children(Me.NAV_LINKS).addClass(Re.ACTIVE)), t(this._scrollElement).trigger(Ne.ACTIVATE, { relatedTarget: e }) }, n._clear = function () { [].slice.call(document.querySelectorAll(this._selector)).filter(function (e) { return e.classList.contains(Re.ACTIVE) }).forEach(function (e) { return e.classList.remove(Re.ACTIVE) }) }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this).data("bs.scrollspy"), r = "object" == typeof n && n; if (i || (i = new e(this, r), t(this).data("bs.scrollspy", i)), "string" == typeof n) { if (void 0 === i[n]) throw new TypeError('No method named "' + n + '"'); i[n]() } }) }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }, { key: "Default", get: function () { return Le } }]), e }(); t(window).on(Ne.LOAD_DATA_API, function () { for (var e = [].slice.call(document.querySelectorAll(Me.DATA_SPY)), n = e.length, i = n; i--;) { var r = t(e[i]); je._jQueryInterface.call(r, r.data()) } }), t.fn[Oe] = je._jQueryInterface, t.fn[Oe].Constructor = je, t.fn[Oe].noConflict = function () { return t.fn[Oe] = De, je._jQueryInterface }; var Be = t.fn.tab, Fe = { HIDE: "hide.bs.tab", HIDDEN: "hidden.bs.tab", SHOW: "show.bs.tab", SHOWN: "shown.bs.tab", CLICK_DATA_API: "click.bs.tab.data-api" }, He = { DROPDOWN_MENU: "dropdown-menu", ACTIVE: "active", DISABLED: "disabled", FADE: "fade", SHOW: "show" }, qe = { DROPDOWN: ".dropdown", NAV_LIST_GROUP: ".nav, .list-group", ACTIVE: ".active", ACTIVE_UL: "> li > .active", DATA_TOGGLE: '[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]', DROPDOWN_TOGGLE: ".dropdown-toggle", DROPDOWN_ACTIVE_CHILD: "> .dropdown-menu .active" }, Ve = function () { function e(e) { this._element = e } var n = e.prototype; return n.show = function () { var e = this; if (!(this._element.parentNode && this._element.parentNode.nodeType === Node.ELEMENT_NODE && t(this._element).hasClass(He.ACTIVE) || t(this._element).hasClass(He.DISABLED))) { var n, i, r = t(this._element).closest(qe.NAV_LIST_GROUP)[0], s = c.getSelectorFromElement(this._element); if (r) { var a = "UL" === r.nodeName || "OL" === r.nodeName ? qe.ACTIVE_UL : qe.ACTIVE; i = (i = t.makeArray(t(r).find(a)))[i.length - 1] } var o = t.Event(Fe.HIDE, { relatedTarget: this._element }), l = t.Event(Fe.SHOW, { relatedTarget: i }); if (i && t(i).trigger(o), t(this._element).trigger(l), !l.isDefaultPrevented() && !o.isDefaultPrevented()) { s && (n = document.querySelector(s)), this._activate(this._element, r); var u = function () { var n = t.Event(Fe.HIDDEN, { relatedTarget: e._element }), r = t.Event(Fe.SHOWN, { relatedTarget: i }); t(i).trigger(n), t(e._element).trigger(r) }; n ? this._activate(n, n.parentNode, u) : u() } } }, n.dispose = function () { t.removeData(this._element, "bs.tab"), this._element = null }, n._activate = function (e, n, i) { var r = this, s = !n || "UL" !== n.nodeName && "OL" !== n.nodeName ? t(n).children(qe.ACTIVE) : t(n).find(qe.ACTIVE_UL), a = s[0], o = i && a && t(a).hasClass(He.FADE), l = function () { return r._transitionComplete(e, a, i) }; if (a && o) { var u = c.getTransitionDurationFromElement(a); t(a).removeClass(He.SHOW).one(c.TRANSITION_END, l).emulateTransitionEnd(u) } else l() }, n._transitionComplete = function (e, n, i) { if (n) { t(n).removeClass(He.ACTIVE); var r = t(n.parentNode).find(qe.DROPDOWN_ACTIVE_CHILD)[0]; r && t(r).removeClass(He.ACTIVE), "tab" === n.getAttribute("role") && n.setAttribute("aria-selected", !1) } if (t(e).addClass(He.ACTIVE), "tab" === e.getAttribute("role") && e.setAttribute("aria-selected", !0), c.reflow(e), e.classList.contains(He.FADE) && e.classList.add(He.SHOW), e.parentNode && t(e.parentNode).hasClass(He.DROPDOWN_MENU)) { var s = t(e).closest(qe.DROPDOWN)[0]; if (s) { var a = [].slice.call(s.querySelectorAll(qe.DROPDOWN_TOGGLE)); t(a).addClass(He.ACTIVE) } e.setAttribute("aria-expanded", !0) } i && i() }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this), r = i.data("bs.tab"); if (r || (r = new e(this), i.data("bs.tab", r)), "string" == typeof n) { if (void 0 === r[n]) throw new TypeError('No method named "' + n + '"'); r[n]() } }) }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }]), e }(); t(document).on(Fe.CLICK_DATA_API, qe.DATA_TOGGLE, function (e) { e.preventDefault(), Ve._jQueryInterface.call(t(this), "show") }), t.fn.tab = Ve._jQueryInterface, t.fn.tab.Constructor = Ve, t.fn.tab.noConflict = function () { return t.fn.tab = Be, Ve._jQueryInterface }; var We = t.fn.toast, Ge = { CLICK_DISMISS: "click.dismiss.bs.toast", HIDE: "hide.bs.toast", HIDDEN: "hidden.bs.toast", SHOW: "show.bs.toast", SHOWN: "shown.bs.toast" }, ze = { FADE: "fade", HIDE: "hide", SHOW: "show", SHOWING: "showing" }, Ke = { animation: "boolean", autohide: "boolean", delay: "number" }, Xe = { animation: !0, autohide: !0, delay: 500 }, Ye = { DATA_DISMISS: '[data-dismiss="toast"]' }, $e = function () { function e(e, t) { this._element = e, this._config = this._getConfig(t), this._timeout = null, this._setListeners() } var n = e.prototype; return n.show = function () { var e = this, n = t.Event(Ge.SHOW); if (t(this._element).trigger(n), !n.isDefaultPrevented()) { this._config.animation && this._element.classList.add(ze.FADE); var i = function () { e._element.classList.remove(ze.SHOWING), e._element.classList.add(ze.SHOW), t(e._element).trigger(Ge.SHOWN), e._config.autohide && (e._timeout = setTimeout(function () { e.hide() }, e._config.delay)) }; if (this._element.classList.remove(ze.HIDE), c.reflow(this._element), this._element.classList.add(ze.SHOWING), this._config.animation) { var r = c.getTransitionDurationFromElement(this._element); t(this._element).one(c.TRANSITION_END, i).emulateTransitionEnd(r) } else i() } }, n.hide = function () { if (this._element.classList.contains(ze.SHOW)) { var e = t.Event(Ge.HIDE); t(this._element).trigger(e), e.isDefaultPrevented() || this._close() } }, n.dispose = function () { clearTimeout(this._timeout), this._timeout = null, this._element.classList.contains(ze.SHOW) && this._element.classList.remove(ze.SHOW), t(this._element).off(Ge.CLICK_DISMISS), t.removeData(this._element, "bs.toast"), this._element = null, this._config = null }, n._getConfig = function (e) { return e = o({}, Xe, {}, t(this._element).data(), {}, "object" == typeof e && e ? e : {}), c.typeCheckConfig("toast", e, this.constructor.DefaultType), e }, n._setListeners = function () { var e = this; t(this._element).on(Ge.CLICK_DISMISS, Ye.DATA_DISMISS, function () { return e.hide() }) }, n._close = function () { var e = this, n = function () { e._element.classList.add(ze.HIDE), t(e._element).trigger(Ge.HIDDEN) }; if (this._element.classList.remove(ze.SHOW), this._config.animation) { var i = c.getTransitionDurationFromElement(this._element); t(this._element).one(c.TRANSITION_END, n).emulateTransitionEnd(i) } else n() }, e._jQueryInterface = function (n) { return this.each(function () { var i = t(this), r = i.data("bs.toast"), s = "object" == typeof n && n; if (r || (r = new e(this, s), i.data("bs.toast", r)), "string" == typeof n) { if (void 0 === r[n]) throw new TypeError('No method named "' + n + '"'); r[n](this) } }) }, r(e, null, [{ key: "VERSION", get: function () { return "4.4.1" } }, { key: "DefaultType", get: function () { return Ke } }, { key: "Default", get: function () { return Xe } }]), e }(); t.fn.toast = $e._jQueryInterface, t.fn.toast.Constructor = $e, t.fn.toast.noConflict = function () { return t.fn.toast = We, $e._jQueryInterface }, e.Alert = p, e.Button = _, e.Carousel = O, e.Collapse = B, e.Dropdown = Y, e.Modal = ne, e.Popover = Ie, e.Scrollspy = je, e.Tab = Ve, e.Toast = $e, e.Tooltip = be, e.Util = c, Object.defineProperty(e, "__esModule", { value: !0 }) }(t, n("EVdn"), n("8L3F"))
  }, Tmm6: function (e, t, n) { "use strict"; var i = n("QykG"), r = n("3G1x"), s = function () { s.prototype.init.call(this), this.captionPackets_ = [], this.ccStreams_ = [new c(0, 0), new c(0, 1), new c(1, 0), new c(1, 1)], this.reset(), this.ccStreams_.forEach(function (e) { e.on("data", this.trigger.bind(this, "data")), e.on("partialdone", this.trigger.bind(this, "partialdone")), e.on("done", this.trigger.bind(this, "done")) }, this) }; s.prototype = new i, s.prototype.push = function (e) { var t, n, i; if ("sei_rbsp" === e.nalUnitType && (t = r.parseSei(e.escapedRBSP)).payloadType === r.USER_DATA_REGISTERED_ITU_T_T35 && (n = r.parseUserData(t))) if (e.dts < this.latestDts_) this.ignoreNextEqualDts_ = !0; else { if (e.dts === this.latestDts_ && this.ignoreNextEqualDts_) return this.numSameDts_--, void (this.numSameDts_ || (this.ignoreNextEqualDts_ = !1)); i = r.parseCaptionPackets(e.pts, n), this.captionPackets_ = this.captionPackets_.concat(i), this.latestDts_ !== e.dts && (this.numSameDts_ = 0), this.numSameDts_++, this.latestDts_ = e.dts } }, s.prototype.flushCCStreams = function (e) { this.ccStreams_.forEach(function (t) { return "flush" === e ? t.flush() : t.partialFlush() }, this) }, s.prototype.flushStream = function (e) { this.captionPackets_.length ? (this.captionPackets_.forEach(function (e, t) { e.presortIndex = t }), this.captionPackets_.sort(function (e, t) { return e.pts === t.pts ? e.presortIndex - t.presortIndex : e.pts - t.pts }), this.captionPackets_.forEach(function (e) { e.type < 2 && this.dispatchCea608Packet(e) }, this), this.captionPackets_.length = 0, this.flushCCStreams(e)) : this.flushCCStreams(e) }, s.prototype.flush = function () { return this.flushStream("flush") }, s.prototype.partialFlush = function () { return this.flushStream("partialFlush") }, s.prototype.reset = function () { this.latestDts_ = null, this.ignoreNextEqualDts_ = !1, this.numSameDts_ = 0, this.activeCea608Channel_ = [null, null], this.ccStreams_.forEach(function (e) { e.reset() }) }, s.prototype.dispatchCea608Packet = function (e) { this.setsTextOrXDSActive(e) ? this.activeCea608Channel_[e.type] = null : this.setsChannel1Active(e) ? this.activeCea608Channel_[e.type] = 0 : this.setsChannel2Active(e) && (this.activeCea608Channel_[e.type] = 1), null !== this.activeCea608Channel_[e.type] && this.ccStreams_[(e.type << 1) + this.activeCea608Channel_[e.type]].push(e) }, s.prototype.setsChannel1Active = function (e) { return 4096 == (30720 & e.ccData) }, s.prototype.setsChannel2Active = function (e) { return 6144 == (30720 & e.ccData) }, s.prototype.setsTextOrXDSActive = function (e) { return 256 == (28928 & e.ccData) || 4138 == (30974 & e.ccData) || 6186 == (30974 & e.ccData) }; var a = { 42: 225, 92: 233, 94: 237, 95: 243, 96: 250, 123: 231, 124: 247, 125: 209, 126: 241, 127: 9608, 304: 174, 305: 176, 306: 189, 307: 191, 308: 8482, 309: 162, 310: 163, 311: 9834, 312: 224, 313: 160, 314: 232, 315: 226, 316: 234, 317: 238, 318: 244, 319: 251, 544: 193, 545: 201, 546: 211, 547: 218, 548: 220, 549: 252, 550: 8216, 551: 161, 552: 42, 553: 39, 554: 8212, 555: 169, 556: 8480, 557: 8226, 558: 8220, 559: 8221, 560: 192, 561: 194, 562: 199, 563: 200, 564: 202, 565: 203, 566: 235, 567: 206, 568: 207, 569: 239, 570: 212, 571: 217, 572: 249, 573: 219, 574: 171, 575: 187, 800: 195, 801: 227, 802: 205, 803: 204, 804: 236, 805: 210, 806: 242, 807: 213, 808: 245, 809: 123, 810: 125, 811: 92, 812: 94, 813: 95, 814: 124, 815: 126, 816: 196, 817: 228, 818: 214, 819: 246, 820: 223, 821: 165, 822: 164, 823: 9474, 824: 197, 825: 229, 826: 216, 827: 248, 828: 9484, 829: 9488, 830: 9492, 831: 9496 }, o = function (e) { return null === e ? "" : (e = a[e] || e, String.fromCharCode(e)) }, l = [4352, 4384, 4608, 4640, 5376, 5408, 5632, 5664, 5888, 5920, 4096, 4864, 4896, 5120, 5152], u = function () { for (var e = [], t = 15; t--;)e.push(""); return e }, c = function (e, t) { c.prototype.init.call(this), this.field_ = e || 0, this.dataChannel_ = t || 0, this.name_ = "CC" + (1 + (this.field_ << 1 | this.dataChannel_)), this.setConstants(), this.reset(), this.push = function (e) { var t, n, i, r, s; if ((t = 32639 & e.ccData) !== this.lastControlCode_) { if (4096 == (61440 & t) ? this.lastControlCode_ = t : t !== this.PADDING_ && (this.lastControlCode_ = null), i = t >>> 8, r = 255 & t, t !== this.PADDING_) if (t === this.RESUME_CAPTION_LOADING_) this.mode_ = "popOn"; else if (t === this.END_OF_CAPTION_) this.mode_ = "popOn", this.clearFormatting(e.pts), this.flushDisplayed(e.pts), n = this.displayed_, this.displayed_ = this.nonDisplayed_, this.nonDisplayed_ = n, this.startPts_ = e.pts; else if (t === this.ROLL_UP_2_ROWS_) this.rollUpRows_ = 2, this.setRollUp(e.pts); else if (t === this.ROLL_UP_3_ROWS_) this.rollUpRows_ = 3, this.setRollUp(e.pts); else if (t === this.ROLL_UP_4_ROWS_) this.rollUpRows_ = 4, this.setRollUp(e.pts); else if (t === this.CARRIAGE_RETURN_) this.clearFormatting(e.pts), this.flushDisplayed(e.pts), this.shiftRowsUp_(), this.startPts_ = e.pts; else if (t === this.BACKSPACE_) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1); else if (t === this.ERASE_DISPLAYED_MEMORY_) this.flushDisplayed(e.pts), this.displayed_ = u(); else if (t === this.ERASE_NON_DISPLAYED_MEMORY_) this.nonDisplayed_ = u(); else if (t === this.RESUME_DIRECT_CAPTIONING_) "paintOn" !== this.mode_ && (this.flushDisplayed(e.pts), this.displayed_ = u()), this.mode_ = "paintOn", this.startPts_ = e.pts; else if (this.isSpecialCharacter(i, r)) s = o((i = (3 & i) << 8) | r), this[this.mode_](e.pts, s), this.column_++; else if (this.isExtCharacter(i, r)) "popOn" === this.mode_ ? this.nonDisplayed_[this.row_] = this.nonDisplayed_[this.row_].slice(0, -1) : this.displayed_[this.row_] = this.displayed_[this.row_].slice(0, -1), s = o((i = (3 & i) << 8) | r), this[this.mode_](e.pts, s), this.column_++; else if (this.isMidRowCode(i, r)) this.clearFormatting(e.pts), this[this.mode_](e.pts, " "), this.column_++, 14 == (14 & r) && this.addFormatting(e.pts, ["i"]), 1 == (1 & r) && this.addFormatting(e.pts, ["u"]); else if (this.isOffsetControlCode(i, r)) this.column_ += 3 & r; else if (this.isPAC(i, r)) { var a = l.indexOf(7968 & t); "rollUp" === this.mode_ && (a - this.rollUpRows_ + 1 < 0 && (a = this.rollUpRows_ - 1), this.setRollUp(e.pts, a)), a !== this.row_ && (this.clearFormatting(e.pts), this.row_ = a), 1 & r && -1 === this.formatting_.indexOf("u") && this.addFormatting(e.pts, ["u"]), 16 == (16 & t) && (this.column_ = 4 * ((14 & t) >> 1)), this.isColorPAC(r) && 14 == (14 & r) && this.addFormatting(e.pts, ["i"]) } else this.isNormalChar(i) && (0 === r && (r = null), s = o(i), s += o(r), this[this.mode_](e.pts, s), this.column_ += s.length) } else this.lastControlCode_ = null } }; c.prototype = new i, c.prototype.flushDisplayed = function (e) { var t = this.displayed_.map(function (e) { try { return e.trim() } catch (e) { return console.error("Skipping malformed caption."), "" } }).join("\n").replace(/^\n+|\n+$/g, ""); t.length && this.trigger("data", { startPts: this.startPts_, endPts: e, text: t, stream: this.name_ }) }, c.prototype.reset = function () { this.mode_ = "popOn", this.topRow_ = 0, this.startPts_ = 0, this.displayed_ = u(), this.nonDisplayed_ = u(), this.lastControlCode_ = null, this.column_ = 0, this.row_ = 14, this.rollUpRows_ = 2, this.formatting_ = [] }, c.prototype.setConstants = function () { 0 === this.dataChannel_ ? (this.BASE_ = 16, this.EXT_ = 17, this.CONTROL_ = (20 | this.field_) << 8, this.OFFSET_ = 23) : 1 === this.dataChannel_ && (this.BASE_ = 24, this.EXT_ = 25, this.CONTROL_ = (28 | this.field_) << 8, this.OFFSET_ = 31), this.PADDING_ = 0, this.RESUME_CAPTION_LOADING_ = 32 | this.CONTROL_, this.END_OF_CAPTION_ = 47 | this.CONTROL_, this.ROLL_UP_2_ROWS_ = 37 | this.CONTROL_, this.ROLL_UP_3_ROWS_ = 38 | this.CONTROL_, this.ROLL_UP_4_ROWS_ = 39 | this.CONTROL_, this.CARRIAGE_RETURN_ = 45 | this.CONTROL_, this.RESUME_DIRECT_CAPTIONING_ = 41 | this.CONTROL_, this.BACKSPACE_ = 33 | this.CONTROL_, this.ERASE_DISPLAYED_MEMORY_ = 44 | this.CONTROL_, this.ERASE_NON_DISPLAYED_MEMORY_ = 46 | this.CONTROL_ }, c.prototype.isSpecialCharacter = function (e, t) { return e === this.EXT_ && t >= 48 && t <= 63 }, c.prototype.isExtCharacter = function (e, t) { return (e === this.EXT_ + 1 || e === this.EXT_ + 2) && t >= 32 && t <= 63 }, c.prototype.isMidRowCode = function (e, t) { return e === this.EXT_ && t >= 32 && t <= 47 }, c.prototype.isOffsetControlCode = function (e, t) { return e === this.OFFSET_ && t >= 33 && t <= 35 }, c.prototype.isPAC = function (e, t) { return e >= this.BASE_ && e < this.BASE_ + 8 && t >= 64 && t <= 127 }, c.prototype.isColorPAC = function (e) { return e >= 64 && e <= 79 || e >= 96 && e <= 127 }, c.prototype.isNormalChar = function (e) { return e >= 32 && e <= 127 }, c.prototype.setRollUp = function (e, t) { if ("rollUp" !== this.mode_ && (this.row_ = 14, this.mode_ = "rollUp", this.flushDisplayed(e), this.nonDisplayed_ = u(), this.displayed_ = u()), void 0 !== t && t !== this.row_) for (var n = 0; n < this.rollUpRows_; n++)this.displayed_[t - n] = this.displayed_[this.row_ - n], this.displayed_[this.row_ - n] = ""; void 0 === t && (t = this.row_), this.topRow_ = t - this.rollUpRows_ + 1 }, c.prototype.addFormatting = function (e, t) { this.formatting_ = this.formatting_.concat(t); var n = t.reduce(function (e, t) { return e + "<" + t + ">" }, ""); this[this.mode_](e, n) }, c.prototype.clearFormatting = function (e) { if (this.formatting_.length) { var t = this.formatting_.reverse().reduce(function (e, t) { return e + "</" + t + ">" }, ""); this.formatting_ = [], this[this.mode_](e, t) } }, c.prototype.popOn = function (e, t) { var n = this.nonDisplayed_[this.row_]; n += t, this.nonDisplayed_[this.row_] = n }, c.prototype.rollUp = function (e, t) { var n = this.displayed_[this.row_]; n += t, this.displayed_[this.row_] = n }, c.prototype.shiftRowsUp_ = function () { var e; for (e = 0; e < this.topRow_; e++)this.displayed_[e] = ""; for (e = this.row_ + 1; e < 15; e++)this.displayed_[e] = ""; for (e = this.topRow_; e < this.row_; e++)this.displayed_[e] = this.displayed_[e + 1]; this.displayed_[this.row_] = "" }, c.prototype.paintOn = function (e, t) { var n = this.displayed_[this.row_]; n += t, this.displayed_[this.row_] = n }, e.exports = { CaptionStream: s, Cea608Stream: c } }, U6jy: function (e, t) { e.exports = function () { for (var e = {}, t = 0; t < arguments.length; t++) { var i = arguments[t]; for (var r in i) n.call(i, r) && (e[r] = i[r]) } return e }; var n = Object.prototype.hasOwnProperty }, XQ68: function (e, t, n) { "use strict"; var i = n("F/us"), r = n("fw19"), s = n("ttRX"); e.exports = function (e) { var t, n = e.getComponent("MenuButton"), a = s(e); return t = e.extend(n, { constructor: function (e, t) { n.call(this, e, t), e.on(r.QUALITY_REQUESTED, function (t, n) { this.setSelectedSource(n), e.addClass("vjs-quality-changing"), e.one("loadeddata", function () { e.removeClass("vjs-quality-changing") }) }.bind(this)), e.on(r.PLAYER_SOURCES_CHANGED, function () { this.update() }.bind(this)), e.on(r.QUALITY_SELECTED, function (e, t) { this.setSelectedSource(t) }.bind(this)), e.one("ready", function () { this.selectedSrc = e.src(), this.update() }.bind(this)), this.controlText("Open quality selector menu") }, setSelectedSource: function (e) { var t = e ? e.src : void 0; this.selectedSrc !== t && (this.selectedSrc = t, i.each(this.items, function (e) { e.selected(e.source.src === t) })) }, createItems: function () { var e = this.player(), t = e.currentSources(); return !t || t.length < 2 ? [] : i.map(t, function (t) { return new a(e, { source: t, selected: t.src === this.selectedSrc }) }.bind(this)) }, buildWrapperCSSClass: function () { return "vjs-quality-selector " + n.prototype.buildWrapperCSSClass.call(this) } }), e.registerComponent("QualitySelector", t), t } }, YuTi: function (e, t) { e.exports = function (e) { return e.webpackPolyfill || (e.deprecate = function () { }, e.paths = [], e.children || (e.children = []), Object.defineProperty(e, "loaded", { enumerable: !0, get: function () { return e.l } }), Object.defineProperty(e, "id", { enumerable: !0, get: function () { return e.i } }), e.webpackPolyfill = 1), e } }, ZESv: function (e, t) { var n = function (e) { return e.replace(/^\s+|\s+$/g, "") }; e.exports = function (e) { if (!e) return {}; for (var t, i = {}, r = n(e).split("\n"), s = 0; s < r.length; s++) { var a = r[s], o = a.indexOf(":"), l = n(a.slice(0, o)).toLowerCase(), u = n(a.slice(o + 1)); void 0 === i[l] ? i[l] = u : (t = i[l], "[object Array]" === Object.prototype.toString.call(t) ? i[l].push(u) : i[l] = [i[l], u]) } return i } }, "f+Ey": function (e, t) { e.exports = { toUnsigned: function (e) { return e >>> 0 }, toHexString: function (e) { return ("00" + e.toString(16)).slice(-2) } } }, fw19: function (e, t, n) { "use strict"; e.exports = { QUALITY_REQUESTED: "qualityRequested", QUALITY_SELECTED: "qualitySelected", PLAYER_SOURCES_CHANGED: "playerSourcesChanged" } }, g2LC: function (e, t) { e.exports = function (e) { var t = n.call(e); return "[object Function]" === t || "function" == typeof e && "[object RegExp]" !== t || "undefined" != typeof window && (e === window.setTimeout || e === window.alert || e === window.confirm || e === window.prompt) }; var n = Object.prototype.toString }, geFd: function (e, t) { !function () { var t = !1, n = /xyz/.test(function () { xyz }) ? /\b_super\b/ : /.*/; this.Class = function () { }, Class.extend = function (e) { var i = this.prototype; t = !0; var r = new this; for (var s in t = !1, e) r[s] = "function" == typeof e[s] && "function" == typeof i[s] && n.test(e[s]) ? function (e, t) { return function () { var n = this._super; this._super = i[e]; var r = t.apply(this, arguments); return this._super = n, r } }(s, e[s]) : e[s]; function a() { !t && this.init && this.init.apply(this, arguments) } return a.prototype = r, a.prototype.constructor = a, a.extend = arguments.callee, a }, e.exports = Class }() }, gync: function (e, t, n) { "use strict"; var i = n("geFd"); e.exports = i.extend({ init: function (e, t) { this._player = e, this._seekToTime = t, this._hasFinished = !1, this._keepThisInstanceWhenPlayerSourcesChange = !1, this._seekWhenSafe() }, _seekWhenSafe: function () { this._player.readyState() < 3 ? (this._seekFn = this._seek.bind(this), this._player.one("canplay", this._seekFn)) : this._seek() }, onPlayerSourcesChange: function () { this._keepThisInstanceWhenPlayerSourcesChange ? this._keepThisInstanceWhenPlayerSourcesChange = !1 : this.cancel() }, onQualitySelectionChange: function () { this.hasFinished() || (this._keepThisInstanceWhenPlayerSourcesChange = !0) }, _seek: function () { this._player.currentTime(this._seekToTime), this._keepThisInstanceWhenPlayerSourcesChange = !1, this._hasFinished = !0 }, hasFinished: function () { return this._hasFinished }, cancel: function () { this._player.off("canplay", this._seekFn), this._keepThisInstanceWhenPlayerSourcesChange = !1, this._hasFinished = !0 } }) }, hIRe: function (e, t, n) { "use strict"; (function (e) { n.d(t, "a", function () { return K }), n.d(t, "b", function () { return X }); var i = n("vgmO"), r = n.n(i), s = function (e) { return !!e && "object" == typeof e }, a = function e() { for (var t = arguments.length, n = new Array(t), i = 0; i < t; i++)n[i] = arguments[i]; return n.reduce(function (t, n) { return Object.keys(n).forEach(function (i) { Array.isArray(t[i]) && Array.isArray(n[i]) ? t[i] = t[i].concat(n[i]) : s(t[i]) && s(n[i]) ? t[i] = e(t[i], n[i]) : t[i] = n[i] }), t }, {}) }, o = function (e) { return e.reduce(function (e, t) { return e.concat(t) }, []) }, l = function (e) { if (!e.length) return []; for (var t = [], n = 0; n < e.length; n++)t.push(e[n]); return t }, u = "INVALID_NUMBER_OF_PERIOD", c = "DASH_EMPTY_MANIFEST", h = "DASH_INVALID_XML", d = "NO_BASE_URL", f = "SEGMENT_TIME_UNSPECIFIED", p = "UNSUPPORTED_UTC_TIMING_SCHEME"; "undefined" != typeof window ? window : void 0 !== e || "undefined" != typeof self && self; var m, g = (function (e, t) { var n, i, r, s, a; n = /^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/, i = /^([^\/?#]*)(.*)$/, r = /(?:\/|^)\.(?=\/)/g, s = /(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g, a = { buildAbsoluteURL: function (e, t, n) { if (n = n || {}, e = e.trim(), !(t = t.trim())) { if (!n.alwaysNormalize) return e; var r = a.parseURL(e); if (!r) throw new Error("Error trying to parse base URL."); return r.path = a.normalizePath(r.path), a.buildURLFromParts(r) } var s = a.parseURL(t); if (!s) throw new Error("Error trying to parse relative URL."); if (s.scheme) return n.alwaysNormalize ? (s.path = a.normalizePath(s.path), a.buildURLFromParts(s)) : t; var o = a.parseURL(e); if (!o) throw new Error("Error trying to parse base URL."); if (!o.netLoc && o.path && "/" !== o.path[0]) { var l = i.exec(o.path); o.netLoc = l[1], o.path = l[2] } o.netLoc && !o.path && (o.path = "/"); var u = { scheme: o.scheme, netLoc: s.netLoc, path: null, params: s.params, query: s.query, fragment: s.fragment }; if (!s.netLoc && (u.netLoc = o.netLoc, "/" !== s.path[0])) if (s.path) { var c = o.path, h = c.substring(0, c.lastIndexOf("/") + 1) + s.path; u.path = a.normalizePath(h) } else u.path = o.path, s.params || (u.params = o.params, s.query || (u.query = o.query)); return null === u.path && (u.path = n.alwaysNormalize ? a.normalizePath(s.path) : s.path), a.buildURLFromParts(u) }, parseURL: function (e) { var t = n.exec(e); return t ? { scheme: t[1] || "", netLoc: t[2] || "", path: t[3] || "", params: t[4] || "", query: t[5] || "", fragment: t[6] || "" } : null }, normalizePath: function (e) { for (e = e.split("").reverse().join("").replace(r, ""); e.length !== (e = e.replace(s, "")).length;); return e.split("").reverse().join("") }, buildURLFromParts: function (e) { return e.scheme + e.netLoc + e.path + e.params + e.query + e.fragment } }, e.exports = a }(m = { exports: {} }, m.exports), m.exports), v = function (e, t) { return /^[a-z]+:/i.test(t) ? t : (/\/\//i.test(e) || (e = g.buildAbsoluteURL(r.a.location.href, e)), g.buildAbsoluteURL(e, t)) }, y = function (e) { var t = e.baseUrl, n = void 0 === t ? "" : t, i = e.source, r = void 0 === i ? "" : i, s = e.range, a = void 0 === s ? "" : s, o = e.indexRange, l = void 0 === o ? "" : o, u = { uri: r, resolvedUri: v(n || "", r) }; if (a || l) { var c = (a || l).split("-"), h = parseInt(c[0], 10), d = parseInt(c[1], 10); u.byterange = { length: d - h + 1, offset: h } } return u }, _ = { static: function (e) { var t = e.duration, n = e.timescale, i = void 0 === n ? 1 : n, r = e.sourceDuration; return { start: 0, end: Math.ceil(r / (t / i)) } }, dynamic: function (e) { var t = e.NOW, n = e.clientOffset, i = e.availabilityStartTime, r = e.timescale, s = void 0 === r ? 1 : r, a = e.duration, o = e.start, l = void 0 === o ? 0 : o, u = e.minimumUpdatePeriod, c = void 0 === u ? 0 : u, h = e.timeShiftBufferDepth, d = void 0 === h ? 1 / 0 : h, f = (t + n) / 1e3, p = i + l, m = f + c - p, g = Math.ceil(m * s / a), v = Math.floor((f - p - d) * s / a), y = Math.floor((f - p) * s / a); return { start: Math.max(0, v), end: Math.min(g, y) } } }, b = function (e) { var t = e.type, n = void 0 === t ? "static" : t, i = e.duration, r = e.timescale, s = void 0 === r ? 1 : r, a = e.sourceDuration, o = _[n](e), l = function (e, t) { for (var n = [], i = e; i < t; i++)n.push(i); return n }(o.start, o.end).map(function (e) { return function (t, n) { var i = e.duration, r = e.timescale, s = void 0 === r ? 1 : r, a = e.periodIndex, o = e.startNumber; return { number: (void 0 === o ? 1 : o) + t, duration: i / s, timeline: a, time: n * i } } }(e)); if ("static" === n) { var u = l.length - 1; l[u].duration = a - i / s * u } return l }, T = function (e) { var t = e.baseUrl, n = e.initialization, i = void 0 === n ? {} : n, r = e.sourceDuration, s = e.timescale, a = void 0 === s ? 1 : s, o = e.indexRange, l = void 0 === o ? "" : o, u = e.duration; if (!t) throw new Error(d); var c = y({ baseUrl: t, source: i.sourceURL, range: i.range }), h = y({ baseUrl: t, source: t, indexRange: l }); if (h.map = c, u) { var f = b(e); f.length && (h.duration = f[0].duration, h.timeline = f[0].timeline) } else r && (h.duration = r / a, h.timeline = 0); return h.number = 0, [h] }, S = function (e, t, n) { for (var i = e.sidx.map ? e.sidx.map : null, r = e.sidx.duration, s = e.timeline || 0, a = e.sidx.byterange, o = a.offset + a.length, l = t.timescale, u = t.references.filter(function (e) { return 1 !== e.referenceType }), c = [], h = o + t.firstOffset, d = 0; d < u.length; d++) { var f = t.references[d], p = f.referencedSize, m = f.subsegmentDuration, g = T({ baseUrl: n, timescale: l, timeline: s, periodIndex: s, duration: m, sourceDuration: r, indexRange: h + "-" + (h + p - 1) })[0]; i && (g.map = i), c.push(g), h += p } return e.segments = c, e }, E = function (e) { var t; return (t = e.reduce(function (e, t) { var n, i = t.attributes.id + (t.attributes.lang || ""); e[i] ? (t.segments[0] && (t.segments[0].discontinuity = !0), (n = e[i].segments).push.apply(n, t.segments), t.attributes.contentProtection && (e[i].attributes.contentProtection = t.attributes.contentProtection)) : e[i] = t; return e }, {}), Object.keys(t).map(function (e) { return t[e] })).map(function (e) { var t, n; return e.discontinuityStarts = (t = e.segments, n = "discontinuity", t.reduce(function (e, t, i) { return t[n] && e.push(i), e }, [])), e }) }, C = function (e, t) { if (void 0 === t && (t = {}), !Object.keys(t).length) return e; for (var n in e) { var i = e[n]; if (i.sidx) { var r = i.sidx.uri + "-" + (a = i.sidx.byterange, o = void 0, o = a.offset + a.length - 1, a.offset + "-" + o), s = t[r] && t[r].sidx; i.sidx && s && S(i, s, i.sidx.resolvedUri) } } var a, o; return e }, w = function (e) { var t, n = e.attributes, i = e.segments, r = e.sidx, s = { attributes: (t = { NAME: n.id, BANDWIDTH: n.bandwidth, CODECS: n.codecs }, t["PROGRAM-ID"] = 1, t), uri: "", endList: "static" === (n.type || "static"), timeline: n.periodIndex, resolvedUri: "", targetDuration: n.duration, segments: i, mediaSequence: i.length ? i[0].number : 1 }; return n.contentProtection && (s.contentProtection = n.contentProtection), r && (s.sidx = r), s }, k = function (e) { var t, n = e.attributes, i = e.segments, r = e.sidx, s = { attributes: (t = { NAME: n.id, AUDIO: "audio", SUBTITLES: "subs", RESOLUTION: { width: n.width, height: n.height }, CODECS: n.codecs, BANDWIDTH: n.bandwidth }, t["PROGRAM-ID"] = 1, t), uri: "", endList: "static" === (n.type || "static"), timeline: n.periodIndex, resolvedUri: "", targetDuration: n.duration, segments: i, mediaSequence: i.length ? i[0].number : 1 }; return n.contentProtection && (s.contentProtection = n.contentProtection), r && (s.sidx = r), s }, A = function (e, t) { var n; if (void 0 === t && (t = {}), !e.length) return {}; var i = e[0].attributes, r = i.sourceDuration, s = i.minimumUpdatePeriod, a = void 0 === s ? 0 : s, o = E(e.filter(function (e) { var t = e.attributes; return "video/mp4" === t.mimeType || "video" === t.contentType })).map(k), l = E(e.filter(function (e) { var t = e.attributes; return "audio/mp4" === t.mimeType || "audio" === t.contentType })), u = e.filter(function (e) { var t = e.attributes; return "text/vtt" === t.mimeType || "text" === t.contentType }), c = { allowCache: !0, discontinuityStarts: [], segments: [], endList: !0, mediaGroups: (n = { AUDIO: {}, VIDEO: {} }, n["CLOSED-CAPTIONS"] = {}, n.SUBTITLES = {}, n), uri: "", duration: r, playlists: C(o, t), minimumUpdatePeriod: 1e3 * a }; return l.length && (c.mediaGroups.AUDIO.audio = function (e, t) { var n; void 0 === t && (t = {}); var i = e.reduce(function (e, i) { var r = i.attributes.role && i.attributes.role.value || "", s = i.attributes.lang || "", a = "main"; if (s) { var o = r ? " (" + r + ")" : ""; a = "" + i.attributes.lang + o } return e[a] && e[a].playlists[0].attributes.BANDWIDTH > i.attributes.bandwidth ? e : (e[a] = { language: s, autoselect: !0, default: "main" === r, playlists: C([w(i)], t), uri: "" }, void 0 === n && "main" === r && ((n = i).default = !0), e) }, {}); n || (i[Object.keys(i)[0]].default = !0); return i }(l, t)), u.length && (c.mediaGroups.SUBTITLES.subs = function (e, t) { return void 0 === t && (t = {}), e.reduce(function (e, n) { var i, r, s, a, o = n.attributes.lang || "text"; return e[o] ? e : (e[o] = { language: o, default: !1, autoselect: !1, playlists: C([(i = n, s = i.attributes, a = i.segments, void 0 === a && (a = [{ uri: s.baseUrl, timeline: s.periodIndex, resolvedUri: s.baseUrl || "", duration: s.sourceDuration, number: 0 }], s.duration = s.sourceDuration), { attributes: (r = { NAME: s.id, BANDWIDTH: s.bandwidth }, r["PROGRAM-ID"] = 1, r), uri: "", endList: "static" === (s.type || "static"), timeline: s.periodIndex, resolvedUri: s.baseUrl || "", targetDuration: s.duration, segments: a, mediaSequence: a.length ? a[0].number : 1 })], t), uri: "" }, e) }, {}) }(u, t)), c }, x = function (e, t, n) { var i = e.NOW, r = e.clientOffset, s = e.availabilityStartTime, a = e.timescale, o = void 0 === a ? 1 : a, l = e.start, u = void 0 === l ? 0 : l, c = e.minimumUpdatePeriod, h = (i + r) / 1e3 + (void 0 === c ? 0 : c) - (s + u); return Math.ceil((h * o - t) / n) }, I = function (e, t) { for (var n = e.type, i = void 0 === n ? "static" : n, r = e.minimumUpdatePeriod, s = void 0 === r ? 0 : r, a = e.media, o = void 0 === a ? "" : a, l = e.sourceDuration, u = e.timescale, c = void 0 === u ? 1 : u, h = e.startNumber, d = void 0 === h ? 1 : h, f = e.periodIndex, p = [], m = -1, g = 0; g < t.length; g++) { var v = t[g], y = v.d, _ = v.r || 0, b = v.t || 0; m < 0 && (m = b), b && b > m && (m = b); var T = void 0; if (_ < 0) { var S = g + 1; T = S === t.length ? "dynamic" === i && s > 0 && o.indexOf("$Number$") > 0 ? x(e, m, y) : (l * c - m) / y : (t[S].t - m) / y } else T = _ + 1; for (var E = d + p.length + T, C = d + p.length; C < E;)p.push({ number: C, duration: y / c, time: m, timeline: f }), m += y, C++ } return p }, O = /\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g, D = function (e, t) { return e.replace(O, function (e) { return function (t, n, i, r) { if ("$$" === t) return "$"; if (void 0 === e[n]) return t; var s = "" + e[n]; return "RepresentationID" === n ? s : (r = i ? parseInt(r, 10) : 1, s.length >= r ? s : "" + new Array(r - s.length + 1).join("0") + s) } }(t)) }, L = function (e, t) { var n = { RepresentationID: e.id, Bandwidth: e.bandwidth || 0 }, i = e.initialization, r = void 0 === i ? { sourceURL: "", range: "" } : i, s = y({ baseUrl: e.baseUrl, source: D(r.sourceURL, n), range: r.range }); return function (e, t) { return e.duration || t ? e.duration ? b(e) : I(e, t) : [{ number: e.startNumber || 1, duration: e.sourceDuration, time: 0, timeline: e.periodIndex }] }(e, t).map(function (t) { n.Number = t.number, n.Time = t.time; var i = D(e.media || "", n); return { uri: i, timeline: t.timeline, duration: t.duration, resolvedUri: v(e.baseUrl || "", i), map: s, number: t.number } }) }, P = function (e, t) { var n = e.duration, i = e.segmentUrls, r = void 0 === i ? [] : i; if (!n && !t || n && t) throw new Error(f); var s, a = r.map(function (t) { return function (e, t) { var n = e.baseUrl, i = e.initialization, r = void 0 === i ? {} : i, s = y({ baseUrl: n, source: r.sourceURL, range: r.range }), a = y({ baseUrl: n, source: t.media, range: t.mediaRange }); return a.map = s, a }(e, t) }); return n && (s = b(e)), t && (s = I(e, t)), s.map(function (e, t) { if (a[t]) { var n = a[t]; return n.timeline = e.timeline, n.duration = e.duration, n.number = e.number, n } }).filter(function (e) { return e }) }, N = function (e) { var t, n, i = e.attributes, r = e.segmentInfo; r.template ? (n = L, t = a(i, r.template)) : r.base ? (n = T, t = a(i, r.base)) : r.list && (n = P, t = a(i, r.list)); var s = { attributes: i }; if (!n) return s; var o = n(t, r.timeline); if (t.duration) { var l = t, u = l.duration, c = l.timescale, h = void 0 === c ? 1 : c; t.duration = u / h } else o.length ? t.duration = o.reduce(function (e, t) { return Math.max(e, Math.ceil(t.duration)) }, 0) : t.duration = 0; return s.attributes = t, s.segments = o, r.base && t.indexRange && (s.sidx = o[0], s.segments = []), s }, R = function (e, t) { return l(e.childNodes).filter(function (e) { return e.tagName === t }) }, M = function (e) { return e.textContent.trim() }, U = function (e) { var t = /P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e); if (!t) return 0; var n = t.slice(1), i = n[0], r = n[1], s = n[2], a = n[3], o = n[4], l = n[5]; return 31536e3 * parseFloat(i || 0) + 2592e3 * parseFloat(r || 0) + 86400 * parseFloat(s || 0) + 3600 * parseFloat(a || 0) + 60 * parseFloat(o || 0) + parseFloat(l || 0) }, j = { mediaPresentationDuration: function (e) { return U(e) }, availabilityStartTime: function (e) { return /^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t = e) && (t += "Z"), Date.parse(t) / 1e3; var t }, minimumUpdatePeriod: function (e) { return U(e) }, timeShiftBufferDepth: function (e) { return U(e) }, start: function (e) { return U(e) }, width: function (e) { return parseInt(e, 10) }, height: function (e) { return parseInt(e, 10) }, bandwidth: function (e) { return parseInt(e, 10) }, startNumber: function (e) { return parseInt(e, 10) }, timescale: function (e) { return parseInt(e, 10) }, duration: function (e) { var t = parseInt(e, 10); return isNaN(t) ? U(e) : t }, d: function (e) { return parseInt(e, 10) }, t: function (e) { return parseInt(e, 10) }, r: function (e) { return parseInt(e, 10) }, DEFAULT: function (e) { return e } }, B = function (e) { return e && e.attributes ? l(e.attributes).reduce(function (e, t) { var n = j[t.name] || j.DEFAULT; return e[t.name] = n(t.value), e }, {}) : {} }; var F = { "urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b": "org.w3.clearkey", "urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed": "com.widevine.alpha", "urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95": "com.microsoft.playready", "urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb": "com.adobe.primetime" }, H = function (e, t) { return t.length ? o(e.map(function (e) { return t.map(function (t) { return v(e, M(t)) }) })) : e }, q = function (e) { var t = R(e, "SegmentTemplate")[0], n = R(e, "SegmentList")[0], i = n && R(n, "SegmentURL").map(function (e) { return a({ tag: "SegmentURL" }, B(e)) }), r = R(e, "SegmentBase")[0], s = n || t, o = s && R(s, "SegmentTimeline")[0], l = n || r || t, u = l && R(l, "Initialization")[0], c = t && B(t); c && u ? c.initialization = u && B(u) : c && c.initialization && (c.initialization = { sourceURL: c.initialization }); var h = { template: c, timeline: o && R(o, "S").map(function (e) { return B(e) }), list: n && a(B(n), { segmentUrls: i, initialization: B(u) }), base: r && a(B(r), { initialization: B(u) }) }; return Object.keys(h).forEach(function (e) { h[e] || delete h[e] }), h }, V = function (e) { return e.reduce(function (e, t) { var n = B(t), i = F[n.schemeIdUri]; if (i) { e[i] = { attributes: n }; var s = R(t, "cenc:pssh")[0]; if (s) { var a = M(s), o = a && function (e) { for (var t = r.a.atob(e), n = new Uint8Array(t.length), i = 0; i < t.length; i++)n[i] = t.charCodeAt(i); return n }(a); e[i].pssh = o } } return e }, {}) }, W = function (e, t, n) { return function (i) { var r = B(i), s = H(t, R(i, "BaseURL")), l = R(i, "Role")[0], u = { role: B(l) }, c = a(e, r, u), h = V(R(i, "ContentProtection")); Object.keys(h).length && (c = a(c, { contentProtection: h })); var d = q(i), f = R(i, "Representation"), p = a(n, d); return o(f.map(function (e, t, n) { return function (i) { var r = R(i, "BaseURL"), s = H(t, r), o = a(e, B(i)), l = q(i); return s.map(function (e) { return { segmentInfo: a(n, l), attributes: a(o, { baseUrl: e }) } }) } }(c, s, p))) } }, G = function (e, t) { void 0 === t && (t = {}); var n = t, i = n.manifestUri, s = void 0 === i ? "" : i, l = n.NOW, c = void 0 === l ? Date.now() : l, h = n.clientOffset, d = void 0 === h ? 0 : h, f = R(e, "Period"); if (!f.length) throw new Error(u); var p = B(e), m = H([s], R(e, "BaseURL")); return p.sourceDuration = p.mediaPresentationDuration || 0, p.NOW = c, p.clientOffset = d, o(f.map(function (e, t) { return function (n, i) { var s = H(t, R(n, "BaseURL")), l = B(n), u = parseInt(l.id, 10), c = r.a.isNaN(u) ? i : u, h = a(e, { periodIndex: c }), d = R(n, "AdaptationSet"), f = q(n); return o(d.map(W(h, s, f))) } }(p, m))) }, z = function (e) { if ("" === e) throw new Error(c); var t = (new r.a.DOMParser).parseFromString(e, "application/xml"), n = t && "MPD" === t.documentElement.tagName ? t.documentElement : null; if (!n || n && n.getElementsByTagName("parsererror").length > 0) throw new Error(h); return n }, K = function (e, t) { return void 0 === t && (t = {}), A(G(z(e), t).map(N), t.sidxMapping) }, X = function (e) { return function (e) { var t = R(e, "UTCTiming")[0]; if (!t) return null; var n = B(t); switch (n.schemeIdUri) { case "urn:mpeg:dash:utc:http-head:2014": case "urn:mpeg:dash:utc:http-head:2012": n.method = "HEAD"; break; case "urn:mpeg:dash:utc:http-xsdate:2014": case "urn:mpeg:dash:utc:http-iso:2014": case "urn:mpeg:dash:utc:http-xsdate:2012": case "urn:mpeg:dash:utc:http-iso:2012": n.method = "GET"; break; case "urn:mpeg:dash:utc:direct:2014": case "urn:mpeg:dash:utc:direct:2012": n.method = "DIRECT", n.value = Date.parse(n.value); break; case "urn:mpeg:dash:utc:http-ntp:2014": case "urn:mpeg:dash:utc:ntp:2014": case "urn:mpeg:dash:utc:sntp:2014": default: throw new Error(p) }return n }(z(e)) } }).call(this, n("yLpj")) }, hZiT: function (e, t, n) {
/*! JsRender v1.0.3: http://jsviews.com/#jsrender */
/*! **VERSION FOR WEB** (For NODE.JS see http://jsviews.com/download/jsrender-node.js) */var i, r, s; i = function (e, t) { "use strict"; var n = !1 === t; t = t && t.fn ? t : e.jQuery; var i, r, s, a, o, l, u, c, h, d, f, p, m, g, v, y, _, b, T, S, E, C, w = "v1.0.3", k = "_ocp", A = /[ \t]*(\r\n|\n|\r)/g, x = /\\(['"])/g, I = /['"\\]/g, O = /(?:\x08|^)(onerror:)?(?:(~?)(([\w$.]+):)?([^\x08]+))\x08(,)?([^\x08]+)/gi, D = /^if\s/, L = /<(\w+)[>\s]/, P = /[\x00`><\"'&=]/, N = /^on[A-Z]|^convert(Back)?$/, R = /^\#\d+_`[\s\S]*\/\d+_`$/, M = /[\x00`><"'&=]/g, U = /[&<>]/g, j = /&(amp|gt|lt);/g, B = /\[['"]?|['"]?\]/g, F = 0, H = { "&": "&amp;", "<": "&lt;", ">": "&gt;", "\0": "&#0;", "'": "&#39;", '"': "&#34;", "`": "&#96;", "=": "&#61;" }, q = { amp: "&", gt: ">", lt: "<" }, V = "html", W = "object", G = "data-jsv-tmpl", z = "jsvTmpl", K = "For #index in nested block use #getIndex().", X = {}, Y = e.jsrender, $ = Y && t && !t.render, Q = { template: { compile: function e(n, i, r, s) { function o(i) { var a, o; if ("" + i === i || i.nodeType > 0 && (l = i)) { if (!l) if (/^\.\/[^\\:*?"<>]*$/.test(i)) (o = c[n = n || i]) ? i = o : l = document.getElementById(i); else if (t.fn && !p.rTmpl.test(i)) try { l = t(i, document)[0] } catch (e) { } l && ("SCRIPT" !== l.tagName && Te(i + ": Use script block, not " + l.tagName), s ? i = l.innerHTML : ((a = l.getAttribute(G)) && (a !== z ? (i = c[a], delete c[a]) : t.fn && (i = t.data(l)[z])), a && i || (n = n || (t.fn ? z : i), i = e(n, l.innerHTML, r, s)), i.tmplName = n = n || a, n !== z && (c[n] = i), l.setAttribute(G, n), t.fn && t.data(l, z, i))), l = void 0 } else i.fn || (i = void 0); return i } var l, u, d = i = i || ""; p._html = h.html; 0 === s && (s = void 0, d = o(d)); s = s || (i.markup ? i.bnds ? re({}, i) : i : {}); s.tmplName = s.tmplName || n || "unnamed"; r && (s._parentTmpl = r); !d && i.markup && (d = o(i.markup)) && d.fn && (d = d.markup); if (void 0 !== d) return d.render || i.render ? d.tmpls && (u = d) : (i = me(d, s), Ee(d.replace(I, "\\$&"), i)), u || function (e) { var t, n, i; for (t in Q) e[n = t + "s"] && (i = e[n], e[n] = {}, a[n](i, e)) }(u = re(function () { return u.render.apply(u, arguments) }, i)), u } }, tag: { compile: function (e, t, n) { var i, r, s, a = new p._tg; function o() { this._ = { unlinked: !0 }, this.inline = !0, this.tagName = e } l(t) ? t = { depends: t.depends, render: t } : "" + t === t && (t = { template: t }); if (r = t.baseTag) for (s in t.flow = !!t.flow, (r = "" + r === r ? n && n.tags[r] || f[r] : r) || Te('baseTag: "' + t.baseTag + '" not found'), a = re(a, r), t) a[s] = Z(r[s], t[s]); else a = re(a, t); void 0 !== (i = a.template) && (a.template = "" + i === i ? c[i] || c(i) : i); (o.prototype = a).constructor = a._ctr = o, n && (a._parentTmpl = n); return a } }, viewModel: { compile: function (e, n) { var i, r, s, a = this, c = n.getters, h = n.extend, d = n.id, f = t.extend({ _is: e || "unnamed", unmap: E, merge: S }, h), p = "", m = "", g = c ? c.length : 0, v = t.observable, y = {}; function _(e) { r.apply(this, e) } function b() { return new _(arguments) } function T(e, t) { for (var n, i, r, s, o, l = 0; l < g; l++)r = c[l], n = void 0, r + "" !== r && (r = (n = r).getter, o = n.parentRef), void 0 === (s = e[r]) && n && void 0 !== (i = n.defaultVal) && (s = fe(i, e)), t(s, n && a[n.type], r, o) } function S(e, t, n) { e = e + "" === e ? JSON.parse(e) : e; var i, r, s, a, l, c, h, f, p, m, g = 0, _ = this; if (u(_)) { for (h = {}, p = [], r = e.length, s = _.length; g < r; g++) { for (f = e[g], c = !1, i = 0; i < s && !c; i++)h[i] || (l = _[i], d && (h[i] = c = d + "" === d ? f[d] && (y[d] ? l[d]() : l[d]) === f[d] : d(l, f))); c ? (l.merge(f), p.push(l)) : (p.push(m = b.map(f)), n && pe(m, n, t)) } v ? v(_).refresh(p, !0) : _.splice.apply(_, [0, _.length].concat(p)) } else for (a in T(e, function (e, t, n, i) { t ? _[n]().merge(e, _, i) : _[n]() !== e && _[n](e) }), e) a === o || y[a] || (_[a] = e[a]) } function E() { var e, t, n, i, r = 0; function s(e) { for (var t = [], n = 0, i = e.length; n < i; n++)t.push(e[n].unmap()); return t } if (u(this)) return s(this); for (e = {}; r < g; r++)t = c[r], n = void 0, t + "" !== t && (t = (n = t).getter), i = this[t](), e[t] = n && i && a[n.type] ? u(i) ? s(i) : i.unmap() : i; for (t in this) !this.hasOwnProperty(t) || "_" === t.charAt(0) && y[t.slice(1)] || t === o || l(this[t]) || (e[t] = this[t]); return e } for (_.prototype = f, i = 0; i < g; i++)!function (e) { e = e.getter || e, y[e] = i + 1; var t = "_" + e; p += (p ? "," : "") + e, m += "this." + t + " = " + e + ";\n", f[e] = f[e] || function (n) { if (!arguments.length) return this[t]; v ? v(this).setProperty(e, n) : this[t] = n }, v && (f[e].set = f[e].set || function (e) { this[t] = e }) }(c[i]); return m = new Function(p, m), (r = function () { m.apply(this, arguments), (s = arguments[g + 1]) && pe(this, arguments[g], s) }).prototype = f, f.constructor = r, b.map = function (t) { t = t + "" === t ? JSON.parse(t) : t; var n, i, r, s, a = 0, l = t, h = []; if (u(t)) { for (n = (t = t || []).length; a < n; a++)h.push(this.map(t[a])); return h._is = e, h.unmap = E, h.merge = S, h } if (t) { for (T(t, function (e, t) { t && (e = t.map(e)), h.push(e) }), l = this.apply(this, h), a = g; a--;)if (r = h[a], (s = c[a].parentRef) && r && r.unmap) if (u(r)) for (n = r.length; n--;)pe(r[n], s, l); else pe(r, s, l); for (i in t) i === o || y[i] || (l[i] = t[i]) } return l }, b.getters = c, b.extend = h, b.id = d, b } }, helper: {}, converter: {} }; function J(e, t) { return function () { var n, i = this.base; return this.base = e, n = t.apply(this, arguments), this.base = i, n } } function Z(e, t) { return l(t) && ((t = J(e ? e._d ? e : J(ne, e) : ne, t))._d = (e && e._d || 0) + 1), t } function ee(e, t) { var n, i = t.props; for (n in i) !N.test(n) || e[n] && e[n].fix || (e[n] = "convert" !== n ? Z(e.constructor.prototype[n], i[n]) : i[n]) } function te(e) { return e } function ne() { return "" } function ie(e) { this.name = (t.link ? "JsViews" : "JsRender") + " Error", this.message = e || this.name } function re(e, t) { if (e) { for (var n in t) e[n] = t[n]; return e } } function se() { var e = this.get("item"); return e ? e.index : void 0 } function ae() { return this.index } function oe(e, t, n, i) { var r, s, a, o = 0; if (1 === n && (i = 1, n = void 0), t) for (a = (s = t.split(".")).length; e && o < a; o++)r = e, e = s[o] ? e[s[o]] : e; return n && (n.lt = n.lt || o < a), void 0 === e ? i ? ne : "" : i ? function () { return e.apply(r, arguments) } : e } function le(n, i, r) { var s, a, o, u, c, h, f, m = this, g = !C && arguments.length > 1, v = m.ctx; if (n) { if (m._ || (c = m.index, m = m.tag), h = m, v && v.hasOwnProperty(n) || (v = d).hasOwnProperty(n)) { if (o = v[n], "tag" === n || "tagCtx" === n || "root" === n || "parentTags" === n || m._.it === n) return o } else v = void 0; if ((!C && m.tagCtx || m.linked) && (o && o._cxp || (m = m.tagCtx || l(o) ? m : !(m = m.scope || m).isTop && m.ctx.tag || m, void 0 !== o && m.tagCtx && (m = m.tagCtx.view.scope), v = m._ocps, (o = v && v.hasOwnProperty(n) && v[n] || o) && o._cxp || !r && !g || ((v || (m._ocps = m._ocps || {}))[n] = o = [{ _ocp: o, _vw: h, _key: n }], o._cxp = { path: k, ind: 0, updateValue: function (e, n) { return t.observable(o[0]).setProperty(k, e), this } })), u = o && o._cxp)) { if (arguments.length > 2) return (a = o[1] ? p._ceo(o[1].deps) : [k]).unshift(o[0]), a._cxp = u, a; if (c = u.tagElse, f = o[1] ? u.tag && u.tag.cvtArgs ? u.tag.cvtArgs(c, 1)[u.ind] : o[1](o[0].data, o[0], p) : o[0]._ocp, g) return o && f !== i && p._ucp(n, i, m, u), m; o = f } return o && l(o) && re(s = function () { return o.apply(this && this !== e ? this : h, arguments) }, o), s || o } } function ue(e, t) { var n, i, r, s, a, o, l, c = this; if (c.tagName) { if (!(c = ((o = c).tagCtxs || [c])[e || 0])) return } else o = c.tag; if (a = o.bindFrom, s = c.args, (l = o.convert) && "" + l === l && (l = "true" === l ? void 0 : c.view.getRsc("converters", l) || Te("Unknown converter: '" + l + "'")), l && !t && (s = s.slice()), a) { for (r = [], n = a.length; n--;)i = a[n], r.unshift(ce(c, i)); t && (s = r) } if (l) { if (void 0 === (l = l.apply(o, r || s))) return s; if (n = (a = a || [0]).length, u(l) && l.length === n || (l = [l], a = [0], n = 1), t) s = l; else for (; n--;)+(i = a[n]) === i && (s[i] = l[n]) } return s } function ce(e, t) { return (e = e[+t === t ? "args" : "props"]) && e[t] } function he(e) { return this.cvtArgs(e, 1) } function de(e, t, n, i, r, s, a, o) { var l, u, c, h = "array" === t; this.content = o, this.views = h ? [] : {}, this.data = i, this.tmpl = r, c = this._ = { key: 0, useKey: h ? 0 : 1, id: "" + F++, onRender: a, bnds: {} }, this.linked = !!a, this.type = t || "top", (this.parent = n) ? (this.root = n.root || this, l = n.views, u = n._, this.isTop = u.scp, this.scope = (!e.tag || e.tag === n.ctx.tag) && !this.isTop && n.scope || this, u.useKey ? (l[c.key = "_" + u.useKey++] = this, this.index = K, this.getIndex = se) : l.length === (c.key = this.index = s) ? l.push(this) : l.splice(s, 0, this), this.ctx = e || n.ctx) : (this.ctx = e || {}, t && (this.root = this)) } function fe(e, t) { return l(e) ? e.call(t) : e } function pe(e, t, n) { Object.defineProperty(e, t, { value: n, configurable: !0 }) } function me(e, n) { var i, r = g._wm || {}, s = { tmpls: [], links: {}, bnds: [], _is: "template", render: _e }; return n && (s = re(s, n)), s.markup = e, s.htmlTag || (i = L.exec(e), s.htmlTag = i ? i[1].toLowerCase() : ""), (i = r[s.htmlTag]) && i !== r.div && (s.markup = t.trim(s.markup)), s } function ge(e, t) { var n = e + "s"; a[n] = function i(r, s, o) { var l, u, c, h = p.onStore[e]; if (r && typeof r === W && !r.nodeType && !r.markup && !r.getTgt && !("viewModel" === e && r.getters || r.extend)) { for (u in r) i(u, r[u], s); return s || a } return r && "" + r !== r && (o = s, s = r, r = void 0), c = o ? "viewModel" === e ? o : o[n] = o[n] || {} : i, l = t.compile, void 0 === s && (s = l ? r : c[r], r = void 0), null === s ? r && delete c[r] : (l && ((s = l.call(c, r, s, o, 0) || {})._is = e), r && (c[r] = s)), h && h(r, s, o, l), s } } function ve(e) { v[e] = v[e] || function (t) { return arguments.length ? (m[e] = t, v) : m[e] } } function ye(e) { function t(t, n) { this.tgt = e.getTgt(t, n), n.map = this } return l(e) && (e = { getTgt: e }), e.baseMap && (e = re(re({}, e.baseMap), e)), e.map = function (e, n) { return new t(e, n) }, e } function _e(e, t, n, i, r, a) { var o, c, h, d, f, m, v, y = i, _ = ""; if (!0 === t ? (n = t, t = void 0) : typeof t !== W && (t = void 0), (h = this.tag) ? (this, d = (y = y || this.view)._getTmpl(h.template || this.tmpl), arguments.length || (e = h.contentCtx && l(h.contentCtx) ? e = h.contentCtx(e) : y)) : d = this, d) { if (!i && e && "view" === e._is && (y = e), y && e === y && (e = y.data), f = !y, C = C || f, y || ((t = t || {}).root = e), !C || g.useViews || d.useViews || y && y !== s) _ = be(d, e, t, n, y, r, a, h); else { if (y ? (m = y.data, v = y.index, y.index = K) : (m = (y = s).data, y.data = e, y.ctx = t), u(e) && !n) for (o = 0, c = e.length; o < c; o++)y.index = o, y.data = e[o], _ += d.fn(e[o], y, p); else y.data = e, _ += d.fn(e, y, p); y.data = m, y.index = v } f && (C = void 0) } return _ } function be(e, t, n, i, r, s, a, o) { function l(e) { (T = re({}, n))[b] = e } var c, h, d, f, m, g, v, y, _, b, T, S, E, C = ""; if (o && (_ = o.tagName, S = o.tagCtx, n = n ? Ie(n, o.ctx) : o.ctx, e === r.content ? v = e !== r.ctx._wrp ? r.ctx._wrp : void 0 : e !== S.content ? e === o.template ? (v = S.tmpl, n._wrp = S.content) : v = S.content || r.content : v = r.content, !1 === S.props.link && ((n = n || {}).link = !1), (b = S.props.itemVar) && ("~" !== b[0] && Se("Use itemVar='~myItem'"), b = b.slice(1))), r && (a = a || r._.onRender, (E = n && !1 === n.link) && r._.nl && (a = void 0), n = Ie(n, r.ctx)), !0 === s && (g = !0, s = 0), a && o && o._.noVws && (a = void 0), y = a, !0 === a && (y = void 0, a = r._.onRender), n = e.helpers ? Ie(e.helpers, n) : n, T = n, u(t) && !i) for ((d = g ? r : void 0 !== s && r || new de(n, "array", r, t, e, s, a, v))._.nl = E, r && r._.useKey && (d._.bnd = !o || o._.bnd && o, d.tag = o), c = 0, h = t.length; c < h; c++)b && l(t[c]), (f = new de(T, "item", d, t[c], e, (s || 0) + c, a, d.content))._.it = b, m = e.fn(t[c], f, p), C += d._.onRender ? d._.onRender(m, f) : m; else b && l(t), (d = g ? r : new de(T, _ || "data", r, t, e, s, a, v))._.it = b, d.tag = o, d._.nl = E, C += e.fn(t, d, p); return o && (d.tagElse = S.index, S.contentView = d), y ? y(C, d) : C } function Te(e) { throw new p.Err(e) } function Se(e) { Te("Syntax error\n" + e) } function Ee(e, t, n, i, s) { function a(t) { (t -= g) && S.push(e.substr(g, t).replace(A, "\\n")) } function o(t, n) { t && (t += "}}", Se((n ? "{{" + n + "}} block has {{/" + t + " without {{" + t : "Unmatched or missing {{/" + t) + ", in template:\n" + e)) } var l, u, c, h, d, f = m.allowCode || t && t.allowCode || !0 === v.allowCode, p = [], g = 0, _ = [], S = p, E = [, , p]; if (f && t._is && (t.allowCode = f), n && (void 0 !== i && (e = e.slice(0, -i.length - 2) + b), e = y + e + T), o(_[0] && _[0][2].pop()[0]), e.replace(r, function (r, l, u, d, p, m, v, y, b, T, C, w) { (v && l || b && !u || y && ":" === y.slice(-1) || T) && Se(r), m && (p = ":", d = V); var k, I, L, P = (l || n) && [[]], R = "", M = "", U = "", j = "", B = "", F = "", H = "", q = "", W = !(b = b || n && !s) && !p; u = u || (y = y || "#data", p), a(w), g = w + r.length, v ? f && S.push(["*", "\n" + y.replace(/^:/, "ret+= ").replace(x, "$1") + ";\n"]) : u ? ("else" === u && (D.test(y) && Se('For "{{else if expr}}" use "{{else expr}}"'), P = E[9] && [[]], E[10] = e.substring(E[10], w), I = E[11] || E[0] || Se("Mismatched: " + r), E = _.pop(), S = E[2], W = !0), y && Ae(y.replace(A, " "), P, t, n).replace(O, function (e, t, n, i, r, s, a, o) { return "this:" === i && (s = "undefined"), o && (L = L || "@" === o[0]), i = "'" + r + "':", a ? (M += n + s + ",", j += "'" + o + "',") : n ? (U += i + "j._cp(" + s + ',"' + o + '",view),', F += i + "'" + o + "',") : t ? H += s : ("trigger" === r && (q += s), "lateRender" === r && (k = "false" !== o), R += i + s + ",", B += i + "'" + o + "',", h = h || N.test(r)), "" }).slice(0, -1), P && P[0] && P.pop(), c = [u, d || !!i || h || "", W && [], we(j || (":" === u ? "'#data'," : ""), B, F), we(M || (":" === u ? "data," : ""), R, U), H, q, k, L, P || 0], S.push(c), W && (_.push(E), (E = c)[10] = g, E[11] = I)) : C && (o(C !== E[0] && C !== E[11] && C, E[0]), E[10] = e.substring(E[10], w), E = _.pop()), o(!E && C), S = E[2] }), a(e.length), (g = p[p.length - 1]) && o("" + g !== g && +g[10] === g[10] && g[0]), n) { for (u = xe(p, e, n), d = [], l = p.length; l--;)d.unshift(p[l][9]); Ce(u, d) } else u = xe(p, t); return u } function Ce(e, t) { var n, i, r = 0, s = t.length; for (e.deps = [], e.paths = []; r < s; r++)for (n in e.paths.push(i = t[r]), i) "_jsvto" !== n && i.hasOwnProperty(n) && i[n].length && !i[n].skp && (e.deps = e.deps.concat(i[n])) } function we(e, t, n) { return [e.slice(0, -1), t.slice(0, -1), n.slice(0, -1)] } function ke(e, t) { return "\n\t" + (t ? t + ":{" : "") + "args:[" + e[0] + "],\n\tprops:{" + e[1] + "}" + (e[2] ? ",\n\tctx:{" + e[2] + "}" : "") } function Ae(e, t, n, i) { var r, a, o, l, u, c = t && t[0], h = { bd: c }, d = { 0: h }, f = 0, m = (n ? n.links : c && (c.links = c.links || {})) || s.tmpl.links, g = 0, v = {}, y = {}; return "@" === e[0] && (e = e.replace(B, ".")), u = (e + (n ? " " : "")).replace(p.rPrm, function (s, u, T, S, E, C, w, k, A, x, I, O, D, L, P, N, R, M, U, j, B) { S && !k && (E = S + E), C = C || "", T = T || u || D, E = E || A, x && (x = !/\)|]/.test(B[j - 1])) && (E = E.slice(1).split(".").join("^")); var F, H, q, V, W, G = ")"; if ("[" === (I = I || M || "") && (I = "[j._sq(", G = ")]"), !w || l || o) { if (c && R && !l && !o && g && (F = y[g - 1], B.length - 1 > j - (F || 0))) { if (F = B.slice(F, j + s.length), !0 !== H) if (q = a || d[g - 1].bd, (V = q[q.length - 1]) && V.prm) { for (; V.sb && V.sb.prm;)V = V.sb; W = V.sb = { path: V.sb, bnd: V.bnd } } else q.push(W = { path: q.pop() }); (H = m[R = _ + ":" + F + " onerror=''" + b]) || (m[R] = !0, m[R] = H = Ee(R, n, !0)), !0 !== H && W && (W._cpfn = H, W.prm = h.bd, W.bnd = W.bnd || W.path && W.path.indexOf("^") >= 0) } return l ? (l = !L) ? s : D + '"' : o ? (o = !P) ? s : D + '"' : (T ? (y[g] = j++, h = d[++g] = { bd: [] }, T) : "") + (U ? g ? "" : (f = B.slice(f, j), (r ? (r = a = !1, "\b") : "\b,") + f + (f = j + s.length, c && t.push(h.bd = []), "\b")) : k ? (g && Se(e), c && t.pop(), r = "_" + E, S, f = j + s.length, c && ((c = h.bd = t[r] = []).skp = !S), E + ":") : E ? E.split("^").join(".").replace(p.rPath, function (e, n, s, o, l, u, d, f) { var p = "." === s; if (s && (E = E.slice(n.length), /^\.?constructor$/.test(f || E) && Se(e), p || (e = (x ? (i ? "" : "(ltOb.lt=ltOb.lt||") + "(ob=" : "") + (o ? 'view.ctxPrm("' + o + '")' : l ? "view" : "data") + (x ? ")===undefined" + (i ? "" : ")") + '?"":view._getOb(ob,"' : "") + (f ? (u ? "." + u : o ? "" : l ? "" : "." + s) + (d || "") : (f = o ? "" : l ? u || "" : s, "")), e = n + ("view.data" === (e += f ? "." + f : "").slice(0, 9) ? e.slice(5) : e) + (x ? (i ? '"' : '",ltOb') + (I ? ",1)" : ")") : "")), c)) { if (q = "_linkTo" === r ? a = t._jsvto = t._jsvto || [] : h.bd, V = p && q[q.length - 1]) { if (V._cpfn) { for (; V.sb;)V = V.sb; V.bnd && (E = "^" + E.slice(1)), V.sb = E, V.bnd = V.bnd || "^" === E[0] } } else q.push(E); y[g] = j + (p ? 1 : 0) } return e }) + (I ? (h = d[++g] = { bd: [] }, v[g] = G, I) : C) : C || (N ? (N = v[g] || N, v[g] = !1, h = d[--g], N + (I ? (h = d[++g], v[g] = G, I) : "")) : O ? (v[g] || Se(e), ",") : u ? "" : (l = L, o = P, '"'))) } Se(e) }), !g && u || Se(e) } function xe(e, t, n) { var i, r, s, a, o, l, u, c, h, d, p, v, y, _, b, T, S, E, C, w, k, I, O, D, L, P, N, R, M, U, j, B, F = 0, H = g.useViews || t.useViews || t.tags || t.templates || t.helpers || t.converters, q = "", W = {}, G = e.length; for ("" + t === t ? (S = n ? 'data-link="' + t.replace(A, " ").slice(1, -1) + '"' : t, t = 0) : (S = t.tmplName || "unnamed", t.allowCode && (W.allowCode = !0), t.debug && (W.debug = !0), d = t.bnds, T = t.tmpls), i = 0; i < G; i++)if ("" + (r = e[i]) === r) q += '\n+"' + r + '"'; else if ("*" === (s = r[0])) q += ";\n" + r[1] + "\nret=ret"; else { if (a = r[1], w = !n && r[2], o = ke(r[3], "params") + "}," + ke(v = r[4]), M = r[6], U = r[7], r[8] ? (j = "\nvar ob,ltOb={},ctxs=", B = ";\nctxs.lt=ltOb.lt;\nreturn ctxs;") : (j = "\nreturn ", B = ""), k = r[10] && r[10].replace(x, "$1"), (D = "else" === s) ? p && p.push(r[9]) : (N = r[5] || !1 !== m.debugMode && "undefined", d && (p = r[9]) && (p = [p], F = d.push(1))), H = H || v[1] || v[2] || p || /view.(?!index)/.test(v[0]), (L = ":" === s) ? a && (s = a === V ? ">" : a + s) : (w && ((E = me(k, W)).tmplName = S + "/" + s, E.useViews = E.useViews || H, xe(w, E), H = E.useViews, T.push(E)), D || (C = s, H = H || s && (!f[s] || !f[s].flow), O = q, q = ""), I = (I = e[i + 1]) && "else" === I[0]), R = N ? ";\ntry{\nret+=" : "\n+", y = "", _ = "", L && (p || M || a && a !== V || U)) { if ((P = new Function("data,view,j,u", "// " + S + " " + ++F + " " + s + j + "{" + o + "};" + B))._er = N, P._tag = s, P._bd = !!p, P._lr = U, n) return P; Ce(P, p), h = !0, y = (b = 'c("' + a + '",view,') + F + ",", _ = ")" } if (q += L ? (n ? (N ? "try{\n" : "") + "return " : R) + (h ? (h = void 0, H = c = !0, b + (P ? (d[F - 1] = P, F) : "{" + o + "}") + ")") : ">" === s ? (u = !0, "h(" + v[0] + ")") : (!0, "((v=" + v[0] + ")!=null?v:" + (n ? "null)" : '"")'))) : (l = !0, "\n{view:view,content:false,tmpl:" + (w ? T.length : "false") + "," + o + "},"), C && !I) { if (q = "[" + q.slice(0, -1) + "]", b = 't("' + C + '",view,this,', n || p) { if ((q = new Function("data,view,j,u", " // " + S + " " + F + " " + C + j + q + B))._er = N, q._tag = C, p && Ce(d[F - 1] = q, p), q._lr = U, n) return q; y = b + F + ",undefined,", _ = ")" } q = O + R + b + (p && F || q) + ")", p = 0, C = 0 } N && !I && (H = !0, q += ";\n}catch(e){ret" + (n ? "urn " : "+=") + y + "j._err(e,view," + N + ")" + _ + ";}" + (n ? "" : "ret=ret")) } q = "// " + S + (W.debug ? "\ndebugger;" : "") + "\nvar v" + (l ? ",t=j._tag" : "") + (c ? ",c=j._cnvt" : "") + (u ? ",h=j._html" : "") + (n ? (r[8] ? ", ob" : "") + ";\n" : ',ret=""') + q + (n ? "\n" : ";\nreturn ret;"); try { q = new Function("data,view,j,u", q) } catch (e) { Se("Compiled template code:\n\n" + q + '\n: "' + (e.message || e) + '"') } return t && (t.fn = q, t.useViews = !!H), q } function Ie(e, t) { return e && e !== t ? t ? re(re({}, t), e) : e : t && re({}, t) } function Oe(e, n) { var i, r, s, a = n.tag, o = n.props, c = n.params.props, h = o.filter, d = o.sort, f = !0 === d, p = parseInt(o.step), m = o.reverse ? -1 : 1; if (!u(e)) return e; if (f || d && "" + d === d ? ((i = e.map(function (e, t) { return { i: t, v: "" + (e = f ? e : oe(e, d)) === e ? e.toLowerCase() : e } })).sort(function (e, t) { return e.v > t.v ? m : e.v < t.v ? -m : 0 }), e = i.map(function (t) { return e[t.i] })) : (d || m < 0) && !a.dataMap && (e = e.slice()), l(d) && (e = e.sort(function () { return d.apply(n, arguments) })), m < 0 && (!d || l(d)) && (e = e.reverse()), e.filter && h && (e = e.filter(h, n), n.tag.onFilter && n.tag.onFilter(n)), c.sorted && (i = d || m < 0 ? e : e.slice(), a.sorted ? t.observable(a.sorted).refresh(i) : n.map.sorted = i), r = o.start, s = o.end, (c.start && void 0 === r || c.end && void 0 === s) && (r = s = 0), isNaN(r) && isNaN(s) || (r = +r || 0, s = void 0 === s || s > e.length ? e.length : +s, e = e.slice(r, s)), p > 1) { for (r = 0, s = e.length, i = []; r < s; r += p)i.push(e[r]); e = i } return c.paged && a.paged && $observable(a.paged).refresh(e), e } function De(e, n, i) { var r = this.jquery && (this[0] || Te("Unknown template")), s = r.getAttribute(G); return _e.call(s && t.data(r)[z] || c(r), e, n, i) } function Le(e) { return H[e] || (H[e] = "&#" + e.charCodeAt(0) + ";") } function Pe(e, t) { return q[t] || "" } function Ne(e) { return null != e ? P.test(e) && ("" + e).replace(M, Le) || e : "" } if (a = { jsviews: w, sub: { rPath: /^(!*?)(?:null|true|false|\d[\d.]*|([\w$]+|\.|~([\w$]+)|#(view|([\w$]+))?)([\w$.^]*?)(?:[.[^]([\w$]+)\]?)?)$/g, rPrm: /(\()(?=\s*\()|(?:([([])\s*)?(?:(\^?)(~?[\w$.^]+)?\s*((\+\+|--)|\+|-|~(?![\w$])|&&|\|\||===|!==|==|!=|<=|>=|[<>%*:?\/]|(=))\s*|(!*?(@)?[#~]?[\w$.^]+)([([])?)|(,\s*)|(\(?)\\?(?:(')|("))|(?:\s*(([)\]])(?=[.^]|\s*$|[^([])|[)\]])([([]?))|(\s+)/g, View: de, Err: ie, tmplFn: Ee, parse: Ae, extend: re, extendCtx: Ie, syntaxErr: Se, onStore: { template: function (e, t) { null === t ? delete X[e] : e && (X[e] = t) } }, addSetting: ve, settings: { allowCode: !1 }, advSet: ne, _thp: ee, _gm: Z, _tg: function () { }, _cnvt: function (e, t, n, i) { var r, s, a, o, l, u = "number" == typeof n && t.tmpl.bnds[n - 1]; void 0 === i && u && u._lr && (i = ""); void 0 !== i ? n = i = { props: {}, args: [i] } : u && (n = u(t.data, t, p)); if (u = u._bd && u, e || u) { if (s = t._lc, r = s && s.tag, n.view = t, !r) { if (r = re(new p._tg, { _: { bnd: u, unlinked: !0, lt: n.lt }, inline: !s, tagName: ":", convert: e, onArrayChange: !0, flow: !0, tagCtx: n, tagCtxs: [n], _is: "tag" }), (o = n.args.length) > 1) for (l = r.bindTo = []; o--;)l.unshift(o); s && (s.tag = r, r.linkCtx = s), n.ctx = Ie(n.ctx, (s ? s.view : t).ctx), ee(r, n) } r._er = i && a, r.ctx = n.ctx || r.ctx || {}, n.ctx = void 0, a = r.cvtArgs()[0], r._er = i && a } else a = n.args[0]; return null != (a = u && t._.onRender ? t._.onRender(a, t, r) : a) ? a : "" }, _tag: function (e, t, n, i, r, a) { function o(e) { var t = l[e]; if (void 0 !== t) for (t = u(t) ? t : [t], v = t.length; v--;)M = t[v], isNaN(parseInt(M)) || (t[v] = parseInt(M)); return t || [0] } var l, c, d, f, m, g, v, y, _, b, T, S, E, C, w, k, A, x, I, O, D, L, P, N, M, U, j, B, F, H = 0, q = "", W = (t = t || s)._lc || !1, G = t.ctx, z = n || t.tmpl, K = "number" == typeof i && t.tmpl.bnds[i - 1]; "tag" === e._is ? (e = (l = e).tagName, i = l.tagCtxs, l.template) : (c = t.getRsc("tags", e) || Te("Unknown tag: {{" + e + "}} "), c.template); void 0 === a && K && (K._lr = c.lateRender && !1 !== K._lr || K._lr) && (a = ""); void 0 !== a ? (q += a, i = a = [{ props: {}, args: [], params: { props: {} } }]) : K && (i = K(t.data, t, p)); for (g = i.length; H < g; H++)b = i[H], k = b.tmpl, (!W || !W.tag || H && !W.tag.inline || l._er || k && +k === k) && (k && z.tmpls && (b.tmpl = b.content = z.tmpls[k - 1]), b.index = H, b.ctxPrm = le, b.render = _e, b.cvtArgs = ue, b.bndArgs = he, b.view = t, b.ctx = Ie(Ie(b.ctx, c && c.ctx), G)), (n = b.props.tmpl) && (b.tmpl = t._getTmpl(n), b.content = b.content || b.tmpl), l ? W && W.fn._lr && (A = !!l.init) : (l = new c._ctr, A = !!l.init, l.parent = m = G && G.tag, l.tagCtxs = i, W && (l.inline = !1, W.tag = l), l.linkCtx = W, (l._.bnd = K || W.fn) ? (l._.ths = b.params.props.this, l._.lt = i.lt, l._.arrVws = {}) : l.dataBoundOnly && Te(e + " must be data-bound:\n{^{" + e + "}}")), P = l.dataMap, b.tag = l, P && i && (b.map = i[H].map), l.flow || (T = b.ctx = b.ctx || {}, d = l.parents = T.parentTags = G && Ie(T.parentTags, G.parentTags) || {}, m && (d[m.tagName] = m), d[l.tagName] = T.tag = l, T.tagCtx = b); if (!(l._er = a)) { for (ee(l, i[0]), l.rendering = { rndr: l.rendering }, H = 0; H < g; H++) { if (b = l.tagCtx = i[H], L = b.props, l.ctx = b.ctx, !H) { if (A && (l.init(b, W, l.ctx), A = void 0), b.args.length || !1 === b.argDefault || !1 === l.argDefault || (b.args = O = [b.view.data], b.params.args = ["#data"]), E = o("bindTo"), void 0 !== l.bindTo && (l.bindTo = E), void 0 !== l.bindFrom ? l.bindFrom = o("bindFrom") : l.bindTo && (l.bindFrom = l.bindTo = E), C = l.bindFrom || E, j = E.length, U = C.length, l._.bnd && (B = l.linkedElement) && (l.linkedElement = B = u(B) ? B : [B], j !== B.length && Te("linkedElement not same length as bindTo")), (B = l.linkedCtxParam) && (l.linkedCtxParam = B = u(B) ? B : [B], U !== B.length && Te("linkedCtxParam not same length as bindFrom/bindTo")), C) for (l._.fromIndex = {}, l._.toIndex = {}, y = U; y--;)for (M = C[y], v = j; v--;)M === E[v] && (l._.fromIndex[v] = y, l._.toIndex[y] = v); W && (W.attr = l.attr = W.attr || l.attr || W._dfAt), f = l.attr, l._.noVws = f && f !== V } if (O = l.cvtArgs(H), l.linkedCtxParam) for (D = l.cvtArgs(H, 1), v = U, F = l.constructor.prototype.ctx; v--;)(S = l.linkedCtxParam[v]) && (M = C[v], w = D[v], b.ctx[S] = p._cp(F && void 0 === w ? F[S] : w, void 0 !== w && ce(b.params, M), b.view, l._.bnd && { tag: l, cvt: l.convert, ind: v, tagElse: H })); (x = L.dataMap || P) && (O.length || L.dataMap) && ((I = b.map) && I.src === O[0] && !r || (I && I.src && I.unmap(), x.map(O[0], b, I, !l._.bnd), I = b.map), O = [I.tgt]), _ = void 0, l.render && (_ = l.render.apply(l, O), t.linked && _ && !R.test(_) && ((n = { links: [] }).render = n.fn = function () { return _ }, _ = be(n, t.data, void 0, !0, t, void 0, void 0, l))), O.length || (O = [t]), void 0 === _ && (N = O[0], l.contentCtx && (N = !0 === l.contentCtx ? t : l.contentCtx(N)), _ = b.render(N, !0) || (r ? void 0 : "")), q = q ? q + (_ || "") : void 0 !== _ ? "" + _ : void 0 } l.rendering = l.rendering.rndr } l.tagCtx = i[0], l.ctx = l.tagCtx.ctx, l._.noVws && l.inline && (q = "text" === f ? h.html(q) : ""); return K && t._.onRender ? t._.onRender(q, t, l) : q }, _er: Te, _err: function (e, t, n) { var i = void 0 !== n ? l(n) ? n.call(t.data, e, t) : n || "" : "{Error: " + (e.message || e) + "}"; m.onError && void 0 !== (n = m.onError.call(t.data, e, n && i, t)) && (i = n); return t && !t._lc ? h.html(i) : i }, _cp: te, _sq: function (e) { return "constructor" === e && Se(""), e } }, settings: { delimiters: function e(t, n, i) { if (!t) return m.delimiters; if (u(t)) return e.apply(a, t); S = i ? i[0] : S; /^(\W|_){5}$/.test(t + n + S) || Te("Invalid delimiters"); y = t[0]; _ = t[1]; b = n[0]; T = n[1]; m.delimiters = [y + _, b + T, S]; t = "\\" + y + "(\\" + S + ")?\\" + _; n = "\\" + b + "\\" + T; r = "(?:(\\w+(?=[\\/\\s\\" + b + "]))|(\\w+)?(:)|(>)|(\\*))\\s*((?:[^\\" + b + "]|\\" + b + "(?!\\" + T + "))*?)"; p.rTag = "(?:" + r + ")"; r = new RegExp("(?:" + t + r + "(\\/)?|\\" + y + "(\\" + S + ")?\\" + _ + "(?:(?:\\/(\\w+))\\s*|!--[\\s\\S]*?--))" + n, "g"); p.rTmpl = new RegExp("^\\s|\\s$|<.*>|([^\\\\]|^)[{}]|" + t + ".*" + n); return v }, advanced: function (e) { return e ? (re(g, e), p.advSet(), v) : g } }, map: ye }, (ie.prototype = new Error).constructor = ie, se.depends = function () { return [this.get("item"), "index"] }, ae.depends = "index", de.prototype = { get: function (e, t) { t || !0 === e || (t = e, e = void 0); var n, i, r, s, a = this, o = "root" === t; if (e) { if (!(s = t && a.type === t && a)) if (n = a.views, a._.useKey) { for (i in n) if (s = t ? n[i].get(e, t) : n[i]) break } else for (i = 0, r = n.length; !s && i < r; i++)s = t ? n[i].get(e, t) : n[i] } else if (o) s = a.root; else if (t) for (; a && !s;)s = a.type === t ? a : void 0, a = a.parent; else s = a.parent; return s || void 0 }, getIndex: ae, ctxPrm: le, getRsc: function (e, t) { var n, i, r = this; if ("" + t === t) { for (; void 0 === n && r;)n = (i = r.tmpl && r.tmpl[e]) && i[t], r = r.parent; return n || a[e][t] } }, _getTmpl: function (e) { return e && (e.fn ? e : this.getRsc("templates", e) || c(e)) }, _getOb: oe, _is: "view" }, p = a.sub, v = a.settings, !(Y || t && t.render)) { for (i in Q) ge(i, Q[i]); if (h = a.converters, d = a.helpers, f = a.tags, p._tg.prototype = { baseApply: function (e) { return this.base.apply(this, e) }, cvtArgs: ue, bndArgs: he, ctxPrm: le }, s = p.topView = new de, t) { if (t.fn.render = De, o = t.expando, t.observable) { if (w !== (w = t.views.jsviews)) throw "JsObservable requires JsRender " + w; re(p, t.views.sub), a.map = t.views.map } } else t = {}, n && (e.jsrender = t), t.renderFile = t.__express = t.compile = function () { throw "Node.js: use npm jsrender, or jsrender-node.js" }, t.isFunction = function (e) { return "function" == typeof e }, t.isArray = Array.isArray || function (e) { return "[object Array]" === {}.toString.call(e) }, p._jq = function (e) { e !== t && (re(e, t), (t = e).fn.render = De, delete t.jsrender, o = t.expando) }, t.jsrender = w; for (E in (m = p.settings).allowCode = !1, l = t.isFunction, t.render = X, t.views = a, t.templates = c = a.templates, m) ve(E); (v.debugMode = function (e) { return void 0 === e ? m.debugMode : (m.debugMode = e, m.onError = e + "" === e ? function () { return e } : l(e) ? e : void 0, v) })(!1), g = m.advanced = { useViews: !1, _jsv: !1 }, f({ if: { render: function (e) { var t = this.tagCtx; return this.rendering.done || !e && (t.args.length || !t.index) ? "" : (this.rendering.done = !0, void (this.selected = t.index)) }, contentCtx: !0, flow: !0 }, for: { sortDataMap: ye(Oe), init: function (e, t) { this.setDataMap(this.tagCtxs) }, render: function (e) { var t, n, i, r, s, a = this.tagCtx, o = !1 === a.argDefault, l = a.props, c = o || a.args.length, h = "", d = 0; if (!this.rendering.done) { if (t = c ? e : a.view.data, o) for (o = l.reverse ? "unshift" : "push", r = +l.end, s = +l.step || 1, t = [], i = +l.start || 0; (r - i) * s > 0; i += s)t[o](i); void 0 !== t && (n = u(t), h += a.render(t, !c || l.noIteration), d += n ? t.length : 1), (this.rendering.done = d) && (this.selected = a.index) } return h }, setDataMap: function (e) { for (var t, n, i, r = e.length; r--;)n = (t = e[r]).props, i = t.params.props, t.argDefault = void 0 === n.end || t.args.length > 0, n.dataMap = !1 !== t.argDefault && u(t.args[0]) && (i.sort || i.start || i.end || i.step || i.filter || i.reverse || n.sort || n.start || n.end || n.step || n.filter || n.reverse) && this.sortDataMap }, flow: !0 }, props: { baseTag: "for", dataMap: ye(function (e, n) { var i, r, s = n.map, a = s && s.propsArr; if (!a) { if (a = [], typeof e === W || l(e)) for (i in e) r = e[i], i === o || !e.hasOwnProperty(i) || n.props.noFunctions && t.isFunction(r) || a.push({ key: i, prop: r }); s && (s.propsArr = s.options && a) } return Oe(a, n) }), init: ne, flow: !0 }, include: { flow: !0 }, "*": { render: te, flow: !0 }, ":*": { render: te, flow: !0 }, dbg: d.dbg = h.dbg = function (e) { try { throw console.log("JsRender dbg breakpoint: " + e), "dbg breakpoint" } catch (e) { } return this.base ? this.baseApply(arguments) : e } }), h({ html: Ne, attr: Ne, encode: function (e) { return "" + e === e ? e.replace(U, Le) : e }, unencode: function (e) { return "" + e === e ? e.replace(j, Pe) : e }, url: function (e) { return null != e ? encodeURI("" + e) : null === e ? e : "" } }) } return m = p.settings, u = (t || Y).isArray, v.delimiters("{{", "}}", "^"), $ && Y.views.sub._jq(t), t || Y }, r = window, s = r.jQuery, e.exports = s ? i(r, s) : function (e) { if (e && !e.fn) throw "Provide jQuery or null"; return i(r, e) }
  }, jBAH: function (e, t) { e.exports = function (e, t) { var n, i = null; try { n = JSON.parse(e, t) } catch (e) { i = e } return [i, n] } }, mvqA: function (e, t, n) { "use strict"; var i, r, s = n("KAYj").parseType, a = function (e) { return new Date(1e3 * e - 20828448e5) }, o = function (e) { return { isLeading: (12 & e[0]) >>> 2, dependsOn: 3 & e[0], isDependedOn: (192 & e[1]) >>> 6, hasRedundancy: (48 & e[1]) >>> 4, paddingValue: (14 & e[1]) >>> 1, isNonSyncSample: 1 & e[1], degradationPriority: e[2] << 8 | e[3] } }, l = function (e) { var t, n, i = new DataView(e.buffer, e.byteOffset, e.byteLength), r = []; for (t = 0; t + 4 < e.length; t += n)if (n = i.getUint32(t), t += 4, n <= 0) r.push("<span style='color:red;'>MALFORMED DATA</span>"); else switch (31 & e[t]) { case 1: r.push("slice_layer_without_partitioning_rbsp"); break; case 5: r.push("slice_layer_without_partitioning_rbsp_idr"); break; case 6: r.push("sei_rbsp"); break; case 7: r.push("seq_parameter_set_rbsp"); break; case 8: r.push("pic_parameter_set_rbsp"); break; case 9: r.push("access_unit_delimiter_rbsp"); break; default: r.push("UNKNOWN NAL - " + e[t] & 31) }return r }, u = { avc1: function (e) { var t = new DataView(e.buffer, e.byteOffset, e.byteLength); return { dataReferenceIndex: t.getUint16(6), width: t.getUint16(24), height: t.getUint16(26), horizresolution: t.getUint16(28) + t.getUint16(30) / 16, vertresolution: t.getUint16(32) + t.getUint16(34) / 16, frameCount: t.getUint16(40), depth: t.getUint16(74), config: i(e.subarray(78, e.byteLength)) } }, avcC: function (e) { var t, n, i, r, s = new DataView(e.buffer, e.byteOffset, e.byteLength), a = { configurationVersion: e[0], avcProfileIndication: e[1], profileCompatibility: e[2], avcLevelIndication: e[3], lengthSizeMinusOne: 3 & e[4], sps: [], pps: [] }, o = 31 & e[5]; for (i = 6, r = 0; r < o; r++)n = s.getUint16(i), i += 2, a.sps.push(new Uint8Array(e.subarray(i, i + n))), i += n; for (t = e[i], i++, r = 0; r < t; r++)n = s.getUint16(i), i += 2, a.pps.push(new Uint8Array(e.subarray(i, i + n))), i += n; return a }, btrt: function (e) { var t = new DataView(e.buffer, e.byteOffset, e.byteLength); return { bufferSizeDB: t.getUint32(0), maxBitrate: t.getUint32(4), avgBitrate: t.getUint32(8) } }, esds: function (e) { return { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), esId: e[6] << 8 | e[7], streamPriority: 31 & e[8], decoderConfig: { objectProfileIndication: e[11], streamType: e[12] >>> 2 & 63, bufferSize: e[13] << 16 | e[14] << 8 | e[15], maxBitrate: e[16] << 24 | e[17] << 16 | e[18] << 8 | e[19], avgBitrate: e[20] << 24 | e[21] << 16 | e[22] << 8 | e[23], decoderConfigDescriptor: { tag: e[24], length: e[25], audioObjectType: e[26] >>> 3 & 31, samplingFrequencyIndex: (7 & e[26]) << 1 | e[27] >>> 7 & 1, channelConfiguration: e[27] >>> 3 & 15 } } } }, ftyp: function (e) { for (var t = new DataView(e.buffer, e.byteOffset, e.byteLength), n = { majorBrand: s(e.subarray(0, 4)), minorVersion: t.getUint32(4), compatibleBrands: [] }, i = 8; i < e.byteLength;)n.compatibleBrands.push(s(e.subarray(i, i + 4))), i += 4; return n }, dinf: function (e) { return { boxes: i(e) } }, dref: function (e) { return { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), dataReferences: i(e.subarray(8)) } }, hdlr: function (e) { var t = { version: new DataView(e.buffer, e.byteOffset, e.byteLength).getUint8(0), flags: new Uint8Array(e.subarray(1, 4)), handlerType: s(e.subarray(8, 12)), name: "" }, n = 8; for (n = 24; n < e.byteLength; n++) { if (0 === e[n]) { n++; break } t.name += String.fromCharCode(e[n]) } return t.name = decodeURIComponent(escape(t.name)), t }, mdat: function (e) { return { byteLength: e.byteLength, nals: l(e) } }, mdhd: function (e) { var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength), i = 4, r = { version: n.getUint8(0), flags: new Uint8Array(e.subarray(1, 4)), language: "" }; return 1 === r.version ? (i += 4, r.creationTime = a(n.getUint32(i)), i += 8, r.modificationTime = a(n.getUint32(i)), i += 4, r.timescale = n.getUint32(i), i += 8, r.duration = n.getUint32(i)) : (r.creationTime = a(n.getUint32(i)), i += 4, r.modificationTime = a(n.getUint32(i)), i += 4, r.timescale = n.getUint32(i), i += 4, r.duration = n.getUint32(i)), i += 4, t = n.getUint16(i), r.language += String.fromCharCode(96 + (t >> 10)), r.language += String.fromCharCode(96 + ((992 & t) >> 5)), r.language += String.fromCharCode(96 + (31 & t)), r }, mdia: function (e) { return { boxes: i(e) } }, mfhd: function (e) { return { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), sequenceNumber: e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7] } }, minf: function (e) { return { boxes: i(e) } }, mp4a: function (e) { var t = new DataView(e.buffer, e.byteOffset, e.byteLength), n = { dataReferenceIndex: t.getUint16(6), channelcount: t.getUint16(16), samplesize: t.getUint16(18), samplerate: t.getUint16(24) + t.getUint16(26) / 65536 }; return e.byteLength > 28 && (n.streamDescriptor = i(e.subarray(28))[0]), n }, moof: function (e) { return { boxes: i(e) } }, moov: function (e) { return { boxes: i(e) } }, mvex: function (e) { return { boxes: i(e) } }, mvhd: function (e) { var t = new DataView(e.buffer, e.byteOffset, e.byteLength), n = 4, i = { version: t.getUint8(0), flags: new Uint8Array(e.subarray(1, 4)) }; return 1 === i.version ? (n += 4, i.creationTime = a(t.getUint32(n)), n += 8, i.modificationTime = a(t.getUint32(n)), n += 4, i.timescale = t.getUint32(n), n += 8, i.duration = t.getUint32(n)) : (i.creationTime = a(t.getUint32(n)), n += 4, i.modificationTime = a(t.getUint32(n)), n += 4, i.timescale = t.getUint32(n), n += 4, i.duration = t.getUint32(n)), n += 4, i.rate = t.getUint16(n) + t.getUint16(n + 2) / 16, n += 4, i.volume = t.getUint8(n) + t.getUint8(n + 1) / 8, n += 2, n += 2, n += 8, i.matrix = new Uint32Array(e.subarray(n, n + 36)), n += 36, n += 24, i.nextTrackId = t.getUint32(n), i }, pdin: function (e) { var t = new DataView(e.buffer, e.byteOffset, e.byteLength); return { version: t.getUint8(0), flags: new Uint8Array(e.subarray(1, 4)), rate: t.getUint32(4), initialDelay: t.getUint32(8) } }, sdtp: function (e) { var t, n = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), samples: [] }; for (t = 4; t < e.byteLength; t++)n.samples.push({ dependsOn: (48 & e[t]) >> 4, isDependedOn: (12 & e[t]) >> 2, hasRedundancy: 3 & e[t] }); return n }, sidx: function (e) { var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength), i = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), references: [], referenceId: n.getUint32(4), timescale: n.getUint32(8), earliestPresentationTime: n.getUint32(12), firstOffset: n.getUint32(16) }, r = n.getUint16(22); for (t = 24; r; t += 12, r--)i.references.push({ referenceType: (128 & e[t]) >>> 7, referencedSize: 2147483647 & n.getUint32(t), subsegmentDuration: n.getUint32(t + 4), startsWithSap: !!(128 & e[t + 8]), sapType: (112 & e[t + 8]) >>> 4, sapDeltaTime: 268435455 & n.getUint32(t + 8) }); return i }, smhd: function (e) { return { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), balance: e[4] + e[5] / 256 } }, stbl: function (e) { return { boxes: i(e) } }, stco: function (e) { var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength), i = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), chunkOffsets: [] }, r = n.getUint32(4); for (t = 8; r; t += 4, r--)i.chunkOffsets.push(n.getUint32(t)); return i }, stsc: function (e) { var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength), i = n.getUint32(4), r = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), sampleToChunks: [] }; for (t = 8; i; t += 12, i--)r.sampleToChunks.push({ firstChunk: n.getUint32(t), samplesPerChunk: n.getUint32(t + 4), sampleDescriptionIndex: n.getUint32(t + 8) }); return r }, stsd: function (e) { return { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), sampleDescriptions: i(e.subarray(8)) } }, stsz: function (e) { var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength), i = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), sampleSize: n.getUint32(4), entries: [] }; for (t = 12; t < e.byteLength; t += 4)i.entries.push(n.getUint32(t)); return i }, stts: function (e) { var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength), i = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), timeToSamples: [] }, r = n.getUint32(4); for (t = 8; r; t += 8, r--)i.timeToSamples.push({ sampleCount: n.getUint32(t), sampleDelta: n.getUint32(t + 4) }); return i }, styp: function (e) { return u.ftyp(e) }, tfdt: function (e) { var t = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), baseMediaDecodeTime: e[4] << 24 | e[5] << 16 | e[6] << 8 | e[7] }; return 1 === t.version && (t.baseMediaDecodeTime *= Math.pow(2, 32), t.baseMediaDecodeTime += e[8] << 24 | e[9] << 16 | e[10] << 8 | e[11]), t }, tfhd: function (e) { var t, n = new DataView(e.buffer, e.byteOffset, e.byteLength), i = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), trackId: n.getUint32(4) }, r = 1 & i.flags[2], s = 2 & i.flags[2], a = 8 & i.flags[2], o = 16 & i.flags[2], l = 32 & i.flags[2], u = 65536 & i.flags[0], c = 131072 & i.flags[0]; return t = 8, r && (t += 4, i.baseDataOffset = n.getUint32(12), t += 4), s && (i.sampleDescriptionIndex = n.getUint32(t), t += 4), a && (i.defaultSampleDuration = n.getUint32(t), t += 4), o && (i.defaultSampleSize = n.getUint32(t), t += 4), l && (i.defaultSampleFlags = n.getUint32(t)), u && (i.durationIsEmpty = !0), !r && c && (i.baseDataOffsetIsMoof = !0), i }, tkhd: function (e) { var t = new DataView(e.buffer, e.byteOffset, e.byteLength), n = 4, i = { version: t.getUint8(0), flags: new Uint8Array(e.subarray(1, 4)) }; return 1 === i.version ? (n += 4, i.creationTime = a(t.getUint32(n)), n += 8, i.modificationTime = a(t.getUint32(n)), n += 4, i.trackId = t.getUint32(n), n += 4, n += 8, i.duration = t.getUint32(n)) : (i.creationTime = a(t.getUint32(n)), n += 4, i.modificationTime = a(t.getUint32(n)), n += 4, i.trackId = t.getUint32(n), n += 4, n += 4, i.duration = t.getUint32(n)), n += 4, n += 8, i.layer = t.getUint16(n), n += 2, i.alternateGroup = t.getUint16(n), n += 2, i.volume = t.getUint8(n) + t.getUint8(n + 1) / 8, n += 2, n += 2, i.matrix = new Uint32Array(e.subarray(n, n + 36)), n += 36, i.width = t.getUint16(n) + t.getUint16(n + 2) / 16, n += 4, i.height = t.getUint16(n) + t.getUint16(n + 2) / 16, i }, traf: function (e) { return { boxes: i(e) } }, trak: function (e) { return { boxes: i(e) } }, trex: function (e) { var t = new DataView(e.buffer, e.byteOffset, e.byteLength); return { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), trackId: t.getUint32(4), defaultSampleDescriptionIndex: t.getUint32(8), defaultSampleDuration: t.getUint32(12), defaultSampleSize: t.getUint32(16), sampleDependsOn: 3 & e[20], sampleIsDependedOn: (192 & e[21]) >> 6, sampleHasRedundancy: (48 & e[21]) >> 4, samplePaddingValue: (14 & e[21]) >> 1, sampleIsDifferenceSample: !!(1 & e[21]), sampleDegradationPriority: t.getUint16(22) } }, trun: function (e) { var t, n = { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), samples: [] }, i = new DataView(e.buffer, e.byteOffset, e.byteLength), r = 1 & n.flags[2], s = 4 & n.flags[2], a = 1 & n.flags[1], l = 2 & n.flags[1], u = 4 & n.flags[1], c = 8 & n.flags[1], h = i.getUint32(4), d = 8; for (r && (n.dataOffset = i.getInt32(d), d += 4), s && h && (t = { flags: o(e.subarray(d, d + 4)) }, d += 4, a && (t.duration = i.getUint32(d), d += 4), l && (t.size = i.getUint32(d), d += 4), c && (t.compositionTimeOffset = i.getUint32(d), d += 4), n.samples.push(t), h--); h--;)t = {}, a && (t.duration = i.getUint32(d), d += 4), l && (t.size = i.getUint32(d), d += 4), u && (t.flags = o(e.subarray(d, d + 4)), d += 4), c && (t.compositionTimeOffset = i.getUint32(d), d += 4), n.samples.push(t); return n }, "url ": function (e) { return { version: e[0], flags: new Uint8Array(e.subarray(1, 4)) } }, vmhd: function (e) { var t = new DataView(e.buffer, e.byteOffset, e.byteLength); return { version: e[0], flags: new Uint8Array(e.subarray(1, 4)), graphicsmode: t.getUint16(4), opcolor: new Uint16Array([t.getUint16(6), t.getUint16(8), t.getUint16(10)]) } } }; i = function (e) { for (var t, n, i, r, a, o = 0, l = [], c = new ArrayBuffer(e.length), h = new Uint8Array(c), d = 0; d < e.length; ++d)h[d] = e[d]; for (t = new DataView(c); o < e.byteLength;)n = t.getUint32(o), i = s(e.subarray(o + 4, o + 8)), r = n > 1 ? o + n : e.byteLength, (a = (u[i] || function (e) { return { data: e } })(e.subarray(o + 8, r))).size = n, a.type = i, l.push(a), o = r; return l }, r = function (e, t) { var n; return t = t || 0, n = new Array(2 * t + 1).join(" "), e.map(function (e, i) { return n + e.type + "\n" + Object.keys(e).filter(function (e) { return "type" !== e && "boxes" !== e }).map(function (t) { var i = n + "  " + t + ": ", r = e[t]; if (r instanceof Uint8Array || r instanceof Uint32Array) { var s = Array.prototype.slice.call(new Uint8Array(r.buffer, r.byteOffset, r.byteLength)).map(function (e) { return " " + ("00" + e.toString(16)).slice(-2) }).join("").match(/.{1,24}/g); return s ? 1 === s.length ? i + "<" + s.join("").slice(1) + ">" : i + "<\n" + s.map(function (e) { return n + "  " + e }).join("\n") + "\n" + n + "  >" : i + "<>" } return i + JSON.stringify(r, null, 2).split("\n").map(function (e, t) { return 0 === t ? e : n + "  " + e }).join("\n") }).join("\n") + (e.boxes ? "\n" + r(e.boxes, t + 1) : "") }).join("\n") }, e.exports = { inspect: i, textify: r, parseTfdt: u.tfdt, parseHdlr: u.hdlr, parseTfhd: u.tfhd, parseTrun: u.trun, parseSidx: u.sidx } }, qOD0: function (e, t, n) { "use strict"; var i = n("3G1x").discardEmulationPreventionBytes, r = n("Tmm6").CaptionStream, s = n("KAYj"), a = n("mvqA"), o = function (e, t) { for (var n = e, i = 0; i < t.length; i++) { var r = t[i]; if (n < r.size) return r; n -= r.size } return null }, l = function (e, t) { var n = s.findBox(e, ["moof", "traf"]), r = s.findBox(e, ["mdat"]), l = {}, u = []; return r.forEach(function (e, t) { var i = n[t]; u.push({ mdat: e, traf: i }) }), u.forEach(function (e) { var n, r = e.mdat, u = e.traf, c = s.findBox(u, ["tfhd"]), h = a.parseTfhd(c[0]), d = h.trackId, f = s.findBox(u, ["tfdt"]), p = f.length > 0 ? a.parseTfdt(f[0]).baseMediaDecodeTime : 0, m = s.findBox(u, ["trun"]); t === d && m.length > 0 && (n = function (e, t, n) { var r, s, a, l, u = new DataView(e.buffer, e.byteOffset, e.byteLength), c = []; for (s = 0; s + 4 < e.length; s += a)if (a = u.getUint32(s), s += 4, !(a <= 0)) switch (31 & e[s]) { case 6: var h = e.subarray(s + 1, s + 1 + a), d = o(s, t); r = { nalUnitType: "sei_rbsp", size: a, data: h, escapedRBSP: i(h), trackId: n }, d ? (r.pts = d.pts, r.dts = d.dts, l = d) : (r.pts = l.pts, r.dts = l.dts), c.push(r) }return c }(r, function (e, t, n) { var i = t, r = n.defaultSampleDuration || 0, s = n.defaultSampleSize || 0, o = n.trackId, l = []; return e.forEach(function (e) { var t = a.parseTrun(e).samples; t.forEach(function (e) { void 0 === e.duration && (e.duration = r), void 0 === e.size && (e.size = s), e.trackId = o, e.dts = i, void 0 === e.compositionTimeOffset && (e.compositionTimeOffset = 0), e.pts = i + e.compositionTimeOffset, i += e.duration }), l = l.concat(t) }), l }(m, p, h), d), l[d] || (l[d] = []), l[d] = l[d].concat(n)) }), l }; e.exports = function () { var e, t, n, i, s, a, o = !1; this.isInitialized = function () { return o }, this.init = function (t) { e = new r, o = !0, a = !!t && t.isPartial, e.on("data", function (e) { e.startTime = e.startPts / i, e.endTime = e.endPts / i, s.captions.push(e), s.captionStreams[e.stream] = !0 }) }, this.isNewInit = function (e, t) { return !(e && 0 === e.length || t && "object" == typeof t && 0 === Object.keys(t).length || n === e[0] && i === t[n]) }, this.parse = function (e, r, a) { var o; if (!this.isInitialized()) return null; if (!r || !a) return null; if (this.isNewInit(r, a)) n = r[0], i = a[n]; else if (null === n || !i) return t.push(e), null; for (; t.length > 0;) { var u = t.shift(); this.parse(u, r, a) } return null !== (o = function (e, t, n) { return null === t ? null : { seiNals: l(e, t)[t], timescale: n } }(e, n, i)) && o.seiNals ? (this.pushNals(o.seiNals), this.flushStream(), s) : null }, this.pushNals = function (t) { if (!this.isInitialized() || !t || 0 === t.length) return null; t.forEach(function (t) { e.push(t) }) }, this.flushStream = function () { if (!this.isInitialized()) return null; a ? e.partialFlush() : e.flush() }, this.clearParsedCaptions = function () { s.captions = [], s.captionStreams = {} }, this.resetCaptionStream = function () { if (!this.isInitialized()) return null; e.reset() }, this.clearAllCaptions = function () { this.clearParsedCaptions(), this.resetCaptionStream() }, this.reset = function () { t = [], n = null, i = null, s ? this.clearParsedCaptions() : s = { captions: [], captionStreams: {} }, this.resetCaptionStream() }, this.reset() } }, rnXk: function (e, t, n) { "use strict"; e.exports = { H264_STREAM_TYPE: 27, ADTS_STREAM_TYPE: 15, METADATA_STREAM_TYPE: 21 } }, sDzi: function (e, t) { var n = "auto", i = { "": 1, lr: 1, rl: 1 }, r = { start: 1, middle: 1, end: 1, left: 1, right: 1 }; function s(e) { return "string" == typeof e && (!!r[e.toLowerCase()] && e.toLowerCase()) } function a(e, t, r) { this.hasBeenReset = !1; var a = "", o = !1, l = e, u = t, c = r, h = null, d = "", f = !0, p = "auto", m = "start", g = 50, v = "middle", y = 50, _ = "middle"; Object.defineProperties(this, { id: { enumerable: !0, get: function () { return a }, set: function (e) { a = "" + e } }, pauseOnExit: { enumerable: !0, get: function () { return o }, set: function (e) { o = !!e } }, startTime: { enumerable: !0, get: function () { return l }, set: function (e) { if ("number" != typeof e) throw new TypeError("Start time must be set to a number."); l = e, this.hasBeenReset = !0 } }, endTime: { enumerable: !0, get: function () { return u }, set: function (e) { if ("number" != typeof e) throw new TypeError("End time must be set to a number."); u = e, this.hasBeenReset = !0 } }, text: { enumerable: !0, get: function () { return c }, set: function (e) { c = "" + e, this.hasBeenReset = !0 } }, region: { enumerable: !0, get: function () { return h }, set: function (e) { h = e, this.hasBeenReset = !0 } }, vertical: { enumerable: !0, get: function () { return d }, set: function (e) { var t = function (e) { return "string" == typeof e && !!i[e.toLowerCase()] && e.toLowerCase() }(e); if (!1 === t) throw new SyntaxError("An invalid or illegal string was specified."); d = t, this.hasBeenReset = !0 } }, snapToLines: { enumerable: !0, get: function () { return f }, set: function (e) { f = !!e, this.hasBeenReset = !0 } }, line: { enumerable: !0, get: function () { return p }, set: function (e) { if ("number" != typeof e && e !== n) throw new SyntaxError("An invalid number or illegal string was specified."); p = e, this.hasBeenReset = !0 } }, lineAlign: { enumerable: !0, get: function () { return m }, set: function (e) { var t = s(e); if (!t) throw new SyntaxError("An invalid or illegal string was specified."); m = t, this.hasBeenReset = !0 } }, position: { enumerable: !0, get: function () { return g }, set: function (e) { if (e < 0 || e > 100) throw new Error("Position must be between 0 and 100."); g = e, this.hasBeenReset = !0 } }, positionAlign: { enumerable: !0, get: function () { return v }, set: function (e) { var t = s(e); if (!t) throw new SyntaxError("An invalid or illegal string was specified."); v = t, this.hasBeenReset = !0 } }, size: { enumerable: !0, get: function () { return y }, set: function (e) { if (e < 0 || e > 100) throw new Error("Size must be between 0 and 100."); y = e, this.hasBeenReset = !0 } }, align: { enumerable: !0, get: function () { return _ }, set: function (e) { var t = s(e); if (!t) throw new SyntaxError("An invalid or illegal string was specified."); _ = t, this.hasBeenReset = !0 } } }), this.displayState = void 0 } a.prototype.getCueAsHTML = function () { return WebVTT.convertCueToDOMTree(window, this.text) }, e.exports = a }, ttRX: function (e, t, n) { "use strict"; var i = n("F/us"), r = n("fw19"); e.exports = function (e) { var t = e.getComponent("MenuItem"); return e.extend(t, { constructor: function (e, n) { var r = n.source; if (!i.isObject(r)) throw new Error('was not provided a "source" object, but rather: ' + typeof r); n = i.extend({ selectable: !0, label: r.label }, n), t.call(this, e, n), this.source = r }, handleClick: function (e) { t.prototype.handleClick.call(this, e), this.player().trigger(r.QUALITY_REQUESTED, this.source) } }) } }, vgmO: function (e, t, n) { (function (t) { var n; n = "undefined" != typeof window ? window : void 0 !== t ? t : "undefined" != typeof self ? self : {}, e.exports = n }).call(this, n("yLpj")) }, yLpj: function (e, t) { var n; n = function () { return this }(); try { n = n || new Function("return this")() } catch (e) { "object" == typeof window && (n = window) } e.exports = n }
}]);